2025-08-29 09:08:49.606 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/index.html - null null
2025-08-29 09:08:49.769 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 168.4386ms
2025-08-29 09:08:50.057 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui.css - null null
2025-08-29 09:08:50.111 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-08-29 09:08:50.113 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui.css - 200 152034 text/css 56.5389ms
2025-08-29 09:08:50.153 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - null null
2025-08-29 09:08:50.155 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui-bundle.js - null null
2025-08-29 09:08:50.163 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null
2025-08-29 09:08:50.167 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_vs/browserLink - null null
2025-08-29 09:08:50.206 +05:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-08-29 09:08:50.206 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 43.1368ms
2025-08-29 09:08:50.210 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 56.3585ms
2025-08-29 09:08:50.232 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 64.784ms
2025-08-29 09:08:58.124 +05:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-08-29 09:08:58.126 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 7970.9264ms
2025-08-29 09:09:01.796 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/v1/swagger.json - null null
2025-08-29 09:09:01.838 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/favicon-32x32.png - null null
2025-08-29 09:09:01.841 +05:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-08-29 09:09:01.842 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/favicon-32x32.png - 200 628 image/png 3.7689ms
2025-08-29 09:09:01.894 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.4288ms
2025-08-29 09:12:08.841 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - null null
2025-08-29 09:12:08.850 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - 404 0 null 10.8899ms
2025-08-29 09:12:08.852 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/robots.txt, Response status code: 404
2025-08-29 09:12:08.985 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - null null
2025-08-29 09:12:08.990 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - 404 0 null 5.3353ms
2025-08-29 09:12:08.993 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/robots.txt, Response status code: 404
2025-08-29 09:12:09.810 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - null null
2025-08-29 09:12:09.812 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - 404 0 null 2.8623ms
2025-08-29 09:12:09.815 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/, Response status code: 404
2025-08-29 09:12:09.900 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - null null
2025-08-29 09:12:09.902 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - 404 0 null 2.8206ms
2025-08-29 09:12:09.905 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/, Response status code: 404
2025-08-29 09:12:22.246 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - null null
2025-08-29 09:12:22.249 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - 404 0 null 2.6608ms
2025-08-29 09:12:22.252 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/, Response status code: 404
2025-08-29 09:12:29.969 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - null null
2025-08-29 09:12:29.974 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - 404 0 null 5.9ms
2025-08-29 09:12:29.977 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/, Response status code: 404
2025-08-29 09:12:30.645 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/trynow - null null
2025-08-29 09:12:30.649 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:12:30.670 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:12:30.705 +05:30 [WRN] Tracking token rejected. reason=format
2025-08-29 09:12:30.707 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 09:12:30.708 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 36.5303ms
2025-08-29 09:12:30.709 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:12:30.710 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/trynow - 400 null text/plain; charset=utf-8 65.2345ms
2025-08-29 09:25:12.742 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 09:25:12.756 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:12.759 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 23.12ms
2025-08-29 09:25:12.773 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 09:25:12.778 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:12.796 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 03:00:35 PM', Current time (UTC): '29-08-2025 03:55:12 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-29 09:25:12.806 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 03:00:35 PM', Current time (UTC): '29-08-2025 03:55:12 AM'.
2025-08-29 09:25:12.808 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:25:12.809 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 09:25:12.838 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 09:25:13.034 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 09:25:13.087 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 09:25:13.243 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 09:25:13.248 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 09:25:13.252 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 09:25:13.252 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 09:25:13.254 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:13.258 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 445.9737ms
2025-08-29 09:25:13.259 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:25:13.445 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.Microsoft.AspNetCore.Http.Features.IHttpResponseFeature.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 09:25:13.457 +05:30 [ERR] Response has already started, unable to write error response for path: /api/auth/login
2025-08-29 09:25:13.458 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json 684.9686ms
2025-08-29 09:25:15.949 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 09:25:15.953 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:15.955 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:25:15.958 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 09:25:15.964 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 09:25:15.973 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 09:25:15.985 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 09:25:15.995 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 09:25:15.999 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 09:25:16.000 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 09:25:16.002 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 09:25:16.004 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:16.007 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 44.6672ms
2025-08-29 09:25:16.010 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:25:16.012 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 63.1373ms
2025-08-29 09:25:16.016 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:25:16.020 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:16.021 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.9422ms
2025-08-29 09:25:16.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:25:16.029 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:16.034 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:25:16.036 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:25:16.057 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 09:25:16.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:25:16.108 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:16.127 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 88.1927ms
2025-08-29 09:25:16.129 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:25:16.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 104.2975ms
2025-08-29 09:25:16.163 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:25:16.168 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:16.170 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:25:16.172 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:25:16.180 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:25:16.184 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:16.186 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6345ms
2025-08-29 09:25:16.189 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:25:16.191 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.3329ms
2025-08-29 09:25:16.272 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:25:16.280 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:16.282 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:25:16.286 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:25:16.306 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:25:16.312 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:16.314 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 25.2525ms
2025-08-29 09:25:16.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:25:16.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 46.3289ms
2025-08-29 09:25:20.128 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-29 09:25:20.226 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:20.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 99.6883ms
2025-08-29 09:25:20.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-29 09:25:20.244 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:20.248 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 09:25:20.258 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 09:25:20.308 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 09:25:20.313 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:20.325 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 62.4067ms
2025-08-29 09:25:20.327 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 09:25:20.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 93.3882ms
2025-08-29 09:25:27.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-29 09:25:27.695 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:27.696 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 6.2248ms
2025-08-29 09:25:27.700 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-29 09:25:27.704 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:27.705 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 09:25:27.711 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 09:25:27.729 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:25:27.745 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-29 09:25:27.773 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 09:25:27.775 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 09:25:29.052 +05:30 [INF] Received HTTP response headers after 1275.4811ms - 200
2025-08-29 09:25:29.053 +05:30 [INF] End processing HTTP request after 1280.1888ms - 200
2025-08-29 09:25:29.365 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='busiorbit_live_baseurl', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.450 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='busiorbit_campaign', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.455 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='flash_sale_earbuds_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='new_feature_announcement', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.463 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='automation_builder_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.467 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='testing_1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.472 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='test_msg', @__it_Language_3='en_GB'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.475 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='tempalte_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 09:25:29.607 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p2='64a65d26-c9e7-4269-88b5-2ea73e5d8fb1', @p0='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p1='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p6='7b2fe537-fb16-41f1-a639-a48843818da9', @p3='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p4='{"name":"tempalte_v1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/389521422_865429908351181_4208520018935703846_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=nTnZB1hOOjsQ7kNvwE0c96O&_nc_oc=AdlQTsxzRK6ESbQoVK_K7xa4tZJ4ufPf5iggSItRD3upjM9SZfgKeuKSZltdz8cnsQU&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=lr0BZax1wNs_afaBQQgCaw&oh=01_Q5Aa2QH0pPM4IPvpweJAfIwIhFfImfYAKYqxfcnxYmH3gFAbnw&oe=68D8ADBD"]}},{"type":"BODY","text":"Dear {{1}},\r\nThe Sale is live Now!!!!!!","example":{"body_text":[["name"]]}}],"language":"en","status":"APPROVED","category":"MARKETING","id":"865429905017848"}' (Nullable = false), @p5='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p9='9d4aa7bd-998f-4966-896a-92bac7a3b961', @p7='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p8='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p12='b1ed66bd-299a-4034-896d-08ba244495ef', @p10='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p11='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p15='bd3c3497-068a-4702-b41a-9283aa6e9236', @p13='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p14='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p19='ce50ddd1-63fb-4f66-a611-676948454ab5', @p16='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p17='{"name":"testing_1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/434020495_817759347145442_7459011205631203997_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=6JdfDt0QQpkQ7kNvwElbY27&_nc_oc=AdkrVqwDa94NSVMpdY0EkeQI2YCKJj3PKEtcTmiu6OYuHb7LTAtNRt3hAhJCIL91Dsw&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=lr0BZax1wNs_afaBQQgCaw&oh=01_Q5Aa2QHoXPwJfOlrF0qWPIxem-9qO9mqkYrsGEz5LAsFcu5u2w&oe=68D89A59"]}},{"type":"BODY","text":"Dear User,\r\nTesting"}],"language":"en","status":"APPROVED","category":"MARKETING","id":"817759340478776"}' (Nullable = false), @p18='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p22='e64e08e3-8e5a-41ba-8c51-f324a84bb0a9', @p20='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p21='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p23='87b2f907-2d1e-463b-9b3a-3e33584b962f', @p24='Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀

Claim your free 14-day trial (no credit card required). ✨💳

Limited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉' (Nullable = false), @p25='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p26='[{"Type":"URL","Text":"Try Now","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Subscribe","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p27='MARKETING', @p28='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p29='800294005756696', @p30='False', @p31='True', @p32='en_US' (Nullable = false), @p33='2025-08-29T03:55:27.7323475Z' (DbType = DateTime), @p34='busiorbit_live_baseurl' (Nullable = false), @p35='0', @p36='pinnacle' (Nullable = false), @p37='{"name":"busiorbit_live_baseurl","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"BusiOrbit is Live!"},{"type":"BODY","text":"Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀\n\nClaim your free 14-day trial (no credit card required). ✨💳\n\nLimited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉"},{"type":"FOOTER","text":"Powered by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Try Now","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/trynow"]},{"type":"URL","text":"Subscribe","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/trynow"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","id":"800294005756696"}' (Nullable = false), @p38='APPROVED' (Nullable = false), @p39='2025-08-29T03:55:27.7323475Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p3, "RawJson" = @p4, "UpdatedAt" = @p5
WHERE "Id" = @p6;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p13, "UpdatedAt" = @p14
WHERE "Id" = @p15;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p16, "RawJson" = @p17, "UpdatedAt" = @p18
WHERE "Id" = @p19;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p20, "UpdatedAt" = @p21
WHERE "Id" = @p22;
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39);
2025-08-29 09:25:29.629 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType152`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:25:29.639 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1925.7184ms
2025-08-29 09:25:29.640 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 09:25:29.641 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 1940.6171ms
2025-08-29 09:25:29.656 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-29 09:25:29.659 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:29.660 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 4.4506ms
2025-08-29 09:25:29.664 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-29 09:25:29.667 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:29.668 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 09:25:29.669 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 09:25:29.675 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 09:25:29.678 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:29.680 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 8.7783ms
2025-08-29 09:25:29.681 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 09:25:29.683 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 19.1484ms
2025-08-29 09:25:35.646 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - null null
2025-08-29 09:25:35.692 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:35.699 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - 204 null null 52.9845ms
2025-08-29 09:25:35.735 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - null null
2025-08-29 09:25:35.741 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:25:35.751 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 09:25:35.764 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 09:25:35.821 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='busiorbit_live_baseurl'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-29 09:25:35.829 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType154`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:25:35.842 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 72.9521ms
2025-08-29 09:25:35.849 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 09:25:35.852 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - 200 null application/json; charset=utf-8 116.8296ms
2025-08-29 09:26:33.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-29 09:26:33.476 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:33.478 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 6.1896ms
2025-08-29 09:26:33.508 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 561
2025-08-29 09:26:33.518 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:33.520 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 09:26:33.528 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:26:41.841 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 09:26:41.847 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:26:41.849 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:26:42.733 +05:30 [INF] Received HTTP response headers after 882.112ms - 200
2025-08-29 09:26:42.734 +05:30 [INF] End processing HTTP request after 887.2368ms - 200
2025-08-29 09:26:42.955 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-29T03:56:42.7655088Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀

Claim your free 14-day trial (no credit card required). ✨💳

Limited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉', @p14='busiorbit_live_baseurl' (Nullable = false), @p15='busiorbit_live' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='busiorbit_live_baseurl', @p20='[]', @p21='2025-08-29T03:56:42.7655744Z' (DbType = DateTime), @p22='505f0f0b-5527-4b8d-bfb8-911389f53cd8', @p23='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p24='True', @p25='1', @p26='Try Now' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.mindsmiratus.com/graphic-designing-service' (Nullable = false), @p29='bb3b9686-7aeb-43af-8b97-f3cc969b37e9', @p30='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p31='True', @p32='3', @p33='Call us' (Nullable = false), @p34='PHONE_NUMBER' (Nullable = false), @p35='+917082156227' (Nullable = false), @p36='d6c1d231-fafb-4cbe-98dc-5cc41653dfb2', @p37='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p38='True', @p39='2', @p40='Subscribe' (Nullable = false), @p41='URL' (Nullable = false), @p42='https://www.youtube.com/shorts/iiGVWc1Axg8' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-08-29 09:26:42.963 +05:30 [INF] ✅ Campaign 'busiorbit_live' created with 0 recipients, 0 user buttons, 3 template buttons and 0 template parameters
2025-08-29 09:26:42.970 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:26:42.977 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 9443.255ms
2025-08-29 09:26:42.979 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 09:26:42.981 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 9473.2811ms
2025-08-29 09:26:43.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 09:26:43.079 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 09:26:43.078 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:26:43.079 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 09:26:43.112 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.116 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.127 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.131 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.134 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 55.455ms
2025-08-29 09:26:43.136 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 204 null null 57.5001ms
2025-08-29 09:26:43.133 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 59.4289ms
2025-08-29 09:26:43.141 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 62.3245ms
2025-08-29 09:26:43.163 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 09:26:43.170 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 09:26:43.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:26:43.185 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.194 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.196 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.198 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:26:43.200 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:26:43.201 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 09:26:43.208 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 09:26:43.214 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 09:26:43.215 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:26:43.232 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-29 09:26:43.239 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:26:43.245 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:26:43.260 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 45.6169ms
2025-08-29 09:26:43.262 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:26:43.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 09:26:43.264 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 101.288ms
2025-08-29 09:26:43.268 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:43.275 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:26:43.276 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 09:26:43.277 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 09:26:43.287 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:26:43.295 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:26:43.300 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.8889ms
2025-08-29 09:26:43.302 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:26:43.303 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 41.3917ms
2025-08-29 09:26:43.327 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 09:26:43.382 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:26:43.392 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 174.4222ms
2025-08-29 09:26:43.394 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:26:43.395 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 224.9261ms
2025-08-29 09:26:43.466 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-29 09:26:43.478 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-29 09:26:43.483 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 263.2946ms
2025-08-29 09:26:43.484 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 09:26:43.486 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 200 null application/json; charset=utf-8 310.1831ms
2025-08-29 09:26:46.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - null null
2025-08-29 09:26:46.338 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:46.340 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - 204 null null 7.1217ms
2025-08-29 09:26:46.345 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - application/json 55
2025-08-29 09:26:46.350 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:46.352 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 09:26:46.359 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:26:46.464 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-29 09:26:46.521 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='ce556528-e9f6-457a-aa65-1522cbae7693', @p1=NULL, @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p4=NULL, @p5=NULL, @p6='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-29T03:56:46.4731407Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-29T03:56:46.4732330Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-29 09:26:46.527 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:26:46.531 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 169.0289ms
2025-08-29 09:26:46.533 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 09:26:46.534 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - 200 null application/json; charset=utf-8 189.0283ms
2025-08-29 09:26:49.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:26:49.533 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:49.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.718ms
2025-08-29 09:26:49.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:26:49.560 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:49.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:26:49.567 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:26:49.594 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:26:49.599 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:26:49.605 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 33.5923ms
2025-08-29 09:26:49.606 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:26:49.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 52.672ms
2025-08-29 09:26:54.623 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - null null
2025-08-29 09:26:54.627 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:54.629 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - 204 null null 5.4177ms
2025-08-29 09:26:54.634 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - null null
2025-08-29 09:26:54.640 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:54.642 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:26:54.650 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:26:54.698 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-29 09:26:54.718 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:26:54.722 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:26:54.728 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 74.3828ms
2025-08-29 09:26:54.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:26:54.733 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - 200 null application/json; charset=utf-8 98.2578ms
2025-08-29 09:26:55.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:26:55.090 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:55.091 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - 204 null null 4.5163ms
2025-08-29 09:26:55.096 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:26:55.100 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:55.101 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:26:55.107 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:26:55.123 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:26:55.168 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:26:55.199 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:26:55.204 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 94.2203ms
2025-08-29 09:26:55.207 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:26:55.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 113.1466ms
2025-08-29 09:26:58.620 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:26:58.632 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:58.634 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 13.747ms
2025-08-29 09:26:58.771 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:26:58.795 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:26:58.798 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:26:58.800 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:26:58.908 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:26:58.920 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:26:58.923 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 37.7313ms
2025-08-29 09:26:58.936 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:26:58.938 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 167.4702ms
2025-08-29 09:27:02.442 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:27:02.491 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:27:02.497 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 204 null null 54.7479ms
2025-08-29 09:27:02.520 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null 0
2025-08-29 09:27:02.531 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:27:02.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:27:02.548 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:27:05.106 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-29 09:27:05.123 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 09:27:05.146 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:27:05.152 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 09:27:05.157 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:27:05.161 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:27:05.252 +05:30 [INF] Received HTTP response headers after 89.5477ms - 200
2025-08-29 09:27:05.255 +05:30 [INF] End processing HTTP request after 97.9784ms - 200
2025-08-29 09:27:05.314 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:27:05.364 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-29 09:27:05.366 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:27:05.368 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:27:06.948 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0Mzk4MjUsImV4cCI6MTc1OTAzMTgyNX0.t8bQpivEAeYqWiq35iUbwo5dRVfzJBSZBq_TbY-qDis - null null
2025-08-29 09:27:06.953 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:27:06.954 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:27:06.957 +05:30 [WRN] Tracking token rejected. reason=format
2025-08-29 09:27:06.958 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 09:27:06.960 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 3.6023ms
2025-08-29 09:27:06.963 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:27:06.964 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0Mzk4MjUsImV4cCI6MTc1OTAzMTgyNX0.t8bQpivEAeYqWiq35iUbwo5dRVfzJBSZBq_TbY-qDis - 400 null text/plain; charset=utf-8 17.9726ms
2025-08-29 09:27:08.236 +05:30 [INF] Received HTTP response headers after 2865.6679ms - 200
2025-08-29 09:27:08.240 +05:30 [INF] End processing HTTP request after 2873.3535ms - 200
2025-08-29 09:27:08.471 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='bceaa387-9c6d-4852-9665-743232ff5fe5', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-29T03:57:08.2467531Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='busiorbit_live_baseurl' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUZGQzQxNUZGMDVGMEUyQjc4AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUZGQzQxNUZGMDVGMEUyQjc4AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T03:57:08.2468371Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='04d3ef37-7a8d-439b-9ab8-a3ee17c13f17', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-29T03:57:08.3120509Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀

Claim your free 14-day trial (no credit card required). ✨💳

Limited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUZGQzQxNUZGMDVGMEUyQjc4AA==', @p42='bceaa387-9c6d-4852-9665-743232ff5fe5' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='ce556528-e9f6-457a-aa65-1522cbae7693', @p45='0', @p46='Sent', @p47='2025-08-29T03:57:08.3121271Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='busiorbit_live_baseurl', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 09:27:13.345 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:27:13.352 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 10800.2482ms
2025-08-29 09:27:13.429 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:27:13.468 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 200 null application/json; charset=utf-8 10947.1948ms
2025-08-29 09:27:22.950 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0Mzk4MjUsImV4cCI6MTc1OTAzMTgyNX0.t8bQpivEAeYqWiq35iUbwo5dRVfzJBSZBq_TbY-qDis - null null
2025-08-29 09:27:22.984 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:27:22.992 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:27:23.010 +05:30 [WRN] Tracking token rejected. reason=format
2025-08-29 09:27:23.022 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 09:27:23.029 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 26.0658ms
2025-08-29 09:27:23.032 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:27:23.036 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0Mzk4MjUsImV4cCI6MTc1OTAzMTgyNX0.t8bQpivEAeYqWiq35iUbwo5dRVfzJBSZBq_TbY-qDis - 400 null text/plain; charset=utf-8 85.7692ms
2025-08-29 09:27:29.146 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9paUdWV2MxQXhnOCIsImlhdCI6MTc1NjQzOTgyNSwiZXhwIjoxNzU5MDMxODI1fQ.nPvZc-jm0cPFinyFS2MZAg0S0lrkxifRMxZ_TfKgnf8 - null null
2025-08-29 09:27:29.168 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:27:29.170 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:27:29.180 +05:30 [WRN] Tracking token rejected. reason=format
2025-08-29 09:27:29.182 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 09:27:29.200 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 22.2382ms
2025-08-29 09:27:29.245 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:27:29.253 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9paUdWV2MxQXhnOCIsImlhdCI6MTc1NjQzOTgyNSwiZXhwIjoxNzU5MDMxODI1fQ.nPvZc-jm0cPFinyFS2MZAg0S0lrkxifRMxZ_TfKgnf8 - 400 null text/plain; charset=utf-8 106.9124ms
2025-08-29 09:27:56.525 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 09:27:56.535 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:27:56.537 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 12.7538ms
2025-08-29 09:27:56.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 09:27:56.555 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:27:56.558 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 09:27:56.567 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 09:27:56.588 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:27:56.594 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-29 09:27:56.605 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 32.9113ms
2025-08-29 09:27:56.614 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 09:27:56.619 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 73.9515ms
2025-08-29 09:28:20.224 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 09:28:20.229 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:20.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.1439ms
2025-08-29 09:28:20.237 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 09:28:20.241 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:20.243 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:28:20.244 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 09:28:20.249 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 09:28:20.254 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 09:28:20.265 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 09:28:20.276 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 09:28:20.282 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 09:28:20.286 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 09:28:20.288 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 09:28:20.290 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:28:20.292 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 44.3249ms
2025-08-29 09:28:20.294 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:28:20.298 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 60.9614ms
2025-08-29 09:28:20.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:28:20.308 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:20.311 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.6604ms
2025-08-29 09:28:20.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:28:20.335 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:20.337 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:28:20.339 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:28:20.345 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:28:20.350 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:28:20.353 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4937ms
2025-08-29 09:28:20.354 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:28:20.356 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.4938ms
2025-08-29 09:28:20.379 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:28:20.383 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:20.385 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:28:20.387 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:28:20.394 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:28:20.398 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:28:20.404 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.5099ms
2025-08-29 09:28:20.407 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:28:20.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.8031ms
2025-08-29 09:28:20.500 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:28:20.507 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:20.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:28:20.515 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:28:20.522 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:28:20.528 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:28:20.531 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6688ms
2025-08-29 09:28:20.534 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:28:20.536 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.5714ms
2025-08-29 09:28:23.394 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 09:28:23.402 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:23.403 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 9.0516ms
2025-08-29 09:28:23.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 09:28:23.411 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:23.413 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 09:28:23.415 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 09:28:23.421 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:28:23.427 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-29 09:28:23.430 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 12.4779ms
2025-08-29 09:28:23.432 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 09:28:23.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 25.741ms
2025-08-29 09:28:26.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-29 09:28:26.835 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:26.836 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 2.9774ms
2025-08-29 09:28:26.839 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 554
2025-08-29 09:28:26.841 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:26.842 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-29 09:28:26.846 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 09:28:26.856 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-29 09:28:26.863 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-29 09:28:26.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPV8HUkmHQs48Gu9ZAbPp9ocOZC7zNXUQpuvEIrlrtvouSx7U7JAxETqo0QwXY5ZBvI1CXxh1ZCtd9z0ekorZCZAqO5qZAHGhdOTcGkJGLjOJr0E1cErFqU1zQVv0eRoolUZBZBMlWZCs5zAWVLkQwTA8ZCFjQZAHt7Fsm7h3AAgUMdOcVP4hjDpYyRoB1OuFeooMDy60IrxQRnLEQSmd3qNdRiSZAdooeyX0dhBZALng9axhui0MPTaRLHkXoZD' (Nullable = false), @p1='2025-08-29T03:58:26.8665230Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-29 09:28:26.871 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:28:26.872 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 25.229ms
2025-08-29 09:28:26.874 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-29 09:28:26.875 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 36.0535ms
2025-08-29 09:28:27.602 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-29 09:28:27.603 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:27.604 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 2.5246ms
2025-08-29 09:28:27.607 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 386
2025-08-29 09:28:27.609 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:28:27.610 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-29 09:28:27.613 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 09:28:27.619 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-29 09:28:27.620 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-29 09:28:28.738 +05:30 [INF] Received HTTP response headers after 1116.9172ms - 200
2025-08-29 09:28:28.741 +05:30 [INF] End processing HTTP request after 1122.1362ms - 200
2025-08-29 09:28:28.751 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:28:28.752 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1136.9925ms
2025-08-29 09:28:28.753 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-29 09:28:28.754 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1147.3875ms
2025-08-29 09:28:38.184 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0Mzk4MjUsImV4cCI6MTc1OTAzMTgyNX0.t8bQpivEAeYqWiq35iUbwo5dRVfzJBSZBq_TbY-qDis - null null
2025-08-29 09:28:38.192 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:28:38.193 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:28:38.196 +05:30 [WRN] Tracking token rejected. reason=format
2025-08-29 09:28:38.198 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 09:28:38.200 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 4.0142ms
2025-08-29 09:28:38.202 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:28:38.203 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0Mzk4MjUsImV4cCI6MTc1OTAzMTgyNX0.t8bQpivEAeYqWiq35iUbwo5dRVfzJBSZBq_TbY-qDis - 400 null text/plain; charset=utf-8 19.9659ms
2025-08-29 09:28:43.870 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9paUdWV2MxQXhnOCIsImlhdCI6MTc1NjQzOTgyNSwiZXhwIjoxNzU5MDMxODI1fQ.nPvZc-jm0cPFinyFS2MZAg0S0lrkxifRMxZ_TfKgnf8 - null null
2025-08-29 09:28:43.875 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:28:43.877 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:28:43.879 +05:30 [WRN] Tracking token rejected. reason=format
2025-08-29 09:28:43.880 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 09:28:43.881 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 2.6018ms
2025-08-29 09:28:43.883 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:28:43.884 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/https:%2F%2Fapp.example.com%2Fr%2FeyJjaWQiOiIwNGQzZWYzNy03YThkLTQzOWItOWFiOC1hM2VlMTdjMTNmMTciLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9paUdWV2MxQXhnOCIsImlhdCI6MTc1NjQzOTgyNSwiZXhwIjoxNzU5MDMxODI1fQ.nPvZc-jm0cPFinyFS2MZAg0S0lrkxifRMxZ_TfKgnf8 - 400 null text/plain; charset=utf-8 13.9434ms
2025-08-29 09:29:06.573 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 09:29:06.575 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:06.576 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.3562ms
2025-08-29 09:29:06.584 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 09:29:06.587 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:06.588 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:29:06.589 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 09:29:06.591 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 09:29:06.595 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 09:29:06.600 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 09:29:06.605 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 09:29:06.608 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 09:29:06.609 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 09:29:06.610 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 09:29:06.611 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:29:06.613 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 22.5899ms
2025-08-29 09:29:06.614 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:29:06.615 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 31.4614ms
2025-08-29 09:29:06.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:29:06.621 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:06.622 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4775ms
2025-08-29 09:29:06.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:29:06.631 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:06.632 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:29:06.634 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:29:06.639 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:29:06.644 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:29:06.646 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0221ms
2025-08-29 09:29:06.647 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:29:06.649 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9371ms
2025-08-29 09:29:06.664 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:29:06.667 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:06.668 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:29:06.669 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:29:06.676 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:29:06.687 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:29:06.690 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.1823ms
2025-08-29 09:29:06.692 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:29:06.693 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.8291ms
2025-08-29 09:29:06.769 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:29:06.772 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:06.775 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:29:06.777 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:29:06.782 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:29:06.787 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:29:06.789 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6346ms
2025-08-29 09:29:06.791 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:29:06.793 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.1465ms
2025-08-29 09:29:10.038 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:29:10.041 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:10.042 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.8599ms
2025-08-29 09:29:10.046 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:29:10.049 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:10.051 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:29:10.052 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:29:10.058 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:29:10.062 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:29:10.064 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.9093ms
2025-08-29 09:29:10.066 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:29:10.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 21.4457ms
2025-08-29 09:29:11.451 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-29 09:29:11.454 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:11.454 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 3.0482ms
2025-08-29 09:29:11.457 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-29 09:29:11.459 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:29:11.460 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:29:11.461 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:29:14.118 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 09:29:14.123 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:29:14.127 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 09:29:14.130 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 09:29:14.132 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 09:29:14.899 +05:30 [INF] Received HTTP response headers after 765.9011ms - 200
2025-08-29 09:29:14.900 +05:30 [INF] End processing HTTP request after 769.8381ms - 200
2025-08-29 09:29:16.326 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:29:16.332 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 09:29:16.333 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 09:29:17.487 +05:30 [INF] Received HTTP response headers after 1152.8474ms - 200
2025-08-29 09:29:17.488 +05:30 [INF] End processing HTTP request after 1156.2328ms - 200
2025-08-29 09:29:17.506 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='e96b0393-90fa-4cea-ab60-f8813c46c683', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='80efee8d-0421-467a-86ac-1d5b2259bf1a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-29T03:59:17.5032048Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='call_log' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T03:59:17.5032049Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='c8fe4bc8-e681-460d-a641-32849d644d8d', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-29T03:59:17.5034914Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is the checking for call log event.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==', @p42='e96b0393-90fa-4cea-ab60-f8813c46c683' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='de87fab2-1941-44ce-9897-418353d10d95', @p45='0', @p46='Sent', @p47='2025-08-29T03:59:17.5034916Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='call_log', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 09:29:19.321 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:29:19.322 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 7859.5716ms
2025-08-29 09:29:19.323 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:29:19.324 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 200 null application/json; charset=utf-8 7867.2882ms
2025-08-29 09:29:27.140 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 09:29:27.142 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 09:29:27.145 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 09:29:27.154 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"sent","timestamp":"1756439965","recipient_id":"918974005240","conversation":{"id":"38e5e66fe8da51f26dfc04be6b055aa8","expiration_timestamp":"1756439965","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 09:29:27.157 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 09:29:27.158 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:29:27.160 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.4126ms
2025-08-29 09:29:27.161 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 09:29:27.162 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.5348ms
2025-08-29 09:29:27.164 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"sent","timestamp":"1756439965","recipient_id":"918974005240","conversation":{"id":"38e5e66fe8da51f26dfc04be6b055aa8","expiration_timestamp":"1756439965","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 09:29:27.166 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 09:29:27.167 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"sent","timestamp":"1756439965","recipient_id":"918974005240","conversation":{"id":"38e5e66fe8da51f26dfc04be6b055aa8","expiration_timestamp":"1756439965","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 09:29:27.177 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 09:29:27.184 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 09:29:27.186 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA== → sent
2025-08-29 09:29:27.209 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-29 09:29:27.212 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 09:29:27.213 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 09:29:27.215 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"delivered","timestamp":"1756439965","recipient_id":"918974005240","conversation":{"id":"38e5e66fe8da51f26dfc04be6b055aa8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 09:29:27.217 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 09:29:27.217 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:29:27.218 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"delivered","timestamp":"1756439965","recipient_id":"918974005240","conversation":{"id":"38e5e66fe8da51f26dfc04be6b055aa8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 09:29:27.219 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8126ms
2025-08-29 09:29:27.220 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 09:29:27.221 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 09:29:27.221 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"delivered","timestamp":"1756439965","recipient_id":"918974005240","conversation":{"id":"38e5e66fe8da51f26dfc04be6b055aa8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 09:29:27.222 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.1211ms
2025-08-29 09:29:27.225 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 09:29:27.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 09:29:27.233 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='c8fe4bc8-e681-460d-a641-32849d644d8d', @p0='2025-08-29T03:59:25.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-29 09:29:27.235 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA== → delivered
2025-08-29 09:29:49.474 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-29 09:29:49.480 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 09:29:49.481 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 09:29:49.483 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"read","timestamp":"1756439988","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 09:29:49.484 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 09:29:49.485 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:29:49.486 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.0184ms
2025-08-29 09:29:49.488 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 09:29:49.489 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.0282ms
2025-08-29 09:29:49.490 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"read","timestamp":"1756439988","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 09:29:49.492 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 09:29:49.493 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA==","status":"read","timestamp":"1756439988","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 09:29:49.495 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 09:29:49.498 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 09:29:49.502 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='c8fe4bc8-e681-460d-a641-32849d644d8d', @p0='2025-08-29T03:59:48.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-29 09:29:49.505 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjM5MzdGRkJCQzE4NTM5Rjk3AA== → read
2025-08-29 09:29:49.859 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.MidsSdXHtmC1iKkvoug-qfoY_htKdackyzTW5Rgg3aE - null null
2025-08-29 09:29:49.866 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:29:49.868 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:29:49.893 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_cid_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 09:29:49.949 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='ae9027ca-284d-4b81-ba79-420c15156787', @p1='0', @p2='Explore' (Nullable = false), @p3='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p4='c8fe4bc8-e681-460d-a641-32849d644d8d', @p5='web' (Nullable = false), @p6='2025-08-29T03:59:49.8849911Z' (DbType = DateTime), @p7='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 09:29:49.953 +05:30 [INF] CLICK WRITE-THROUGH cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-29 09:29:49.956 +05:30 [INF] CLICK ENQUEUE cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=0 enqueued=true
2025-08-29 09:29:49.988 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 09:29:49.997 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-29 09:29:49.999 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 128.6581ms
2025-08-29 09:29:50.001 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:29:50.002 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.MidsSdXHtmC1iKkvoug-qfoY_htKdackyzTW5Rgg3aE - 302 0 null 143.6851ms
2025-08-29 09:29:54.405 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.HBIbBQp_JGMP2P6XMYf0N8nlUYc5CzFs1W1jT5RtE3I - null null
2025-08-29 09:29:54.417 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:29:54.419 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:29:54.428 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_cid_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 09:29:54.439 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='0524f501-a7b6-49c4-9ef9-f566a851ab9a', @p1='1', @p2='Call Us' (Nullable = false), @p3='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p4='c8fe4bc8-e681-460d-a641-32849d644d8d', @p5='call' (Nullable = false), @p6='2025-08-29T03:59:54.4249448Z' (DbType = DateTime), @p7='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p8='tel:+917082156227' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 09:29:54.442 +05:30 [INF] CLICK WRITE-THROUGH cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=1 type=call dest=tel:+917082156227
2025-08-29 09:29:54.445 +05:30 [INF] CLICK ENQUEUE cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=1 enqueued=true
2025-08-29 09:29:54.455 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 09:29:54.464 +05:30 [INF] Executing ContentResult with HTTP Response ContentType of text/html; charset=utf-8
2025-08-29 09:29:54.470 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 47.6361ms
2025-08-29 09:29:54.472 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:29:54.474 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.HBIbBQp_JGMP2P6XMYf0N8nlUYc5CzFs1W1jT5RtE3I - 200 null text/html; charset=utf-8 68.6284ms
2025-08-29 09:30:30.944 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.HBIbBQp_JGMP2P6XMYf0N8nlUYc5CzFs1W1jT5RtE3I - null null
2025-08-29 09:30:30.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:30:30.951 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:30:31.079 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_cid_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 09:30:31.084 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='9d4c7d65-0ccc-4b75-a741-5cfb498247a7', @p1='1', @p2='Call Us' (Nullable = false), @p3='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p4='c8fe4bc8-e681-460d-a641-32849d644d8d', @p5='call' (Nullable = false), @p6='2025-08-29T04:00:30.9531499Z' (DbType = DateTime), @p7='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p8='tel:+917082156227' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 09:30:31.086 +05:30 [INF] CLICK WRITE-THROUGH cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=1 type=call dest=tel:+917082156227
2025-08-29 09:30:31.088 +05:30 [INF] CLICK ENQUEUE cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=1 enqueued=true
2025-08-29 09:30:31.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 09:30:31.100 +05:30 [INF] Executing ContentResult with HTTP Response ContentType of text/html; charset=utf-8
2025-08-29 09:30:31.102 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 149.2889ms
2025-08-29 09:30:31.103 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:30:31.104 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.HBIbBQp_JGMP2P6XMYf0N8nlUYc5CzFs1W1jT5RtE3I - 200 null text/html; charset=utf-8 160.1019ms
2025-08-29 09:30:46.551 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-29 09:30:46.554 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:46.555 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 204 null null 3.4747ms
2025-08-29 09:30:46.567 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-29 09:30:46.570 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:46.571 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:30:46.572 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:30:46.579 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:30:46.584 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:30:46.585 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 11.1524ms
2025-08-29 09:30:46.586 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:30:46.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 200 null application/json; charset=utf-8 19.6052ms
2025-08-29 09:30:47.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:30:47.032 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:47.033 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 204 null null 2.897ms
2025-08-29 09:30:47.036 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:30:47.038 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:47.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:30:47.040 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:30:47.044 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:30:47.050 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:30:47.054 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:30:47.060 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.9997ms
2025-08-29 09:30:47.062 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:30:47.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 27.6905ms
2025-08-29 09:30:49.991 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - null null
2025-08-29 09:30:49.994 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:49.995 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - 204 null null 3.8053ms
2025-08-29 09:30:49.997 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - null null
2025-08-29 09:30:50.000 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:50.001 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:30:50.005 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:30:50.016 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:30:50.025 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:30:50.030 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:30:50.033 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 26.2482ms
2025-08-29 09:30:50.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:30:50.035 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - 200 null application/json; charset=utf-8 37.8369ms
2025-08-29 09:30:54.187 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-29 09:30:54.190 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:54.191 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 204 null null 3.6179ms
2025-08-29 09:30:54.194 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-29 09:30:54.196 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:30:54.197 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:30:54.198 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:30:54.202 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:30:54.208 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:30:54.210 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:30:54.212 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 12.2508ms
2025-08-29 09:30:54.213 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:30:54.215 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 200 null application/json; charset=utf-8 20.2935ms
2025-08-29 09:44:45.495 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-29 09:44:45.546 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-29 09:44:45.563 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-29 09:44:46.436 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-29 09:44:47.061 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-29 09:44:47.083 +05:30 [INF] ClickLogWorker started
2025-08-29 09:44:47.344 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-29 09:44:47.346 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-29 09:44:47.347 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-29 09:44:47.348 +05:30 [INF] Hosting environment: Development
2025-08-29 09:44:47.349 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-29 09:44:47.379 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-29 09:44:47.398 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[@__cutoff_0='2025-08-22T04:14:45.7274319Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-29 09:44:48.142 +05:30 [INF] ClickLogWorker stopped
2025-08-29 09:44:55.398 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-29 09:44:55.631 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 244.4438ms
2025-08-29 09:44:55.683 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-29 09:44:55.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.5268ms
2025-08-29 09:44:55.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-29 09:44:55.938 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.5024ms
2025-08-29 09:44:56.132 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-29 09:44:56.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 289.9609ms
2025-08-29 09:45:14.941 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - null null
2025-08-29 09:45:14.947 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-29 09:45:15.082 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:15.094 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - 204 null null 152.8241ms
2025-08-29 09:45:15.117 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - null null
2025-08-29 09:45:15.128 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:15.617 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:45:15.643 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:45:15.965 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__initialCampaignSendLogId_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:45:16.048 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__initialCampaignSendLogId_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:45:16.077 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:45:16.153 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 500.2738ms
2025-08-29 09:45:16.157 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:45:16.164 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - 200 null application/json; charset=utf-8 1047.5639ms
2025-08-29 09:45:21.335 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:45:21.339 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:21.340 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.4147ms
2025-08-29 09:45:21.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:45:21.356 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:21.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:45:21.365 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:45:21.491 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:45:21.495 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:45:21.507 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 139.8808ms
2025-08-29 09:45:21.508 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:45:21.509 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 158.835ms
2025-08-29 09:45:38.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 09:45:38.267 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:38.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.9402ms
2025-08-29 09:45:38.278 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 09:45:38.282 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:38.287 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:45:38.293 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 09:45:38.314 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 09:45:38.343 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 09:45:38.428 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 09:45:38.527 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 09:45:38.535 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 09:45:38.544 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 09:45:38.545 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 09:45:38.547 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:45:38.551 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 256.4471ms
2025-08-29 09:45:38.552 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 09:45:38.553 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 275.2155ms
2025-08-29 09:45:38.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:45:38.560 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:38.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.094ms
2025-08-29 09:45:38.564 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:45:38.568 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:38.573 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:45:38.576 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:45:38.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 09:45:38.611 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:45:38.614 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:45:38.619 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 40.9694ms
2025-08-29 09:45:38.620 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:45:38.622 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 57.448ms
2025-08-29 09:45:38.637 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:45:38.641 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:38.644 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:45:38.646 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:45:38.658 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:45:38.663 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:45:38.665 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.1621ms
2025-08-29 09:45:38.667 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:45:38.669 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.8263ms
2025-08-29 09:45:38.714 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:45:38.720 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:38.723 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:45:38.724 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:45:38.733 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:45:38.738 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:45:38.740 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.3387ms
2025-08-29 09:45:38.742 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:45:38.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.3362ms
2025-08-29 09:45:41.089 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - null null
2025-08-29 09:45:41.094 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:41.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - 204 null null 6.495ms
2025-08-29 09:45:41.109 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs - null null
2025-08-29 09:45:41.113 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:41.115 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 09:45:41.121 +05:30 [INF] Route matched with {action = "GetAll", controller = "TrackingViewer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid]) on controller xbytechat.api.Features.Tracking.Controllers.TrackingViewerController (xbytechat.api).
2025-08-29 09:45:41.159 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."ContactPhone", CASE
    WHEN c."Id" IS NOT NULL THEN c."Name"
    ELSE '(N/A)'
END AS "ContactName", t."ButtonText", t."CTAType", t."SourceType", t."ClickedAt", t."DeviceType", t."Country", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE '(Unknown)'
END AS "CampaignName"
FROM "TrackingLogs" AS t
LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
LEFT JOIN "Campaigns" AS c0 ON t."CampaignId" = c0."Id"
ORDER BY t."ClickedAt" DESC
2025-08-29 09:45:41.163 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType86`10[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:45:41.173 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api) in 49.9707ms
2025-08-29 09:45:41.175 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 09:45:41.176 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/logs - 200 null application/json; charset=utf-8 67.1739ms
2025-08-29 09:45:45.133 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:45:45.136 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:45.137 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.9683ms
2025-08-29 09:45:45.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:45:45.155 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:45.156 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:45:45.158 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:45:45.169 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:45:45.172 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:45:45.173 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.189ms
2025-08-29 09:45:45.175 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:45:45.176 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 23.6762ms
2025-08-29 09:45:49.367 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:45:49.369 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:49.370 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 204 null null 3.3242ms
2025-08-29 09:45:49.374 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null 0
2025-08-29 09:45:49.377 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:45:49.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:45:49.381 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:45:52.137 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-29 09:45:52.147 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 09:45:52.243 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:45:52.340 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 09:45:52.363 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:45:52.365 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:45:54.056 +05:30 [INF] Received HTTP response headers after 1687.8436ms - 200
2025-08-29 09:45:54.057 +05:30 [INF] End processing HTTP request after 1695.1996ms - 200
2025-08-29 09:45:55.203 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:45:55.226 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-29 09:45:55.228 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:45:55.229 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:45:56.960 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJiYWViMzZmMi03ZGNjLTRjMmUtYTkwNi04NGU1YjgwZDI1YTUiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0NDA5NTUsImV4cCI6MTc1OTAzMjk1NX0.0XGRW5MFmRQwGSCX1KrBnD72PiswrbY6i236pWV0SJU - null null
2025-08-29 09:45:56.963 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:45:56.967 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:45:56.982 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__p_cid_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 09:45:56.986 +05:30 [WRN] SendLog not found for click cid="baeb36f2-7dcc-4c2e-a906-84e5b80d25a5"
2025-08-29 09:45:57.144 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='fee95307-d528-4f86-86fd-b7caefabab35', @p1='0', @p2='Try Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5', @p5='web' (Nullable = false), @p6='2025-08-29T04:15:56.9783234Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/graphic-designing-service' (Nullable = false), @p9='::1' (Nullable = false), @p10='facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 09:45:57.154 +05:30 [INF] CLICK WRITE-THROUGH cid="baeb36f2-7dcc-4c2e-a906-84e5b80d25a5" idx=0 type=web dest=https://www.mindsmiratus.com/graphic-designing-service
2025-08-29 09:45:57.155 +05:30 [INF] CLICK ENQUEUE cid="baeb36f2-7dcc-4c2e-a906-84e5b80d25a5" idx=0 enqueued=true
2025-08-29 09:45:57.167 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 09:45:57.172 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/graphic-designing-service.
2025-08-29 09:45:57.173 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 204.5253ms
2025-08-29 09:45:57.174 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:45:57.175 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJiYWViMzZmMi03ZGNjLTRjMmUtYTkwNi04NGU1YjgwZDI1YTUiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0NDA5NTUsImV4cCI6MTc1OTAzMjk1NX0.0XGRW5MFmRQwGSCX1KrBnD72PiswrbY6i236pWV0SJU - 302 0 null 214.9155ms
2025-08-29 09:45:57.877 +05:30 [INF] Received HTTP response headers after 2646.8521ms - 200
2025-08-29 09:45:57.878 +05:30 [INF] End processing HTTP request after 2650.4043ms - 200
2025-08-29 09:45:58.066 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='eb4a2d78-f874-41b3-809a-c9fe5d99cb6c', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2' (Nullable = true), @p5='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p6='2025-08-29T04:15:57.8817551Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='busiorbit_live_baseurl' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U2MDFDQkU2QTBGQzEzNzY2AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U2MDFDQkU2QTBGQzEzNzY2AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T04:15:57.8818019Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='7e9295ae-ed12-4029-b5b0-b84b4567ff6a', @p28=NULL, @p29='2025-08-29T04:15:57.9120317Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀

Claim your free 14-day trial (no credit card required). ✨💳

Limited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U2MDFDQkU2QTBGQzEzNzY2AA==', @p42='eb4a2d78-f874-41b3-809a-c9fe5d99cb6c' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='ce556528-e9f6-457a-aa65-1522cbae7693', @p45='0', @p46='Sent', @p47='2025-08-29T04:15:57.9120868Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='busiorbit_live_baseurl', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 09:46:01.158 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:46:01.165 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 11782.1098ms
2025-08-29 09:46:01.166 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:46:01.168 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 200 null application/json; charset=utf-8 11794.167ms
2025-08-29 09:46:57.729 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJiYWViMzZmMi03ZGNjLTRjMmUtYTkwNi04NGU1YjgwZDI1YTUiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0NDA5NTUsImV4cCI6MTc1OTAzMjk1NX0.0XGRW5MFmRQwGSCX1KrBnD72PiswrbY6i236pWV0SJU - null null
2025-08-29 09:46:57.738 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:46:57.739 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:46:57.744 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__p_cid_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 09:46:57.754 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='fd050310-eb93-4a8b-a7ea-b9190ba87b56', @p1='0', @p2='Try Now' (Nullable = false), @p3='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p4='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5', @p5='web' (Nullable = false), @p6='2025-08-29T04:16:57.7418681Z' (DbType = DateTime), @p7='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p8='https://www.mindsmiratus.com/graphic-designing-service' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 09:46:57.756 +05:30 [INF] CLICK WRITE-THROUGH cid="baeb36f2-7dcc-4c2e-a906-84e5b80d25a5" idx=0 type=web dest=https://www.mindsmiratus.com/graphic-designing-service
2025-08-29 09:46:57.757 +05:30 [INF] CLICK ENQUEUE cid="baeb36f2-7dcc-4c2e-a906-84e5b80d25a5" idx=0 enqueued=true
2025-08-29 09:46:57.762 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 09:46:57.763 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/graphic-designing-service.
2025-08-29 09:46:57.764 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 23.7511ms
2025-08-29 09:46:57.765 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:46:57.766 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJiYWViMzZmMi03ZGNjLTRjMmUtYTkwNi04NGU1YjgwZDI1YTUiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2dyYXBoaWMtZGVzaWduaW5nLXNlcnZpY2UiLCJpYXQiOjE3NTY0NDA5NTUsImV4cCI6MTc1OTAzMjk1NX0.0XGRW5MFmRQwGSCX1KrBnD72PiswrbY6i236pWV0SJU - 302 0 null 36.8602ms
2025-08-29 09:47:11.777 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJiYWViMzZmMi03ZGNjLTRjMmUtYTkwNi04NGU1YjgwZDI1YTUiLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9paUdWV2MxQXhnOCIsImlhdCI6MTc1NjQ0MDk1NSwiZXhwIjoxNzU5MDMyOTU1fQ.u5nmJpeyoXDaNQlE229ghSnOOY5lMufpCj970L5LQOA - null null
2025-08-29 09:47:11.783 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:47:11.784 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:47:11.788 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__p_cid_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 09:47:11.794 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='9856426c-dd5e-47db-a053-2bc7543c764b', @p1='1', @p2='Subscribe' (Nullable = false), @p3='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p4='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5', @p5='web' (Nullable = false), @p6='2025-08-29T04:17:11.7865441Z' (DbType = DateTime), @p7='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true), @p8='https://www.youtube.com/shorts/iiGVWc1Axg8' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 09:47:11.796 +05:30 [INF] CLICK WRITE-THROUGH cid="baeb36f2-7dcc-4c2e-a906-84e5b80d25a5" idx=1 type=web dest=https://www.youtube.com/shorts/iiGVWc1Axg8
2025-08-29 09:47:11.797 +05:30 [INF] CLICK ENQUEUE cid="baeb36f2-7dcc-4c2e-a906-84e5b80d25a5" idx=1 enqueued=true
2025-08-29 09:47:11.804 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 09:47:11.806 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/shorts/iiGVWc1Axg8.
2025-08-29 09:47:11.807 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 21.4138ms
2025-08-29 09:47:11.808 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:47:11.809 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJiYWViMzZmMi03ZGNjLTRjMmUtYTkwNi04NGU1YjgwZDI1YTUiLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9paUdWV2MxQXhnOCIsImlhdCI6MTc1NjQ0MDk1NSwiZXhwIjoxNzU5MDMyOTU1fQ.u5nmJpeyoXDaNQlE229ghSnOOY5lMufpCj970L5LQOA - 302 0 null 32.0174ms
2025-08-29 09:47:37.770 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - null null
2025-08-29 09:47:37.773 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:47:37.774 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - 204 null null 4.1143ms
2025-08-29 09:47:37.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - null null
2025-08-29 09:47:37.798 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:47:37.799 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:47:37.804 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:47:37.831 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-29 09:47:37.837 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:47:37.843 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:47:37.846 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 39.8267ms
2025-08-29 09:47:37.847 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:47:37.848 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/summary - 200 null application/json; charset=utf-8 54.1709ms
2025-08-29 09:47:38.254 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:47:38.256 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:47:38.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - 204 null null 3.5827ms
2025-08-29 09:47:38.260 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:47:38.263 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:47:38.264 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:47:38.269 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:47:38.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:47:38.313 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:47:38.319 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:47:38.329 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 57.3553ms
2025-08-29 09:47:38.330 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:47:38.331 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 70.8325ms
2025-08-29 09:47:47.943 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - null null
2025-08-29 09:47:47.946 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:47:47.947 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - 204 null null 4.125ms
2025-08-29 09:47:47.950 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - null null
2025-08-29 09:47:47.953 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:47:47.955 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:47:47.956 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:47:47.962 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:47:47.968 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:47:47.971 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:47:47.973 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 14.4361ms
2025-08-29 09:47:47.974 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:47:47.975 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - 200 null application/json; charset=utf-8 24.6589ms
2025-08-29 09:48:01.335 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - null null
2025-08-29 09:48:01.338 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:48:01.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - 204 null null 3.5845ms
2025-08-29 09:48:01.341 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - null null
2025-08-29 09:48:01.343 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:48:01.344 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:48:01.345 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:48:01.350 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:48:01.355 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:48:01.358 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:48:01.359 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 12.4941ms
2025-08-29 09:48:01.360 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:48:01.361 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - 200 null application/json; charset=utf-8 20.0181ms
2025-08-29 09:48:16.774 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/04d3ef37-7a8d-439b-9ab8-a3ee17c13f17 - null null
2025-08-29 09:48:16.777 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:48:16.778 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/04d3ef37-7a8d-439b-9ab8-a3ee17c13f17 - 204 null null 3.7724ms
2025-08-29 09:48:16.782 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/04d3ef37-7a8d-439b-9ab8-a3ee17c13f17 - null null
2025-08-29 09:48:16.784 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:48:16.785 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:48:16.786 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:48:16.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='04d3ef37-7a8d-439b-9ab8-a3ee17c13f17'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:48:16.796 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='04d3ef37-7a8d-439b-9ab8-a3ee17c13f17'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:48:16.798 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:48:16.799 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 10.3253ms
2025-08-29 09:48:16.800 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:48:16.801 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/04d3ef37-7a8d-439b-9ab8-a3ee17c13f17 - 200 null application/json; charset=utf-8 19.0366ms
2025-08-29 09:48:19.253 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - null null
2025-08-29 09:48:19.256 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:48:19.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - 204 null null 3.9948ms
2025-08-29 09:48:19.260 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - null null
2025-08-29 09:48:19.262 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:48:19.262 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:48:19.263 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:48:19.267 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:48:19.271 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='baeb36f2-7dcc-4c2e-a906-84e5b80d25a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:48:19.273 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:48:19.274 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.7942ms
2025-08-29 09:48:19.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:48:19.277 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/baeb36f2-7dcc-4c2e-a906-84e5b80d25a5 - 200 null application/json; charset=utf-8 17.1657ms
2025-08-29 09:49:39.676 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:49:39.684 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:49:39.685 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 9.0371ms
2025-08-29 09:49:39.689 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:49:39.692 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:49:39.693 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:49:39.695 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:49:39.700 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:49:39.709 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:49:39.711 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.9066ms
2025-08-29 09:49:39.712 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:49:39.714 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 25.323ms
2025-08-29 09:50:01.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:50:01.306 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:01.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.7445ms
2025-08-29 09:50:01.319 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:50:01.323 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:01.325 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:50:01.326 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:50:01.467 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:50:01.469 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:50:01.470 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 142.8334ms
2025-08-29 09:50:01.472 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:50:01.473 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 153.4567ms
2025-08-29 09:50:11.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-29 09:50:11.957 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 09:50:11.959 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:11.967 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:11.968 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.8674ms
2025-08-29 09:50:11.969 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 11.8823ms
2025-08-29 09:50:11.975 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-29 09:50:11.975 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 09:50:11.984 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:11.987 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:50:11.987 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:11.989 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 09:50:11.991 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 09:50:11.992 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 09:50:11.999 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-29 09:50:12.006 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 09:50:12.015 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 09:50:12.019 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 09:50:12.020 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 09:50:12.032 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 09:50:12.037 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:50:12.043 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 49.6281ms
2025-08-29 09:50:12.044 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:50:12.045 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 70.114ms
2025-08-29 09:50:12.345 +05:30 [INF] Received HTTP response headers after 323.3426ms - 401
2025-08-29 09:50:12.346 +05:30 [INF] End processing HTTP request after 326.9375ms - 401
2025-08-29 09:50:12.347 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 09:50:12.348 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 09:50:12.350 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 09:50:12.350 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 09:50:13.416 +05:30 [INF] Received HTTP response headers after 1064.9405ms - 200
2025-08-29 09:50:13.417 +05:30 [INF] End processing HTTP request after 1067.7231ms - 200
2025-08-29 09:50:13.418 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwHaMEE6&_nc_oc=AdkGZ6ZYz_JfGbVcSF2cf_TqobeY60CetQ2t_ob82iUoxh7pahrsW1aP-yzuyjNqvgE5JhnLew93WZd5TWilewKN&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=cp3O2LvKGmKLeKSMh8WdeQ&oh=01_Q5Aa2QFoZ8qaL2Eqpqt5KazDDP3HijtQ8aDk46qgc-T5hclTaQ&oe=68D8B18F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 09:50:13.440 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:50:13.444 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1449.4105ms
2025-08-29 09:50:13.445 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 09:50:13.446 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1470.9566ms
2025-08-29 09:50:30.014 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-29 09:50:30.016 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 09:50:30.017 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:30.020 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 6.841ms
2025-08-29 09:50:30.020 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:30.024 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 8.4654ms
2025-08-29 09:50:30.039 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-29 09:50:30.039 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 09:50:30.042 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:30.045 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:50:30.046 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:50:30.047 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 09:50:30.047 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 09:50:30.051 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-29 09:50:30.052 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 09:50:30.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 09:50:30.062 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 09:50:30.064 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:50:30.065 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 15.2206ms
2025-08-29 09:50:30.067 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:50:30.070 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 30.8201ms
2025-08-29 09:50:30.073 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-29 09:50:30.077 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:50:30.080 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 23.0287ms
2025-08-29 09:50:30.081 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 09:50:30.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 43.0456ms
2025-08-29 09:54:22.308 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-29 09:54:22.315 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:22.316 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 8.0198ms
2025-08-29 09:54:22.320 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 583
2025-08-29 09:54:22.327 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:22.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-29 09:54:22.331 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-29 09:54:22.341 +05:30 [INF] FindOrCreateAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", phoneNumber=+919990033746
2025-08-29 09:54:22.348 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__phoneNumber_1='+919990033746'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-29 09:54:22.357 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='003017dc-a7be-4baa-a158-3c88f3f9f819', @p1=NULL (DbType = Guid), @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='2025-08-29T04:24:22.3520086Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='True', @p7='False', @p8='False', @p9='False', @p10=NULL (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Guid), @p13=NULL (DbType = DateTime), @p14=NULL, @p15='WhatsApp User' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL, @p18='+919990033746' (Nullable = false), @p19=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contacts" ("Id", "AssignedAgentId", "BusinessId", "CreatedAt", "Email", "Group", "IsActive", "IsArchived", "IsAutomationPaused", "IsFavorite", "LastCTAInteraction", "LastCTAType", "LastClickedProductId", "LastContactedAt", "LeadSource", "Name", "NextFollowUpAt", "Notes", "PhoneNumber", "Tags")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-08-29 09:54:22.359 +05:30 [INF] Contact created: "003017dc-a7be-4baa-a158-3c88f3f9f819"
2025-08-29 09:54:22.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:54:22.366 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-29 09:54:22.367 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:54:22.368 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:54:23.880 +05:30 [INF] Received HTTP response headers after 1510.8696ms - 200
2025-08-29 09:54:23.882 +05:30 [INF] End processing HTTP request after 1514.3156ms - 200
2025-08-29 09:54:23.887 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='cb4f3e5e-9475-450a-aabc-b670e476cbab', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='003017dc-a7be-4baa-a158-3c88f3f9f819' (Nullable = true), @p6='2025-08-29T04:24:23.8836218Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='Hello and welcome! 
At Mindsmiratus Technologies, we believe in building solutions that drive real business growth. Our experienced team specializes in crafting custom software, web applications, and mobile apps that are influential, informative, and perfectly suited to your business.

From SEO-optimized websites to powerful digital marketing campaigns and cutting-edge telemarketing services, we provide the tools you need to succeed. Tell us about your project, and let us help you achieve your goals."

Team Mindsmiratus' (Nullable = false), @p11='wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSQjM5NEU4NDY0M0M0RTk5Rjk1AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+919990033746","wa_id":"919990033746"}],"messages":[{"id":"wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSQjM5NEU4NDY0M0M0RTk5Rjk1AA=="}]}', @p13='+919990033746' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Hello and welcome! 
At Mindsmiratus Technologies, we believe in building solutions that drive real business growth. Our experienced team specializes in crafting custom software, web applications, and mobile apps that are influential, informative, and perfectly suited to your business.

From SEO-optimized websites to powerful digital marketing campaigns and cutting-edge telemarketing services, we provide the tools you need to succeed. Tell us about your project, and let us help you achieve your goals."

Team Mindsmiratus', @p16='2025-08-29T04:24:23.8836220Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 09:54:23.889 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:54:23.892 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1559.3262ms
2025-08-29 09:54:23.893 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-29 09:54:23.894 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1573.8794ms
2025-08-29 09:54:35.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:54:35.616 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:35.617 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.3476ms
2025-08-29 09:54:35.629 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:54:35.631 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:35.632 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:54:35.633 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:54:35.639 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:54:35.643 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:54:35.644 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.5123ms
2025-08-29 09:54:35.645 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:54:35.646 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 17.9396ms
2025-08-29 09:54:39.312 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 09:54:39.314 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.315 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 3.2063ms
2025-08-29 09:54:39.317 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:54:39.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 09:54:39.324 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 09:54:39.320 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 09:54:39.327 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.329 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.334 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 204 null null 17.5887ms
2025-08-29 09:54:39.342 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:54:39.331 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.333 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.349 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:54:39.350 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 25.9693ms
2025-08-29 09:54:39.351 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 30.6956ms
2025-08-29 09:54:39.352 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 09:54:39.353 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.358 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 09:54:39.360 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 09:54:39.361 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.363 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:54:39.364 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 09:54:39.365 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:54:39.366 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-29 09:54:39.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:54:39.378 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:54:39.380 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 21.1979ms
2025-08-29 09:54:39.381 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:54:39.381 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 09:54:39.382 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 57.7017ms
2025-08-29 09:54:39.384 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:39.387 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:54:39.388 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 09:54:39.393 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-29 09:54:39.403 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-29 09:54:39.407 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 37.7713ms
2025-08-29 09:54:39.408 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 09:54:39.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 200 null application/json; charset=utf-8 60.3496ms
2025-08-29 09:54:39.493 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 09:54:39.497 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 09:54:39.500 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:54:39.501 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 135.2414ms
2025-08-29 09:54:39.502 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:54:39.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 145.1554ms
2025-08-29 09:54:39.575 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:54:39.577 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:54:39.578 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 188.189ms
2025-08-29 09:54:39.579 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:54:39.580 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 198.5312ms
2025-08-29 09:54:45.015 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - null null
2025-08-29 09:54:45.017 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:45.018 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - 204 null null 3.5734ms
2025-08-29 09:54:45.021 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - application/json 55
2025-08-29 09:54:45.023 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:45.024 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 09:54:45.027 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:54:45.048 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-29 09:54:45.057 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='1944d3f9-40c5-4101-b94d-b7639d2951d3', @p1=NULL, @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @p4=NULL, @p5=NULL, @p6='003017dc-a7be-4baa-a158-3c88f3f9f819', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-29T04:24:45.0538152Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-29T04:24:45.0538740Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-29 09:54:45.059 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:54:45.061 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 32.0863ms
2025-08-29 09:54:45.062 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 09:54:45.063 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/assign-contacts - 200 null application/json; charset=utf-8 42.3654ms
2025-08-29 09:54:49.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:54:49.385 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:49.386 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.0345ms
2025-08-29 09:54:49.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:54:49.403 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:49.405 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:54:49.406 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:54:49.413 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:54:49.415 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:54:49.417 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.1694ms
2025-08-29 09:54:49.418 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:54:49.419 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.98ms
2025-08-29 09:54:52.713 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:54:52.716 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:52.717 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 204 null null 3.8028ms
2025-08-29 09:54:52.723 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - null null
2025-08-29 09:54:52.726 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:52.727 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-29 09:54:52.731 +05:30 [INF] Route matched with {action = "GetCampaignRecipients", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignRecipients(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:54:52.744 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Name", c0."PhoneNumber", c0."Email", c0."LeadSource", c0."CreatedAt"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c0."BusinessId" = @__businessId_1
2025-08-29 09:54:52.748 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:54:52.749 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api) in 15.4689ms
2025-08-29 09:54:52.750 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-29 09:54:52.751 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2 - 200 null application/json; charset=utf-8 27.6118ms
2025-08-29 09:54:58.269 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 09:54:58.271 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:58.272 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 3.6628ms
2025-08-29 09:54:58.275 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 09:54:58.277 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:54:58.278 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 404 0 null 3.3033ms
2025-08-29 09:54:58.281 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: DELETE http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a, Response status code: 404
2025-08-29 09:55:04.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 09:55:04.911 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:04.912 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 3.3026ms
2025-08-29 09:55:04.915 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 09:55:04.917 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:04.918 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 404 0 null 3.5425ms
2025-08-29 09:55:04.921 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: DELETE http://localhost:7113/api/campaigns/d4940aa2-2b1f-4448-b7d3-37c4a0a6fef2/recipients/7e9295ae-ed12-4029-b5b0-b84b4567ff6a, Response status code: 404
2025-08-29 09:55:10.267 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:55:10.269 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:10.270 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.3873ms
2025-08-29 09:55:10.277 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:55:10.280 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:10.282 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:55:10.283 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:55:10.288 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:55:10.291 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:55:10.293 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.2444ms
2025-08-29 09:55:10.294 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:55:10.295 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.5419ms
2025-08-29 09:55:25.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-29 09:55:25.354 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:25.355 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 3.5858ms
2025-08-29 09:55:25.363 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-29 09:55:25.367 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:25.369 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 09:55:25.373 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 09:55:25.388 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 09:55:25.391 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:55:25.395 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 19.6481ms
2025-08-29 09:55:25.396 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 09:55:25.397 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 33.7405ms
2025-08-29 09:55:28.742 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - null null
2025-08-29 09:55:28.745 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:28.745 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - 204 null null 3.5817ms
2025-08-29 09:55:28.756 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - null null
2025-08-29 09:55:28.758 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:55:28.759 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 09:55:28.763 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 09:55:28.774 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__name_1='busiorbit_live_baseurl'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-29 09:55:28.777 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType154`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:55:28.781 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 15.6817ms
2025-08-29 09:55:28.782 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 09:55:28.782 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d/busiorbit_live_baseurl - 200 null application/json; charset=utf-8 26.8148ms
2025-08-29 09:56:43.749 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-29 09:56:43.751 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:43.752 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.1004ms
2025-08-29 09:56:43.755 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 556
2025-08-29 09:56:43.761 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:43.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 09:56:43.765 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:56:45.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 09:56:45.391 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:56:45.392 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:56:46.555 +05:30 [INF] Received HTTP response headers after 1163.0036ms - 200
2025-08-29 09:56:46.557 +05:30 [INF] End processing HTTP request after 1166.2064ms - 200
2025-08-29 09:56:46.571 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-29T04:26:46.5611647Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀

Claim your free 14-day trial (no credit card required). ✨💳

Limited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉', @p14='busiorbit_live_baseurl' (Nullable = false), @p15='BusineOrbit_live_V7' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='busiorbit_live_baseurl', @p20='[]', @p21='2025-08-29T04:26:46.5612310Z' (DbType = DateTime), @p22='0f651020-6b45-42b4-8007-b05ccbc38036', @p23='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p24='True', @p25='2', @p26='Subscribe' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.mindsmiratus.com/software-development' (Nullable = false), @p29='1b500480-e316-480e-a8d6-f255c9ddad39', @p30='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p31='True', @p32='1', @p33='Try Now' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/about-us' (Nullable = false), @p36='8b0df5f8-0d80-41c5-928c-bb8049237b09', @p37='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p38='True', @p39='3', @p40='Call us' (Nullable = false), @p41='PHONE_NUMBER' (Nullable = false), @p42='+917082156227' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-08-29 09:56:46.575 +05:30 [INF] ✅ Campaign 'BusineOrbit_live_V7' created with 0 recipients, 0 user buttons, 3 template buttons and 0 template parameters
2025-08-29 09:56:46.578 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:56:46.581 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2813.9999ms
2025-08-29 09:56:46.582 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 09:56:46.583 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2828.0167ms
2025-08-29 09:56:46.608 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 09:56:46.611 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.612 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 3.997ms
2025-08-29 09:56:46.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null null
2025-08-29 09:56:46.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 09:56:46.625 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 09:56:46.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 09:56:46.633 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 204 null null 20.3366ms
2025-08-29 09:56:46.636 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.632 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.645 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null null
2025-08-29 09:56:46.649 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:56:46.650 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 36.7728ms
2025-08-29 09:56:46.651 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 38.0895ms
2025-08-29 09:56:46.654 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.656 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 09:56:46.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 09:56:46.664 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 09:56:46.669 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:56:46.671 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:56:46.668 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.674 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:56:46.678 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-29 09:56:46.680 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.5543ms
2025-08-29 09:56:46.676 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:56:46.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 09:56:46.687 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-29 09:56:46.687 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:56:46.688 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 09:56:46.690 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:46.692 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 16.6939ms
2025-08-29 09:56:46.693 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 68.4295ms
2025-08-29 09:56:46.694 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=1000
2025-08-29 09:56:46.695 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:56:46.696 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 09:56:46.701 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 09:56:46.702 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 09:56:46.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 200 null application/json; charset=utf-8 55.9652ms
2025-08-29 09:56:46.709 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 09:56:46.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:56:46.717 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:56:46.718 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:56:46.720 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 25.4795ms
2025-08-29 09:56:46.721 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 12.2881ms
2025-08-29 09:56:46.723 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 09:56:46.724 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 09:56:46.725 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 62.221ms
2025-08-29 09:56:46.726 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 45.0121ms
2025-08-29 09:56:58.885 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/assign-contacts - null null
2025-08-29 09:56:58.887 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:58.888 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/assign-contacts - 204 null null 2.5567ms
2025-08-29 09:56:58.890 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/assign-contacts - application/json 55
2025-08-29 09:56:58.892 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:56:58.893 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 09:56:58.893 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:56:58.897 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-29 09:56:58.904 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='2cac0548-5888-48e1-a4b4-8aea6adfb022', @p1=NULL, @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p4=NULL, @p5=NULL, @p6='003017dc-a7be-4baa-a158-3c88f3f9f819', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-29T04:26:58.9004924Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-29T04:26:58.9004926Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-29 09:56:58.905 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:56:58.907 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 11.7988ms
2025-08-29 09:56:58.908 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 09:56:58.909 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/assign-contacts - 200 null application/json; charset=utf-8 18.3785ms
2025-08-29 09:57:03.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:57:03.623 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:03.624 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 2.7668ms
2025-08-29 09:57:03.634 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:57:03.637 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:03.638 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:57:03.640 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:57:03.647 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:57:03.650 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:57:03.652 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.75ms
2025-08-29 09:57:03.654 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:57:03.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 21.33ms
2025-08-29 09:57:06.434 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null null
2025-08-29 09:57:06.437 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:06.438 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 204 null null 3.9646ms
2025-08-29 09:57:06.441 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null 0
2025-08-29 09:57:06.444 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:06.444 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:57:06.445 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:57:13.599 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 09:57:13.604 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:57:13.606 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 09:57:13.608 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:57:13.609 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:57:13.714 +05:30 [INF] Received HTTP response headers after 104.1177ms - 200
2025-08-29 09:57:13.715 +05:30 [INF] End processing HTTP request after 106.7574ms - 200
2025-08-29 09:57:13.718 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 09:57:13.720 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-29 09:57:13.721 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:57:13.722 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 09:57:15.165 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI2ZjE1NzJhNy1jZTNlLTQ1MjgtYjFkMi1mZmQyNmEwZWJlOTIiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2Fib3V0LXVzIiwiaWF0IjoxNzU2NDQxNjMzLCJleHAiOjE3NTkwMzM2MzN9.gDNp532lDp69pKCxQ_daSaaWOjSr09qq-4T9aSIVN30 - null null
2025-08-29 09:57:15.167 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:57:15.168 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 09:57:15.172 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_cid_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 09:57:15.174 +05:30 [WRN] SendLog not found for click cid="6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92"
2025-08-29 09:57:15.176 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='d4c943db-c3f5-4c19-bd0a-d9da2bc626e8', @p1='0', @p2='Try Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92', @p5='web' (Nullable = false), @p6='2025-08-29T04:27:15.1701412Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/about-us' (Nullable = false), @p9='::1' (Nullable = false), @p10='facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 09:57:15.178 +05:30 [INF] CLICK WRITE-THROUGH cid="6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92" idx=0 type=web dest=https://www.mindsmiratus.com/about-us
2025-08-29 09:57:15.179 +05:30 [INF] CLICK ENQUEUE cid="6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92" idx=0 enqueued=true
2025-08-29 09:57:15.181 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 09:57:15.182 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/about-us.
2025-08-29 09:57:15.183 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 13.4976ms
2025-08-29 09:57:15.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 09:57:15.184 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI2ZjE1NzJhNy1jZTNlLTQ1MjgtYjFkMi1mZmQyNmEwZWJlOTIiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2Fib3V0LXVzIiwiaWF0IjoxNzU2NDQxNjMzLCJleHAiOjE3NTkwMzM2MzN9.gDNp532lDp69pKCxQ_daSaaWOjSr09qq-4T9aSIVN30 - 302 0 null 19.6093ms
2025-08-29 09:57:16.052 +05:30 [INF] Received HTTP response headers after 2328.9427ms - 200
2025-08-29 09:57:16.053 +05:30 [INF] End processing HTTP request after 2331.7902ms - 200
2025-08-29 09:57:16.059 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='ed4181d3-e37d-45dc-9f6f-1dc6a521ad0b', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793' (Nullable = true), @p5='003017dc-a7be-4baa-a158-3c88f3f9f819' (Nullable = true), @p6='2025-08-29T04:27:16.0546257Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='busiorbit_live_baseurl' (Nullable = false), @p11='wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSRjQxMzhDQ0EzODJCOTIzMjc1AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+919990033746","wa_id":"919990033746"}],"messages":[{"id":"wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSRjQxMzhDQ0EzODJCOTIzMjc1AA==","message_status":"accepted"}]}', @p13='+919990033746' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T04:27:16.0546258Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='003017dc-a7be-4baa-a158-3c88f3f9f819', @p28=NULL, @p29='2025-08-29T04:27:16.0547977Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀

Claim your free 14-day trial (no credit card required). ✨💳

Limited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉' (Nullable = false), @p41='wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSRjQxMzhDQ0EzODJCOTIzMjc1AA==', @p42='ed4181d3-e37d-45dc-9f6f-1dc6a521ad0b' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='2cac0548-5888-48e1-a4b4-8aea6adfb022', @p45='0', @p46='Sent', @p47='2025-08-29T04:27:16.0547978Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='busiorbit_live_baseurl', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 09:57:24.375 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 09:57:24.376 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 17929.6294ms
2025-08-29 09:57:24.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 09:57:24.378 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 200 null application/json; charset=utf-8 17936.8325ms
2025-08-29 09:57:31.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:57:31.925 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:31.925 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 2.7396ms
2025-08-29 09:57:31.936 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:57:31.938 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:31.939 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:57:31.940 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:57:31.945 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:57:31.948 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:57:31.949 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.5817ms
2025-08-29 09:57:31.950 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:57:31.952 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.0987ms
2025-08-29 09:57:35.693 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:57:35.696 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:35.697 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 3.7649ms
2025-08-29 09:57:35.703 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:57:35.705 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:35.706 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:57:35.707 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:57:35.716 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:57:35.718 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:57:35.720 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 10.8811ms
2025-08-29 09:57:35.721 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:57:35.722 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 18.9735ms
2025-08-29 09:57:36.175 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:57:36.177 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:36.177 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 2.8572ms
2025-08-29 09:57:36.180 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:57:36.182 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:36.182 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:57:36.183 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:57:36.187 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:57:36.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:57:36.193 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:57:36.194 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.52ms
2025-08-29 09:57:36.195 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:57:36.197 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 16.8398ms
2025-08-29 09:57:39.936 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:57:39.939 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:39.940 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.4661ms
2025-08-29 09:57:39.943 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:57:39.945 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:39.946 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:57:39.947 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:57:39.950 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:57:39.955 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:57:39.956 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:57:39.958 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.5613ms
2025-08-29 09:57:39.959 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:57:39.961 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 18.1255ms
2025-08-29 09:57:51.551 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:57:51.553 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:51.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.0943ms
2025-08-29 09:57:51.557 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:57:51.559 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:57:51.560 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:57:51.561 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:57:51.564 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:57:51.569 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:57:51.571 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:57:51.572 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 10.4747ms
2025-08-29 09:57:51.574 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:57:51.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 17.9322ms
2025-08-29 09:58:01.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:01.204 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:01.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.3728ms
2025-08-29 09:58:01.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:01.214 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:01.215 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:01.216 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:01.221 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:01.227 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:01.230 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:01.232 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 13.897ms
2025-08-29 09:58:01.234 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:01.235 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 22.6927ms
2025-08-29 09:58:09.830 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:09.832 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:09.833 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.4902ms
2025-08-29 09:58:09.836 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:09.838 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:09.839 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:09.840 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:09.843 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:09.847 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:09.849 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:09.851 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.6884ms
2025-08-29 09:58:09.852 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:09.853 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.8398ms
2025-08-29 09:58:13.545 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:58:13.548 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:13.549 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.7083ms
2025-08-29 09:58:13.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 09:58:13.560 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:13.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:58:13.563 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 09:58:13.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 09:58:13.571 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:13.572 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.1691ms
2025-08-29 09:58:13.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 09:58:13.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.393ms
2025-08-29 09:58:18.066 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:58:18.068 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:18.069 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 3.5666ms
2025-08-29 09:58:18.078 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:58:18.081 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:18.082 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:58:18.083 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:58:18.087 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:58:18.090 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:58:18.092 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 6.9267ms
2025-08-29 09:58:18.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:58:18.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 15.3375ms
2025-08-29 09:58:18.561 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:58:18.563 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:18.564 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 3.2264ms
2025-08-29 09:58:18.567 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:58:18.569 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:18.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:58:18.570 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:58:18.574 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:58:18.579 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:58:18.582 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:18.583 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.8063ms
2025-08-29 09:58:18.584 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:58:18.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 18.0691ms
2025-08-29 09:58:19.597 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:19.599 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:19.600 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.2545ms
2025-08-29 09:58:19.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:19.605 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:19.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:19.607 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:19.610 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:19.614 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:19.616 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:19.617 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.2378ms
2025-08-29 09:58:19.618 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:19.619 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.436ms
2025-08-29 09:58:38.451 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:38.454 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:38.455 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.2639ms
2025-08-29 09:58:38.457 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:38.459 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:38.460 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:38.461 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:38.465 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:38.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:38.472 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:38.473 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.7048ms
2025-08-29 09:58:38.474 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:38.475 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 17.2783ms
2025-08-29 09:58:41.956 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:41.959 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:41.960 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.6665ms
2025-08-29 09:58:41.963 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:41.965 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:41.966 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:41.967 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:58:41.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:58:41.976 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:58:41.977 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3092ms
2025-08-29 09:58:41.979 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:41.980 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4183ms
2025-08-29 09:58:42.038 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:42.042 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:42.044 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:42.046 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:58:42.052 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:58:42.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:58:42.059 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1491ms
2025-08-29 09:58:42.061 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:42.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3267ms
2025-08-29 09:58:42.111 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:42.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:58:42.114 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:42.117 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:42.118 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:42.119 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 7.7529ms
2025-08-29 09:58:42.120 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:58:42.123 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:58:42.133 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:58:42.135 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:42.137 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:58:42.138 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:58:42.140 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.8081ms
2025-08-29 09:58:42.141 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:58:42.144 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:42.148 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.0868ms
2025-08-29 09:58:42.150 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:58:42.157 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:58:42.160 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 13.7938ms
2025-08-29 09:58:42.162 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:58:42.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 41.5314ms
2025-08-29 09:58:42.599 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:58:42.601 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:42.601 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 2.966ms
2025-08-29 09:58:42.604 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:58:42.606 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:42.607 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:58:42.608 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:58:42.611 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:58:42.615 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:58:42.617 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:42.618 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.182ms
2025-08-29 09:58:42.619 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:58:42.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 16.3161ms
2025-08-29 09:58:43.655 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:43.657 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:43.658 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 2.9362ms
2025-08-29 09:58:43.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:43.662 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:43.663 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:43.664 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:43.668 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:43.672 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:43.674 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:43.675 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.1936ms
2025-08-29 09:58:43.676 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:43.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 17.0674ms
2025-08-29 09:58:50.574 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:50.576 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:50.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.4412ms
2025-08-29 09:58:50.580 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:50.582 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:50.583 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:50.584 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:50.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:50.592 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:50.594 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:50.595 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.2981ms
2025-08-29 09:58:50.596 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:50.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.5636ms
2025-08-29 09:58:54.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:54.427 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:54.427 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0391ms
2025-08-29 09:58:54.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:54.432 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:54.433 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:54.434 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:58:54.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:58:54.440 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:58:54.442 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1838ms
2025-08-29 09:58:54.443 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:54.445 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7609ms
2025-08-29 09:58:54.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:54.475 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:54.477 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:54.479 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:58:54.485 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:58:54.489 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:58:54.492 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7861ms
2025-08-29 09:58:54.493 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:54.495 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.1071ms
2025-08-29 09:58:54.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:58:54.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:58:54.519 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:54.522 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:54.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 6.5958ms
2025-08-29 09:58:54.524 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:54.528 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:58:54.529 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:58:54.532 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:54.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:58:54.536 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:58:54.538 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:58:54.541 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:58:54.545 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:58:54.545 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.5526ms
2025-08-29 09:58:54.553 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:58:54.552 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:58:54.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.5515ms
2025-08-29 09:58:54.559 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 16.1491ms
2025-08-29 09:58:54.564 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:58:54.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 38.8488ms
2025-08-29 09:58:55.015 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:58:55.018 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:55.019 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 3.8022ms
2025-08-29 09:58:55.021 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:58:55.024 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:55.024 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:58:55.025 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:58:55.029 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:58:55.034 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:58:55.036 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:55.037 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.0105ms
2025-08-29 09:58:55.038 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:58:55.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 17.7657ms
2025-08-29 09:58:56.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:56.558 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:56.559 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.4829ms
2025-08-29 09:58:56.562 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:56.564 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:56.565 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:56.566 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:56.569 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:56.574 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:56.576 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:56.577 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 10.289ms
2025-08-29 09:58:56.579 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:56.580 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 17.7739ms
2025-08-29 09:58:59.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:58:59.474 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:58:59.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:59.476 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:58:59.480 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:58:59.484 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:58:59.486 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:58:59.487 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.3859ms
2025-08-29 09:58:59.489 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:58:59.489 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 17.9311ms
2025-08-29 09:59:01.779 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:01.781 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:01.782 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 2.6968ms
2025-08-29 09:59:01.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:01.786 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:01.787 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:01.788 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:59:01.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:59:01.795 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:59:01.798 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:59:01.799 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 10.2562ms
2025-08-29 09:59:01.800 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:01.801 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 17.262ms
2025-08-29 09:59:06.880 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:06.884 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:06.885 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 4.9543ms
2025-08-29 09:59:06.889 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:06.892 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:06.894 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:06.895 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:59:06.900 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:59:06.906 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:59:06.908 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:59:06.910 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 13.3086ms
2025-08-29 09:59:06.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:06.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 23.6156ms
2025-08-29 09:59:12.037 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:12.039 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:12.040 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 2.8367ms
2025-08-29 09:59:12.043 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:12.045 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:12.045 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:12.046 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:59:12.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:59:12.054 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:59:12.056 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:59:12.057 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.5989ms
2025-08-29 09:59:12.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:12.059 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.2373ms
2025-08-29 09:59:16.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:59:16.253 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.254 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9454ms
2025-08-29 09:59:16.256 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:59:16.259 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.259 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:59:16.260 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:59:16.263 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:59:16.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:59:16.269 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8845ms
2025-08-29 09:59:16.270 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:59:16.271 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7968ms
2025-08-29 09:59:16.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:59:16.298 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:59:16.300 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:59:16.304 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:59:16.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:59:16.309 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1526ms
2025-08-29 09:59:16.310 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:59:16.311 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.4331ms
2025-08-29 09:59:16.335 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:59:16.335 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 09:59:16.339 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.341 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.342 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 6.7336ms
2025-08-29 09:59:16.343 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:59:16.346 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 09:59:16.347 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 09:59:16.350 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.352 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:59:16.354 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 09:59:16.356 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:59:16.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 09:59:16.362 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.7067ms
2025-08-29 09:59:16.362 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 09:59:16.365 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 09:59:16.369 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 09:59:16.370 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.3396ms
2025-08-29 09:59:16.372 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 11.7272ms
2025-08-29 09:59:16.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 09:59:16.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 32.9121ms
2025-08-29 09:59:16.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:59:16.835 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.836 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 3.6839ms
2025-08-29 09:59:16.838 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 09:59:16.841 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:16.841 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:59:16.842 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 09:59:16.846 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 09:59:16.850 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 09:59:16.852 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:59:16.853 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.2506ms
2025-08-29 09:59:16.854 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 09:59:16.855 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 16.8577ms
2025-08-29 09:59:18.498 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:18.500 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:18.501 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 2.7097ms
2025-08-29 09:59:18.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:18.505 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:18.506 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:18.507 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:59:18.510 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:59:18.515 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:59:18.517 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:59:18.518 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.3733ms
2025-08-29 09:59:18.519 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:18.520 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.62ms
2025-08-29 09:59:26.244 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:26.247 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:26.247 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.3273ms
2025-08-29 09:59:26.250 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:26.252 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:26.253 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:26.253 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:59:26.257 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:59:26.261 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:59:26.263 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:59:26.264 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.5707ms
2025-08-29 09:59:26.265 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:26.266 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.2106ms
2025-08-29 09:59:34.324 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:34.326 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:34.326 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 2.706ms
2025-08-29 09:59:34.329 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 09:59:34.331 +05:30 [INF] CORS policy execution successful.
2025-08-29 09:59:34.331 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:34.332 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 09:59:34.336 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 09:59:34.340 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 09:59:34.342 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 09:59:34.343 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.0882ms
2025-08-29 09:59:34.344 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 09:59:34.345 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.2473ms
2025-08-29 10:03:06.998 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:07.002 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:07.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 4.5948ms
2025-08-29 10:03:07.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:07.011 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:07.012 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:07.013 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:03:07.150 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:03:07.154 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:03:07.156 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:03:07.157 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 142.9063ms
2025-08-29 10:03:07.158 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:07.159 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 149.5876ms
2025-08-29 10:03:12.715 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:12.717 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:12.718 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.3903ms
2025-08-29 10:03:12.721 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:12.722 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:12.723 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:12.724 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:03:12.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:03:12.731 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:03:12.733 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:03:12.734 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 8.6401ms
2025-08-29 10:03:12.735 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:12.736 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 15.3462ms
2025-08-29 10:03:23.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:23.350 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:23.351 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.6528ms
2025-08-29 10:03:23.354 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:23.356 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:23.357 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:23.358 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:03:23.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:03:23.369 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:03:23.371 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:03:23.372 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 12.6216ms
2025-08-29 10:03:23.373 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:23.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 19.4673ms
2025-08-29 10:03:26.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:26.179 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:26.180 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:26.182 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:03:26.185 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:03:26.189 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:03:26.191 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:03:26.192 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 8.7098ms
2025-08-29 10:03:26.193 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:26.194 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 17.2776ms
2025-08-29 10:03:28.260 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:03:28.264 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:03:28.265 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:28.266 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:03:28.270 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:03:28.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:03:28.277 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:03:28.278 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 10.0085ms
2025-08-29 10:03:28.280 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:03:28.281 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 20.9506ms
2025-08-29 10:04:07.657 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 10:04:07.659 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:07.660 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.1637ms
2025-08-29 10:04:07.662 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 10:04:07.674 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:07.674 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 12.351ms
2025-08-29 10:04:07.679 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 10:04:07.682 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:07.682 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 10:04:07.683 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 4.559ms
2025-08-29 10:04:07.686 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:07.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 10:04:07.695 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 13.0325ms
2025-08-29 10:04:07.699 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:07.701 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 10:04:07.706 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 10:04:07.710 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:07.712 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 10:04:07.714 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:07.717 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:07.720 +05:30 [INF] GetAllContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all
2025-08-29 10:04:07.732 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-29 10:04:07.750 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-29 10:04:07.755 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:04:07.758 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 39.0851ms
2025-08-29 10:04:07.759 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 10:04:07.760 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 58.2494ms
2025-08-29 10:04:07.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-29 10:04:07.871 +05:30 [INF] GetAllContactsAsync returned 3 contacts
2025-08-29 10:04:07.872 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:04:07.875 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 158.6758ms
2025-08-29 10:04:07.876 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 10:04:07.877 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 182.013ms
2025-08-29 10:04:16.773 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:16.774 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:16.779 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:16.780 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.780 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:16.786 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.786 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 12.7874ms
2025-08-29 10:04:16.776 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.794 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.794 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 15.5906ms
2025-08-29 10:04:16.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:16.798 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 18.2546ms
2025-08-29 10:04:16.797 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 23.928ms
2025-08-29 10:04:16.807 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:16.811 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null 0
2025-08-29 10:04:16.812 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:16.813 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.815 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.817 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:16.817 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:16.819 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:16.820 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:16.821 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:16.823 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-29 10:04:16.833 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-29 10:04:16.841 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:16.842 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-29 10:04:16.845 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-29 10:04:16.846 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:16.848 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 23.912ms
2025-08-29 10:04:16.849 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 28.749ms
2025-08-29 10:04:16.850 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:16.850 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:16.851 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:16.853 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:04:16.853 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:16.854 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 0 null 43.1237ms
2025-08-29 10:04:16.855 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 null application/json; charset=utf-8 58.2161ms
2025-08-29 10:04:16.857 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:16.859 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 36.5596ms
2025-08-29 10:04:16.862 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:16.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:16.864 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-29 10:04:16.865 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 null application/json; charset=utf-8 56.0605ms
2025-08-29 10:04:16.868 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:16.872 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:16.873 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.0834ms
2025-08-29 10:04:16.874 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:16.875 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 null application/json; charset=utf-8 25.4323ms
2025-08-29 10:04:24.205 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null null
2025-08-29 10:04:24.205 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null null
2025-08-29 10:04:24.205 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null null
2025-08-29 10:04:24.205 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null null
2025-08-29 10:04:24.207 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.208 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.210 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.212 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.213 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 204 null null 8.2917ms
2025-08-29 10:04:24.213 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 204 null null 8.5749ms
2025-08-29 10:04:24.214 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 204 null null 8.6072ms
2025-08-29 10:04:24.214 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 204 null null 8.9982ms
2025-08-29 10:04:24.217 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null 0
2025-08-29 10:04:24.222 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null null
2025-08-29 10:04:24.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null null
2025-08-29 10:04:24.226 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.228 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.230 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.230 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:24.231 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:24.232 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:24.232 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:24.233 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:24.234 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:24.239 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="9841a0df-6c0d-4c42-95d3-fe6faf47e91b"
2025-08-29 10:04:24.238 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='9841a0df-6c0d-4c42-95d3-fe6faf47e91b' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-29 10:04:24.244 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='9841a0df-6c0d-4c42-95d3-fe6faf47e91b' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-29 10:04:24.248 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-29 10:04:24.250 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:04:24.250 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 14.8044ms
2025-08-29 10:04:24.252 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.733ms
2025-08-29 10:04:24.253 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:24.254 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:24.255 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 200 0 null 37.9233ms
2025-08-29 10:04:24.255 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 200 null application/json; charset=utf-8 31.1432ms
2025-08-29 10:04:24.381 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='9841a0df-6c0d-4c42-95d3-fe6faf47e91b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:24.383 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:24.384 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 146.7737ms
2025-08-29 10:04:24.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - null null
2025-08-29 10:04:24.386 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:24.387 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:24.388 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 200 null application/json; charset=utf-8 166.3429ms
2025-08-29 10:04:24.389 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:24.392 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:24.393 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="9841a0df-6c0d-4c42-95d3-fe6faf47e91b"
2025-08-29 10:04:24.397 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='9841a0df-6c0d-4c42-95d3-fe6faf47e91b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:24.399 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:24.400 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 7.4067ms
2025-08-29 10:04:24.402 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:24.403 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/9841a0df-6c0d-4c42-95d3-fe6faf47e91b - 200 null application/json; charset=utf-8 17.6986ms
2025-08-29 10:04:27.498 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - null null
2025-08-29 10:04:27.499 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - null null
2025-08-29 10:04:27.499 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - null null
2025-08-29 10:04:27.499 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - null null
2025-08-29 10:04:27.501 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.504 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.506 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.508 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.509 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - 204 null null 10.249ms
2025-08-29 10:04:27.509 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - 204 null null 10.6409ms
2025-08-29 10:04:27.510 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - 204 null null 11.0788ms
2025-08-29 10:04:27.511 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - 204 null null 11.4682ms
2025-08-29 10:04:27.513 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - null 0
2025-08-29 10:04:27.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - null null
2025-08-29 10:04:27.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - null null
2025-08-29 10:04:27.523 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.524 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.526 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.527 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:27.527 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:27.528 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:27.528 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:27.529 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:27.533 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='003017dc-a7be-4baa-a158-3c88f3f9f819' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-29 10:04:27.530 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:27.535 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="003017dc-a7be-4baa-a158-3c88f3f9f819"
2025-08-29 10:04:27.536 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-29 10:04:27.541 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='003017dc-a7be-4baa-a158-3c88f3f9f819' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-29 10:04:27.541 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 9.8121ms
2025-08-29 10:04:27.542 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='003017dc-a7be-4baa-a158-3c88f3f9f819'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:27.545 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:04:27.545 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:27.547 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:27.548 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 10.5125ms
2025-08-29 10:04:27.549 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - 200 0 null 36.3048ms
2025-08-29 10:04:27.550 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 16.0377ms
2025-08-29 10:04:27.551 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:27.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - null null
2025-08-29 10:04:27.554 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:27.555 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=003017dc-a7be-4baa-a158-3c88f3f9f819 - 200 null application/json; charset=utf-8 34.2515ms
2025-08-29 10:04:27.557 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:27.558 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - 200 null application/json; charset=utf-8 39.1611ms
2025-08-29 10:04:27.561 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:27.564 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:27.565 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="003017dc-a7be-4baa-a158-3c88f3f9f819"
2025-08-29 10:04:27.570 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='003017dc-a7be-4baa-a158-3c88f3f9f819'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:27.573 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:27.575 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 9.603ms
2025-08-29 10:04:27.576 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:27.577 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/003017dc-a7be-4baa-a158-3c88f3f9f819 - 200 null application/json; charset=utf-8 23.8645ms
2025-08-29 10:04:35.340 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:35.340 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:35.341 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:35.341 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:35.343 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.346 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.348 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.350 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.350 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 9.8364ms
2025-08-29 10:04:35.351 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 10.4354ms
2025-08-29 10:04:35.352 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 10.886ms
2025-08-29 10:04:35.352 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 204 null null 11.2565ms
2025-08-29 10:04:35.354 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null 0
2025-08-29 10:04:35.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:35.362 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:35.364 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.365 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.367 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.368 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:35.368 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:35.369 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:35.370 +05:30 [INF] Route matched with {action = "MarkMessagesAsRead", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkMessagesAsRead(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:35.370 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:35.374 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1 AND m."IsIncoming" AND m."Status" <> 'Read'
2025-08-29 10:04:35.371 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:04:35.377 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-29 10:04:35.378 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 200
2025-08-29 10:04:35.381 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-08-29 10:04:35.382 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api) in 9.5403ms
2025-08-29 10:04:35.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:35.387 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.MarkMessagesAsRead (xbytechat.api)'
2025-08-29 10:04:35.387 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:04:35.389 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:35.390 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/inbox/mark-read?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 0 null 35.1899ms
2025-08-29 10:04:35.391 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 11.6ms
2025-08-29 10:04:35.392 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 16.1922ms
2025-08-29 10:04:35.394 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - null null
2025-08-29 10:04:35.395 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-08-29 10:04:35.396 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:35.398 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:35.399 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 null application/json; charset=utf-8 37.4102ms
2025-08-29 10:04:35.400 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 null application/json; charset=utf-8 41.0359ms
2025-08-29 10:04:35.401 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:35.407 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:04:35.409 +05:30 [INF] GetContactByIdAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", contactId="7e9295ae-ed12-4029-b5b0-b84b4567ff6a"
2025-08-29 10:04:35.412 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__contactId_1='7e9295ae-ed12-4029-b5b0-b84b4567ff6a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-08-29 10:04:35.415 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:04:35.417 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 8.6089ms
2025-08-29 10:04:35.418 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-08-29 10:04:35.419 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/7e9295ae-ed12-4029-b5b0-b84b4567ff6a - 200 null application/json; charset=utf-8 24.3621ms
2025-08-29 10:04:50.018 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:04:50.021 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:50.022 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0522ms
2025-08-29 10:04:50.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:04:50.048 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:04:50.049 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:04:50.050 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:04:50.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:04:50.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:04:50.058 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5908ms
2025-08-29 10:04:50.059 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:04:50.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4866ms
2025-08-29 10:05:00.385 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 10:05:00.387 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:00.388 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4701ms
2025-08-29 10:05:00.392 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 10:05:00.395 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:00.396 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:05:00.397 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 10:05:00.401 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 10:05:00.405 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 10:05:00.413 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 10:05:00.422 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 10:05:00.426 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 10:05:00.428 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 10:05:00.429 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 10:05:00.430 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:05:00.432 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 32.8498ms
2025-08-29 10:05:00.433 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:05:00.434 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 42.5144ms
2025-08-29 10:05:00.438 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:05:00.441 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:00.442 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4181ms
2025-08-29 10:05:00.446 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:05:00.450 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:00.451 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:05:00.452 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:05:00.457 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:05:00.461 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:05:00.462 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7335ms
2025-08-29 10:05:00.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:05:00.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.8247ms
2025-08-29 10:05:00.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:05:00.488 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:00.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:05:00.491 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:05:00.496 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:05:00.500 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:05:00.502 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8436ms
2025-08-29 10:05:00.504 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:05:00.506 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.8213ms
2025-08-29 10:05:00.562 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:05:00.566 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:00.567 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:05:00.569 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:05:00.576 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:05:00.582 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:05:00.584 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5937ms
2025-08-29 10:05:00.586 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:05:00.589 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.2922ms
2025-08-29 10:05:12.007 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - null null
2025-08-29 10:05:12.010 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:12.011 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - 204 null null 3.3031ms
2025-08-29 10:05:12.019 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - null null
2025-08-29 10:05:12.021 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:12.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:12.023 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:12.031 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-29 10:05:12.042 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 17.7697ms
2025-08-29 10:05:12.044 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:12.045 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - 400 null application/problem+json; charset=utf-8 26.0902ms
2025-08-29 10:05:12.482 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:12.485 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:12.485 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - 204 null null 3.2021ms
2025-08-29 10:05:12.488 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:12.490 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:12.491 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:12.492 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:12.494 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-29 10:05:12.495 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 1.7117ms
2025-08-29 10:05:12.496 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:12.497 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - 400 null application/problem+json; charset=utf-8 8.6652ms
2025-08-29 10:05:16.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - null null
2025-08-29 10:05:16.655 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:16.656 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:16.657 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:16.659 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-29 10:05:16.660 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 1.8932ms
2025-08-29 10:05:16.662 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:16.662 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - 400 null application/problem+json; charset=utf-8 9.4509ms
2025-08-29 10:05:17.131 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:17.133 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:17.134 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:17.135 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:17.137 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-29 10:05:17.139 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 2.0815ms
2025-08-29 10:05:17.140 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:17.141 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - 400 null application/problem+json; charset=utf-8 9.9914ms
2025-08-29 10:05:21.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/analytics/:campaignId/summary - null null
2025-08-29 10:05:21.999 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:22.000 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/analytics/:campaignId/summary - 204 null null 3.9973ms
2025-08-29 10:05:22.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - null null
2025-08-29 10:05:22.011 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:22.013 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - 404 0 null 3.7677ms
2025-08-29 10:05:22.016 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary, Response status code: 404
2025-08-29 10:05:41.820 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:05:41.823 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:41.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 204 null null 3.7113ms
2025-08-29 10:05:41.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:05:41.830 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:41.831 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:41.836 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:05:41.850 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-29 10:05:41.861 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 10:05:41.864 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:05:41.866 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 27.7375ms
2025-08-29 10:05:41.867 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:41.868 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 40.7302ms
2025-08-29 10:05:46.410 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:05:46.413 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:46.414 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 3.4006ms
2025-08-29 10:05:46.423 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:05:46.427 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:46.428 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:46.429 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:46.433 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 10:05:46.442 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 10:05:46.443 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 12.8696ms
2025-08-29 10:05:46.445 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:46.446 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 23.0151ms
2025-08-29 10:05:46.884 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:46.887 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:46.888 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 4.0375ms
2025-08-29 10:05:46.890 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:46.892 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:46.893 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:46.894 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:46.898 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 10:05:46.902 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 10:05:46.904 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:05:46.906 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.4607ms
2025-08-29 10:05:46.907 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:46.907 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 17.2688ms
2025-08-29 10:05:48.823 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:05:48.826 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:48.827 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 204 null null 3.9482ms
2025-08-29 10:05:48.835 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:05:48.838 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:48.839 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:48.840 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:05:48.843 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-29 10:05:48.847 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 10:05:48.849 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:05:48.850 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 9.0587ms
2025-08-29 10:05:48.851 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:48.853 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 17.9951ms
2025-08-29 10:05:50.799 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:05:50.802 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:50.803 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:50.804 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:50.810 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 10:05:50.813 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 10:05:50.814 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 7.5052ms
2025-08-29 10:05:50.816 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:50.817 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 17.764ms
2025-08-29 10:05:51.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:51.280 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:51.281 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:51.282 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:51.286 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 10:05:51.292 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 10:05:51.294 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:05:51.295 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.8455ms
2025-08-29 10:05:51.296 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:51.297 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 19.1319ms
2025-08-29 10:05:52.326 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:05:52.328 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:52.329 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:52.330 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:05:52.334 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-29 10:05:52.339 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 10:05:52.341 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:05:52.342 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 10.5026ms
2025-08-29 10:05:52.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:52.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 18.6516ms
2025-08-29 10:05:53.656 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:05:53.659 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:53.659 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 3.4989ms
2025-08-29 10:05:53.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:05:53.673 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:53.674 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:53.675 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:53.679 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 10:05:53.683 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 10:05:53.685 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 8.0363ms
2025-08-29 10:05:53.686 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:05:53.688 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 18.2071ms
2025-08-29 10:05:54.136 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:54.138 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:54.139 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 3.4372ms
2025-08-29 10:05:54.142 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:05:54.145 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:54.146 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:54.147 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:05:54.151 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 10:05:54.157 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 10:05:54.159 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:05:54.161 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 12.1102ms
2025-08-29 10:05:54.162 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:05:54.164 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 21.1919ms
2025-08-29 10:05:54.751 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:05:54.753 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:54.753 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 204 null null 2.779ms
2025-08-29 10:05:54.760 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:05:54.763 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:05:54.764 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:54.765 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:05:54.770 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-29 10:05:54.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 10:05:54.777 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:05:54.778 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 11.389ms
2025-08-29 10:05:54.779 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:05:54.780 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 20.0837ms
2025-08-29 10:06:04.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null null
2025-08-29 10:06:04.260 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:06:04.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - 204 null null 3.0886ms
2025-08-29 10:06:04.263 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/Campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - null null
2025-08-29 10:06:04.265 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:06:04.266 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.DeleteCampaign (xbytechat.api)'
2025-08-29 10:06:04.270 +05:30 [INF] Route matched with {action = "DeleteCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:06:04.286 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-29 10:06:04.330 +05:30 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='cf68a9ec-8ccc-432b-a507-5fdc6e1f045a', @p1='33c9f5cd-6556-4abf-85cc-3fc995003855'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "CampaignRecipients"
WHERE "Id" = @p0;
DELETE FROM "Campaigns"
WHERE "Id" = @p1;
2025-08-29 10:06:04.388 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: update or delete on table "Campaigns" violates foreign key constraint "FK_MessageLogs_Campaigns_CampaignId" on table "MessageLogs"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: update or delete on table "Campaigns" violates foreign key constraint "FK_MessageLogs_Campaigns_CampaignId" on table "MessageLogs"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: MessageLogs
    ConstraintName: FK_MessageLogs_Campaigns_CampaignId
    File: ri_triggers.c
    Line: 2633
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: update or delete on table "Campaigns" violates foreign key constraint "FK_MessageLogs_Campaigns_CampaignId" on table "MessageLogs"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: update or delete on table "Campaigns" violates foreign key constraint "FK_MessageLogs_Campaigns_CampaignId" on table "MessageLogs"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: MessageLogs
    ConstraintName: FK_MessageLogs_Campaigns_CampaignId
    File: ri_triggers.c
    Line: 2633
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-29 10:06:06.246 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.DeleteCampaign (xbytechat.api) in 1974.876ms
2025-08-29 10:06:06.247 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.DeleteCampaign (xbytechat.api)'
2025-08-29 10:06:06.324 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: update or delete on table "Campaigns" violates foreign key constraint "FK_MessageLogs_Campaigns_CampaignId" on table "MessageLogs"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: update or delete on table "Campaigns" violates foreign key constraint "FK_MessageLogs_Campaigns_CampaignId" on table "MessageLogs"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: MessageLogs
    ConstraintName: FK_MessageLogs_Campaigns_CampaignId
    File: ri_triggers.c
    Line: 2633
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.DeleteCampaignAsync(Guid id) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 233
   at xbytechat.api.Features.CampaignModule.Controllers.CampaignController.DeleteCampaign(Guid id) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Controllers\CampaignController.cs:line 263
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 10:06:07.816 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/Campaign/33c9f5cd-6556-4abf-85cc-3fc995003855 - 500 null application/json; charset=utf-8 3552.9865ms
2025-08-29 10:06:13.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:06:13.956 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:06:13.957 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 204 null null 3.2667ms
2025-08-29 10:06:13.964 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 10:06:13.967 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:06:13.968 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:06:13.969 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:06:13.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-29 10:06:13.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 10:06:13.981 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:06:13.982 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 11.2342ms
2025-08-29 10:06:13.984 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 10:06:13.986 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 21.4248ms
2025-08-29 10:06:27.224 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/analytics/:campaignId/summary - null null
2025-08-29 10:06:27.227 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:06:27.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/analytics/:campaignId/summary - 204 null null 3.8412ms
2025-08-29 10:06:27.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - null null
2025-08-29 10:06:27.237 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:06:27.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - 404 0 null 3.4555ms
2025-08-29 10:06:27.240 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary, Response status code: 404
2025-08-29 10:08:44.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:08:44.854 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:44.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.179ms
2025-08-29 10:08:44.861 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:08:44.864 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:44.865 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:08:44.866 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:08:45.001 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 10:08:45.003 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:08:45.004 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 136.7907ms
2025-08-29 10:08:45.005 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:08:45.006 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 145.1839ms
2025-08-29 10:08:49.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:08:49.350 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:49.351 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 4.4733ms
2025-08-29 10:08:49.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:08:49.363 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:49.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:08:49.365 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:08:49.370 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 10:08:49.374 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 10:08:49.376 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 9.0779ms
2025-08-29 10:08:49.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:08:49.378 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 17.7584ms
2025-08-29 10:08:49.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:08:49.826 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:49.827 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 3.0666ms
2025-08-29 10:08:49.830 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:08:49.832 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:49.833 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:08:49.834 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:08:49.837 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 10:08:49.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 10:08:49.844 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:08:49.845 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 10.0497ms
2025-08-29 10:08:49.846 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:08:49.847 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 17.6868ms
2025-08-29 10:08:51.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:08:51.531 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:51.532 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 3.1977ms
2025-08-29 10:08:51.534 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:08:51.536 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:08:51.537 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:08:51.538 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:08:51.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:08:51.545 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:08:51.547 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:08:51.548 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 9.5213ms
2025-08-29 10:08:51.549 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:08:51.550 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.1888ms
2025-08-29 10:09:06.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:09:06.419 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:09:06.420 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 2.9698ms
2025-08-29 10:09:06.422 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:09:06.424 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:09:06.425 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:09:06.426 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:09:06.430 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:09:06.434 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:09:06.436 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:09:06.437 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 8.9269ms
2025-08-29 10:09:06.438 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:09:06.439 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 16.3527ms
2025-08-29 10:11:28.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 10:11:28.862 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:11:28.863 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.781ms
2025-08-29 10:11:28.870 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 10:11:28.873 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:11:28.874 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:11:28.874 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 10:11:28.879 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 10:11:28.884 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 10:11:28.891 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 10:11:28.893 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 10:11:28.894 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 10:11:28.895 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 10:11:28.897 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:11:28.898 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 22.065ms
2025-08-29 10:11:28.899 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:11:28.900 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 30.3399ms
2025-08-29 10:11:28.903 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:11:28.904 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:11:28.905 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.677ms
2025-08-29 10:11:28.908 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:11:28.909 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:11:28.910 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:11:28.911 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:11:28.914 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:11:28.920 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1192ms
2025-08-29 10:11:28.921 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:11:28.922 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.106ms
2025-08-29 10:11:29.002 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:11:29.006 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:11:29.007 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:11:29.008 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:11:29.011 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:11:29.014 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.2172ms
2025-08-29 10:11:29.017 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:11:29.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.2966ms
2025-08-29 10:12:06.404 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 10:12:06.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 10:12:06.422 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:06.425 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:06.426 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 22.233ms
2025-08-29 10:12:06.427 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 9.709ms
2025-08-29 10:12:06.432 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 10:12:06.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 10:12:06.442 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:06.444 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:06.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 10:12:06.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 10:12:06.449 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:12:06.449 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 10:12:06.458 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 10:12:06.461 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:12:06.462 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 11.0734ms
2025-08-29 10:12:06.463 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 10:12:06.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 24.663ms
2025-08-29 10:12:06.467 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 10:12:06.469 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:06.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.7317ms
2025-08-29 10:12:06.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 10:12:06.474 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:06.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:06.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 10:12:06.481 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:12:06.487 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 10:12:06.489 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:12:06.490 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:12:06.510 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 26.899ms
2025-08-29 10:12:06.510 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 57.2836ms
2025-08-29 10:12:06.511 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:06.512 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 10:12:06.512 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 40.0027ms
2025-08-29 10:12:06.513 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 81.7417ms
2025-08-29 10:12:11.886 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:12:11.888 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:11.889 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.9781ms
2025-08-29 10:12:11.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:12:11.893 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:11.894 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:11.894 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:12:11.896 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:12:11.897 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.6534ms
2025-08-29 10:12:11.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:11.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 8.2439ms
2025-08-29 10:12:12.988 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 10:12:12.990 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:12.991 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.3722ms
2025-08-29 10:12:12.994 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 10:12:12.997 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:12.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:12.999 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:12:13.001 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:12:13.002 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.2029ms
2025-08-29 10:12:13.003 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:13.004 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 9.4892ms
2025-08-29 10:12:13.030 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 10:12:13.032 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:13.033 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:13.034 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:12:13.036 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:12:13.037 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.1859ms
2025-08-29 10:12:13.038 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:13.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 8.9171ms
2025-08-29 10:12:16.622 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:12:16.624 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:12:16.625 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:16.626 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:12:16.627 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:12:16.629 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.4802ms
2025-08-29 10:12:16.630 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:12:16.631 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 9.0913ms
2025-08-29 10:13:08.717 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 10:13:08.724 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 10:13:08.726 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:13:08.735 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:13:08.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 23.5756ms
2025-08-29 10:13:08.743 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 18.9085ms
2025-08-29 10:13:08.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 10:13:08.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 10:13:08.756 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 10:13:08.758 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:13:08.760 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:13:08.762 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:13:08.763 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 29.4676ms
2025-08-29 10:13:08.764 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 23.4814ms
2025-08-29 10:13:08.764 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 10:13:08.770 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 10:13:08.771 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:13:08.773 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:13:08.776 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 10:13:08.804 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 10:13:08.804 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 30.3015ms
2025-08-29 10:13:08.838 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 10:13:08.838 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 32.9388ms
2025-08-29 10:13:08.854 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 10:13:08.865 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 10:13:08.958 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Inbox\Controllers\InboxController.cs:line 101
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 10:13:08.963 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 500 null application/json; charset=utf-8 207.2727ms
2025-08-29 10:13:08.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 500 null application/json; charset=utf-8 197.2502ms
2025-08-29 10:14:02.156 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-29 10:14:02.165 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:02.168 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 204 null null 13.0203ms
2025-08-29 10:14:02.177 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-29 10:14:02.181 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:02.182 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 10:14:02.186 +05:30 [INF] Route matched with {action = "GetPaginatedLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedLogs(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 10:14:02.213 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api) in 25.2667ms
2025-08-29 10:14:02.214 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 10:14:02.245 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs(PaginatedRequest request) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\ReportingModule\Controllers\MessageAnalyticsController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 10:14:02.251 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 500 null application/json; charset=utf-8 73.923ms
2025-08-29 10:14:08.430 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:14:08.433 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:08.434 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.2609ms
2025-08-29 10:14:08.437 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:14:08.439 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:08.440 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:14:08.441 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:14:08.445 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:14:08.446 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 2.6871ms
2025-08-29 10:14:08.447 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:14:08.448 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 401 null application/json; charset=utf-8 11.3944ms
2025-08-29 10:14:19.494 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 10:14:19.496 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:19.497 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.3529ms
2025-08-29 10:14:19.499 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 10:14:19.501 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:19.502 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:14:19.503 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 10:14:19.505 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 10:14:19.657 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 10:14:19.661 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 10:14:19.662 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 10:14:19.664 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 10:14:19.665 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 10:14:19.666 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:14:19.667 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 163.2259ms
2025-08-29 10:14:19.668 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:14:19.669 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 170.142ms
2025-08-29 10:14:19.673 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:14:19.676 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:19.676 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2045ms
2025-08-29 10:14:19.680 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:14:19.683 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:19.684 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:14:19.685 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:14:19.687 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:14:19.689 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.6756ms
2025-08-29 10:14:19.690 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:14:19.691 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.0738ms
2025-08-29 10:14:19.757 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:14:19.760 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:14:19.761 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:14:19.763 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:14:19.765 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:14:19.767 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.2482ms
2025-08-29 10:14:19.769 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:14:19.770 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.8996ms
2025-08-29 10:14:35.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - null null
2025-08-29 10:14:35.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - 404 0 null 2.5464ms
2025-08-29 10:14:35.376 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/AutoReplyFlows/business/null, Response status code: 404
2025-08-29 10:15:19.411 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 10:15:19.423 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:15:19.424 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 13.1029ms
2025-08-29 10:15:19.434 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 10:15:19.437 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:15:19.438 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 10:15:19.441 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-29 10:15:19.455 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-29 10:15:19.456 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:15:19.458 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 16.427ms
2025-08-29 10:15:19.460 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 10:15:19.460 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 26.172ms
2025-08-29 10:36:59.908 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 10:36:59.915 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:36:59.918 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 11.2435ms
2025-08-29 10:36:59.921 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 10:36:59.927 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:36:59.934 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:36:59.940 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 10:36:59.964 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 10:37:00.132 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 10:37:00.146 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 10:37:00.172 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 10:37:00.179 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 10:37:00.185 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 10:37:00.187 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 10:37:00.189 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:37:00.191 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 248.514ms
2025-08-29 10:37:00.192 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:37:00.194 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 273.0115ms
2025-08-29 10:37:00.197 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:37:00.200 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:00.201 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7053ms
2025-08-29 10:37:00.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:37:00.208 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:00.212 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:37:00.214 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:37:00.220 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:37:00.224 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:37:00.226 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.3764ms
2025-08-29 10:37:00.228 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:37:00.229 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.2613ms
2025-08-29 10:37:00.250 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:37:00.254 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:00.257 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:37:00.260 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:37:00.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:37:00.271 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:37:00.274 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6238ms
2025-08-29 10:37:00.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:37:00.278 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.1351ms
2025-08-29 10:37:00.342 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:37:00.345 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:00.351 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:37:00.352 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:37:00.357 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:37:00.361 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:37:00.364 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5433ms
2025-08-29 10:37:00.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:37:00.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.974ms
2025-08-29 10:37:06.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:37:06.827 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:06.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6377ms
2025-08-29 10:37:06.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:37:06.833 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:06.834 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:37:06.835 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:37:06.849 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 10:37:06.854 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:37:06.855 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 17.8924ms
2025-08-29 10:37:06.856 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:37:06.857 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 26.2634ms
2025-08-29 10:37:10.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:37:10.290 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:10.292 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 9.8235ms
2025-08-29 10:37:10.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 10:37:10.305 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:10.306 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:37:10.309 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:37:10.330 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 10:37:10.333 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 10:37:10.336 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 24.1131ms
2025-08-29 10:37:10.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 10:37:10.339 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 39.6583ms
2025-08-29 10:37:10.750 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:37:10.753 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:10.754 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 3.9712ms
2025-08-29 10:37:10.758 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 10:37:10.761 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:10.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:37:10.764 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 10:37:10.772 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 10:37:10.782 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 10:37:10.784 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:37:10.787 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 21.3674ms
2025-08-29 10:37:10.789 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 10:37:10.790 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 32.6191ms
2025-08-29 10:37:12.171 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:37:12.174 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:12.175 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 4.528ms
2025-08-29 10:37:12.180 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 10:37:12.185 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:12.187 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:37:12.189 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 10:37:12.200 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 10:37:12.210 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 10:37:12.216 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:37:12.219 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 26.7013ms
2025-08-29 10:37:12.221 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 10:37:12.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 43.2599ms
2025-08-29 10:37:20.990 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:37:20.996 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:20.997 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.8464ms
2025-08-29 10:37:21.004 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 10:37:21.007 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:37:21.008 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:37:21.010 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 10:37:21.019 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 10:37:21.023 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:37:21.025 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.4456ms
2025-08-29 10:37:21.027 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 10:37:21.028 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 24.6231ms
2025-08-29 10:38:19.478 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 10:38:19.484 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:38:19.485 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.2863ms
2025-08-29 10:38:19.487 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 10:38:19.489 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:38:19.490 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:38:19.491 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 10:38:19.493 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 10:38:19.495 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 10:38:19.505 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 10:38:19.514 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 10:38:19.517 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 10:38:19.517 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 10:38:19.519 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:38:19.520 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 27.6351ms
2025-08-29 10:38:19.521 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:38:19.522 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 34.692ms
2025-08-29 10:38:19.525 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:38:19.527 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:38:19.528 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0759ms
2025-08-29 10:38:19.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:38:19.535 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:38:19.537 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:38:19.538 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:38:19.541 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:38:19.543 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.7775ms
2025-08-29 10:38:19.545 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:38:19.546 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.4908ms
2025-08-29 10:38:19.620 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:38:19.624 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:38:19.626 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:38:19.628 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:38:19.632 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:38:19.634 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.7316ms
2025-08-29 10:38:19.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:38:19.638 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.7943ms
2025-08-29 10:38:32.596 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-08-29 10:38:32.599 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:38:32.600 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 3.5772ms
2025-08-29 10:38:32.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-08-29 10:38:32.606 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:38:32.607 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 10:38:32.609 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 10:38:32.693 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 82.9194ms
2025-08-29 10:38:32.695 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 10:38:32.721 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts(String tab, Int32 page, Int32 pageSize) in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 135
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 10:38:32.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 500 null application/json; charset=utf-8 145.3036ms
2025-08-29 10:38:32.920 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 10:38:32.926 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 10:38:32.928 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 10:38:32.978 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 47.9037ms
2025-08-29 10:38:32.980 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 10:38:33.012 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 10:38:33.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 100.9821ms
2025-08-29 10:38:34.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 10:38:34.910 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 10:38:34.910 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 10:38:34.947 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 35.5872ms
2025-08-29 10:38:34.949 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 10:38:34.983 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 10:38:34.990 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 82.9473ms
2025-08-29 10:38:37.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reminders - null null
2025-08-29 10:38:37.540 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.RemindersController.GetAllReminders (xbytechat.api)'
2025-08-29 10:38:37.552 +05:30 [INF] Route matched with {action = "GetAllReminders", controller = "Reminders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllReminders() on controller xbytechat.api.CRM.Controllers.RemindersController (xbytechat.api).
2025-08-29 10:38:37.594 +05:30 [INF] Executing ObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:38:37.595 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.RemindersController.GetAllReminders (xbytechat.api) in 41.759ms
2025-08-29 10:38:37.596 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.RemindersController.GetAllReminders (xbytechat.api)'
2025-08-29 10:38:37.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reminders - 500 null application/json; charset=utf-8 78.1722ms
2025-08-29 10:59:05.637 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 10:59:05.637 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 10:59:05.642 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:05.642 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:05.643 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 7.4473ms
2025-08-29 10:59:05.643 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 7.5016ms
2025-08-29 10:59:05.650 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 10:59:05.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 10:59:05.655 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:05.655 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:05.658 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 10:59:05.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 10:59:05.660 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:05.660 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 10:59:05.822 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 10:59:05.825 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:59:05.828 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 166.5095ms
2025-08-29 10:59:05.829 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 10:59:05.830 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 180.2626ms
2025-08-29 10:59:05.835 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 10:59:05.838 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:05.839 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.9485ms
2025-08-29 10:59:05.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 10:59:05.845 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:05.847 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:05.848 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:05.851 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:59:05.856 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.7047ms
2025-08-29 10:59:05.857 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:05.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 15.6756ms
2025-08-29 10:59:05.910 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 10:59:05.921 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 10:59:05.924 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 261.7719ms
2025-08-29 10:59:05.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 10:59:05.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 274.8189ms
2025-08-29 10:59:08.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:59:08.335 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:08.336 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.1101ms
2025-08-29 10:59:08.339 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:59:08.341 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:08.342 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:08.342 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:08.348 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 10:59:08.351 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:59:08.353 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 9.1744ms
2025-08-29 10:59:08.354 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:08.355 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 15.9672ms
2025-08-29 10:59:13.669 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:59:13.671 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:13.692 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 22.8019ms
2025-08-29 10:59:13.694 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 10:59:13.697 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:13.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 10:59:13.723 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:13.817 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 10:59:13.938 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='4685d534-2b76-40b1-9dff-93c5f065a18d', @p1='4de38b09-53c8-4238-998e-f17bec9a7641', @p2='69829321-816d-4302-9fcc-36622aff0eba', @p3='7adf2dce-ba79-472e-958a-8f11641bc8d1', @p4='83f291c6-9f73-44f0-9403-4127e6627f6b', @p5='a5b1364e-3597-45f0-a79a-c17a2252d069', @p6='b9788216-f677-4ecb-a509-797a6536347a', @p7='baaa9136-5516-4167-b841-a0b43cddad19', @p8='d2a6752e-141e-43dd-bdfd-7462ef1f7eae', @p9='d55f478a-bcc9-4db1-8f1c-6b4910974065', @p10='efbdf94b-a820-4982-8928-b786f7e3b5bd', @p11='f07d326b-c751-4a25-893c-216b18ec7bca', @p12='1aab5061-882e-4e4d-b3f4-6009b980f0b7', @p13='2025-08-29T05:29:13.9082031Z' (DbType = DateTime), @p14='system', @p15='True', @p16='30000000-0000-0000-0000-000000000001', @p17='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p18='461735b0-55f7-4f16-ba68-d0e952cd3691', @p19='2025-08-29T05:29:13.9082356Z' (DbType = DateTime), @p20='system', @p21='True', @p22='29461562-ef9c-48c0-a606-482ff57b8f95', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='4823c790-7c13-4fc1-9626-bb50c3b1f355', @p25='2025-08-29T05:29:13.9083347Z' (DbType = DateTime), @p26='system', @p27='True', @p28='974af1f9-3caa-4857-a1a7-48462c389332', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='4f1df179-037e-4d04-a913-e32f6446b38e', @p31='2025-08-29T05:29:13.8541888Z' (DbType = DateTime), @p32='system', @p33='True', @p34='821480c6-1464-415e-bba8-066fcb4e7e63', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='51e7b8ab-830a-4d81-b305-06982c807db7', @p37='2025-08-29T05:29:13.9082453Z' (DbType = DateTime), @p38='system', @p39='True', @p40='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='7ebf1a57-1338-4112-8bf8-a4dc3fdd798c', @p43='2025-08-29T05:29:13.9037429Z' (DbType = DateTime), @p44='system', @p45='True', @p46='30000000-0000-0000-0000-000000000002', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='9b5bc7fe-75b9-454a-938b-49efd2136ccb', @p49='2025-08-29T05:29:13.9083561Z' (DbType = DateTime), @p50='system', @p51='True', @p52='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='af1f2dac-6eb3-4faf-8d1a-b146722f8689', @p55='2025-08-29T05:29:13.9082109Z' (DbType = DateTime), @p56='system', @p57='True', @p58='0485154c-dde5-4732-a7aa-a379c77a5b27', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='be5e84c0-1905-4238-a18b-a566e57db7a9', @p61='2025-08-29T05:29:13.9083158Z' (DbType = DateTime), @p62='system', @p63='True', @p64='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='c53aa0aa-a038-47b3-88f0-c8c625bd551e', @p67='2025-08-29T05:29:13.9082884Z' (DbType = DateTime), @p68='system', @p69='True', @p70='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='c7388cfa-0836-4a80-83b3-930254adb54b', @p73='2025-08-29T05:29:13.9083087Z' (DbType = DateTime), @p74='system', @p75='True', @p76='c819f1bd-422d-4609-916c-cc185fe44ab0', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='d1dea345-1e74-4cbb-89b8-2e80a5e58452', @p79='2025-08-29T05:29:13.9081942Z' (DbType = DateTime), @p80='system', @p81='True', @p82='30000000-0000-0000-0000-000000000004', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='e2332d31-2c21-4532-9e55-e6a9a1f4ea3b', @p85='2025-08-29T05:29:13.9081713Z' (DbType = DateTime), @p86='system', @p87='True', @p88='30000000-0000-0000-0000-000000000003', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
2025-08-29 10:59:13.952 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:59:13.953 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 228.9662ms
2025-08-29 10:59:13.954 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 10:59:13.955 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 260.7693ms
2025-08-29 10:59:13.957 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:59:13.959 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:13.960 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:13.961 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:13.965 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 10:59:13.968 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:59:13.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 7.072ms
2025-08-29 10:59:13.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:13.971 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 13.6206ms
2025-08-29 10:59:14.997 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 10:59:14.999 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:15.000 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 10:59:15.001 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:15.004 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 10:59:15.015 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='1aab5061-882e-4e4d-b3f4-6009b980f0b7', @p1='461735b0-55f7-4f16-ba68-d0e952cd3691', @p2='4823c790-7c13-4fc1-9626-bb50c3b1f355', @p3='4f1df179-037e-4d04-a913-e32f6446b38e', @p4='51e7b8ab-830a-4d81-b305-06982c807db7', @p5='7ebf1a57-1338-4112-8bf8-a4dc3fdd798c', @p6='9b5bc7fe-75b9-454a-938b-49efd2136ccb', @p7='af1f2dac-6eb3-4faf-8d1a-b146722f8689', @p8='be5e84c0-1905-4238-a18b-a566e57db7a9', @p9='c53aa0aa-a038-47b3-88f0-c8c625bd551e', @p10='c7388cfa-0836-4a80-83b3-930254adb54b', @p11='d1dea345-1e74-4cbb-89b8-2e80a5e58452', @p12='e2332d31-2c21-4532-9e55-e6a9a1f4ea3b', @p13='43bda454-b44c-43f4-9614-6116966ea201', @p14='2025-08-29T05:29:15.0077949Z' (DbType = DateTime), @p15='system', @p16='True', @p17='30000000-0000-0000-0000-000000000003', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='655ef95b-14a6-4c41-8198-229303c3cc64', @p20='2025-08-29T05:29:15.0075874Z' (DbType = DateTime), @p21='system', @p22='True', @p23='821480c6-1464-415e-bba8-066fcb4e7e63', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='68fcb6d7-aae0-48dd-875a-dadcd4c2682d', @p26='2025-08-29T05:29:15.0081450Z' (DbType = DateTime), @p27='system', @p28='True', @p29='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='6e76df7f-aaa3-40e0-b1d8-480e183ddaff', @p32='2025-08-29T05:29:15.0080827Z' (DbType = DateTime), @p33='system', @p34='True', @p35='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='7a7581b3-d76f-4329-9f6a-e29204134846', @p38='2025-08-29T05:29:15.0081781Z' (DbType = DateTime), @p39='system', @p40='True', @p41='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='7c3d5960-17bf-4ca0-a856-f2452bde8fb3', @p44='2025-08-29T05:29:15.0078712Z' (DbType = DateTime), @p45='system', @p46='True', @p47='30000000-0000-0000-0000-000000000004', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='7e3f9abe-2734-4262-84e9-6fc95ed25fd0', @p50='2025-08-29T05:29:15.0080384Z' (DbType = DateTime), @p51='system', @p52='True', @p53='29461562-ef9c-48c0-a606-482ff57b8f95', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='872c0acb-023b-4dbf-9165-e5eff016653e', @p56='2025-08-29T05:29:15.0076959Z' (DbType = DateTime), @p57='system', @p58='True', @p59='30000000-0000-0000-0000-000000000002', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='9cda2e42-ccef-47f2-a2e1-913544528b49', @p62='2025-08-29T05:29:15.0080145Z' (DbType = DateTime), @p63='system', @p64='True', @p65='0485154c-dde5-4732-a7aa-a379c77a5b27', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='a2aa4204-0ac5-44dc-a33c-391bd0e9cf4c', @p68='2025-08-29T05:29:15.0081632Z' (DbType = DateTime), @p69='system', @p70='True', @p71='974af1f9-3caa-4857-a1a7-48462c389332', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='a6573abe-1cf4-40e0-b897-dafcb6f98010', @p74='2025-08-29T05:29:15.0081010Z' (DbType = DateTime), @p75='system', @p76='True', @p77='c819f1bd-422d-4609-916c-cc185fe44ab0', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='d93dbcfe-c18f-40af-bb1b-7ceb2279d4f1', @p80='2025-08-29T05:29:15.0080526Z' (DbType = DateTime), @p81='system', @p82='True', @p83='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='ee25bd22-bf1b-4bc8-b04b-bb74e31c26f0', @p86='2025-08-29T05:29:15.0079140Z' (DbType = DateTime), @p87='system', @p88='True', @p89='30000000-0000-0000-0000-000000000001', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 10:59:15.019 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:59:15.020 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 18.6051ms
2025-08-29 10:59:15.022 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 10:59:15.023 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 26.5333ms
2025-08-29 10:59:15.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 10:59:15.028 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:15.029 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:15.030 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:15.033 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 10:59:15.036 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 10:59:15.037 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.4254ms
2025-08-29 10:59:15.038 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 10:59:15.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.9495ms
2025-08-29 10:59:22.504 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 10:59:22.506 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:22.507 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4261ms
2025-08-29 10:59:22.510 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 10:59:22.511 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:22.513 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:59:22.513 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 10:59:22.516 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 10:59:22.519 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 10:59:22.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 10:59:22.534 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 10:59:22.537 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 10:59:22.538 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 10:59:22.540 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 10:59:22.541 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:59:22.542 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 27.7326ms
2025-08-29 10:59:22.543 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 10:59:22.544 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 34.4662ms
2025-08-29 10:59:22.547 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:59:22.549 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:22.550 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4752ms
2025-08-29 10:59:22.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:59:22.555 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:22.556 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:59:22.558 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:22.562 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:59:22.565 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:59:22.566 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2845ms
2025-08-29 10:59:22.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:59:22.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.2879ms
2025-08-29 10:59:22.584 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:59:22.587 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:22.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:59:22.590 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:22.597 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:59:22.600 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:59:22.602 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7132ms
2025-08-29 10:59:22.604 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:59:22.605 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.0453ms
2025-08-29 10:59:22.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 10:59:22.668 +05:30 [INF] CORS policy execution successful.
2025-08-29 10:59:22.669 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:59:22.671 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 10:59:22.679 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 10:59:22.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 10:59:22.683 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1635ms
2025-08-29 10:59:22.685 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 10:59:22.687 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.9336ms
2025-08-29 11:01:22.519 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:22.523 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:22.524 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4389ms
2025-08-29 11:01:22.531 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:22.533 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:22.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:22.536 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:22.540 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:22.544 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:22.546 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5303ms
2025-08-29 11:01:22.547 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:22.548 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.5214ms
2025-08-29 11:01:22.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:22.616 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:22.618 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:22.619 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:22.626 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:22.630 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:22.632 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2802ms
2025-08-29 11:01:22.634 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:22.635 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.0933ms
2025-08-29 11:01:22.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:22.695 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:22.696 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:22.697 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:22.700 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:22.704 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:22.705 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4223ms
2025-08-29 11:01:22.706 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:22.708 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.8107ms
2025-08-29 11:01:31.151 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 11:01:31.154 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:31.154 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9359ms
2025-08-29 11:01:31.173 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 11:01:31.175 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:31.176 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:01:31.177 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 11:01:31.179 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 11:01:31.181 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 11:01:31.185 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 11:01:31.195 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 11:01:31.197 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 11:01:31.198 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 11:01:31.199 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 11:01:31.200 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:31.200 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 22.5102ms
2025-08-29 11:01:31.201 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:01:31.202 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 28.9275ms
2025-08-29 11:01:31.207 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:31.209 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:31.209 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.875ms
2025-08-29 11:01:31.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:31.213 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:31.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:31.215 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:31.218 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:31.221 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:31.222 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.255ms
2025-08-29 11:01:31.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:31.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.8032ms
2025-08-29 11:01:31.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:31.239 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:31.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:31.241 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:31.244 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:31.249 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:31.250 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7079ms
2025-08-29 11:01:31.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:31.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.5039ms
2025-08-29 11:01:31.330 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:31.334 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:31.335 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:31.337 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:31.347 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:31.353 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:31.357 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.94ms
2025-08-29 11:01:31.359 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:31.361 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.0339ms
2025-08-29 11:01:35.038 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:35.040 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:35.041 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:35.042 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:35.045 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:35.048 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:35.049 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1638ms
2025-08-29 11:01:35.050 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:35.051 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.6857ms
2025-08-29 11:01:35.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:35.074 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:35.076 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:35.077 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:35.082 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:35.087 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:35.088 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.9009ms
2025-08-29 11:01:35.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:35.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.3261ms
2025-08-29 11:01:35.128 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:01:35.130 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:01:35.131 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:35.132 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:01:35.137 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:01:35.140 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:01:35.141 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7831ms
2025-08-29 11:01:35.142 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:01:35.143 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0697ms
2025-08-29 11:02:20.682 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 11:02:20.985 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:20.986 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 304.0578ms
2025-08-29 11:02:21.318 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 11:02:21.482 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:21.497 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:02:21.498 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 11:02:21.535 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 11:02:21.537 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 11:02:21.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 11:02:21.621 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 11:02:21.700 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 11:02:21.701 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 11:02:21.715 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:21.722 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 188.0055ms
2025-08-29 11:02:21.730 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:02:21.746 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 427.8321ms
2025-08-29 11:02:21.749 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:02:21.755 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:21.755 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0683ms
2025-08-29 11:02:21.785 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:02:21.787 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:21.823 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:21.825 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:21.894 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:21.936 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 81.6069ms
2025-08-29 11:02:21.938 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:22.143 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 358.5657ms
2025-08-29 11:02:22.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:02:22.402 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:22.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:22.429 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:23.011 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:23.013 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.7425ms
2025-08-29 11:02:23.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:23.035 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 635.073ms
2025-08-29 11:02:27.028 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 11:02:27.031 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:27.032 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 3.6674ms
2025-08-29 11:02:27.033 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 11:02:27.037 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:27.038 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 5.1951ms
2025-08-29 11:02:27.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 11:02:27.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 11:02:27.048 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:27.050 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:27.051 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 11:02:27.051 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 11:02:27.052 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:27.053 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 11:02:27.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 11:02:27.059 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:27.062 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 7.2385ms
2025-08-29 11:02:27.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 11:02:27.064 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 11:02:27.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 22.9275ms
2025-08-29 11:02:27.068 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 11:02:27.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 11:02:27.073 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 17.1181ms
2025-08-29 11:02:27.076 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:27.077 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 11:02:27.078 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 4.8826ms
2025-08-29 11:02:27.079 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 33.6603ms
2025-08-29 11:02:27.086 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 11:02:27.089 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:27.090 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:27.092 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:27.094 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:27.096 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.1847ms
2025-08-29 11:02:27.098 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:27.099 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 13.4308ms
2025-08-29 11:02:28.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:28.023 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:28.024 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.2032ms
2025-08-29 11:02:28.027 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:28.029 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:28.029 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:28.030 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:28.032 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:28.033 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.1987ms
2025-08-29 11:02:28.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:28.035 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.9828ms
2025-08-29 11:02:31.431 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:31.433 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:31.433 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.4485ms
2025-08-29 11:02:31.436 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:31.437 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:31.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:31.446 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:31.450 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:31.460 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='43bda454-b44c-43f4-9614-6116966ea201', @p1='655ef95b-14a6-4c41-8198-229303c3cc64', @p2='68fcb6d7-aae0-48dd-875a-dadcd4c2682d', @p3='6e76df7f-aaa3-40e0-b1d8-480e183ddaff', @p4='7a7581b3-d76f-4329-9f6a-e29204134846', @p5='7c3d5960-17bf-4ca0-a856-f2452bde8fb3', @p6='7e3f9abe-2734-4262-84e9-6fc95ed25fd0', @p7='872c0acb-023b-4dbf-9165-e5eff016653e', @p8='9cda2e42-ccef-47f2-a2e1-913544528b49', @p9='a2aa4204-0ac5-44dc-a33c-391bd0e9cf4c', @p10='a6573abe-1cf4-40e0-b897-dafcb6f98010', @p11='d93dbcfe-c18f-40af-bb1b-7ceb2279d4f1', @p12='ee25bd22-bf1b-4bc8-b04b-bb74e31c26f0', @p13='0222a2d6-dec7-4378-bdcf-dc3ec17cb521', @p14='2025-08-29T05:32:31.4533576Z' (DbType = DateTime), @p15='system', @p16='True', @p17='30000000-0000-0000-0000-000000000004', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='0b23bc3c-029a-4e94-8af2-c1e7bbd4e480', @p20='2025-08-29T05:32:31.4534299Z' (DbType = DateTime), @p21='system', @p22='True', @p23='c819f1bd-422d-4609-916c-cc185fe44ab0', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='10ab8ae4-4d4c-4c63-866a-78db036318d0', @p26='2025-08-29T05:32:31.4533448Z' (DbType = DateTime), @p27='system', @p28='True', @p29='30000000-0000-0000-0000-000000000003', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='2816a8c5-e145-43da-b166-a57e86787393', @p32='2025-08-29T05:32:31.4531730Z' (DbType = DateTime), @p33='system', @p34='True', @p35='821480c6-1464-415e-bba8-066fcb4e7e63', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='294c03e8-44b9-426e-9cc8-18273805d570', @p38='2025-08-29T05:32:31.4533700Z' (DbType = DateTime), @p39='system', @p40='True', @p41='30000000-0000-0000-0000-000000000001', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='33ed4424-4b8d-4431-9d8d-305c6d17179d', @p44='2025-08-29T05:32:31.4533774Z' (DbType = DateTime), @p45='system', @p46='True', @p47='0485154c-dde5-4732-a7aa-a379c77a5b27', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='3c62e594-cccb-4bb1-b9b1-8413c134c702', @p50='2025-08-29T05:32:31.4534460Z' (DbType = DateTime), @p51='system', @p52='True', @p53='974af1f9-3caa-4857-a1a7-48462c389332', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='559d5552-3e5b-417c-9b67-9f848f679d96', @p56='2025-08-29T05:32:31.4533289Z' (DbType = DateTime), @p57='system', @p58='True', @p59='30000000-0000-0000-0000-000000000002', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='a8de224c-65e3-4963-86ac-7bb5ce50b9b8', @p62='2025-08-29T05:32:31.4533832Z' (DbType = DateTime), @p63='system', @p64='True', @p65='29461562-ef9c-48c0-a606-482ff57b8f95', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='b18d4e44-9b24-4853-bc9c-43bd61319552', @p68='2025-08-29T05:32:31.4534400Z' (DbType = DateTime), @p69='system', @p70='True', @p71='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='c9077cef-72dd-49ec-bbfa-d09c7302735a', @p74='2025-08-29T05:32:31.4534185Z' (DbType = DateTime), @p75='system', @p76='True', @p77='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='ca5591c2-f445-4e7a-b75f-32a9a8eb5203', @p80='2025-08-29T05:32:31.4534025Z' (DbType = DateTime), @p81='system', @p82='True', @p83='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='e5cff20f-f25a-4a5d-b5f2-e66ebfeac639', @p86='2025-08-29T05:32:31.4534515Z' (DbType = DateTime), @p87='system', @p88='True', @p89='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:31.464 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:31.465 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 17.2968ms
2025-08-29 11:02:31.466 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:31.467 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 31.02ms
2025-08-29 11:02:31.469 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:31.471 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:31.472 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:31.473 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:31.477 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:31.481 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:31.482 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.9113ms
2025-08-29 11:02:31.483 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:31.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 14.5404ms
2025-08-29 11:02:32.484 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:32.486 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:32.487 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:32.488 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:32.503 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:32.511 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0222a2d6-dec7-4378-bdcf-dc3ec17cb521', @p1='0b23bc3c-029a-4e94-8af2-c1e7bbd4e480', @p2='10ab8ae4-4d4c-4c63-866a-78db036318d0', @p3='2816a8c5-e145-43da-b166-a57e86787393', @p4='294c03e8-44b9-426e-9cc8-18273805d570', @p5='33ed4424-4b8d-4431-9d8d-305c6d17179d', @p6='3c62e594-cccb-4bb1-b9b1-8413c134c702', @p7='559d5552-3e5b-417c-9b67-9f848f679d96', @p8='a8de224c-65e3-4963-86ac-7bb5ce50b9b8', @p9='b18d4e44-9b24-4853-bc9c-43bd61319552', @p10='c9077cef-72dd-49ec-bbfa-d09c7302735a', @p11='ca5591c2-f445-4e7a-b75f-32a9a8eb5203', @p12='e5cff20f-f25a-4a5d-b5f2-e66ebfeac639', @p13='0204fcc1-369a-4e35-bde4-dad2337fce1b', @p14='2025-08-29T05:32:32.5070496Z' (DbType = DateTime), @p15='system', @p16='True', @p17='0485154c-dde5-4732-a7aa-a379c77a5b27', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='0545771e-b07b-4862-8226-08e14cf30891', @p20='2025-08-29T05:32:32.5070913Z' (DbType = DateTime), @p21='system', @p22='True', @p23='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='1544580e-19c1-4a9a-9ba1-c72d7121aeae', @p26='2025-08-29T05:32:32.5070411Z' (DbType = DateTime), @p27='system', @p28='True', @p29='30000000-0000-0000-0000-000000000001', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='176be2f9-3a97-4baf-8106-783cec38a396', @p32='2025-08-29T05:32:32.5070565Z' (DbType = DateTime), @p33='system', @p34='True', @p35='29461562-ef9c-48c0-a606-482ff57b8f95', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='2a6658b3-421c-4000-bb99-bdb253d41a61', @p38='2025-08-29T05:32:32.5071136Z' (DbType = DateTime), @p39='system', @p40='True', @p41='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='3251418d-38fa-40be-8fc4-a30dacdd70c5', @p44='2025-08-29T05:32:32.5067935Z' (DbType = DateTime), @p45='system', @p46='True', @p47='821480c6-1464-415e-bba8-066fcb4e7e63', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='3880cf78-597d-4bfb-9a74-a282ea0da4c1', @p50='2025-08-29T05:32:32.5069870Z' (DbType = DateTime), @p51='system', @p52='True', @p53='30000000-0000-0000-0000-000000000004', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='4ed9955c-861b-48ec-9094-2677bea395c6', @p56='2025-08-29T05:32:32.5069248Z' (DbType = DateTime), @p57='system', @p58='True', @p59='30000000-0000-0000-0000-000000000002', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='5107f5de-4586-449e-8cf2-98c829d44f68', @p62='2025-08-29T05:32:32.5070997Z' (DbType = DateTime), @p63='system', @p64='True', @p65='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='7c2b535d-89f0-4d0e-924f-67f10528e40c', @p68='2025-08-29T05:32:32.5071069Z' (DbType = DateTime), @p69='system', @p70='True', @p71='c819f1bd-422d-4609-916c-cc185fe44ab0', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='9221ddbe-889f-475e-b9bc-1b82ae415d28', @p74='2025-08-29T05:32:32.5071203Z' (DbType = DateTime), @p75='system', @p76='True', @p77='974af1f9-3caa-4857-a1a7-48462c389332', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='b90219b9-696e-42eb-9097-af939463c921', @p80='2025-08-29T05:32:32.5069766Z' (DbType = DateTime), @p81='system', @p82='True', @p83='30000000-0000-0000-0000-000000000003', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='baecfeec-2a49-473a-8d72-dce448ca71ed', @p86='2025-08-29T05:32:32.5071269Z' (DbType = DateTime), @p87='system', @p88='True', @p89='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:32.513 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:32.514 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 25.2977ms
2025-08-29 11:02:32.515 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:32.516 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 31.6903ms
2025-08-29 11:02:32.518 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:32.520 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:32.521 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:32.522 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:32.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:32.527 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:32.528 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.8096ms
2025-08-29 11:02:32.529 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:32.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.524ms
2025-08-29 11:02:33.495 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:33.497 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:33.498 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:33.499 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:33.502 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:33.509 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0204fcc1-369a-4e35-bde4-dad2337fce1b', @p1='0545771e-b07b-4862-8226-08e14cf30891', @p2='1544580e-19c1-4a9a-9ba1-c72d7121aeae', @p3='176be2f9-3a97-4baf-8106-783cec38a396', @p4='2a6658b3-421c-4000-bb99-bdb253d41a61', @p5='3251418d-38fa-40be-8fc4-a30dacdd70c5', @p6='3880cf78-597d-4bfb-9a74-a282ea0da4c1', @p7='4ed9955c-861b-48ec-9094-2677bea395c6', @p8='5107f5de-4586-449e-8cf2-98c829d44f68', @p9='7c2b535d-89f0-4d0e-924f-67f10528e40c', @p10='9221ddbe-889f-475e-b9bc-1b82ae415d28', @p11='b90219b9-696e-42eb-9097-af939463c921', @p12='baecfeec-2a49-473a-8d72-dce448ca71ed', @p13='0412686e-90f3-421a-aa57-da44ffd0f38f', @p14='2025-08-29T05:32:33.5056930Z' (DbType = DateTime), @p15='system', @p16='True', @p17='30000000-0000-0000-0000-000000000001', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='1fee84de-a527-450f-bcab-5ca93da8d0e1', @p20='2025-08-29T05:32:33.5056482Z' (DbType = DateTime), @p21='system', @p22='True', @p23='30000000-0000-0000-0000-000000000003', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='22ccc691-fac2-40ff-b7fc-7334926f3031', @p26='2025-08-29T05:32:33.5058049Z' (DbType = DateTime), @p27='system', @p28='True', @p29='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='3072001b-141a-41d3-bd57-19200a1dced1', @p32='2025-08-29T05:32:33.5057661Z' (DbType = DateTime), @p33='system', @p34='True', @p35='c819f1bd-422d-4609-916c-cc185fe44ab0', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='359ab45e-f9bb-4a25-9e58-4693fb5b259d', @p38='2025-08-29T05:32:33.5057316Z' (DbType = DateTime), @p39='system', @p40='True', @p41='29461562-ef9c-48c0-a606-482ff57b8f95', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='43634a9e-8dba-4518-842b-2db318ae2181', @p44='2025-08-29T05:32:33.5056281Z' (DbType = DateTime), @p45='system', @p46='True', @p47='30000000-0000-0000-0000-000000000002', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='637eae66-3def-4dd9-8b96-ca6a83d35e99', @p50='2025-08-29T05:32:33.5057223Z' (DbType = DateTime), @p51='system', @p52='True', @p53='0485154c-dde5-4732-a7aa-a379c77a5b27', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='6465594b-5409-46db-a3e8-5373c446b540', @p56='2025-08-29T05:32:33.5050625Z' (DbType = DateTime), @p57='system', @p58='True', @p59='821480c6-1464-415e-bba8-066fcb4e7e63', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='bb5ac200-5f76-4fa9-85eb-53919fee2957', @p62='2025-08-29T05:32:33.5057982Z' (DbType = DateTime), @p63='system', @p64='True', @p65='974af1f9-3caa-4857-a1a7-48462c389332', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='c26096be-e7ab-4784-86b2-ee910b9feb76', @p68='2025-08-29T05:32:33.5056563Z' (DbType = DateTime), @p69='system', @p70='True', @p71='30000000-0000-0000-0000-000000000004', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='d2da1c6c-99e3-4a81-b27c-0f75d768eef5', @p74='2025-08-29T05:32:33.5057382Z' (DbType = DateTime), @p75='system', @p76='True', @p77='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='d4ea7520-015c-4f5b-873d-ccda823432db', @p80='2025-08-29T05:32:33.5057594Z' (DbType = DateTime), @p81='system', @p82='True', @p83='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='da4b8b4c-77ff-472d-b230-870e21e0ec7d', @p86='2025-08-29T05:32:33.5057908Z' (DbType = DateTime), @p87='system', @p88='True', @p89='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:33.513 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:33.514 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 13.6375ms
2025-08-29 11:02:33.515 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:33.515 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 20.9146ms
2025-08-29 11:02:33.518 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:33.519 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:33.520 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:33.521 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:33.524 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:33.527 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:33.528 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.6849ms
2025-08-29 11:02:33.529 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:33.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.594ms
2025-08-29 11:02:36.897 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:36.899 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:36.899 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.782ms
2025-08-29 11:02:36.902 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:36.904 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:36.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:36.905 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:36.908 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:36.923 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='0412686e-90f3-421a-aa57-da44ffd0f38f', @p1='1fee84de-a527-450f-bcab-5ca93da8d0e1', @p2='22ccc691-fac2-40ff-b7fc-7334926f3031', @p3='3072001b-141a-41d3-bd57-19200a1dced1', @p4='359ab45e-f9bb-4a25-9e58-4693fb5b259d', @p5='43634a9e-8dba-4518-842b-2db318ae2181', @p6='637eae66-3def-4dd9-8b96-ca6a83d35e99', @p7='6465594b-5409-46db-a3e8-5373c446b540', @p8='bb5ac200-5f76-4fa9-85eb-53919fee2957', @p9='c26096be-e7ab-4784-86b2-ee910b9feb76', @p10='d2da1c6c-99e3-4a81-b27c-0f75d768eef5', @p11='d4ea7520-015c-4f5b-873d-ccda823432db', @p12='da4b8b4c-77ff-472d-b230-870e21e0ec7d', @p13='081b57b5-b1cd-4925-a991-272059daf284', @p14='2025-08-29T05:32:36.9176962Z' (DbType = DateTime), @p15='system', @p16='True', @p17='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='28b53474-8bec-4661-aa64-49f8e9767608', @p20='2025-08-29T05:32:36.9176661Z' (DbType = DateTime), @p21='system', @p22='True', @p23='29461562-ef9c-48c0-a606-482ff57b8f95', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='2c8da676-91c1-4ec0-9434-8bbdafb9e966', @p26='2025-08-29T05:32:36.9174909Z' (DbType = DateTime), @p27='system', @p28='True', @p29='821480c6-1464-415e-bba8-066fcb4e7e63', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='30d1b382-9300-4566-ad3e-76bd17033f48', @p32='2025-08-29T05:32:36.9176848Z' (DbType = DateTime), @p33='system', @p34='True', @p35='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='3611ffcb-3d25-464a-834d-1373d6b16907', @p38='2025-08-29T05:32:36.9176903Z' (DbType = DateTime), @p39='system', @p40='True', @p41='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='3aa5eae4-076b-4bab-8db1-d1e805aad5c3', @p44='2025-08-29T05:32:36.9176933Z' (DbType = DateTime), @p45='system', @p46='True', @p47='c819f1bd-422d-4609-916c-cc185fe44ab0', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='52b42ebd-6be1-498b-ade7-511ee5a922e2', @p50='2025-08-29T05:32:36.9176633Z' (DbType = DateTime), @p51='system', @p52='True', @p53='0485154c-dde5-4732-a7aa-a379c77a5b27', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='997107a4-a5e1-41d9-b1fe-d374310a454d', @p56='2025-08-29T05:32:36.9176598Z' (DbType = DateTime), @p57='system', @p58='True', @p59='30000000-0000-0000-0000-000000000001', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='a08910cc-a936-4b01-b35f-d3727b1b49fb', @p62='2025-08-29T05:32:36.9176474Z' (DbType = DateTime), @p63='system', @p64='True', @p65='30000000-0000-0000-0000-000000000004', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='adea76e5-e802-4df2-82e0-db91c822e036', @p68='2025-08-29T05:32:36.9177027Z' (DbType = DateTime), @p69='system', @p70='True', @p71='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='e093fd73-8199-424d-862d-448b1d59b744', @p74='2025-08-29T05:32:36.9176393Z' (DbType = DateTime), @p75='system', @p76='True', @p77='30000000-0000-0000-0000-000000000003', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='e3cf31e5-0eb6-4ff6-84be-0d3c96cb65ef', @p80='2025-08-29T05:32:36.9176992Z' (DbType = DateTime), @p81='system', @p82='True', @p83='974af1f9-3caa-4857-a1a7-48462c389332', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='e444b3f4-5b37-4220-80dc-b6c75751beea', @p86='2025-08-29T05:32:36.9176081Z' (DbType = DateTime), @p87='system', @p88='True', @p89='30000000-0000-0000-0000-000000000002', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:36.927 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:36.928 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 21.1594ms
2025-08-29 11:02:36.929 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:36.930 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 27.7191ms
2025-08-29 11:02:36.932 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:36.935 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:36.936 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:36.937 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:36.940 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:36.942 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:36.943 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.4941ms
2025-08-29 11:02:36.944 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:36.945 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.4868ms
2025-08-29 11:02:37.776 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:37.778 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:37.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:37.780 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:37.783 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:37.791 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='081b57b5-b1cd-4925-a991-272059daf284', @p1='28b53474-8bec-4661-aa64-49f8e9767608', @p2='2c8da676-91c1-4ec0-9434-8bbdafb9e966', @p3='30d1b382-9300-4566-ad3e-76bd17033f48', @p4='3611ffcb-3d25-464a-834d-1373d6b16907', @p5='3aa5eae4-076b-4bab-8db1-d1e805aad5c3', @p6='52b42ebd-6be1-498b-ade7-511ee5a922e2', @p7='997107a4-a5e1-41d9-b1fe-d374310a454d', @p8='a08910cc-a936-4b01-b35f-d3727b1b49fb', @p9='adea76e5-e802-4df2-82e0-db91c822e036', @p10='e093fd73-8199-424d-862d-448b1d59b744', @p11='e3cf31e5-0eb6-4ff6-84be-0d3c96cb65ef', @p12='e444b3f4-5b37-4220-80dc-b6c75751beea', @p13='1345b703-4b1e-4b1a-892a-d11374cb49bd', @p14='2025-08-29T05:32:37.7877382Z' (DbType = DateTime), @p15='system', @p16='True', @p17='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='226abdfd-f4f7-4fdd-9ebb-d8a2b4d1eea0', @p20='2025-08-29T05:32:37.7876402Z' (DbType = DateTime), @p21='system', @p22='True', @p23='30000000-0000-0000-0000-000000000004', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='2eadd268-2c64-4f15-a2d8-4d2bd72a5b6a', @p26='2025-08-29T05:32:37.7876875Z' (DbType = DateTime), @p27='system', @p28='True', @p29='29461562-ef9c-48c0-a606-482ff57b8f95', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='3ac474f5-e8a0-4d04-a193-c35657521aa9', @p32='2025-08-29T05:32:37.7876363Z' (DbType = DateTime), @p33='system', @p34='True', @p35='30000000-0000-0000-0000-000000000003', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='4ef40062-bf00-4619-a010-71e727012383', @p38='2025-08-29T05:32:37.7877135Z' (DbType = DateTime), @p39='system', @p40='True', @p41='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='690ded8a-a6a9-4bda-9f10-673df358a499', @p44='2025-08-29T05:32:37.7877019Z' (DbType = DateTime), @p45='system', @p46='True', @p47='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='7313709a-8235-4df4-9dda-3e65120910d1', @p50='2025-08-29T05:32:37.7877063Z' (DbType = DateTime), @p51='system', @p52='True', @p53='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='a89a75bc-05b5-43e2-8ce0-327af12aaa76', @p56='2025-08-29T05:32:37.7877171Z' (DbType = DateTime), @p57='system', @p58='True', @p59='974af1f9-3caa-4857-a1a7-48462c389332', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='b0ceb57a-191b-4262-b887-13ffc09a3c34', @p62='2025-08-29T05:32:37.7876576Z' (DbType = DateTime), @p63='system', @p64='True', @p65='30000000-0000-0000-0000-000000000001', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='b80686f5-54bb-4173-9658-e3e523bee295', @p68='2025-08-29T05:32:37.7876281Z' (DbType = DateTime), @p69='system', @p70='True', @p71='30000000-0000-0000-0000-000000000002', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='bc98c196-10d2-423c-9241-7fd400a31c2b', @p74='2025-08-29T05:32:37.7877101Z' (DbType = DateTime), @p75='system', @p76='True', @p77='c819f1bd-422d-4609-916c-cc185fe44ab0', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='d609f298-b262-4aea-a0f3-ca1434797719', @p80='2025-08-29T05:32:37.7876669Z' (DbType = DateTime), @p81='system', @p82='True', @p83='0485154c-dde5-4732-a7aa-a379c77a5b27', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='ed42d61c-2103-48ac-a640-a16a038189b9', @p86='2025-08-29T05:32:37.7875532Z' (DbType = DateTime), @p87='system', @p88='True', @p89='821480c6-1464-415e-bba8-066fcb4e7e63', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:37.794 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:37.795 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 14.3615ms
2025-08-29 11:02:37.796 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:37.797 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 20.9372ms
2025-08-29 11:02:37.800 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:37.801 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:37.802 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:37.803 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:37.806 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:37.809 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:37.809 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.5376ms
2025-08-29 11:02:37.810 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:37.811 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.5142ms
2025-08-29 11:02:38.692 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:38.694 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:38.695 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:38.696 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:38.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:38.708 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='1345b703-4b1e-4b1a-892a-d11374cb49bd', @p1='226abdfd-f4f7-4fdd-9ebb-d8a2b4d1eea0', @p2='2eadd268-2c64-4f15-a2d8-4d2bd72a5b6a', @p3='3ac474f5-e8a0-4d04-a193-c35657521aa9', @p4='4ef40062-bf00-4619-a010-71e727012383', @p5='690ded8a-a6a9-4bda-9f10-673df358a499', @p6='7313709a-8235-4df4-9dda-3e65120910d1', @p7='a89a75bc-05b5-43e2-8ce0-327af12aaa76', @p8='b0ceb57a-191b-4262-b887-13ffc09a3c34', @p9='b80686f5-54bb-4173-9658-e3e523bee295', @p10='bc98c196-10d2-423c-9241-7fd400a31c2b', @p11='d609f298-b262-4aea-a0f3-ca1434797719', @p12='ed42d61c-2103-48ac-a640-a16a038189b9', @p13='13f7cc1b-2ee3-4206-9156-6da6146d884f', @p14='2025-08-29T05:32:38.7048326Z' (DbType = DateTime), @p15='system', @p16='True', @p17='29461562-ef9c-48c0-a606-482ff57b8f95', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='1a07e03f-0130-4609-bde2-8b27512b81d9', @p20='2025-08-29T05:32:38.7048284Z' (DbType = DateTime), @p21='system', @p22='True', @p23='0485154c-dde5-4732-a7aa-a379c77a5b27', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='1ec04866-b021-40d4-8f22-0a15e7ae1a2f', @p26='2025-08-29T05:32:38.7048356Z' (DbType = DateTime), @p27='system', @p28='True', @p29='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='3f2913ef-26ea-4a9a-b267-cbe8f56be8f2', @p32='2025-08-29T05:32:38.7026220Z' (DbType = DateTime), @p33='system', @p34='True', @p35='821480c6-1464-415e-bba8-066fcb4e7e63', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='5c1337c1-fc6e-4b1a-a7fa-3861e7d2dc2e', @p38='2025-08-29T05:32:38.7048190Z' (DbType = DateTime), @p39='system', @p40='True', @p41='30000000-0000-0000-0000-000000000001', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='6503c007-29cb-4eb3-8fb9-d65f9e5a850c', @p44='2025-08-29T05:32:38.7048547Z' (DbType = DateTime), @p45='system', @p46='True', @p47='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='83373b92-4a85-4f33-8534-396925c8858b', @p50='2025-08-29T05:32:38.7048516Z' (DbType = DateTime), @p51='system', @p52='True', @p53='974af1f9-3caa-4857-a1a7-48462c389332', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='a0fa085e-ec23-47f4-827a-5841596968ae', @p56='2025-08-29T05:32:38.7048418Z' (DbType = DateTime), @p57='system', @p58='True', @p59='c819f1bd-422d-4609-916c-cc185fe44ab0', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='ba00f17e-6600-44b7-93df-bd9ac4d66783', @p62='2025-08-29T05:32:38.7048109Z' (DbType = DateTime), @p63='system', @p64='True', @p65='30000000-0000-0000-0000-000000000003', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='bb016027-ee92-44f6-9e2f-c4e5dd0d16fb', @p68='2025-08-29T05:32:38.7048483Z' (DbType = DateTime), @p69='system', @p70='True', @p71='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='edbcdda4-c2de-4c90-9227-a9cfc7890dca', @p74='2025-08-29T05:32:38.7047971Z' (DbType = DateTime), @p75='system', @p76='True', @p77='30000000-0000-0000-0000-000000000002', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='f0eff2fe-48f8-4a4b-ab34-80c733bd228c', @p80='2025-08-29T05:32:38.7048388Z' (DbType = DateTime), @p81='system', @p82='True', @p83='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='f14e319a-2583-4d3a-aa9e-dc2143ce28fd', @p86='2025-08-29T05:32:38.7048151Z' (DbType = DateTime), @p87='system', @p88='True', @p89='30000000-0000-0000-0000-000000000004', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:38.711 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:38.712 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 14.8356ms
2025-08-29 11:02:38.713 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:38.713 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 21.5174ms
2025-08-29 11:02:38.716 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:38.718 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:38.719 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:38.720 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:38.723 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:38.725 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:38.726 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.1817ms
2025-08-29 11:02:38.727 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:38.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.7978ms
2025-08-29 11:02:39.353 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:39.355 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:39.355 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:39.356 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:39.362 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:39.370 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='13f7cc1b-2ee3-4206-9156-6da6146d884f', @p1='1a07e03f-0130-4609-bde2-8b27512b81d9', @p2='1ec04866-b021-40d4-8f22-0a15e7ae1a2f', @p3='3f2913ef-26ea-4a9a-b267-cbe8f56be8f2', @p4='5c1337c1-fc6e-4b1a-a7fa-3861e7d2dc2e', @p5='6503c007-29cb-4eb3-8fb9-d65f9e5a850c', @p6='83373b92-4a85-4f33-8534-396925c8858b', @p7='a0fa085e-ec23-47f4-827a-5841596968ae', @p8='ba00f17e-6600-44b7-93df-bd9ac4d66783', @p9='bb016027-ee92-44f6-9e2f-c4e5dd0d16fb', @p10='edbcdda4-c2de-4c90-9227-a9cfc7890dca', @p11='f0eff2fe-48f8-4a4b-ab34-80c733bd228c', @p12='f14e319a-2583-4d3a-aa9e-dc2143ce28fd', @p13='0e594c7e-39b9-47a9-b599-acd6589b30e4', @p14='2025-08-29T05:32:39.3661300Z' (DbType = DateTime), @p15='system', @p16='True', @p17='0485154c-dde5-4732-a7aa-a379c77a5b27', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='19d83215-235e-4b5b-9b94-806e1b603859', @p20='2025-08-29T05:32:39.3661363Z' (DbType = DateTime), @p21='system', @p22='True', @p23='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='366571c4-4631-464b-beba-488fc26811ee', @p26='2025-08-29T05:32:39.3661340Z' (DbType = DateTime), @p27='system', @p28='True', @p29='29461562-ef9c-48c0-a606-482ff57b8f95', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='3703cd5f-e371-4551-845d-45982d505c7d', @p32='2025-08-29T05:32:39.3661387Z' (DbType = DateTime), @p33='system', @p34='True', @p35='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='3d284b97-3091-415f-bf11-7c29c918bdf1', @p38='2025-08-29T05:32:39.3661151Z' (DbType = DateTime), @p39='system', @p40='True', @p41='30000000-0000-0000-0000-000000000002', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='4131de8b-3403-4bf7-8885-e2188c955462', @p44='2025-08-29T05:32:39.3661660Z' (DbType = DateTime), @p45='system', @p46='True', @p47='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='7755b650-1897-4493-ba1b-9db196ea1d02', @p50='2025-08-29T05:32:39.3661434Z' (DbType = DateTime), @p51='system', @p52='True', @p53='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='cdcb048e-f509-4c02-bb92-986d0cdd568d', @p56='2025-08-29T05:32:39.3660630Z' (DbType = DateTime), @p57='system', @p58='True', @p59='821480c6-1464-415e-bba8-066fcb4e7e63', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='df13852c-d4f5-4fd3-9966-5a8f383b4b90', @p62='2025-08-29T05:32:39.3661622Z' (DbType = DateTime), @p63='system', @p64='True', @p65='974af1f9-3caa-4857-a1a7-48462c389332', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='ea89b76a-a763-4d32-be09-fef2888e3b88', @p68='2025-08-29T05:32:39.3661191Z' (DbType = DateTime), @p69='system', @p70='True', @p71='30000000-0000-0000-0000-000000000003', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='ecb80f63-b662-41bc-8b11-5b543b5961b9', @p74='2025-08-29T05:32:39.3661411Z' (DbType = DateTime), @p75='system', @p76='True', @p77='c819f1bd-422d-4609-916c-cc185fe44ab0', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='f0bfd3d5-34e5-4479-99cb-05d8a845486c', @p80='2025-08-29T05:32:39.3661218Z' (DbType = DateTime), @p81='system', @p82='True', @p83='30000000-0000-0000-0000-000000000004', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='fb17ce22-c12f-48d3-af15-93cb062b63c0', @p86='2025-08-29T05:32:39.3661244Z' (DbType = DateTime), @p87='system', @p88='True', @p89='30000000-0000-0000-0000-000000000001', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:39.373 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:39.374 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 16.0772ms
2025-08-29 11:02:39.375 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:39.375 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 22.7863ms
2025-08-29 11:02:39.377 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:39.379 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:39.380 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:39.381 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:39.384 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:39.387 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:39.387 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.089ms
2025-08-29 11:02:39.388 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:39.389 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.8239ms
2025-08-29 11:02:40.000 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 11:02:40.002 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:40.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:40.004 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:40.008 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 11:02:40.016 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0e594c7e-39b9-47a9-b599-acd6589b30e4', @p1='19d83215-235e-4b5b-9b94-806e1b603859', @p2='366571c4-4631-464b-beba-488fc26811ee', @p3='3703cd5f-e371-4551-845d-45982d505c7d', @p4='3d284b97-3091-415f-bf11-7c29c918bdf1', @p5='4131de8b-3403-4bf7-8885-e2188c955462', @p6='7755b650-1897-4493-ba1b-9db196ea1d02', @p7='cdcb048e-f509-4c02-bb92-986d0cdd568d', @p8='df13852c-d4f5-4fd3-9966-5a8f383b4b90', @p9='ea89b76a-a763-4d32-be09-fef2888e3b88', @p10='ecb80f63-b662-41bc-8b11-5b543b5961b9', @p11='f0bfd3d5-34e5-4479-99cb-05d8a845486c', @p12='fb17ce22-c12f-48d3-af15-93cb062b63c0', @p13='085e1bf8-86b9-49cb-abdf-bb01ec105108', @p14='2025-08-29T05:32:40.0116443Z' (DbType = DateTime), @p15='system', @p16='True', @p17='974af1f9-3caa-4857-a1a7-48462c389332', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='2feb4c16-da5e-4e3b-8ebe-427b0dcd4c2b', @p20='2025-08-29T05:32:40.0116310Z' (DbType = DateTime), @p21='system', @p22='True', @p23='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='3b41e508-66f2-404e-9977-888c2ba58820', @p26='2025-08-29T05:32:40.0116229Z' (DbType = DateTime), @p27='system', @p28='True', @p29='30000000-0000-0000-0000-000000000001', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='4ccb9a2a-cb4b-462f-932d-565f365fd92a', @p32='2025-08-29T05:32:40.0116417Z' (DbType = DateTime), @p33='system', @p34='True', @p35='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='599613e1-ca84-41d9-9e52-8a8276efe9ad', @p38='2025-08-29T05:32:40.0115678Z' (DbType = DateTime), @p39='system', @p40='True', @p41='821480c6-1464-415e-bba8-066fcb4e7e63', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='5bdfdba4-f8f1-46da-b78c-0bf3cf051e84', @p44='2025-08-29T05:32:40.0116127Z' (DbType = DateTime), @p45='system', @p46='True', @p47='30000000-0000-0000-0000-000000000003', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='7f655f16-5a10-4261-9bb7-d885c52c70bd', @p50='2025-08-29T05:32:40.0116188Z' (DbType = DateTime), @p51='system', @p52='True', @p53='30000000-0000-0000-0000-000000000004', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='84745af5-ac83-404c-8efe-16dd2b120513', @p56='2025-08-29T05:32:40.0116259Z' (DbType = DateTime), @p57='system', @p58='True', @p59='0485154c-dde5-4732-a7aa-a379c77a5b27', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='98a86e5e-4894-4f2f-8495-16109aed901d', @p62='2025-08-29T05:32:40.0116365Z' (DbType = DateTime), @p63='system', @p64='True', @p65='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='9ccc2f56-6239-451b-a4f9-73f257e24857', @p68='2025-08-29T05:32:40.0116084Z' (DbType = DateTime), @p69='system', @p70='True', @p71='30000000-0000-0000-0000-000000000002', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='a4ff428d-b2d9-466e-83b8-505b0fb935f3', @p74='2025-08-29T05:32:40.0116284Z' (DbType = DateTime), @p75='system', @p76='True', @p77='29461562-ef9c-48c0-a606-482ff57b8f95', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='b3f61d2b-52fc-4380-b5fb-ac8034dbb38b', @p80='2025-08-29T05:32:40.0116472Z' (DbType = DateTime), @p81='system', @p82='True', @p83='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='c1363757-e6c6-47e3-9c6e-031bccb8462e', @p86='2025-08-29T05:32:40.0116391Z' (DbType = DateTime), @p87='system', @p88='True', @p89='c819f1bd-422d-4609-916c-cc185fe44ab0', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 11:02:40.019 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:40.020 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 15.2741ms
2025-08-29 11:02:40.021 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 11:02:40.022 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 22.2777ms
2025-08-29 11:02:40.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 11:02:40.026 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:40.026 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:40.027 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:40.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 11:02:40.033 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 11:02:40.033 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.425ms
2025-08-29 11:02:40.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 11:02:40.035 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.0138ms
2025-08-29 11:02:48.728 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 11:02:48.730 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:48.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.6552ms
2025-08-29 11:02:48.733 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 11:02:48.735 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:48.736 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:02:48.737 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 11:02:48.738 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 11:02:48.740 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 11:02:48.745 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 11:02:48.750 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 11:02:48.751 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 11:02:48.752 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 11:02:48.753 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 11:02:48.754 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:48.755 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 17.0018ms
2025-08-29 11:02:48.756 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:02:48.757 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 23.5662ms
2025-08-29 11:02:48.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:02:48.765 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:48.765 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.826ms
2025-08-29 11:02:48.768 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:02:48.769 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:48.770 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:48.771 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:48.777 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:02:48.779 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:48.781 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8264ms
2025-08-29 11:02:48.781 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:48.782 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7592ms
2025-08-29 11:02:48.795 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:02:48.797 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:48.798 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:48.799 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:48.804 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:02:48.809 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:48.810 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2631ms
2025-08-29 11:02:48.812 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:48.814 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4474ms
2025-08-29 11:02:48.881 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:02:48.885 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:02:48.886 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:48.888 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:02:48.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:02:48.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:02:48.896 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7483ms
2025-08-29 11:02:48.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:02:48.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.444ms
2025-08-29 11:03:19.032 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-29 11:03:19.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.0128ms
2025-08-29 11:03:19.271 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-29 11:03:19.475 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 203.9008ms
2025-08-29 11:03:23.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-29 11:03:24.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.8613ms
2025-08-29 11:03:24.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-29 11:03:24.371 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.3117ms
2025-08-29 11:14:47.179 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:14:47.183 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:47.184 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.2088ms
2025-08-29 11:14:47.196 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:14:47.200 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:47.202 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:47.203 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:14:47.395 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:14:47.397 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:14:47.399 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 192.3711ms
2025-08-29 11:14:47.400 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:47.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 205.3539ms
2025-08-29 11:14:47.407 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:14:47.410 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:47.411 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:47.412 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:14:47.416 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 11:14:47.420 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:14:47.422 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0975ms
2025-08-29 11:14:47.423 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:47.424 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.124ms
2025-08-29 11:14:58.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 11:14:58.890 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:58.891 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.4533ms
2025-08-29 11:14:58.894 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 11:14:58.896 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:58.897 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:14:58.898 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 11:14:58.901 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 11:14:58.906 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 11:14:58.909 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 11:14:58.911 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 11:14:58.912 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 11:14:58.913 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 11:14:58.914 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:14:58.915 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 15.4825ms
2025-08-29 11:14:58.917 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 11:14:58.918 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 23.6776ms
2025-08-29 11:14:58.924 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:14:58.926 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:58.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.709ms
2025-08-29 11:14:58.929 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:14:58.931 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:58.931 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:58.932 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:14:58.933 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:14:58.934 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2819ms
2025-08-29 11:14:58.935 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:58.936 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.187ms
2025-08-29 11:14:58.988 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:14:58.991 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:14:58.992 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:58.993 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:14:58.995 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:14:58.997 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.9045ms
2025-08-29 11:14:58.998 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:14:58.999 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.6777ms
2025-08-29 11:18:02.172 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - null null
2025-08-29 11:18:02.178 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - 404 0 null 5.7913ms
2025-08-29 11:18:02.211 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/AutoReplyFlows/business/null, Response status code: 404
2025-08-29 11:18:06.750 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:18:06.760 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:18:06.761 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - 204 null null 11.0759ms
2025-08-29 11:18:06.764 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:18:06.768 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:18:06.769 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - 404 0 null 4.4371ms
2025-08-29 11:18:06.772 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/cta-flow/drafts, Response status code: 404
2025-08-29 11:18:20.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:18:20.532 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:18:20.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 5.2473ms
2025-08-29 11:18:20.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:18:20.543 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:18:20.544 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:18:20.554 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:18:20.570 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:18:20.572 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 15.9501ms
2025-08-29 11:18:20.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:18:20.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 38.1666ms
2025-08-29 11:21:14.374 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:21:14.383 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:21:14.383 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - 204 null null 9.2471ms
2025-08-29 11:21:14.391 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:21:14.393 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:21:14.395 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - 404 0 null 3.563ms
2025-08-29 11:21:14.398 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/cta-flow/drafts, Response status code: 404
2025-08-29 11:21:30.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - null null
2025-08-29 11:21:30.750 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - 404 0 null 2.5821ms
2025-08-29 11:21:30.753 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/AutoReplyFlows/business/null, Response status code: 404
2025-08-29 11:24:40.644 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - null null
2025-08-29 11:24:40.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - 404 0 null 3.0268ms
2025-08-29 11:24:40.650 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/AutoReplyFlows/business/null, Response status code: 404
2025-08-29 11:25:12.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - null null
2025-08-29 11:25:12.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/AutoReplyFlows/business/null - 404 0 null 5.5805ms
2025-08-29 11:25:12.531 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/AutoReplyFlows/business/null, Response status code: 404
2025-08-29 11:27:29.085 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:27:29.087 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:27:29.088 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - 204 null null 3.129ms
2025-08-29 11:27:29.091 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:27:29.093 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:27:29.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - 404 0 null 3.5412ms
2025-08-29 11:27:29.097 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/cta-flow/drafts, Response status code: 404
2025-08-29 11:27:33.942 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:27:33.944 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:27:33.945 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 3.9707ms
2025-08-29 11:27:33.948 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:27:33.950 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:27:33.951 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:27:33.952 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:27:33.955 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:27:33.957 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 3.4731ms
2025-08-29 11:27:33.958 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:27:33.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 11.1009ms
2025-08-29 11:29:58.343 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:29:58.346 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:29:58.347 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - 204 null null 4.6438ms
2025-08-29 11:29:58.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:29:58.357 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:29:58.358 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - 404 0 null 4.7742ms
2025-08-29 11:29:58.364 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/cta-flow/drafts, Response status code: 404
2025-08-29 11:30:54.428 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:30:54.434 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:30:54.435 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 7.6586ms
2025-08-29 11:30:54.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:30:54.443 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:30:54.444 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:30:54.445 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:30:54.451 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:30:54.453 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 6.613ms
2025-08-29 11:30:54.454 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:30:54.455 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 14.4803ms
2025-08-29 11:31:20.068 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - null null
2025-08-29 11:31:20.076 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:20.077 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - 204 null null 9.0272ms
2025-08-29 11:31:20.085 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - null null
2025-08-29 11:31:20.088 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:20.089 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 11:31:20.094 +05:30 [INF] Route matched with {action = "GetPublishedFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublishedFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:31:20.098 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:31:20.100 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api) in 3.1853ms
2025-08-29 11:31:20.101 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 11:31:20.102 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - 400 null application/json; charset=utf-8 16.6686ms
2025-08-29 11:31:21.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:31:21.233 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:21.234 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 3.2595ms
2025-08-29 11:31:21.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:31:21.238 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:21.239 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:31:21.240 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:31:21.241 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:31:21.242 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 1.635ms
2025-08-29 11:31:21.244 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:31:21.245 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 8.3629ms
2025-08-29 11:31:22.081 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - null null
2025-08-29 11:31:22.083 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:22.084 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 11:31:22.085 +05:30 [INF] Route matched with {action = "GetPublishedFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublishedFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:31:22.088 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:31:22.089 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api) in 2.4136ms
2025-08-29 11:31:22.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 11:31:22.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - 400 null application/json; charset=utf-8 8.8943ms
2025-08-29 11:31:23.131 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:31:23.133 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:23.134 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:31:23.135 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:31:23.136 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:31:23.137 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 1.0487ms
2025-08-29 11:31:23.138 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:31:23.140 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 8.3733ms
2025-08-29 11:31:23.821 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - null null
2025-08-29 11:31:23.823 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:23.824 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 11:31:23.825 +05:30 [INF] Route matched with {action = "GetPublishedFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublishedFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:31:23.827 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:31:23.827 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api) in 1.1338ms
2025-08-29 11:31:23.828 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 11:31:23.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - 400 null application/json; charset=utf-8 8.2632ms
2025-08-29 11:31:24.843 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:31:24.846 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:31:24.847 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:31:24.848 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:31:24.850 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:31:24.851 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 1.3734ms
2025-08-29 11:31:24.852 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:31:24.853 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 9.461ms
2025-08-29 11:34:26.043 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:34:26.051 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:34:26.052 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.3038ms
2025-08-29 11:34:26.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:34:26.062 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:34:26.063 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:34:26.064 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:34:26.066 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:34:26.068 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.0053ms
2025-08-29 11:34:26.070 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:34:26.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.6539ms
2025-08-29 11:34:26.130 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:34:26.133 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:34:26.133 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:34:26.134 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:34:26.137 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:34:26.138 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.332ms
2025-08-29 11:34:26.139 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:34:26.140 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.1936ms
2025-08-29 11:34:27.673 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:34:27.675 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:34:27.675 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 2.6443ms
2025-08-29 11:34:27.678 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:34:27.680 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:34:27.681 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:34:27.682 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:34:27.684 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:34:27.685 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 1.7022ms
2025-08-29 11:34:27.686 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:34:27.687 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 9.1329ms
2025-08-29 11:35:35.069 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:35:35.076 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:35:35.076 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/drafts - 204 null null 7.4202ms
2025-08-29 11:35:35.079 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - null null
2025-08-29 11:35:35.081 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:35:35.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/drafts - 404 0 null 3.1793ms
2025-08-29 11:35:35.084 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/cta-flow/drafts, Response status code: 404
2025-08-29 11:37:37.762 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:37:37.768 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:37:37.768 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 6.4367ms
2025-08-29 11:37:37.812 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:37:37.814 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:37:37.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:37:37.816 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:37:37.818 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:37:37.819 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 1.3437ms
2025-08-29 11:37:37.820 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:37:37.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 47.1058ms
2025-08-29 11:37:59.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:37:59.189 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:37:59.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.7087ms
2025-08-29 11:37:59.194 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:37:59.197 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:37:59.199 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:37:59.200 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:37:59.203 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:37:59.205 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.4484ms
2025-08-29 11:37:59.207 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:37:59.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.3577ms
2025-08-29 11:37:59.289 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 11:37:59.293 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:37:59.294 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:37:59.295 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 11:37:59.297 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 11:37:59.300 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.8484ms
2025-08-29 11:37:59.301 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 11:37:59.302 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.367ms
2025-08-29 11:38:10.883 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 11:38:10.887 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:38:10.888 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - 204 null null 5.6592ms
2025-08-29 11:38:10.901 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 11:38:10.903 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:38:10.908 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 11:38:10.912 +05:30 [INF] Route matched with {action = "GetSummary", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSummary() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 11:38:10.920 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:38:10.921 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api) in 7.1915ms
2025-08-29 11:38:10.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 11:38:10.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - 400 null application/json; charset=utf-8 22.5121ms
2025-08-29 11:44:18.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:44:18.891 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:44:18.893 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 4.9814ms
2025-08-29 11:44:18.898 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 11:44:18.900 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:44:18.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:44:18.904 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 11:44:18.909 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:44:18.911 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 4.5324ms
2025-08-29 11:44:18.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 11:44:18.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 15.1135ms
2025-08-29 11:44:21.374 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 11:44:21.376 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:44:21.377 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - 204 null null 2.86ms
2025-08-29 11:44:21.382 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 11:44:21.385 +05:30 [INF] CORS policy execution successful.
2025-08-29 11:44:21.386 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 11:44:21.387 +05:30 [INF] Route matched with {action = "GetSummary", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSummary() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 11:44:21.390 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 11:44:21.391 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api) in 2.2581ms
2025-08-29 11:44:21.392 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 11:44:21.393 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - 400 null application/json; charset=utf-8 10.6489ms
2025-08-29 12:22:40.488 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 12:22:40.504 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:22:40.507 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 22.6668ms
2025-08-29 12:22:40.537 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 12:22:40.541 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:22:40.544 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:22:40.549 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 12:22:40.597 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 12:22:40.790 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 12:22:40.800 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 12:22:40.804 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 12:22:40.813 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 12:22:40.814 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 12:22:40.816 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:22:40.817 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 267.3574ms
2025-08-29 12:22:40.818 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:22:40.819 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 304.8742ms
2025-08-29 12:22:40.828 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:22:40.830 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:22:40.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1409ms
2025-08-29 12:22:40.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:22:40.835 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:22:40.837 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:22:40.838 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:22:40.839 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:22:40.841 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.1238ms
2025-08-29 12:22:40.842 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:22:40.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.1919ms
2025-08-29 12:22:40.881 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:22:40.884 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:22:40.885 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:22:40.885 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:22:40.887 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:22:40.889 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.6467ms
2025-08-29 12:22:40.890 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:22:40.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.0596ms
2025-08-29 12:22:59.031 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 12:22:59.034 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:22:59.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 3.1575ms
2025-08-29 12:22:59.038 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 12:22:59.040 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:22:59.042 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 12:22:59.043 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 12:22:59.047 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 12:22:59.048 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 3.4325ms
2025-08-29 12:22:59.049 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 12:22:59.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 400 null application/json; charset=utf-8 11.5634ms
2025-08-29 12:23:01.716 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 12:23:01.718 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:23:01.719 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - 204 null null 2.8158ms
2025-08-29 12:23:01.721 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 12:23:01.723 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:23:01.724 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 12:23:01.725 +05:30 [INF] Route matched with {action = "GetSummary", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSummary() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 12:23:01.730 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 12:23:01.731 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api) in 5.3335ms
2025-08-29 12:23:01.732 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 12:23:01.733 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - 400 null application/json; charset=utf-8 12.3636ms
2025-08-29 12:23:04.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 12:23:04.700 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:23:04.701 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 10.3848ms
2025-08-29 12:23:04.704 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 12:23:04.707 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:23:04.708 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 12:23:04.709 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-29 12:23:04.730 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-29 12:23:04.733 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 12:23:04.736 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 26.1222ms
2025-08-29 12:23:04.738 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 12:23:04.739 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 34.2287ms
2025-08-29 12:23:07.307 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 12:23:07.310 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:23:07.310 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - 204 null null 3.0453ms
2025-08-29 12:23:07.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 12:23:07.314 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:23:07.315 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 12:23:07.315 +05:30 [INF] Route matched with {action = "GetSummary", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSummary() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 12:23:07.317 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-08-29 12:23:07.318 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api) in 1.832ms
2025-08-29 12:23:07.319 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 12:23:07.320 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - 400 null application/json; charset=utf-8 7.8083ms
2025-08-29 12:30:14.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:14.386 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:14.386 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8529ms
2025-08-29 12:30:14.389 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:14.391 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:14.393 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:14.394 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:30:14.396 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:14.397 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.766ms
2025-08-29 12:30:14.398 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:14.399 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.4632ms
2025-08-29 12:30:14.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:14.457 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:14.459 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:14.460 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:30:14.462 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:14.463 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4323ms
2025-08-29 12:30:14.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:14.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.3764ms
2025-08-29 12:30:34.574 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 12:30:34.576 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:34.578 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.1217ms
2025-08-29 12:30:34.585 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 12:30:34.587 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:34.642 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29-08-2025 06:32:48 AM', Current time (UTC): '29-08-2025 07:00:34 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-29 12:30:34.707 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29-08-2025 06:32:48 AM', Current time (UTC): '29-08-2025 07:00:34 AM'.
2025-08-29 12:30:34.708 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:30:34.709 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 12:30:34.712 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 12:30:34.938 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 12:30:34.947 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 12:30:34.964 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 12:30:34.967 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 12:30:34.969 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 12:30:34.970 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 12:30:34.972 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:34.987 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 277.2852ms
2025-08-29 12:30:34.989 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:30:35.179 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 12:30:35.201 +05:30 [ERR] Response has already started, unable to write error response for path: /api/auth/login
2025-08-29 12:30:35.202 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json 616.9524ms
2025-08-29 12:30:36.356 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 12:30:36.358 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:36.359 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:30:36.360 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 12:30:36.363 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 12:30:36.365 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 12:30:36.369 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 12:30:36.373 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 12:30:36.374 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 12:30:36.376 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 12:30:36.376 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 12:30:36.378 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:36.379 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 17.4266ms
2025-08-29 12:30:36.380 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:30:36.380 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 24.4116ms
2025-08-29 12:30:36.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:36.385 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:36.385 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.266ms
2025-08-29 12:30:36.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:36.394 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:36.395 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:36.396 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:30:36.401 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:30:36.406 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:30:36.408 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:36.409 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7323ms
2025-08-29 12:30:36.410 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:36.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7113ms
2025-08-29 12:30:36.431 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:36.434 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:36.435 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:36.436 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:30:36.440 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:30:36.443 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:36.444 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6081ms
2025-08-29 12:30:36.445 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:36.447 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.6662ms
2025-08-29 12:30:36.538 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:36.540 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:36.542 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:36.543 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:30:36.549 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:30:36.552 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:36.553 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.057ms
2025-08-29 12:30:36.555 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:36.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8184ms
2025-08-29 12:30:54.243 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 12:30:54.245 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:54.246 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2265ms
2025-08-29 12:30:54.249 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 12:30:54.251 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:54.269 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:30:54.270 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 12:30:54.273 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 12:30:54.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 12:30:54.278 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 12:30:54.280 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 12:30:54.281 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 12:30:54.282 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 12:30:54.283 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:54.284 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 12.5435ms
2025-08-29 12:30:54.285 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:30:54.286 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 37.1147ms
2025-08-29 12:30:54.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:54.290 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:54.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.3066ms
2025-08-29 12:30:54.293 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:54.295 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:54.295 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:54.296 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:30:54.298 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:54.299 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2177ms
2025-08-29 12:30:54.300 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:54.301 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.9856ms
2025-08-29 12:30:54.329 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:30:54.331 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:30:54.332 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:54.332 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:30:54.334 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:30:54.335 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2726ms
2025-08-29 12:30:54.336 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:30:54.336 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.6234ms
2025-08-29 12:31:00.154 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 12:31:00.157 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 12:31:00.159 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:00.161 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:00.162 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 7.8481ms
2025-08-29 12:31:00.163 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 5.5281ms
2025-08-29 12:31:00.168 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 12:31:00.169 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 12:31:00.171 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:00.175 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:00.176 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 12:31:00.176 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 12:31:00.177 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 12:31:00.178 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:00.184 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 12:31:00.194 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:31:00.198 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 16.9349ms
2025-08-29 12:31:00.199 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 12:31:00.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 31.5116ms
2025-08-29 12:31:00.204 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:00.206 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:00.206 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.4996ms
2025-08-29 12:31:00.209 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:00.211 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:00.212 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:00.213 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:00.216 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:31:00.218 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:31:00.220 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.9863ms
2025-08-29 12:31:00.221 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:00.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 13.2757ms
2025-08-29 12:31:00.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 12:31:00.313 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 12:31:00.314 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 134.7933ms
2025-08-29 12:31:00.315 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 12:31:00.316 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 148.3284ms
2025-08-29 12:31:07.388 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:07.391 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:07.391 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.9024ms
2025-08-29 12:31:07.394 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 118
2025-08-29 12:31:07.396 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:07.415 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:07.417 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:07.423 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 12:31:07.437 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='5343ccc4-7770-499e-8e18-795ff34b76a3', @p1='8600561b-5f53-4faa-8040-1f0fd371fe71', @p2='0b40469b-4981-44cd-adbc-c574d6cdc011', @p3='2025-08-29T07:01:07.4271563Z' (DbType = DateTime), @p4='system', @p5='True', @p6='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p7='3e92e204-cda8-4128-94c6-ac1e977e1152', @p8='c7ec4123-dc08-41d3-8310-e5c240e246e6', @p9='2025-08-29T07:01:07.4258584Z' (DbType = DateTime), @p10='system', @p11='True', @p12='821480c6-1464-415e-bba8-066fcb4e7e63', @p13='3e92e204-cda8-4128-94c6-ac1e977e1152', @p14='f5a19fc2-68cd-47b1-8263-c406959e41ff', @p15='2025-08-29T07:01:07.4271391Z' (DbType = DateTime), @p16='system', @p17='True', @p18='30000000-0000-0000-0000-000000000000', @p19='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19);
2025-08-29 12:31:07.440 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:07.441 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 23.0416ms
2025-08-29 12:31:07.442 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:07.443 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 49.2621ms
2025-08-29 12:31:07.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:07.447 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:07.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:07.448 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:07.452 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:31:07.454 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:31:07.455 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.7345ms
2025-08-29 12:31:07.456 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:07.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 11.9913ms
2025-08-29 12:31:15.544 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:15.547 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:15.548 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4589ms
2025-08-29 12:31:15.552 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:15.555 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:15.556 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:15.557 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:15.562 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:15.565 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:15.566 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5516ms
2025-08-29 12:31:15.568 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:15.569 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.4582ms
2025-08-29 12:31:15.631 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:15.636 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:15.637 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:15.638 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:15.645 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:15.649 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:15.650 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3483ms
2025-08-29 12:31:15.651 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:15.653 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.8526ms
2025-08-29 12:31:15.704 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:15.707 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:15.707 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:15.709 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:15.713 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:15.716 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:15.717 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5848ms
2025-08-29 12:31:15.718 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:15.719 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4324ms
2025-08-29 12:31:26.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:26.695 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:26.695 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.869ms
2025-08-29 12:31:26.698 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 157
2025-08-29 12:31:26.699 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:26.700 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:26.701 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:26.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 12:31:26.726 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='0b40469b-4981-44cd-adbc-c574d6cdc011', @p1='c7ec4123-dc08-41d3-8310-e5c240e246e6', @p2='f5a19fc2-68cd-47b1-8263-c406959e41ff', @p3='3fb1c4b2-27b4-4c75-b547-f800d87cce8d', @p4='2025-08-29T07:01:26.7244194Z' (DbType = DateTime), @p5='system', @p6='True', @p7='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p8='3e92e204-cda8-4128-94c6-ac1e977e1152', @p9='97d9c291-6d02-49e2-b163-1a06b2d139f2', @p10='2025-08-29T07:01:26.7244126Z' (DbType = DateTime), @p11='system', @p12='True', @p13='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p14='3e92e204-cda8-4128-94c6-ac1e977e1152', @p15='9c0de0b3-a62d-4024-ae0e-90bc3fcc2558', @p16='2025-08-29T07:01:26.7244166Z' (DbType = DateTime), @p17='system', @p18='True', @p19='30000000-0000-0000-0000-000000000000', @p20='3e92e204-cda8-4128-94c6-ac1e977e1152', @p21='d59165c2-9a44-4ec5-9407-96a086a9ce5d', @p22='2025-08-29T07:01:26.7243680Z' (DbType = DateTime), @p23='system', @p24='True', @p25='821480c6-1464-415e-bba8-066fcb4e7e63', @p26='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p9, @p10, @p11, @p12, @p13, @p14);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p15, @p16, @p17, @p18, @p19, @p20);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p21, @p22, @p23, @p24, @p25, @p26);
2025-08-29 12:31:26.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:26.729 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 26.6619ms
2025-08-29 12:31:26.730 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:26.731 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 33.2723ms
2025-08-29 12:31:26.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:26.735 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:26.736 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:26.736 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:26.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:31:26.741 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:31:26.742 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.9384ms
2025-08-29 12:31:26.743 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:26.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 10.8011ms
2025-08-29 12:31:30.810 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:30.812 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:30.812 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8016ms
2025-08-29 12:31:30.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:30.819 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:30.819 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:30.820 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:30.823 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:30.825 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:30.826 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.8844ms
2025-08-29 12:31:30.833 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:30.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.3373ms
2025-08-29 12:31:30.847 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:30.849 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:30.850 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:30.851 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:30.855 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:30.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:30.861 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1282ms
2025-08-29 12:31:30.862 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:30.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2326ms
2025-08-29 12:31:30.901 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:30.904 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:30.905 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:30.906 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:30.910 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:30.913 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:30.914 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.734ms
2025-08-29 12:31:30.915 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:30.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.8497ms
2025-08-29 12:31:32.143 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:32.146 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:32.147 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:32.149 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:32.153 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:32.156 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:32.157 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0902ms
2025-08-29 12:31:32.158 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:32.159 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.0001ms
2025-08-29 12:31:32.165 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:32.167 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:32.169 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:32.170 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:32.174 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:32.176 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:32.177 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2958ms
2025-08-29 12:31:32.179 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:32.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0285ms
2025-08-29 12:31:32.221 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:32.223 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:32.224 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:32.225 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:32.229 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:32.232 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:32.233 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4963ms
2025-08-29 12:31:32.234 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:32.235 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.8199ms
2025-08-29 12:31:38.060 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:38.062 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:38.062 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.8489ms
2025-08-29 12:31:38.065 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 196
2025-08-29 12:31:38.067 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:38.067 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:38.068 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:38.073 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 12:31:38.078 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3fb1c4b2-27b4-4c75-b547-f800d87cce8d', @p1='97d9c291-6d02-49e2-b163-1a06b2d139f2', @p2='9c0de0b3-a62d-4024-ae0e-90bc3fcc2558', @p3='d59165c2-9a44-4ec5-9407-96a086a9ce5d', @p4='0e9d23c5-2af4-4448-8f0b-8528e772553a', @p5='2025-08-29T07:01:38.0761541Z' (DbType = DateTime), @p6='system', @p7='True', @p8='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p9='3e92e204-cda8-4128-94c6-ac1e977e1152', @p10='8eed198f-2551-4fb9-a6c0-20dc8e7c2cc9', @p11='2025-08-29T07:01:38.0761868Z' (DbType = DateTime), @p12='system', @p13='True', @p14='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p15='3e92e204-cda8-4128-94c6-ac1e977e1152', @p16='b5248d90-6ebf-4d5d-a7df-3161d8312ac3', @p17='2025-08-29T07:01:38.0761826Z' (DbType = DateTime), @p18='system', @p19='True', @p20='30000000-0000-0000-0000-000000000000', @p21='3e92e204-cda8-4128-94c6-ac1e977e1152', @p22='bce41b8d-bcf4-4374-9661-6727482791b5', @p23='2025-08-29T07:01:38.0761067Z' (DbType = DateTime), @p24='system', @p25='True', @p26='821480c6-1464-415e-bba8-066fcb4e7e63', @p27='3e92e204-cda8-4128-94c6-ac1e977e1152', @p28='ecda486c-ed9a-43ed-bb4b-5e8f4e32fc4b', @p29='2025-08-29T07:01:38.0761777Z' (DbType = DateTime), @p30='system', @p31='True', @p32='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p33='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
2025-08-29 12:31:38.081 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:38.082 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 12.4839ms
2025-08-29 12:31:38.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:38.084 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 18.8965ms
2025-08-29 12:31:38.086 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 12:31:38.087 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:38.088 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:38.089 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:38.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:31:38.095 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:31:38.096 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.7277ms
2025-08-29 12:31:38.097 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:38.097 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 11.5994ms
2025-08-29 12:31:43.837 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:43.839 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:43.840 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9866ms
2025-08-29 12:31:43.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:43.844 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:43.845 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:43.846 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:43.849 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:43.852 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:43.853 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9553ms
2025-08-29 12:31:43.854 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:43.855 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9327ms
2025-08-29 12:31:43.869 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:43.872 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:43.873 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:43.874 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:43.879 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:43.883 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:43.884 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1624ms
2025-08-29 12:31:43.885 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:43.886 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4087ms
2025-08-29 12:31:43.916 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:43.918 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:43.920 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:43.921 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:43.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:43.930 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:43.932 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6909ms
2025-08-29 12:31:43.933 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:43.934 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2373ms
2025-08-29 12:31:44.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:44.941 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:44.942 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:44.943 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:44.946 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:44.949 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:44.950 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9052ms
2025-08-29 12:31:44.951 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:44.952 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.8293ms
2025-08-29 12:31:44.967 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:44.971 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:44.972 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:44.974 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:44.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:44.982 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:44.984 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1111ms
2025-08-29 12:31:44.985 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:44.986 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.2626ms
2025-08-29 12:31:45.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:31:45.021 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:45.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:45.023 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:45.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:31:45.028 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:45.029 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4473ms
2025-08-29 12:31:45.030 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:31:45.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.6665ms
2025-08-29 12:31:51.552 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:31:51.554 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:51.555 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.0891ms
2025-08-29 12:31:51.557 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:31:51.558 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:51.559 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:51.560 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:51.561 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:31:51.562 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.101ms
2025-08-29 12:31:51.563 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:51.564 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.2025ms
2025-08-29 12:31:55.525 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:31:55.527 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:55.528 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.1184ms
2025-08-29 12:31:55.531 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 547
2025-08-29 12:31:55.533 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:55.534 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:55.535 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:55.538 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 12:31:55.545 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='085e1bf8-86b9-49cb-abdf-bb01ec105108', @p1='2feb4c16-da5e-4e3b-8ebe-427b0dcd4c2b', @p2='3b41e508-66f2-404e-9977-888c2ba58820', @p3='4ccb9a2a-cb4b-462f-932d-565f365fd92a', @p4='599613e1-ca84-41d9-9e52-8a8276efe9ad', @p5='5bdfdba4-f8f1-46da-b78c-0bf3cf051e84', @p6='7f655f16-5a10-4261-9bb7-d885c52c70bd', @p7='84745af5-ac83-404c-8efe-16dd2b120513', @p8='98a86e5e-4894-4f2f-8495-16109aed901d', @p9='9ccc2f56-6239-451b-a4f9-73f257e24857', @p10='a4ff428d-b2d9-466e-83b8-505b0fb935f3', @p11='b3f61d2b-52fc-4380-b5fb-ac8034dbb38b', @p12='c1363757-e6c6-47e3-9c6e-031bccb8462e', @p13='08819c48-bbe7-4a5e-a230-02ce06dd817f', @p14='2025-08-29T07:01:55.5411589Z' (DbType = DateTime), @p15='system', @p16='True', @p17='30000000-0000-0000-0000-000000000004', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='5f0d8440-15ac-4b55-b22f-441e31e663a1', @p20='2025-08-29T07:01:55.5411097Z' (DbType = DateTime), @p21='system', @p22='True', @p23='821480c6-1464-415e-bba8-066fcb4e7e63', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='83595e08-88c8-4f84-a479-e876d86f9d3d', @p26='2025-08-29T07:01:55.5412097Z' (DbType = DateTime), @p27='system', @p28='True', @p29='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='88ef030c-0ad4-49c9-9618-77f40bb59192', @p32='2025-08-29T07:01:55.5412168Z' (DbType = DateTime), @p33='system', @p34='True', @p35='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='92b76c2b-16d8-4508-8373-93000be098c4', @p38='2025-08-29T07:01:55.5411932Z' (DbType = DateTime), @p39='system', @p40='True', @p41='974af1f9-3caa-4857-a1a7-48462c389332', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='94b4e450-8996-42bf-a2a6-0a981659bb88', @p44='2025-08-29T07:01:55.5411958Z' (DbType = DateTime), @p45='system', @p46='True', @p47='0485154c-dde5-4732-a7aa-a379c77a5b27', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='9ba2bc63-81dc-4bff-a43e-4c0bc081fdc4', @p50='2025-08-29T07:01:55.5411907Z' (DbType = DateTime), @p51='system', @p52='True', @p53='c819f1bd-422d-4609-916c-cc185fe44ab0', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='ac32dea9-4c8d-4a8f-bc68-d3cad66cc310', @p56='2025-08-29T07:01:55.5412121Z' (DbType = DateTime), @p57='system', @p58='True', @p59='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='ad644162-10f9-4421-9673-1126262f3235', @p62='2025-08-29T07:01:55.5411539Z' (DbType = DateTime), @p63='system', @p64='True', @p65='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='ba6e83b3-c140-4007-a5e9-0fbd4fc62e41', @p68='2025-08-29T07:01:55.5411838Z' (DbType = DateTime), @p69='system', @p70='True', @p71='30000000-0000-0000-0000-000000000003', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='d23b900b-2ff6-45ba-bfc0-bc4340384e9b', @p74='2025-08-29T07:01:55.5412066Z' (DbType = DateTime), @p75='system', @p76='True', @p77='29461562-ef9c-48c0-a606-482ff57b8f95', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='da49cc0e-1058-4dfe-93c8-44a04720061d', @p80='2025-08-29T07:01:55.5411618Z' (DbType = DateTime), @p81='system', @p82='True', @p83='30000000-0000-0000-0000-000000000002', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='e19ca319-1351-4fe4-976d-d95a3694d3c5', @p86='2025-08-29T07:01:55.5411883Z' (DbType = DateTime), @p87='system', @p88='True', @p89='30000000-0000-0000-0000-000000000001', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p91='f359afe1-03e3-4066-b392-6c37bbfc309f', @p92='2025-08-29T07:01:55.5412145Z' (DbType = DateTime), @p93='system', @p94='True', @p95='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p96='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p91, @p92, @p93, @p94, @p95, @p96);
2025-08-29 12:31:55.548 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:31:55.549 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 12.9892ms
2025-08-29 12:31:55.550 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:31:55.551 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 19.3089ms
2025-08-29 12:31:55.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:31:55.554 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:31:55.555 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:55.556 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:31:55.559 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:31:55.561 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:31:55.563 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.3332ms
2025-08-29 12:31:55.564 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:31:55.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.011ms
2025-08-29 12:32:00.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:00.616 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:00.617 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9984ms
2025-08-29 12:32:00.620 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:00.622 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:00.623 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:00.624 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:00.627 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:00.630 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:00.631 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9652ms
2025-08-29 12:32:00.633 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:00.634 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3075ms
2025-08-29 12:32:00.647 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:00.650 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:00.651 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:00.654 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:00.662 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:00.666 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:00.668 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.1864ms
2025-08-29 12:32:00.670 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:00.672 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3428ms
2025-08-29 12:32:00.702 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:00.704 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:00.705 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:00.706 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:00.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:00.714 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:00.715 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4402ms
2025-08-29 12:32:00.716 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:00.717 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.8365ms
2025-08-29 12:32:01.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:01.585 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:01.586 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:01.587 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:01.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:01.592 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:01.593 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3533ms
2025-08-29 12:32:01.594 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:01.595 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.4607ms
2025-08-29 12:32:01.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:01.609 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:01.611 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:01.612 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:01.620 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:01.626 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:01.628 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.0714ms
2025-08-29 12:32:01.629 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:01.631 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.8669ms
2025-08-29 12:32:01.666 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:01.668 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:01.669 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:01.669 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:01.673 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:01.676 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:01.677 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8483ms
2025-08-29 12:32:01.678 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:01.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.7966ms
2025-08-29 12:32:06.705 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:32:06.707 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:06.708 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.946ms
2025-08-29 12:32:06.710 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 586
2025-08-29 12:32:06.711 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:06.713 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:32:06.713 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:06.716 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 12:32:06.725 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='08819c48-bbe7-4a5e-a230-02ce06dd817f', @p1='5f0d8440-15ac-4b55-b22f-441e31e663a1', @p2='83595e08-88c8-4f84-a479-e876d86f9d3d', @p3='88ef030c-0ad4-49c9-9618-77f40bb59192', @p4='92b76c2b-16d8-4508-8373-93000be098c4', @p5='94b4e450-8996-42bf-a2a6-0a981659bb88', @p6='9ba2bc63-81dc-4bff-a43e-4c0bc081fdc4', @p7='ac32dea9-4c8d-4a8f-bc68-d3cad66cc310', @p8='ad644162-10f9-4421-9673-1126262f3235', @p9='ba6e83b3-c140-4007-a5e9-0fbd4fc62e41', @p10='d23b900b-2ff6-45ba-bfc0-bc4340384e9b', @p11='da49cc0e-1058-4dfe-93c8-44a04720061d', @p12='e19ca319-1351-4fe4-976d-d95a3694d3c5', @p13='f359afe1-03e3-4066-b392-6c37bbfc309f', @p14='39b3868e-9a03-452e-a750-8a3122d7d1a4', @p15='2025-08-29T07:02:06.7197171Z' (DbType = DateTime), @p16='system', @p17='True', @p18='974af1f9-3caa-4857-a1a7-48462c389332', @p19='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p20='3cd7fd85-c259-40df-a5c6-1328897971b4', @p21='2025-08-29T07:02:06.7195364Z' (DbType = DateTime), @p22='system', @p23='True', @p24='821480c6-1464-415e-bba8-066fcb4e7e63', @p25='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p26='46f10e74-f665-484b-9aa8-1d9db63e3164', @p27='2025-08-29T07:02:06.7197094Z' (DbType = DateTime), @p28='system', @p29='True', @p30='30000000-0000-0000-0000-000000000001', @p31='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p32='4e6d9706-c819-4eca-b3e0-f8b6170a0037', @p33='2025-08-29T07:02:06.7197014Z' (DbType = DateTime), @p34='system', @p35='True', @p36='30000000-0000-0000-0000-000000000002', @p37='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p38='56eceb41-99d1-4e68-91d6-16e29271cd53', @p39='2025-08-29T07:02:06.7197476Z' (DbType = DateTime), @p40='system', @p41='True', @p42='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p43='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p44='60a47afc-510b-47a4-a907-807dab0f6531', @p45='2025-08-29T07:02:06.7197445Z' (DbType = DateTime), @p46='system', @p47='True', @p48='29461562-ef9c-48c0-a606-482ff57b8f95', @p49='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p50='68be52a9-32a5-4f10-b8cc-f6ae32a40ed4', @p51='2025-08-29T07:02:06.7196514Z' (DbType = DateTime), @p52='system', @p53='True', @p54='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p55='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p56='6f11c089-593c-484a-a03c-63c0296da25b', @p57='2025-08-29T07:02:06.7197195Z' (DbType = DateTime), @p58='system', @p59='True', @p60='0485154c-dde5-4732-a7aa-a379c77a5b27', @p61='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p62='79473fc2-8781-4d45-a3e6-972853d057f6', @p63='2025-08-29T07:02:06.7196598Z' (DbType = DateTime), @p64='system', @p65='True', @p66='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p67='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p68='85222ae9-6649-45bd-a9d1-7c06e9f93bdb', @p69='2025-08-29T07:02:06.7197069Z' (DbType = DateTime), @p70='system', @p71='True', @p72='30000000-0000-0000-0000-000000000003', @p73='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p74='8f1acf0a-9c09-4f8e-a686-ec2c7378bab2', @p75='2025-08-29T07:02:06.7197142Z' (DbType = DateTime), @p76='system', @p77='True', @p78='c819f1bd-422d-4609-916c-cc185fe44ab0', @p79='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p80='9c5991f3-e912-4dd2-a0f1-fdc3f809cf21', @p81='2025-08-29T07:02:06.7197524Z' (DbType = DateTime), @p82='system', @p83='True', @p84='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p85='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p86='b747b310-65b8-45f7-bd5a-414f52d01749', @p87='2025-08-29T07:02:06.7197500Z' (DbType = DateTime), @p88='system', @p89='True', @p90='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p91='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p92='cbe7187b-b6ca-4af6-a30b-246a27b04915', @p93='2025-08-29T07:02:06.7196640Z' (DbType = DateTime), @p94='system', @p95='True', @p96='30000000-0000-0000-0000-000000000004', @p97='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p98='fcf0e9f5-77f4-45d9-8b51-f4821ddf4204', @p99='2025-08-29T07:02:06.7197548Z' (DbType = DateTime), @p100='system', @p101='True', @p102='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p103='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p20, @p21, @p22, @p23, @p24, @p25);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p44, @p45, @p46, @p47, @p48, @p49);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p50, @p51, @p52, @p53, @p54, @p55);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p56, @p57, @p58, @p59, @p60, @p61);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p74, @p75, @p76, @p77, @p78, @p79);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p80, @p81, @p82, @p83, @p84, @p85);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p86, @p87, @p88, @p89, @p90, @p91);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p92, @p93, @p94, @p95, @p96, @p97);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p98, @p99, @p100, @p101, @p102, @p103);
2025-08-29 12:32:06.727 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:06.728 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 13.7182ms
2025-08-29 12:32:06.729 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:32:06.730 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 20.1707ms
2025-08-29 12:32:06.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:32:06.734 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:06.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:32:06.736 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:06.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:32:06.742 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:32:06.743 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.93ms
2025-08-29 12:32:06.744 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:32:06.745 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.5601ms
2025-08-29 12:32:10.008 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:10.010 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:10.011 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4012ms
2025-08-29 12:32:10.013 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:10.015 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:10.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:10.016 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:10.020 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:10.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:10.024 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2766ms
2025-08-29 12:32:10.025 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:10.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.8713ms
2025-08-29 12:32:10.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:10.050 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:10.051 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:10.053 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:10.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:10.059 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:10.060 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2467ms
2025-08-29 12:32:10.062 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:10.062 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7644ms
2025-08-29 12:32:10.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:10.091 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:10.092 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:10.093 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:10.096 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:10.098 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:10.099 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4542ms
2025-08-29 12:32:10.101 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:10.102 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0671ms
2025-08-29 12:32:11.132 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:11.134 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:11.135 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:11.135 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:11.138 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:11.140 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:11.141 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.8551ms
2025-08-29 12:32:11.142 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:11.143 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.4354ms
2025-08-29 12:32:11.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:11.155 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:11.162 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:11.163 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:11.170 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:11.173 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:11.175 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3717ms
2025-08-29 12:32:11.176 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:11.177 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.537ms
2025-08-29 12:32:11.210 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:32:11.212 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:11.213 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:11.214 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:11.218 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:32:11.221 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:11.222 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1543ms
2025-08-29 12:32:11.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:32:11.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.3129ms
2025-08-29 12:32:17.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:32:17.624 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:17.624 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.2547ms
2025-08-29 12:32:17.627 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 625
2025-08-29 12:32:17.629 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:17.630 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:32:17.631 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:17.635 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 12:32:17.645 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='39b3868e-9a03-452e-a750-8a3122d7d1a4', @p1='3cd7fd85-c259-40df-a5c6-1328897971b4', @p2='46f10e74-f665-484b-9aa8-1d9db63e3164', @p3='4e6d9706-c819-4eca-b3e0-f8b6170a0037', @p4='56eceb41-99d1-4e68-91d6-16e29271cd53', @p5='60a47afc-510b-47a4-a907-807dab0f6531', @p6='68be52a9-32a5-4f10-b8cc-f6ae32a40ed4', @p7='6f11c089-593c-484a-a03c-63c0296da25b', @p8='79473fc2-8781-4d45-a3e6-972853d057f6', @p9='85222ae9-6649-45bd-a9d1-7c06e9f93bdb', @p10='8f1acf0a-9c09-4f8e-a686-ec2c7378bab2', @p11='9c5991f3-e912-4dd2-a0f1-fdc3f809cf21', @p12='b747b310-65b8-45f7-bd5a-414f52d01749', @p13='cbe7187b-b6ca-4af6-a30b-246a27b04915', @p14='fcf0e9f5-77f4-45d9-8b51-f4821ddf4204', @p15='10d241ae-503a-4710-b9d9-c534efebd7e2', @p16='2025-08-29T07:02:17.6385485Z' (DbType = DateTime), @p17='system', @p18='True', @p19='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p20='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p21='20374bad-55e0-4b87-ba01-5411c5c0f8c2', @p22='2025-08-29T07:02:17.6385088Z' (DbType = DateTime), @p23='system', @p24='True', @p25='30000000-0000-0000-0000-000000000003', @p26='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p27='2500d976-c6c9-45c0-8f0d-9abb318c1bed', @p28='2025-08-29T07:02:17.6385138Z' (DbType = DateTime), @p29='system', @p30='True', @p31='c819f1bd-422d-4609-916c-cc185fe44ab0', @p32='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p33='33c9af43-89f0-4fde-b012-d12e2d2f49d0', @p34='2025-08-29T07:02:17.6385324Z' (DbType = DateTime), @p35='system', @p36='True', @p37='974af1f9-3caa-4857-a1a7-48462c389332', @p38='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p39='3bae64cd-91e8-4527-a71a-a32f9c3d3224', @p40='2025-08-29T07:02:17.6385571Z' (DbType = DateTime), @p41='system', @p42='True', @p43='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p44='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p45='512b16e0-946e-4312-ad49-8542fcae97fb', @p46='2025-08-29T07:02:17.6385398Z' (DbType = DateTime), @p47='system', @p48='True', @p49='0485154c-dde5-4732-a7aa-a379c77a5b27', @p50='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p51='6370f346-91b2-4981-b06d-2b834d5d88f2', @p52='2025-08-29T07:02:17.6385527Z' (DbType = DateTime), @p53='system', @p54='True', @p55='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p56='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p57='6d555127-9331-46c9-ac8c-5ba95ca6ac08', @p58='2025-08-29T07:02:17.6385842Z' (DbType = DateTime), @p59='system', @p60='True', @p61='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p62='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p63='74a01369-b648-4c2c-8d97-82dacc650a30', @p64='2025-08-29T07:02:17.6384253Z' (DbType = DateTime), @p65='system', @p66='True', @p67='821480c6-1464-415e-bba8-066fcb4e7e63', @p68='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p69='88153ade-0bb1-4228-ada8-0dd19cd8590a', @p70='2025-08-29T07:02:17.6384830Z' (DbType = DateTime), @p71='system', @p72='True', @p73='7d7cbceb-4ce7-4835-85cd-59562487298d', @p74='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p75='c1bd4391-9ebd-4915-95f4-b3667a9e0058', @p76='2025-08-29T07:02:17.6384800Z' (DbType = DateTime), @p77='system', @p78='True', @p79='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p80='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p81='d51463e0-269d-4ed9-9830-35fbe9fbafd2', @p82='2025-08-29T07:02:17.6385035Z' (DbType = DateTime), @p83='system', @p84='True', @p85='30000000-0000-0000-0000-000000000004', @p86='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p87='e286e5a6-7183-4f85-b332-8de34ac2ff3c', @p88='2025-08-29T07:02:17.6385442Z' (DbType = DateTime), @p89='system', @p90='True', @p91='29461562-ef9c-48c0-a606-482ff57b8f95', @p92='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p93='e8fc3c04-51fc-4703-b519-5d255871f38c', @p94='2025-08-29T07:02:17.6385064Z' (DbType = DateTime), @p95='system', @p96='True', @p97='30000000-0000-0000-0000-000000000002', @p98='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p99='ea255a11-21b6-46b4-bab8-52450d3093b3', @p100='2025-08-29T07:02:17.6385112Z' (DbType = DateTime), @p101='system', @p102='True', @p103='30000000-0000-0000-0000-000000000001', @p104='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p105='fa274295-1707-4ca2-81c1-7748e04b1e57', @p106='2025-08-29T07:02:17.6384739Z' (DbType = DateTime), @p107='system', @p108='True', @p109='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p110='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p15, @p16, @p17, @p18, @p19, @p20);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p21, @p22, @p23, @p24, @p25, @p26);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p27, @p28, @p29, @p30, @p31, @p32);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p39, @p40, @p41, @p42, @p43, @p44);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p57, @p58, @p59, @p60, @p61, @p62);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p63, @p64, @p65, @p66, @p67, @p68);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p69, @p70, @p71, @p72, @p73, @p74);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p75, @p76, @p77, @p78, @p79, @p80);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p81, @p82, @p83, @p84, @p85, @p86);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p87, @p88, @p89, @p90, @p91, @p92);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p93, @p94, @p95, @p96, @p97, @p98);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p99, @p100, @p101, @p102, @p103, @p104);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p105, @p106, @p107, @p108, @p109, @p110);
2025-08-29 12:32:17.648 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:32:17.649 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 15.9284ms
2025-08-29 12:32:17.650 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:32:17.651 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 23.2358ms
2025-08-29 12:32:17.654 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:32:17.655 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:32:17.656 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:32:17.657 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:32:17.661 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:32:17.663 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:32:17.664 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.0082ms
2025-08-29 12:32:17.665 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:32:17.666 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.5544ms
2025-08-29 12:33:00.878 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:33:00.884 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:00.884 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 6.1857ms
2025-08-29 12:33:00.890 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 664
2025-08-29 12:33:00.892 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:00.893 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:33:00.893 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:00.897 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 12:33:00.924 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='10d241ae-503a-4710-b9d9-c534efebd7e2', @p1='20374bad-55e0-4b87-ba01-5411c5c0f8c2', @p2='2500d976-c6c9-45c0-8f0d-9abb318c1bed', @p3='33c9af43-89f0-4fde-b012-d12e2d2f49d0', @p4='3bae64cd-91e8-4527-a71a-a32f9c3d3224', @p5='512b16e0-946e-4312-ad49-8542fcae97fb', @p6='6370f346-91b2-4981-b06d-2b834d5d88f2', @p7='6d555127-9331-46c9-ac8c-5ba95ca6ac08', @p8='74a01369-b648-4c2c-8d97-82dacc650a30', @p9='88153ade-0bb1-4228-ada8-0dd19cd8590a', @p10='c1bd4391-9ebd-4915-95f4-b3667a9e0058', @p11='d51463e0-269d-4ed9-9830-35fbe9fbafd2', @p12='e286e5a6-7183-4f85-b332-8de34ac2ff3c', @p13='e8fc3c04-51fc-4703-b519-5d255871f38c', @p14='ea255a11-21b6-46b4-bab8-52450d3093b3', @p15='fa274295-1707-4ca2-81c1-7748e04b1e57', @p16='00663e89-fe13-4316-842a-7a250f070866', @p17='2025-08-29T07:03:00.9185198Z' (DbType = DateTime), @p18='system', @p19='True', @p20='0485154c-dde5-4732-a7aa-a379c77a5b27', @p21='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p22='0b807f91-1d23-4d63-b06e-2f97b20cb69f', @p23='2025-08-29T07:03:00.8999032Z' (DbType = DateTime), @p24='system', @p25='True', @p26='7d7cbceb-4ce7-4835-85cd-59562487298d', @p27='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p28='0f55d6eb-f16d-43a3-b9eb-8350c1b5c361', @p29='2025-08-29T07:03:00.9185135Z' (DbType = DateTime), @p30='system', @p31='True', @p32='c819f1bd-422d-4609-916c-cc185fe44ab0', @p33='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p34='102ca102-3390-4ac3-8f2e-1d2556663a3d', @p35='2025-08-29T07:03:00.9188877Z' (DbType = DateTime), @p36='system', @p37='True', @p38='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p39='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p40='11b21ff5-4940-4397-9260-6ab99f627e54', @p41='2025-08-29T07:03:00.8999061Z' (DbType = DateTime), @p42='system', @p43='True', @p44='9ae90cfe-3fea-4307-b024-3083c2728148', @p45='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p46='173fc190-7b7c-4349-95e8-243842d84c69', @p47='2025-08-29T07:03:00.9183999Z' (DbType = DateTime), @p48='system', @p49='True', @p50='30000000-0000-0000-0000-000000000004', @p51='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p52='34dcc697-a3ac-42e5-978a-c175125e856d', @p53='2025-08-29T07:03:00.8998993Z' (DbType = DateTime), @p54='system', @p55='True', @p56='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p57='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p58='3813e608-898e-44c5-b7f6-7b00b5e422c7', @p59='2025-08-29T07:03:00.8998732Z' (DbType = DateTime), @p60='system', @p61='True', @p62='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p63='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p64='473d7493-327f-455c-a268-d544c4afb9bd', @p65='2025-08-29T07:03:00.9188661Z' (DbType = DateTime), @p66='system', @p67='True', @p68='29461562-ef9c-48c0-a606-482ff57b8f95', @p69='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p70='60fc0570-0a3f-49fd-9776-774b5d6fc6f3', @p71='2025-08-29T07:03:00.9188939Z' (DbType = DateTime), @p72='system', @p73='True', @p74='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p75='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p76='8084b6a2-0599-4fff-843f-7e2eda85e98b', @p77='2025-08-29T07:03:00.9184736Z' (DbType = DateTime), @p78='system', @p79='True', @p80='30000000-0000-0000-0000-000000000002', @p81='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p82='a07132f2-c1ef-4699-a5eb-2d568b8d6c42', @p83='2025-08-29T07:03:00.9185039Z' (DbType = DateTime), @p84='system', @p85='True', @p86='30000000-0000-0000-0000-000000000003', @p87='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p88='c7537aa7-665c-44e4-b10f-54cf5f7ea8c6', @p89='2025-08-29T07:03:00.9188912Z' (DbType = DateTime), @p90='system', @p91='True', @p92='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p93='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p94='db0783f8-e8b4-4c80-99da-2cb0726246ca', @p95='2025-08-29T07:03:00.8998263Z' (DbType = DateTime), @p96='system', @p97='True', @p98='821480c6-1464-415e-bba8-066fcb4e7e63', @p99='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p100='e9905a51-026c-44ce-928d-f0b6e5ba7cda', @p101='2025-08-29T07:03:00.9188836Z' (DbType = DateTime), @p102='system', @p103='True', @p104='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p105='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p106='f6b2bfbe-c0ad-4340-af7a-e11b33a157ea', @p107='2025-08-29T07:03:00.9185102Z' (DbType = DateTime), @p108='system', @p109='True', @p110='30000000-0000-0000-0000-000000000001', @p111='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p112='f8266942-3256-40b3-9684-45822c684987', @p113='2025-08-29T07:03:00.9185167Z' (DbType = DateTime), @p114='system', @p115='True', @p116='974af1f9-3caa-4857-a1a7-48462c389332', @p117='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p40, @p41, @p42, @p43, @p44, @p45);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p58, @p59, @p60, @p61, @p62, @p63);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p88, @p89, @p90, @p91, @p92, @p93);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p94, @p95, @p96, @p97, @p98, @p99);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p100, @p101, @p102, @p103, @p104, @p105);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p106, @p107, @p108, @p109, @p110, @p111);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p112, @p113, @p114, @p115, @p116, @p117);
2025-08-29 12:33:00.928 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:00.929 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 33.9348ms
2025-08-29 12:33:00.930 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 12:33:00.931 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 41.0203ms
2025-08-29 12:33:00.933 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 12:33:00.935 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:00.936 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:33:00.936 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:00.939 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 12:33:00.941 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 12:33:00.943 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.4584ms
2025-08-29 12:33:00.944 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 12:33:00.945 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.5441ms
2025-08-29 12:33:05.343 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:05.346 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:05.347 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9766ms
2025-08-29 12:33:05.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:05.352 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:05.353 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:05.354 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:05.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:33:05.361 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:05.362 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0216ms
2025-08-29 12:33:05.363 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:05.364 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.7791ms
2025-08-29 12:33:05.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:05.398 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:05.400 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:05.402 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:05.410 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:33:05.414 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:05.415 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8435ms
2025-08-29 12:33:05.417 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:05.418 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.5157ms
2025-08-29 12:33:05.468 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:05.472 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:05.474 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:05.475 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:05.479 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:33:05.483 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:05.485 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5358ms
2025-08-29 12:33:05.486 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:05.487 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.641ms
2025-08-29 12:33:12.411 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 12:33:12.413 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:12.414 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9109ms
2025-08-29 12:33:12.417 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 12:33:12.419 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:12.420 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:33:12.421 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 12:33:12.424 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 12:33:12.427 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 12:33:12.431 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 12:33:12.436 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 12:33:12.438 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 12:33:12.439 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 12:33:12.440 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 12:33:12.441 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:12.442 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 19.6747ms
2025-08-29 12:33:12.443 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:33:12.444 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 27.2386ms
2025-08-29 12:33:12.447 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:12.449 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:12.450 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9819ms
2025-08-29 12:33:12.452 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:12.454 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:12.455 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:12.455 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:12.460 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:33:12.462 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:12.463 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2649ms
2025-08-29 12:33:12.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:12.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.3344ms
2025-08-29 12:33:12.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:12.482 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:12.483 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:12.484 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:12.488 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:33:12.491 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:12.492 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6856ms
2025-08-29 12:33:12.493 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:12.494 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.6904ms
2025-08-29 12:33:12.549 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:33:12.552 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:33:12.554 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:12.555 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:33:12.559 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:33:12.563 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:33:12.564 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6476ms
2025-08-29 12:33:12.565 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:33:12.566 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4817ms
2025-08-29 12:34:56.489 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:34:56.497 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:34:56.497 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.3269ms
2025-08-29 12:34:56.506 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:34:56.509 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:34:56.510 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:34:56.511 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:34:56.515 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:34:56.523 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:34:56.525 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.8781ms
2025-08-29 12:34:56.527 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:34:56.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.2482ms
2025-08-29 12:34:56.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:34:56.587 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:34:56.588 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:34:56.590 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:34:56.595 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:34:56.599 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:34:56.601 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7465ms
2025-08-29 12:34:56.603 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:34:56.605 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.6325ms
2025-08-29 12:34:56.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:34:56.651 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:34:56.652 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:34:56.654 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:34:56.660 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:34:56.663 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:34:56.665 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8182ms
2025-08-29 12:34:56.666 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:34:56.667 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.5502ms
2025-08-29 12:57:23.245 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:23.253 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:23.255 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.3368ms
2025-08-29 12:57:23.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:23.272 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:23.276 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:23.278 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:23.457 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:23.460 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:23.462 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 182.1497ms
2025-08-29 12:57:23.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:23.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 197.411ms
2025-08-29 12:57:23.476 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:23.478 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:23.480 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:23.481 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:23.486 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:23.493 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:23.494 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.9274ms
2025-08-29 12:57:23.496 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:23.497 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.2082ms
2025-08-29 12:57:23.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:23.555 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:23.557 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:23.557 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:23.563 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:23.566 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:23.569 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8434ms
2025-08-29 12:57:23.570 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:23.572 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7893ms
2025-08-29 12:57:32.866 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:32.868 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:32.869 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4104ms
2025-08-29 12:57:32.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:32.879 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:32.881 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:32.882 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:32.886 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:32.890 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:32.892 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1028ms
2025-08-29 12:57:32.894 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:32.895 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.9782ms
2025-08-29 12:57:32.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:32.923 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:32.924 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:32.926 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:32.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:32.934 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:32.936 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3468ms
2025-08-29 12:57:32.938 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:32.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.5236ms
2025-08-29 12:57:32.981 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:32.984 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:32.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:32.987 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:32.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:32.996 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:32.997 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.597ms
2025-08-29 12:57:32.999 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:33.000 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.4119ms
2025-08-29 12:57:40.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 12:57:40.480 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:40.481 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.9543ms
2025-08-29 12:57:40.485 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 12:57:40.487 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:40.488 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:57:40.489 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 12:57:40.493 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 12:57:40.499 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 12:57:40.504 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 12:57:40.513 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 12:57:40.516 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 12:57:40.519 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 12:57:40.519 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 12:57:40.521 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:40.522 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 31.0949ms
2025-08-29 12:57:40.523 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 12:57:40.524 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 38.8478ms
2025-08-29 12:57:40.526 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:40.528 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:40.529 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7048ms
2025-08-29 12:57:40.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:40.535 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:40.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:40.536 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:40.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:40.543 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:40.544 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.588ms
2025-08-29 12:57:40.545 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:40.546 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.5996ms
2025-08-29 12:57:40.561 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:40.564 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:40.565 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:40.566 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:40.571 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:40.574 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:40.575 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6504ms
2025-08-29 12:57:40.576 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:40.578 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0618ms
2025-08-29 12:57:40.626 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:40.628 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:40.629 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:40.631 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:40.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:40.642 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:40.643 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.9016ms
2025-08-29 12:57:40.644 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:40.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9399ms
2025-08-29 12:57:44.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:44.388 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:44.389 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:44.390 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:44.393 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:44.396 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:44.398 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7735ms
2025-08-29 12:57:44.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:44.400 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4421ms
2025-08-29 12:57:44.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:44.428 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:44.429 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:44.431 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:44.435 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:44.439 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:44.440 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8295ms
2025-08-29 12:57:44.441 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:44.443 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.08ms
2025-08-29 12:57:44.476 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 12:57:44.479 +05:30 [INF] CORS policy execution successful.
2025-08-29 12:57:44.480 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:44.481 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 12:57:44.485 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 12:57:44.489 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 12:57:44.490 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1334ms
2025-08-29 12:57:44.491 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 12:57:44.493 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.8127ms
2025-08-29 13:00:07.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:07.038 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:07.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.1611ms
2025-08-29 13:00:07.049 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:07.051 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:07.053 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:07.054 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:00:07.060 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:00:07.066 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:00:07.069 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.0408ms
2025-08-29 13:00:07.071 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:07.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.9796ms
2025-08-29 13:00:07.087 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:07.091 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:07.092 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:07.093 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:00:07.099 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:00:07.103 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:00:07.105 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.1963ms
2025-08-29 13:00:07.106 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:07.108 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.6385ms
2025-08-29 13:00:07.158 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:07.161 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:07.162 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:07.164 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:00:07.168 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:00:07.172 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:00:07.173 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7475ms
2025-08-29 13:00:07.175 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:07.177 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.6667ms
2025-08-29 13:00:58.505 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:58.512 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:58.513 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.6592ms
2025-08-29 13:00:58.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:58.523 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:58.525 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:58.527 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:00:58.532 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:00:58.537 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:00:58.539 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6111ms
2025-08-29 13:00:58.541 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:58.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.8549ms
2025-08-29 13:00:58.561 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:58.565 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:58.566 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:58.568 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:00:58.573 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:00:58.581 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:00:58.582 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7564ms
2025-08-29 13:00:58.584 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:58.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.4012ms
2025-08-29 13:00:58.627 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:00:58.630 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:00:58.631 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:58.632 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:00:58.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:00:58.640 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:00:58.642 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9248ms
2025-08-29 13:00:58.643 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:00:58.644 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.3844ms
2025-08-29 13:01:06.884 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:01:06.887 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:01:06.889 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.3197ms
2025-08-29 13:01:06.893 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:01:06.895 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:01:06.896 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:01:06.898 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:01:06.903 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:01:06.908 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:01:06.910 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.9025ms
2025-08-29 13:01:06.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:01:06.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4298ms
2025-08-29 13:01:06.947 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:01:06.951 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:01:06.952 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:01:06.953 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:01:06.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:01:06.967 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:01:06.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.7025ms
2025-08-29 13:01:06.971 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:01:06.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.2438ms
2025-08-29 13:01:07.001 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:01:07.004 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:01:07.005 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:01:07.006 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:01:07.012 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:01:07.015 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:01:07.017 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4763ms
2025-08-29 13:01:07.019 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:01:07.020 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.9555ms
2025-08-29 13:01:59.514 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:01:59.517 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:01:59.518 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.9782ms
2025-08-29 13:01:59.525 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 781
2025-08-29 13:01:59.527 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:01:59.530 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:01:59.531 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:01:59.539 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:01:59.568 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='00663e89-fe13-4316-842a-7a250f070866', @p1='0b807f91-1d23-4d63-b06e-2f97b20cb69f', @p2='0f55d6eb-f16d-43a3-b9eb-8350c1b5c361', @p3='102ca102-3390-4ac3-8f2e-1d2556663a3d', @p4='11b21ff5-4940-4397-9260-6ab99f627e54', @p5='173fc190-7b7c-4349-95e8-243842d84c69', @p6='34dcc697-a3ac-42e5-978a-c175125e856d', @p7='3813e608-898e-44c5-b7f6-7b00b5e422c7', @p8='473d7493-327f-455c-a268-d544c4afb9bd', @p9='60fc0570-0a3f-49fd-9776-774b5d6fc6f3', @p10='8084b6a2-0599-4fff-843f-7e2eda85e98b', @p11='a07132f2-c1ef-4699-a5eb-2d568b8d6c42', @p12='c7537aa7-665c-44e4-b10f-54cf5f7ea8c6', @p13='db0783f8-e8b4-4c80-99da-2cb0726246ca', @p14='e9905a51-026c-44ce-928d-f0b6e5ba7cda', @p15='f6b2bfbe-c0ad-4340-af7a-e11b33a157ea', @p16='f8266942-3256-40b3-9684-45822c684987', @p17='09243646-bd94-4185-972c-c229ce8be2a1', @p18='2025-08-29T07:31:59.5474722Z' (DbType = DateTime), @p19='system', @p20='True', @p21='30000000-0000-0000-0000-000000000002', @p22='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p23='0aa87c4d-535a-490e-a0bb-ce5ad681bb82', @p24='2025-08-29T07:31:59.5474998Z' (DbType = DateTime), @p25='system', @p26='True', @p27='974af1f9-3caa-4857-a1a7-48462c389332', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='0b7c067b-5070-469c-ba18-4e32b691f5e5', @p30='2025-08-29T07:31:59.5474973Z' (DbType = DateTime), @p31='system', @p32='True', @p33='c819f1bd-422d-4609-916c-cc185fe44ab0', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='0fc76bac-c9ad-4866-b731-e2bb6bf82e53', @p36='2025-08-29T07:31:59.5475071Z' (DbType = DateTime), @p37='system', @p38='True', @p39='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='173d7555-42a0-4259-95f5-461f4171e235', @p42='2025-08-29T07:31:59.5453446Z' (DbType = DateTime), @p43='system', @p44='True', @p45='821480c6-1464-415e-bba8-066fcb4e7e63', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='17b9f8cb-15d8-465e-a373-fda7dafbcf56', @p48='2025-08-29T07:31:59.5475215Z' (DbType = DateTime), @p49='system', @p50='True', @p51='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='1b9f53ed-9821-4c40-9de8-db4de597bd32', @p54='2025-08-29T07:31:59.5474605Z' (DbType = DateTime), @p55='system', @p56='True', @p57='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='26d57a47-81ac-4a58-b2af-2eb1d116efec', @p60='2025-08-29T07:31:59.5474671Z' (DbType = DateTime), @p61='system', @p62='True', @p63='9ae90cfe-3fea-4307-b024-3083c2728148', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='33a6cfbe-34c7-453f-a6d5-8a496ae5e8c5', @p66='2025-08-29T07:31:59.5474474Z' (DbType = DateTime), @p67='system', @p68='True', @p69='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='3451d138-c2a6-48b2-9b40-13c9e7fe6164', @p72='2025-08-29T07:31:59.5474207Z' (DbType = DateTime), @p73='system', @p74='True', @p75='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='6210606a-aff0-4091-89fe-810496fbca86', @p78='2025-08-29T07:31:59.5475047Z' (DbType = DateTime), @p79='system', @p80='True', @p81='29461562-ef9c-48c0-a606-482ff57b8f95', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='7194afde-acd9-4492-a826-e6bed33eebec', @p84='2025-08-29T07:31:59.5474698Z' (DbType = DateTime), @p85='system', @p86='True', @p87='30000000-0000-0000-0000-000000000004', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='76158d1a-b85c-4f9b-be88-2f85d0401ec8', @p90='2025-08-29T07:31:59.5474746Z' (DbType = DateTime), @p91='system', @p92='True', @p93='30000000-0000-0000-0000-000000000003', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='7c51efa2-70a0-47fe-b262-eb609808a44c', @p96='2025-08-29T07:31:59.5474431Z' (DbType = DateTime), @p97='system', @p98='True', @p99='7d7cbceb-4ce7-4835-85cd-59562487298d', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='823fba72-aa87-4b43-acc6-2e58ca0b955c', @p102='2025-08-29T07:31:59.5475023Z' (DbType = DateTime), @p103='system', @p104='True', @p105='0485154c-dde5-4732-a7aa-a379c77a5b27', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='b397e841-e0d4-4157-95ee-3819c241c356', @p108='2025-08-29T07:31:59.5474937Z' (DbType = DateTime), @p109='system', @p110='True', @p111='30000000-0000-0000-0000-000000000001', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p113='ba99eba6-4ebe-4075-a6b1-efe0df74e37d', @p114='2025-08-29T07:31:59.5474391Z' (DbType = DateTime), @p115='system', @p116='True', @p117='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p118='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p119='cdaacc80-5068-46d3-80d9-9177b0fcd33f', @p120='2025-08-29T07:31:59.5475177Z' (DbType = DateTime), @p121='system', @p122='True', @p123='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p124='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p125='d95144ba-48eb-45fc-b5a5-cb0d931d1f2e', @p126='2025-08-29T07:31:59.5474646Z' (DbType = DateTime), @p127='system', @p128='True', @p129='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p130='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p131='ffcc3d51-ed9e-4ec6-ad34-9603aa147f5b', @p132='2025-08-29T07:31:59.5475240Z' (DbType = DateTime), @p133='system', @p134='True', @p135='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p136='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p125, @p126, @p127, @p128, @p129, @p130);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p131, @p132, @p133, @p134, @p135, @p136);
2025-08-29 13:01:59.574 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:01:59.574 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 42.4572ms
2025-08-29 13:01:59.575 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:01:59.576 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 51.2139ms
2025-08-29 13:01:59.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:01:59.580 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:01:59.581 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:01:59.582 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:01:59.586 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:01:59.590 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:01:59.592 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 8.2101ms
2025-08-29 13:01:59.593 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:01:59.593 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 15.1535ms
2025-08-29 13:02:07.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:02:07.181 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:07.182 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.9899ms
2025-08-29 13:02:07.186 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:02:07.188 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:07.190 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:02:07.191 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:02:07.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:02:07.206 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:02:07.208 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.7872ms
2025-08-29 13:02:07.209 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:02:07.211 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.6524ms
2025-08-29 13:02:07.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:02:07.237 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:07.238 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:02:07.239 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:02:07.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:02:07.249 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:02:07.252 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1071ms
2025-08-29 13:02:07.254 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:02:07.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.3124ms
2025-08-29 13:02:07.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:02:07.314 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:07.315 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:02:07.317 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:02:07.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:02:07.324 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:02:07.326 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2672ms
2025-08-29 13:02:07.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:02:07.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1323ms
2025-08-29 13:02:17.959 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 13:02:17.962 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:17.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 4.3973ms
2025-08-29 13:02:17.990 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 13:02:17.996 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:17.997 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 13:02:17.999 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-29 13:02:18.022 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-29 13:02:18.024 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 13:02:18.025 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 24.7845ms
2025-08-29 13:02:18.026 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 13:02:18.027 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 36.3393ms
2025-08-29 13:02:20.797 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 13:02:20.799 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:20.800 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - 204 null null 3.1106ms
2025-08-29 13:02:20.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 13:02:20.812 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:20.813 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 13:02:20.815 +05:30 [INF] Route matched with {action = "GetSummary", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSummary() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 13:02:20.864 +05:30 [INF] 📊 Generating Flow Analytics Summary for BusinessId: "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"
2025-08-29 13:02:20.953 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."RawResponse", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
2025-08-29 13:02:21.006 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.FlowAnalytics.DTOs.FlowAnalyticsSummaryDto'.
2025-08-29 13:02:21.024 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api) in 208.0844ms
2025-08-29 13:02:21.025 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 13:02:21.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - 200 null application/json; charset=utf-8 217.3569ms
2025-08-29 13:02:21.028 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/most-triggered-steps - null null
2025-08-29 13:02:21.030 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:21.030 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/most-triggered-steps - 204 null null 2.212ms
2025-08-29 13:02:21.032 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/most-triggered-steps - null null
2025-08-29 13:02:21.034 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:21.037 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api)'
2025-08-29 13:02:21.050 +05:30 [INF] Route matched with {action = "GetMostTriggeredSteps", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMostTriggeredSteps() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 13:02:21.097 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT f."StepId", f."StepName", count(*)::int AS "TriggerCount", max(f."ExecutedAt") AS "LastTriggeredAt"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
GROUP BY f."StepId", f."StepName"
ORDER BY count(*)::int DESC
LIMIT @__p_1
2025-08-29 13:02:21.099 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.FlowAnalytics.DTOs.MostTriggeredStepDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:02:21.104 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api) in 52.8064ms
2025-08-29 13:02:21.105 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api)'
2025-08-29 13:02:21.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/most-triggered-steps - 200 null application/json; charset=utf-8 73.5925ms
2025-08-29 13:02:21.110 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/step-journey-breakdown - null null
2025-08-29 13:02:21.112 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:21.112 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/step-journey-breakdown - 204 null null 2.3742ms
2025-08-29 13:02:21.114 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/step-journey-breakdown - null null
2025-08-29 13:02:21.117 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:02:21.119 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api)'
2025-08-29 13:02:21.125 +05:30 [INF] Route matched with {action = "GetStepJourneyBreakdown", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStepJourneyBreakdown(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 13:02:21.135 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."RawResponse", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
2025-08-29 13:02:21.139 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.FlowAnalytics.DTOs.FlowAnalyticsStepJourneyDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:02:21.169 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api) in 42.472ms
2025-08-29 13:02:21.170 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api)'
2025-08-29 13:02:21.170 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/step-journey-breakdown - 200 null application/json; charset=utf-8 55.9344ms
2025-08-29 13:03:15.085 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:03:15.093 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:03:15.094 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.1641ms
2025-08-29 13:03:15.100 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:03:15.103 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:03:15.104 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:03:15.105 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:03:15.256 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:03:15.258 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:03:15.259 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 152.4354ms
2025-08-29 13:03:15.260 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:03:15.261 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 161.3217ms
2025-08-29 13:03:15.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:03:15.271 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:03:15.272 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:03:15.272 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:03:15.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:03:15.279 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:03:15.281 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7222ms
2025-08-29 13:03:15.282 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:03:15.283 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.4702ms
2025-08-29 13:03:15.325 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:03:15.327 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:03:15.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:03:15.330 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:03:15.334 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:03:15.337 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:03:15.338 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5653ms
2025-08-29 13:03:15.339 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:03:15.340 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3538ms
2025-08-29 13:08:25.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 13:08:25.137 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:25.138 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 8.7198ms
2025-08-29 13:08:25.142 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 13:08:25.145 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:25.146 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 13:08:25.149 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 13:08:25.354 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."CreatedAt", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND NOT (c."IsPublished") AND c."IsActive"
ORDER BY c."CreatedAt" DESC
2025-08-29 13:08:25.358 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:08:25.365 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 214.1286ms
2025-08-29 13:08:25.366 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 13:08:25.367 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 200 null application/json; charset=utf-8 225.5964ms
2025-08-29 13:08:30.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 13:08:30.955 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:30.956 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - 204 null null 2.5393ms
2025-08-29 13:08:30.960 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 13:08:30.963 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:30.964 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 13:08:30.965 +05:30 [INF] Route matched with {action = "GetSummary", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSummary() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 13:08:30.968 +05:30 [INF] 📊 Generating Flow Analytics Summary for BusinessId: "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"
2025-08-29 13:08:30.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."RawResponse", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
2025-08-29 13:08:30.976 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.FlowAnalytics.DTOs.FlowAnalyticsSummaryDto'.
2025-08-29 13:08:30.977 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api) in 10.7593ms
2025-08-29 13:08:30.979 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 13:08:30.980 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - 200 null application/json; charset=utf-8 19.6039ms
2025-08-29 13:08:30.982 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/most-triggered-steps - null null
2025-08-29 13:08:30.984 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:30.985 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/most-triggered-steps - 204 null null 2.776ms
2025-08-29 13:08:30.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/most-triggered-steps - null null
2025-08-29 13:08:30.989 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:30.990 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api)'
2025-08-29 13:08:30.991 +05:30 [INF] Route matched with {action = "GetMostTriggeredSteps", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMostTriggeredSteps() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 13:08:30.997 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT f."StepId", f."StepName", count(*)::int AS "TriggerCount", max(f."ExecutedAt") AS "LastTriggeredAt"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
GROUP BY f."StepId", f."StepName"
ORDER BY count(*)::int DESC
LIMIT @__p_1
2025-08-29 13:08:30.998 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.FlowAnalytics.DTOs.MostTriggeredStepDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:08:30.999 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api) in 7.3448ms
2025-08-29 13:08:31.000 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api)'
2025-08-29 13:08:31.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/most-triggered-steps - 200 null application/json; charset=utf-8 14.2143ms
2025-08-29 13:08:31.004 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/step-journey-breakdown - null null
2025-08-29 13:08:31.006 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:31.007 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/step-journey-breakdown - 204 null null 2.9785ms
2025-08-29 13:08:31.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/step-journey-breakdown - null null
2025-08-29 13:08:31.012 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:31.013 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api)'
2025-08-29 13:08:31.013 +05:30 [INF] Route matched with {action = "GetStepJourneyBreakdown", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStepJourneyBreakdown(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 13:08:31.018 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."RawResponse", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
2025-08-29 13:08:31.021 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.FlowAnalytics.DTOs.FlowAnalyticsStepJourneyDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:08:31.022 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api) in 7.3749ms
2025-08-29 13:08:31.023 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api)'
2025-08-29 13:08:31.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/step-journey-breakdown - 200 null application/json; charset=utf-8 15.014ms
2025-08-29 13:08:33.652 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 13:08:33.654 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:33.655 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 3.2426ms
2025-08-29 13:08:33.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 13:08:33.663 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:08:33.664 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 13:08:33.665 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-29 13:08:33.671 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-29 13:08:33.675 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 13:08:33.676 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 10.0368ms
2025-08-29 13:08:33.678 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 13:08:33.679 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 17.9927ms
2025-08-29 13:10:05.452 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - null null
2025-08-29 13:10:05.463 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:05.464 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - 204 null null 13.0633ms
2025-08-29 13:10:05.467 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - null null
2025-08-29 13:10:05.470 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:05.471 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 13:10:05.473 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 13:10:05.491 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-29 13:10:05.499 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 24.6013ms
2025-08-29 13:10:05.500 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 13:10:05.500 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId/summary - 400 null application/problem+json; charset=utf-8 33.4707ms
2025-08-29 13:10:05.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - null null
2025-08-29 13:10:05.911 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:05.912 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - 204 null null 2.5264ms
2025-08-29 13:10:05.914 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - null null
2025-08-29 13:10:05.922 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:05.923 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 13:10:05.923 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 13:10:05.929 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-08-29 13:10:05.930 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 5.3503ms
2025-08-29 13:10:05.931 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 13:10:05.932 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/:campaignId?page=1&pageSize=10&status=&search= - 400 null application/problem+json; charset=utf-8 18.208ms
2025-08-29 13:10:16.251 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - null null
2025-08-29 13:10:16.253 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:16.254 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - 204 null null 2.6404ms
2025-08-29 13:10:16.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs - null null
2025-08-29 13:10:16.265 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:16.265 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 13:10:16.267 +05:30 [INF] Route matched with {action = "GetAll", controller = "TrackingViewer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid]) on controller xbytechat.api.Features.Tracking.Controllers.TrackingViewerController (xbytechat.api).
2025-08-29 13:10:16.286 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."ContactPhone", CASE
    WHEN c."Id" IS NOT NULL THEN c."Name"
    ELSE '(N/A)'
END AS "ContactName", t."ButtonText", t."CTAType", t."SourceType", t."ClickedAt", t."DeviceType", t."Country", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE '(Unknown)'
END AS "CampaignName"
FROM "TrackingLogs" AS t
LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
LEFT JOIN "Campaigns" AS c0 ON t."CampaignId" = c0."Id"
ORDER BY t."ClickedAt" DESC
2025-08-29 13:10:16.288 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType86`10[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:10:16.289 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api) in 20.8786ms
2025-08-29 13:10:16.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 13:10:16.291 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/logs - 200 null application/json; charset=utf-8 29.123ms
2025-08-29 13:10:45.427 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 13:10:45.430 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:45.431 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 204 null null 3.5227ms
2025-08-29 13:10:45.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-29 13:10:45.442 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:45.443 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 13:10:45.444 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 13:10:45.459 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-29 13:10:45.468 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 13:10:45.471 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:10:45.472 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 26.3042ms
2025-08-29 13:10:45.473 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-29 13:10:45.474 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 34.1626ms
2025-08-29 13:10:58.905 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/analytics/:campaignId/summary - null null
2025-08-29 13:10:58.908 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:58.908 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/analytics/:campaignId/summary - 204 null null 3.952ms
2025-08-29 13:10:58.922 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - null null
2025-08-29 13:10:58.925 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:10:58.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - 404 0 null 4.7821ms
2025-08-29 13:10:58.933 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary, Response status code: 404
2025-08-29 13:11:51.462 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-08-29 13:11:51.473 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:11:51.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 12.4991ms
2025-08-29 13:11:51.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-08-29 13:11:51.483 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:11:51.485 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 13:11:51.486 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 13:11:51.577 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 89.9242ms
2025-08-29 13:11:51.579 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 13:11:51.613 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts(String tab, Int32 page, Int32 pageSize) in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 135
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:11:51.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 500 null application/json; charset=utf-8 158.727ms
2025-08-29 13:11:51.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 13:11:51.799 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 13:11:51.800 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 13:11:51.824 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 23.6372ms
2025-08-29 13:11:51.826 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 13:11:51.852 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:11:51.860 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 65.7249ms
2025-08-29 13:21:08.458 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 13:21:08.470 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:21:08.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 13.4458ms
2025-08-29 13:21:08.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 13:21:08.489 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:21:08.493 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 13:21:08.504 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 13:21:08.562 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 56.1858ms
2025-08-29 13:21:08.564 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 13:21:08.590 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:21:08.599 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 117.7867ms
2025-08-29 13:35:37.861 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.470d01ddf9573ef83eb4.hot-update.json - null null
2025-08-29 13:35:37.863 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.470d01ddf9573ef83eb4.hot-update.json - null null
2025-08-29 13:35:37.876 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.470d01ddf9573ef83eb4.hot-update.json - 404 0 null 13.1889ms
2025-08-29 13:35:37.876 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.470d01ddf9573ef83eb4.hot-update.json - 404 0 null 15.3357ms
2025-08-29 13:35:37.913 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.470d01ddf9573ef83eb4.hot-update.json, Response status code: 404
2025-08-29 13:35:37.958 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.470d01ddf9573ef83eb4.hot-update.json, Response status code: 404
2025-08-29 13:35:39.279 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:35:39.284 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:35:39.286 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.2684ms
2025-08-29 13:35:39.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:35:39.294 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:35:39.296 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:35:39.299 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:35:39.569 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:35:39.574 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:35:39.577 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 274.871ms
2025-08-29 13:35:39.579 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:35:39.581 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 290.5434ms
2025-08-29 13:35:39.616 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:35:39.619 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:35:39.620 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:35:39.621 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:35:39.626 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:35:39.631 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:35:39.634 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1055ms
2025-08-29 13:35:39.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:35:39.637 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.9504ms
2025-08-29 13:37:38.932 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:37:38.935 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:37:38.940 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:37:38.942 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:37:38.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.5191ms
2025-08-29 13:37:38.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.7699ms
2025-08-29 13:37:38.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:37:38.957 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:37:38.958 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:37:38.959 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:37:38.974 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:37:38.979 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:37:38.980 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.7468ms
2025-08-29 13:37:38.981 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:37:38.983 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:37:38.984 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:37:38.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.902ms
2025-08-29 13:37:38.987 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:37:38.990 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:37:38.997 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:37:39.004 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:37:39.006 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.6336ms
2025-08-29 13:37:39.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:37:39.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.1732ms
2025-08-29 13:38:18.239 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json - null null
2025-08-29 13:38:18.242 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json - 404 0 null 3.4478ms
2025-08-29 13:38:18.246 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json, Response status code: 404
2025-08-29 13:38:18.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json - null null
2025-08-29 13:38:18.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json - 404 0 null 3.5525ms
2025-08-29 13:38:18.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json - null null
2025-08-29 13:38:18.301 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json, Response status code: 404
2025-08-29 13:38:18.306 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json - 404 0 null 18.9824ms
2025-08-29 13:38:18.321 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.bb1a16170440ff04fa7a.hot-update.json, Response status code: 404
2025-08-29 13:38:18.928 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:38:18.933 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:38:18.938 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.376ms
2025-08-29 13:38:18.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:38:18.948 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:38:18.955 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:38:18.961 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:38:18.972 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:38:18.977 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:38:18.980 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.4672ms
2025-08-29 13:38:18.981 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:38:18.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.3632ms
2025-08-29 13:38:20.823 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:38:21.139 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:38:21.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:38:21.757 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:38:22.105 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:38:22.108 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:38:22.158 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 105.287ms
2025-08-29 13:38:22.168 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:38:22.183 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:38:22.218 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 1409.3638ms
2025-08-29 13:38:22.218 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:38:22.407 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:38:22.457 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:38:22.510 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:38:22.513 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:38:22.601 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 141.4341ms
2025-08-29 13:38:22.602 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:38:22.625 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 456.6522ms
2025-08-29 13:42:04.928 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:04.928 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:04.943 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:04.945 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:04.945 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 17.4182ms
2025-08-29 13:42:04.947 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 18.8324ms
2025-08-29 13:42:04.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:04.959 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:04.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:04.960 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:05.211 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:05.213 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:05.215 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 252.8924ms
2025-08-29 13:42:05.215 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:05.216 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:05.218 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:05.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 265.0329ms
2025-08-29 13:42:05.220 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:05.224 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:05.228 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:05.231 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:05.233 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5532ms
2025-08-29 13:42:05.235 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:05.236 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.7619ms
2025-08-29 13:42:25.930 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:25.932 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:25.938 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:25.942 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:25.942 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.8774ms
2025-08-29 13:42:25.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.1984ms
2025-08-29 13:42:25.951 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:25.953 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:25.954 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:25.955 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:25.959 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:25.962 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:25.963 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6136ms
2025-08-29 13:42:25.964 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:25.964 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:25.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6011ms
2025-08-29 13:42:25.970 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:25.974 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:25.975 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:25.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:25.981 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:25.983 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0099ms
2025-08-29 13:42:25.984 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:25.986 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.4471ms
2025-08-29 13:42:39.930 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:39.930 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:39.933 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:39.935 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:39.936 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7787ms
2025-08-29 13:42:39.937 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.4907ms
2025-08-29 13:42:39.943 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:39.946 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:39.947 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:39.948 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:39.953 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:39.958 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:39.960 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6624ms
2025-08-29 13:42:39.961 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:39.962 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:39.964 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:39.966 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.2792ms
2025-08-29 13:42:39.967 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:39.971 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:39.980 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:39.983 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:39.985 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4254ms
2025-08-29 13:42:39.987 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:39.988 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.9271ms
2025-08-29 13:42:48.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:48.934 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:48.935 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:48.938 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:48.938 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.5169ms
2025-08-29 13:42:48.939 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.3466ms
2025-08-29 13:42:48.944 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:48.946 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:48.947 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:48.948 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:48.951 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:48.954 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:48.956 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3786ms
2025-08-29 13:42:48.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:42:48.957 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:48.959 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:42:48.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0524ms
2025-08-29 13:42:48.960 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:48.963 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:42:48.967 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:42:48.970 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:42:48.972 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0195ms
2025-08-29 13:42:48.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:42:48.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.7885ms
2025-08-29 13:44:21.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:21.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:21.926 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:21.928 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:21.929 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.0156ms
2025-08-29 13:44:21.933 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.431ms
2025-08-29 13:44:21.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:21.941 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:21.941 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:21.943 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:44:21.947 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:44:21.950 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:44:21.951 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0136ms
2025-08-29 13:44:21.952 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:21.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:21.955 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:21.956 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4278ms
2025-08-29 13:44:21.958 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:21.962 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:44:21.969 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:44:21.973 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:44:21.974 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6487ms
2025-08-29 13:44:21.976 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:21.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.6276ms
2025-08-29 13:44:43.931 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:43.935 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:43.937 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:43.939 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:43.939 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.1126ms
2025-08-29 13:44:43.941 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.2177ms
2025-08-29 13:44:43.949 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:43.951 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:43.953 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:43.954 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:44:43.961 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:44:43.970 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:44:43.972 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.5777ms
2025-08-29 13:44:43.972 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:44:43.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:43.975 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:44:43.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.3374ms
2025-08-29 13:44:43.976 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:43.980 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:44:43.983 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:44:43.986 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:44:43.987 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8889ms
2025-08-29 13:44:43.989 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:44:43.990 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0712ms
2025-08-29 13:45:37.925 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:37.925 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:37.934 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:37.936 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:37.937 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.2703ms
2025-08-29 13:45:37.939 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.7076ms
2025-08-29 13:45:37.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:37.949 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:37.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:37.950 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:45:37.954 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:45:37.957 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:37.958 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9063ms
2025-08-29 13:45:37.959 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:37.959 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:37.961 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:37.961 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6661ms
2025-08-29 13:45:37.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:37.965 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:45:37.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:45:37.971 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:37.972 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6413ms
2025-08-29 13:45:37.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:37.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:37.975 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:37.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.3504ms
2025-08-29 13:45:37.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:37.980 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:45:37.983 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:45:37.986 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:37.987 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7122ms
2025-08-29 13:45:37.988 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:37.988 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:37.990 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:37.991 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.6743ms
2025-08-29 13:45:37.991 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:37.994 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:45:37.998 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:45:38.001 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:38.002 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1879ms
2025-08-29 13:45:38.004 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:38.005 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1314ms
2025-08-29 13:45:38.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:38.096 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:38.097 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:38.099 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:45:38.105 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:45:38.109 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:38.110 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5029ms
2025-08-29 13:45:38.112 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:38.113 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.383ms
2025-08-29 13:45:47.994 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 13:45:47.996 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:47.997 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9567ms
2025-08-29 13:45:48.003 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 13:45:48.005 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:48.006 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:45:48.007 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 13:45:48.015 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 13:45:48.026 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 13:45:48.035 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 13:45:48.040 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 13:45:48.045 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 13:45:48.046 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 13:45:48.048 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:48.049 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 39.8986ms
2025-08-29 13:45:48.050 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:45:48.051 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 48.4698ms
2025-08-29 13:45:48.054 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:48.057 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:48.057 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9273ms
2025-08-29 13:45:48.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:48.064 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:48.064 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:48.065 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:45:48.067 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:48.069 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.8855ms
2025-08-29 13:45:48.070 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:48.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.979ms
2025-08-29 13:45:48.114 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:45:48.116 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:45:48.117 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:48.118 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:45:48.120 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:45:48.122 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.6589ms
2025-08-29 13:45:48.123 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:45:48.125 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.9828ms
2025-08-29 13:46:03.469 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 13:46:03.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 13:46:03.477 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:03.478 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:03.479 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 10.4956ms
2025-08-29 13:46:03.480 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 9.8292ms
2025-08-29 13:46:03.482 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 13:46:03.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 13:46:03.487 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:03.489 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:03.489 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 13:46:03.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 13:46:03.491 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:46:03.492 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 13:46:03.495 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 13:46:03.498 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:46:03.500 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 6.4011ms
2025-08-29 13:46:03.501 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 13:46:03.502 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 19.7577ms
2025-08-29 13:46:03.503 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 13:46:03.510 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:46:03.514 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 13:46:03.514 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:03.516 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 20.2281ms
2025-08-29 13:46:03.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 6.3284ms
2025-08-29 13:46:03.518 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 13:46:03.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:46:03.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 36.7904ms
2025-08-29 13:46:03.523 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:03.526 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:46:03.527 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:46:03.532 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:46:03.535 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:46:03.536 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 8.4735ms
2025-08-29 13:46:03.538 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:46:03.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 18.6137ms
2025-08-29 13:46:16.306 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:46:16.308 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:16.309 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.9879ms
2025-08-29 13:46:16.311 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 235
2025-08-29 13:46:16.313 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:16.315 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:46:16.316 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:46:16.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:46:16.344 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='09243646-bd94-4185-972c-c229ce8be2a1', @p1='0aa87c4d-535a-490e-a0bb-ce5ad681bb82', @p2='0b7c067b-5070-469c-ba18-4e32b691f5e5', @p3='0fc76bac-c9ad-4866-b731-e2bb6bf82e53', @p4='173d7555-42a0-4259-95f5-461f4171e235', @p5='17b9f8cb-15d8-465e-a373-fda7dafbcf56', @p6='1b9f53ed-9821-4c40-9de8-db4de597bd32', @p7='26d57a47-81ac-4a58-b2af-2eb1d116efec', @p8='33a6cfbe-34c7-453f-a6d5-8a496ae5e8c5', @p9='3451d138-c2a6-48b2-9b40-13c9e7fe6164', @p10='6210606a-aff0-4091-89fe-810496fbca86', @p11='7194afde-acd9-4492-a826-e6bed33eebec', @p12='76158d1a-b85c-4f9b-be88-2f85d0401ec8', @p13='7c51efa2-70a0-47fe-b262-eb609808a44c', @p14='823fba72-aa87-4b43-acc6-2e58ca0b955c', @p15='b397e841-e0d4-4157-95ee-3819c241c356', @p16='ba99eba6-4ebe-4075-a6b1-efe0df74e37d', @p17='cdaacc80-5068-46d3-80d9-9177b0fcd33f', @p18='d95144ba-48eb-45fc-b5a5-cb0d931d1f2e', @p19='ffcc3d51-ed9e-4ec6-ad34-9603aa147f5b', @p20='3a10a95e-18c6-4ea2-942b-6add16ada429', @p21='2025-08-29T08:16:16.3284177Z' (DbType = DateTime), @p22='system', @p23='True', @p24='30000000-0000-0000-0000-000000000000', @p25='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p26='4cb1b744-7284-4d1e-9c61-39e9747392e1', @p27='2025-08-29T08:16:16.3283963Z' (DbType = DateTime), @p28='system', @p29='True', @p30='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p31='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p32='94688292-d493-4c3f-9084-fc3142b7dd17', @p33='2025-08-29T08:16:16.3270008Z' (DbType = DateTime), @p34='system', @p35='True', @p36='821480c6-1464-415e-bba8-066fcb4e7e63', @p37='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p38='9b9d2db5-373f-4828-93e3-734ff824f28d', @p39='2025-08-29T08:16:16.3284207Z' (DbType = DateTime), @p40='system', @p41='True', @p42='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p43='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p44='c64701f9-966c-4b4d-8ccc-20fda77790b8', @p45='2025-08-29T08:16:16.3284139Z' (DbType = DateTime), @p46='system', @p47='True', @p48='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p49='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p50='edd8834c-a1a1-481a-a7fc-fb29d987e261', @p51='2025-08-29T08:16:16.3284232Z' (DbType = DateTime), @p52='system', @p53='True', @p54='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p55='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p20, @p21, @p22, @p23, @p24, @p25);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p44, @p45, @p46, @p47, @p48, @p49);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p50, @p51, @p52, @p53, @p54, @p55);
2025-08-29 13:46:16.348 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:46:16.350 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 32.7177ms
2025-08-29 13:46:16.351 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:46:16.352 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 40.896ms
2025-08-29 13:46:16.354 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:46:16.357 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:16.357 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:46:16.358 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:46:16.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:46:16.364 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:46:16.365 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.6463ms
2025-08-29 13:46:16.366 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:46:16.367 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.9834ms
2025-08-29 13:46:17.936 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 235
2025-08-29 13:46:17.939 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:17.940 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:46:17.941 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:46:17.944 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:46:17.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3a10a95e-18c6-4ea2-942b-6add16ada429', @p1='4cb1b744-7284-4d1e-9c61-39e9747392e1', @p2='94688292-d493-4c3f-9084-fc3142b7dd17', @p3='9b9d2db5-373f-4828-93e3-734ff824f28d', @p4='c64701f9-966c-4b4d-8ccc-20fda77790b8', @p5='edd8834c-a1a1-481a-a7fc-fb29d987e261', @p6='860a78cb-4c8b-467d-a710-8148d31b7ef1', @p7='2025-08-29T08:16:17.9481434Z' (DbType = DateTime), @p8='system', @p9='True', @p10='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p11='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p12='b6faca3f-ac2d-47c3-abd2-99688ae4c18c', @p13='2025-08-29T08:16:17.9481481Z' (DbType = DateTime), @p14='system', @p15='True', @p16='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p17='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p18='cb3571c6-ba59-4517-bbb6-1baeefba675a', @p19='2025-08-29T08:16:17.9481004Z' (DbType = DateTime), @p20='system', @p21='True', @p22='821480c6-1464-415e-bba8-066fcb4e7e63', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='cd33901e-a29a-4bdd-99fd-a8557a01282f', @p25='2025-08-29T08:16:17.9481512Z' (DbType = DateTime), @p26='system', @p27='True', @p28='30000000-0000-0000-0000-000000000000', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='d59d8e0d-fc78-4ce0-93c3-f5df5298b43d', @p31='2025-08-29T08:16:17.9481607Z' (DbType = DateTime), @p32='system', @p33='True', @p34='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='fd6a0ff6-4beb-4a98-8503-ab84c383c828', @p37='2025-08-29T08:16:17.9481577Z' (DbType = DateTime), @p38='system', @p39='True', @p40='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
2025-08-29 13:46:17.968 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:46:17.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 27.0876ms
2025-08-29 13:46:17.971 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:46:17.972 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 35.037ms
2025-08-29 13:46:17.974 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:46:17.976 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:46:17.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:46:17.978 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:46:17.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:46:17.984 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:46:17.985 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.9245ms
2025-08-29 13:46:17.986 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:46:17.987 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 13.3255ms
2025-08-29 13:48:30.008 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:48:30.025 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 18.4221ms
2025-08-29 13:48:30.044 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 13:48:30.050 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.052 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 7.9905ms
2025-08-29 13:48:30.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 13:48:30.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:48:30.080 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.076 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 13:48:30.088 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.089 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 30.2847ms
2025-08-29 13:48:30.093 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.095 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.102 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 13:48:30.103 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:48:30.105 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:48:30.108 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:48:30.113 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.9998ms
2025-08-29 13:48:30.125 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.127 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 67.3028ms
2025-08-29 13:48:30.141 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 13:48:30.145 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.147 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 13:48:30.149 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 13:48:30.298 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 13:48:30.300 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:48:30.302 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 192.2662ms
2025-08-29 13:48:30.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 13:48:30.304 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 228.9031ms
2025-08-29 13:48:30.308 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:48:30.311 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.311 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.9411ms
2025-08-29 13:48:30.315 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:48:30.319 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.320 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.321 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:48:30.324 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:48:30.325 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.2883ms
2025-08-29 13:48:30.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 13.3237ms
2025-08-29 13:48:30.396 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 13:48:30.398 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 13:48:30.400 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 245.9273ms
2025-08-29 13:48:30.401 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 13:48:30.402 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 261.0057ms
2025-08-29 13:48:30.937 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:48:30.940 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.940 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1355ms
2025-08-29 13:48:30.943 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:48:30.945 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.946 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.947 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:48:30.951 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:48:30.954 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:48:30.955 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0795ms
2025-08-29 13:48:30.957 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.958 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7284ms
2025-08-29 13:48:30.964 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:48:30.967 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.968 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.969 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:48:30.973 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:48:30.977 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:48:30.978 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5601ms
2025-08-29 13:48:30.979 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:48:30.980 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.983 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:30.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.3981ms
2025-08-29 13:48:30.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:30.990 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:48:30.993 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:48:30.997 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:48:30.999 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1551ms
2025-08-29 13:48:31.000 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:31.002 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.1735ms
2025-08-29 13:48:31.068 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:48:31.070 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:48:31.071 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:31.072 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:48:31.075 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:48:31.078 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:48:31.079 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0077ms
2025-08-29 13:48:31.081 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:48:31.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.1728ms
2025-08-29 13:52:14.286 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 13:52:14.291 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 13:52:14.297 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:14.299 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 13:52:14.305 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:14.305 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 18.1806ms
2025-08-29 13:52:14.312 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 22.2338ms
2025-08-29 13:52:14.307 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 13:52:14.312 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:14.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 13:52:14.323 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:14.324 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 25.1694ms
2025-08-29 13:52:14.326 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:14.326 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 20.2061ms
2025-08-29 13:52:14.329 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 13:52:14.332 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 13:52:14.333 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 13:52:14.335 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:14.337 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 13:52:14.338 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 13:52:14.437 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 97.0966ms
2025-08-29 13:52:14.437 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 100.8217ms
2025-08-29 13:52:14.439 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 13:52:14.440 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 13:52:14.506 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Inbox\Controllers\InboxController.cs:line 101
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:52:14.544 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:52:14.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 500 null application/json; charset=utf-8 242.2547ms
2025-08-29 13:52:14.576 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 500 null application/json; charset=utf-8 254.4102ms
2025-08-29 13:52:25.026 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 13:52:25.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 13:52:25.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 13:52:25.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 13:52:25.030 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:25.032 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:25.034 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:25.036 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:25.037 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 10.7113ms
2025-08-29 13:52:25.037 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 10.3747ms
2025-08-29 13:52:25.038 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 11.1898ms
2025-08-29 13:52:25.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.9577ms
2025-08-29 13:52:25.046 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 13:52:25.048 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 13:52:25.050 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:25.051 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:25.052 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 13:52:25.053 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 13:52:25.053 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 13:52:25.054 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 13:52:25.095 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 39.7084ms
2025-08-29 13:52:25.096 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 16.2801ms
2025-08-29 13:52:25.097 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 13:52:25.098 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 13:52:25.131 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Inbox\Controllers\InboxController.cs:line 101
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:52:25.142 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:52:25.146 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 500 null application/json; charset=utf-8 100.1796ms
2025-08-29 13:52:25.150 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 500 null application/json; charset=utf-8 101.7808ms
2025-08-29 13:52:39.418 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 13:52:39.420 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:39.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 3.2891ms
2025-08-29 13:52:39.423 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 13:52:39.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 13:52:39.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 13:52:39.426 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:39.428 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:39.430 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:39.430 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 7.2096ms
2025-08-29 13:52:39.431 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 7.5342ms
2025-08-29 13:52:39.432 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 8.3096ms
2025-08-29 13:52:39.438 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 13:52:39.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 13:52:39.442 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:39.443 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:52:39.444 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 13:52:39.445 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 13:52:39.445 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 13:52:39.446 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 13:52:39.487 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 39.8236ms
2025-08-29 13:52:39.488 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 16.5077ms
2025-08-29 13:52:39.489 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 13:52:39.490 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 13:52:39.522 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Inbox\Controllers\InboxController.cs:line 101
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:52:39.531 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 13:52:39.535 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 500 null application/json; charset=utf-8 97.8544ms
2025-08-29 13:52:39.540 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 500 null application/json; charset=utf-8 100.2727ms
2025-08-29 13:53:10.117 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 13:53:10.122 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 13:53:10.125 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:10.127 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:10.128 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 10.736ms
2025-08-29 13:53:10.129 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 6.9429ms
2025-08-29 13:53:10.134 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 13:53:10.136 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 13:53:10.139 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:10.140 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:10.141 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 13:53:10.142 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 13:53:10.143 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:10.143 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 13:53:10.147 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 13:53:10.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 13:53:10.152 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:53:10.155 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 9.8712ms
2025-08-29 13:53:10.156 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 13:53:10.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 22.5595ms
2025-08-29 13:53:10.158 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 13:53:10.160 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:53:10.161 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 13.732ms
2025-08-29 13:53:10.163 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:10.163 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 13:53:10.164 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 4.3146ms
2025-08-29 13:53:10.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 28.6476ms
2025-08-29 13:53:10.167 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:53:10.172 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:10.172 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:53:10.173 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:10.176 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:53:10.177 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.3541ms
2025-08-29 13:53:10.178 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:53:10.179 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 11.6822ms
2025-08-29 13:53:11.135 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:53:11.138 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:11.139 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 4.2401ms
2025-08-29 13:53:11.142 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:53:11.145 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:11.145 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:53:11.146 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:11.148 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:53:11.149 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.2095ms
2025-08-29 13:53:11.150 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:53:11.151 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 8.5818ms
2025-08-29 13:53:15.466 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:53:15.468 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:15.469 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.8388ms
2025-08-29 13:53:15.472 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 235
2025-08-29 13:53:15.473 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:15.474 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:53:15.475 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:15.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:53:15.485 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='860a78cb-4c8b-467d-a710-8148d31b7ef1', @p1='b6faca3f-ac2d-47c3-abd2-99688ae4c18c', @p2='cb3571c6-ba59-4517-bbb6-1baeefba675a', @p3='cd33901e-a29a-4bdd-99fd-a8557a01282f', @p4='d59d8e0d-fc78-4ce0-93c3-f5df5298b43d', @p5='fd6a0ff6-4beb-4a98-8503-ab84c383c828', @p6='01b69560-faf1-4852-9adc-dc73066fd54d', @p7='2025-08-29T08:23:15.4812048Z' (DbType = DateTime), @p8='system', @p9='True', @p10='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p11='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p12='109dbf59-b564-4c86-846e-840ab52b0435', @p13='2025-08-29T08:23:15.4812002Z' (DbType = DateTime), @p14='system', @p15='True', @p16='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p17='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p18='1adc2588-999a-4135-97d0-25cfed082a4c', @p19='2025-08-29T08:23:15.4812102Z' (DbType = DateTime), @p20='system', @p21='True', @p22='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='64b59a7d-bb89-435a-9a7a-1ec144fccb48', @p25='2025-08-29T08:23:15.4812076Z' (DbType = DateTime), @p26='system', @p27='True', @p28='30000000-0000-0000-0000-000000000000', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='824e397d-b426-49d3-b2f2-b5f712bcb2d6', @p31='2025-08-29T08:23:15.4812155Z' (DbType = DateTime), @p32='system', @p33='True', @p34='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='f2839038-96d9-4548-834d-be17975ca637', @p37='2025-08-29T08:23:15.4811482Z' (DbType = DateTime), @p38='system', @p39='True', @p40='821480c6-1464-415e-bba8-066fcb4e7e63', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
2025-08-29 13:53:15.488 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:53:15.489 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 12.703ms
2025-08-29 13:53:15.490 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:53:15.491 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 19.3084ms
2025-08-29 13:53:15.493 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:53:15.495 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:15.496 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:53:15.497 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:15.500 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:53:15.502 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:53:15.503 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.2741ms
2025-08-29 13:53:15.504 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:53:15.505 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.6689ms
2025-08-29 13:53:25.363 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 13:53:25.365 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.366 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.6323ms
2025-08-29 13:53:25.370 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 13:53:25.371 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.372 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:53:25.373 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 13:53:25.375 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 13:53:25.378 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 13:53:25.383 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 13:53:25.397 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 13:53:25.400 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 13:53:25.401 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 13:53:25.402 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 13:53:25.403 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:53:25.404 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 30.2852ms
2025-08-29 13:53:25.406 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:53:25.407 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 37.0076ms
2025-08-29 13:53:25.409 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:53:25.411 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.412 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6595ms
2025-08-29 13:53:25.419 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:53:25.421 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.421 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.422 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:25.425 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:53:25.428 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:53:25.429 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.0798ms
2025-08-29 13:53:25.430 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.431 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.4341ms
2025-08-29 13:53:25.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:53:25.447 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.448 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.449 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:25.453 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:53:25.456 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:53:25.457 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4699ms
2025-08-29 13:53:25.458 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:53:25.459 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.462 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2153ms
2025-08-29 13:53:25.461 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.465 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.467 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:25.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:53:25.473 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:53:25.474 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2228ms
2025-08-29 13:53:25.475 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.477 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.1886ms
2025-08-29 13:53:25.531 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:53:25.535 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.536 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.539 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:25.545 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:53:25.549 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:53:25.551 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8216ms
2025-08-29 13:53:25.552 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.726ms
2025-08-29 13:53:25.579 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:53:25.581 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:53:25.582 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.583 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:53:25.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:53:25.590 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:53:25.591 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0293ms
2025-08-29 13:53:25.592 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:53:25.593 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.5257ms
2025-08-29 13:54:07.398 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 13:54:07.400 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.401 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.795ms
2025-08-29 13:54:07.407 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 13:54:07.409 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.410 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:54:07.410 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 13:54:07.412 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 13:54:07.535 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 13:54:07.539 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 13:54:07.544 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 13:54:07.546 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 13:54:07.550 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 13:54:07.551 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 13:54:07.552 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:07.554 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 142.2258ms
2025-08-29 13:54:07.555 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:54:07.556 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 149.4103ms
2025-08-29 13:54:07.560 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:07.562 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.563 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4434ms
2025-08-29 13:54:07.569 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:07.571 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.572 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.573 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:07.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:07.579 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:07.580 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5695ms
2025-08-29 13:54:07.581 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.582 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.6907ms
2025-08-29 13:54:07.595 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:07.598 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.599 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.600 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:07.603 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:07.606 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:07.608 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.464ms
2025-08-29 13:54:07.609 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:07.609 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.612 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.612 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2047ms
2025-08-29 13:54:07.613 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.617 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:07.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:07.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:07.624 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.267ms
2025-08-29 13:54:07.625 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.626 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1664ms
2025-08-29 13:54:07.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:07.666 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.668 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.669 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:07.673 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:07.692 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:07.694 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 23.5482ms
2025-08-29 13:54:07.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.798ms
2025-08-29 13:54:07.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:07.722 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:07.723 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.724 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:07.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:07.730 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:07.731 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1222ms
2025-08-29 13:54:07.733 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:07.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7231ms
2025-08-29 13:54:28.650 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 13:54:28.652 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.653 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.0027ms
2025-08-29 13:54:28.659 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 13:54:28.661 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.663 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:54:28.664 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 13:54:28.666 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 13:54:28.669 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 13:54:28.674 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 13:54:28.679 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 13:54:28.681 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 13:54:28.683 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 13:54:28.683 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 13:54:28.685 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:28.686 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 20.3966ms
2025-08-29 13:54:28.687 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 13:54:28.688 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 29.1253ms
2025-08-29 13:54:28.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:28.694 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.694 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2573ms
2025-08-29 13:54:28.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:28.700 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.701 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.702 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:28.705 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:28.707 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:28.708 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3579ms
2025-08-29 13:54:28.710 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.711 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.4657ms
2025-08-29 13:54:28.727 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:28.730 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.731 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.732 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:28.736 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:28.739 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:28.741 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8405ms
2025-08-29 13:54:28.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:28.743 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.746 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.3841ms
2025-08-29 13:54:28.748 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.751 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:28.755 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:28.758 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:28.760 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4739ms
2025-08-29 13:54:28.762 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.763 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.7849ms
2025-08-29 13:54:28.822 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:28.830 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.832 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.835 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:28.840 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:28.844 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:28.846 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2557ms
2025-08-29 13:54:28.848 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.850 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.4186ms
2025-08-29 13:54:28.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:54:28.856 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:54:28.857 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.858 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:54:28.862 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:54:28.865 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:54:28.867 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8282ms
2025-08-29 13:54:28.868 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:54:28.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.7105ms
2025-08-29 13:55:20.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:20.499 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:20.500 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.8979ms
2025-08-29 13:55:20.508 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:20.511 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:20.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:20.513 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:20.516 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:55:20.519 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:55:20.521 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6917ms
2025-08-29 13:55:20.523 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:20.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.8212ms
2025-08-29 13:55:20.567 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:20.571 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:20.572 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:20.573 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:20.579 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:55:20.588 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:55:20.589 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.1094ms
2025-08-29 13:55:20.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:20.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.9401ms
2025-08-29 13:55:20.664 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:20.668 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:20.669 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:20.671 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:20.675 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:55:20.680 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:55:20.682 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0856ms
2025-08-29 13:55:20.684 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:20.686 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.4595ms
2025-08-29 13:55:49.197 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:55:49.203 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:49.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 7.0098ms
2025-08-29 13:55:49.210 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 508
2025-08-29 13:55:49.212 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:49.213 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:55:49.213 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:49.217 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:55:49.234 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p0='01b69560-faf1-4852-9adc-dc73066fd54d', @p1='109dbf59-b564-4c86-846e-840ab52b0435', @p2='1adc2588-999a-4135-97d0-25cfed082a4c', @p3='64b59a7d-bb89-435a-9a7a-1ec144fccb48', @p4='824e397d-b426-49d3-b2f2-b5f712bcb2d6', @p5='f2839038-96d9-4548-834d-be17975ca637', @p6='08b588e5-6095-4235-a6c7-851c69c6f12f', @p7='2025-08-29T08:25:49.2191419Z' (DbType = DateTime), @p8='system', @p9='True', @p10='30000000-0000-0000-0000-000000000000', @p11='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p12='0c7379b0-2b7f-4cb1-9fd4-7848a41df707', @p13='2025-08-29T08:25:49.2191747Z' (DbType = DateTime), @p14='system', @p15='True', @p16='0485154c-dde5-4732-a7aa-a379c77a5b27', @p17='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p18='1025ce61-147e-404d-8922-8fcb57a51892', @p19='2025-08-29T08:25:49.2191391Z' (DbType = DateTime), @p20='system', @p21='True', @p22='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='494101e2-711c-4db6-a186-e4435c3b0d77', @p25='2025-08-29T08:25:49.2190854Z' (DbType = DateTime), @p26='system', @p27='True', @p28='821480c6-1464-415e-bba8-066fcb4e7e63', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='88650242-9823-4033-a641-478f47f3622b', @p31='2025-08-29T08:25:49.2191534Z' (DbType = DateTime), @p32='system', @p33='True', @p34='29461562-ef9c-48c0-a606-482ff57b8f95', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='9fab9cc5-6ff5-4828-807c-e8c197c135df', @p37='2025-08-29T08:25:49.2191347Z' (DbType = DateTime), @p38='system', @p39='True', @p40='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='a24d8be2-cc24-42bc-bffb-7b4838db10dd', @p43='2025-08-29T08:25:49.2191586Z' (DbType = DateTime), @p44='system', @p45='True', @p46='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='b3a2eec3-3fc7-4c3b-bffc-08af9dbd8ed7', @p49='2025-08-29T08:25:49.2191718Z' (DbType = DateTime), @p50='system', @p51='True', @p52='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='b3c94cf9-1b60-4aa7-8ddc-5d3397700ae3', @p55='2025-08-29T08:25:49.2191446Z' (DbType = DateTime), @p56='system', @p57='True', @p58='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='b3f295cb-62be-4971-928e-1ae137e5013b', @p61='2025-08-29T08:25:49.2191508Z' (DbType = DateTime), @p62='system', @p63='True', @p64='974af1f9-3caa-4857-a1a7-48462c389332', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='c7621a3a-977b-46c9-a2ff-a87d804538c7', @p67='2025-08-29T08:25:49.2191610Z' (DbType = DateTime), @p68='system', @p69='True', @p70='c819f1bd-422d-4609-916c-cc185fe44ab0', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='e2f60fdd-f6ba-473a-9aa2-727c51034880', @p73='2025-08-29T08:25:49.2191773Z' (DbType = DateTime), @p74='system', @p75='True', @p76='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='e8323c55-4495-46fd-a7f9-353542c74ab7', @p79='2025-08-29T08:25:49.2191559Z' (DbType = DateTime), @p80='system', @p81='True', @p82='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
2025-08-29 13:55:49.237 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:55:49.238 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 23.4573ms
2025-08-29 13:55:49.239 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:55:49.240 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 29.9681ms
2025-08-29 13:55:49.242 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:55:49.244 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:49.245 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:55:49.245 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:49.249 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:55:49.254 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:55:49.255 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 8.1268ms
2025-08-29 13:55:49.256 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:55:49.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 14.5549ms
2025-08-29 13:55:54.083 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:54.085 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:54.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6986ms
2025-08-29 13:55:54.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:54.090 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:54.090 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:54.091 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:54.094 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:55:54.096 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:55:54.097 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.061ms
2025-08-29 13:55:54.098 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:54.099 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.3488ms
2025-08-29 13:55:54.111 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:54.114 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:54.115 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:54.116 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:54.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:55:54.126 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:55:54.127 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6602ms
2025-08-29 13:55:54.129 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:54.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.5494ms
2025-08-29 13:55:54.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:55:54.162 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:55:54.163 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:54.164 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:55:54.167 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:55:54.170 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:55:54.171 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.2366ms
2025-08-29 13:55:54.172 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:55:54.173 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.2011ms
2025-08-29 13:56:23.593 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:56:23.598 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:23.598 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 5.4237ms
2025-08-29 13:56:23.603 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 703
2025-08-29 13:56:23.605 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:23.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:56:23.607 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:23.609 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:56:23.616 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='08b588e5-6095-4235-a6c7-851c69c6f12f', @p1='0c7379b0-2b7f-4cb1-9fd4-7848a41df707', @p2='1025ce61-147e-404d-8922-8fcb57a51892', @p3='494101e2-711c-4db6-a186-e4435c3b0d77', @p4='88650242-9823-4033-a641-478f47f3622b', @p5='9fab9cc5-6ff5-4828-807c-e8c197c135df', @p6='a24d8be2-cc24-42bc-bffb-7b4838db10dd', @p7='b3a2eec3-3fc7-4c3b-bffc-08af9dbd8ed7', @p8='b3c94cf9-1b60-4aa7-8ddc-5d3397700ae3', @p9='b3f295cb-62be-4971-928e-1ae137e5013b', @p10='c7621a3a-977b-46c9-a2ff-a87d804538c7', @p11='e2f60fdd-f6ba-473a-9aa2-727c51034880', @p12='e8323c55-4495-46fd-a7f9-353542c74ab7', @p13='1adde5d6-97e8-4b43-95a9-8efe302ae475', @p14='2025-08-29T08:26:23.6120018Z' (DbType = DateTime), @p15='system', @p16='True', @p17='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p18='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p19='1d69069f-574a-45f6-9110-ddabd785e77a', @p20='2025-08-29T08:26:23.6119767Z' (DbType = DateTime), @p21='system', @p22='True', @p23='30000000-0000-0000-0000-000000000000', @p24='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p25='34ee4419-1208-4001-a748-b03d09a09f14', @p26='2025-08-29T08:26:23.6119865Z' (DbType = DateTime), @p27='system', @p28='True', @p29='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='3b0f8597-f96c-4330-9f96-faa10dd2cd01', @p32='2025-08-29T08:26:23.6119664Z' (DbType = DateTime), @p33='system', @p34='True', @p35='7d7cbceb-4ce7-4835-85cd-59562487298d', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='5aec2a6a-7854-453d-b2b1-90f1ab032a5d', @p38='2025-08-29T08:26:23.6119818Z' (DbType = DateTime), @p39='system', @p40='True', @p41='974af1f9-3caa-4857-a1a7-48462c389332', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='7300a5f7-449f-42b4-8ea3-2d8ec4bf2787', @p44='2025-08-29T08:26:23.6119739Z' (DbType = DateTime), @p45='system', @p46='True', @p47='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='7edb6482-6f91-4d62-8386-0c89cc2faf20', @p50='2025-08-29T08:26:23.6119946Z' (DbType = DateTime), @p51='system', @p52='True', @p53='c819f1bd-422d-4609-916c-cc185fe44ab0', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='98e7ad20-7c01-4eb3-bc85-e67adf1371ca', @p56='2025-08-29T08:26:23.6119994Z' (DbType = DateTime), @p57='system', @p58='True', @p59='0485154c-dde5-4732-a7aa-a379c77a5b27', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='99817037-a30e-4ce5-9645-8eebb963b82b', @p62='2025-08-29T08:26:23.6119637Z' (DbType = DateTime), @p63='system', @p64='True', @p65='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='9e4e293a-4d06-450b-94ed-856a2291f0ca', @p68='2025-08-29T08:26:23.6119970Z' (DbType = DateTime), @p69='system', @p70='True', @p71='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='b743b53d-0d8f-4e02-8646-c1ce16669b8e', @p74='2025-08-29T08:26:23.6119921Z' (DbType = DateTime), @p75='system', @p76='True', @p77='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='cc75f9a3-93fa-4211-b618-c2f886923bfc', @p80='2025-08-29T08:26:23.6119097Z' (DbType = DateTime), @p81='system', @p82='True', @p83='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='d0780637-f8af-43b9-8c90-1ca8bb431e6e', @p86='2025-08-29T08:26:23.6119689Z' (DbType = DateTime), @p87='system', @p88='True', @p89='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p91='d0b70b0d-f0ac-4cf9-bba8-9ff8a715d431', @p92='2025-08-29T08:26:23.6119791Z' (DbType = DateTime), @p93='system', @p94='True', @p95='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p96='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p97='e033183e-7766-48b8-a4f1-e89fa0f33f7e', @p98='2025-08-29T08:26:23.6119842Z' (DbType = DateTime), @p99='system', @p100='True', @p101='29461562-ef9c-48c0-a606-482ff57b8f95', @p102='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p103='f020e210-51ad-4077-a88b-a62987bb8d40', @p104='2025-08-29T08:26:23.6119579Z' (DbType = DateTime), @p105='system', @p106='True', @p107='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p108='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p109='f25049d7-14c8-499d-8c4b-7529b1d48949', @p110='2025-08-29T08:26:23.6119497Z' (DbType = DateTime), @p111='system', @p112='True', @p113='821480c6-1464-415e-bba8-066fcb4e7e63', @p114='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p115='fa7b9af1-2366-4cd3-8b12-e043e6a88d1a', @p116='2025-08-29T08:26:23.6119610Z' (DbType = DateTime), @p117='system', @p118='True', @p119='9ae90cfe-3fea-4307-b024-3083c2728148', @p120='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p91, @p92, @p93, @p94, @p95, @p96);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p97, @p98, @p99, @p100, @p101, @p102);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p109, @p110, @p111, @p112, @p113, @p114);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p115, @p116, @p117, @p118, @p119, @p120);
2025-08-29 13:56:23.619 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:23.620 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 12.2215ms
2025-08-29 13:56:23.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:56:23.622 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 19.5493ms
2025-08-29 13:56:23.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:56:23.626 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:23.627 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:56:23.627 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:23.630 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:56:23.632 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:56:23.633 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.8978ms
2025-08-29 13:56:23.634 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:56:23.635 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 10.8106ms
2025-08-29 13:56:27.345 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:27.348 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:27.348 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8537ms
2025-08-29 13:56:27.351 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:27.354 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:27.355 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:27.356 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:27.359 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:27.365 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:27.366 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.84ms
2025-08-29 13:56:27.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:27.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1709ms
2025-08-29 13:56:27.375 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:27.377 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:27.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:27.379 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:27.383 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:27.387 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:27.388 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7952ms
2025-08-29 13:56:27.390 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:27.391 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5767ms
2025-08-29 13:56:27.434 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:27.436 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:27.437 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:27.438 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:27.441 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:27.444 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:27.445 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.1563ms
2025-08-29 13:56:27.446 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:27.447 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9699ms
2025-08-29 13:56:50.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:56:50.695 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:50.695 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 6.8126ms
2025-08-29 13:56:50.706 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 859
2025-08-29 13:56:50.709 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:50.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:56:50.711 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:50.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:56:50.726 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='1adde5d6-97e8-4b43-95a9-8efe302ae475', @p1='1d69069f-574a-45f6-9110-ddabd785e77a', @p2='34ee4419-1208-4001-a748-b03d09a09f14', @p3='3b0f8597-f96c-4330-9f96-faa10dd2cd01', @p4='5aec2a6a-7854-453d-b2b1-90f1ab032a5d', @p5='7300a5f7-449f-42b4-8ea3-2d8ec4bf2787', @p6='7edb6482-6f91-4d62-8386-0c89cc2faf20', @p7='98e7ad20-7c01-4eb3-bc85-e67adf1371ca', @p8='99817037-a30e-4ce5-9645-8eebb963b82b', @p9='9e4e293a-4d06-450b-94ed-856a2291f0ca', @p10='b743b53d-0d8f-4e02-8646-c1ce16669b8e', @p11='cc75f9a3-93fa-4211-b618-c2f886923bfc', @p12='d0780637-f8af-43b9-8c90-1ca8bb431e6e', @p13='d0b70b0d-f0ac-4cf9-bba8-9ff8a715d431', @p14='e033183e-7766-48b8-a4f1-e89fa0f33f7e', @p15='f020e210-51ad-4077-a88b-a62987bb8d40', @p16='f25049d7-14c8-499d-8c4b-7529b1d48949', @p17='fa7b9af1-2366-4cd3-8b12-e043e6a88d1a', @p18='133011fb-66f1-4766-bfa7-d909efef0830', @p19='2025-08-29T08:26:50.7171354Z' (DbType = DateTime), @p20='system', @p21='True', @p22='30000000-0000-0000-0000-000000000002', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='21222f17-d7b5-463e-9ffd-1ebd8770b8ac', @p25='2025-08-29T08:26:50.7171682Z' (DbType = DateTime), @p26='system', @p27='True', @p28='c819f1bd-422d-4609-916c-cc185fe44ab0', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='3d8a11ab-bbdf-4646-8a57-4a2a8fce0838', @p31='2025-08-29T08:26:50.7171454Z' (DbType = DateTime), @p32='system', @p33='True', @p34='30000000-0000-0000-0000-000000000000', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='4f0d094a-6f55-4576-b62d-f5c97b1ba761', @p37='2025-08-29T08:26:50.7170975Z' (DbType = DateTime), @p38='system', @p39='True', @p40='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='520d184a-c32b-4017-999e-13c11bac332c', @p43='2025-08-29T08:26:50.7171507Z' (DbType = DateTime), @p44='system', @p45='True', @p46='974af1f9-3caa-4857-a1a7-48462c389332', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='52549c1a-fcf1-4fa9-9450-d65477343107', @p49='2025-08-29T08:26:50.7171000Z' (DbType = DateTime), @p50='system', @p51='True', @p52='7d7cbceb-4ce7-4835-85cd-59562487298d', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='5531f9cd-3d28-4680-ac38-450b04217b08', @p55='2025-08-29T08:26:50.7170907Z' (DbType = DateTime), @p56='system', @p57='True', @p58='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='5b35f9dd-0ba6-4b95-97c5-1126061da12c', @p61='2025-08-29T08:26:50.7171710Z' (DbType = DateTime), @p62='system', @p63='True', @p64='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='5dfa8c0a-9bdc-4e88-8389-5c6bd0bd37d9', @p67='2025-08-29T08:26:50.7171740Z' (DbType = DateTime), @p68='system', @p69='True', @p70='0485154c-dde5-4732-a7aa-a379c77a5b27', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='704870e3-f958-494d-84e2-3c0ceef4ab25', @p73='2025-08-29T08:26:50.7171027Z' (DbType = DateTime), @p74='system', @p75='True', @p76='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='85a1c00a-db5d-42dd-a3e9-bf7e1327fd77', @p79='2025-08-29T08:26:50.7170200Z' (DbType = DateTime), @p80='system', @p81='True', @p82='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='8bcdc066-06fb-4a34-ba44-942015c4d8cc', @p85='2025-08-29T08:26:50.7171298Z' (DbType = DateTime), @p86='system', @p87='True', @p88='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='8e6d01ac-d801-466e-b6f2-a97e0f7d18d6', @p91='2025-08-29T08:26:50.7171379Z' (DbType = DateTime), @p92='system', @p93='True', @p94='30000000-0000-0000-0000-000000000001', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='93e70f6d-f2ee-4711-adb8-e618ef5ecce0', @p97='2025-08-29T08:26:50.7170860Z' (DbType = DateTime), @p98='system', @p99='True', @p100='821480c6-1464-415e-bba8-066fcb4e7e63', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='96b6cfb6-a559-49f4-9a2c-598ceb0cfee2', @p103='2025-08-29T08:26:50.7170935Z' (DbType = DateTime), @p104='system', @p105='True', @p106='9ae90cfe-3fea-4307-b024-3083c2728148', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='9cfa93ac-34e5-4c6c-8658-c547f7a0d1c8', @p109='2025-08-29T08:26:50.7171482Z' (DbType = DateTime), @p110='system', @p111='True', @p112='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='aa66c6b0-9453-4918-b435-a93e3d03aeb5', @p115='2025-08-29T08:26:50.7171555Z' (DbType = DateTime), @p116='system', @p117='True', @p118='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='c6074955-fd81-49ea-b69f-7483e89f0c38', @p121='2025-08-29T08:26:50.7171580Z' (DbType = DateTime), @p122='system', @p123='True', @p124='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='cd53179c-a5ff-4654-9cb7-2bd567505960', @p127='2025-08-29T08:26:50.7171980Z' (DbType = DateTime), @p128='system', @p129='True', @p130='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='d106ccfe-1bb3-47aa-9fa0-99db00468c46', @p133='2025-08-29T08:26:50.7171402Z' (DbType = DateTime), @p134='system', @p135='True', @p136='30000000-0000-0000-0000-000000000003', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='e4c69722-a77a-40e8-8432-2cf641dfb59a', @p139='2025-08-29T08:26:50.7171531Z' (DbType = DateTime), @p140='system', @p141='True', @p142='29461562-ef9c-48c0-a606-482ff57b8f95', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='ec0861b4-49b5-4428-9aa4-4781a289a871', @p145='2025-08-29T08:26:50.7171328Z' (DbType = DateTime), @p146='system', @p147='True', @p148='30000000-0000-0000-0000-000000000004', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
2025-08-29 13:56:50.729 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:50.730 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 18.7113ms
2025-08-29 13:56:50.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:56:50.732 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 25.7106ms
2025-08-29 13:56:50.737 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:56:50.739 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:50.740 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:56:50.740 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:50.743 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:56:50.745 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:56:50.746 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.7922ms
2025-08-29 13:56:50.747 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:56:50.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.178ms
2025-08-29 13:56:54.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:54.855 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:54.856 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8386ms
2025-08-29 13:56:54.859 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:54.861 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:54.862 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:54.863 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:54.866 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:54.869 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:54.871 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.783ms
2025-08-29 13:56:54.872 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:54.873 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.297ms
2025-08-29 13:56:54.899 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:54.903 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:54.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:54.905 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:54.911 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:54.917 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:54.920 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.5288ms
2025-08-29 13:56:54.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:54.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.5571ms
2025-08-29 13:56:54.962 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:54.964 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:54.965 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:54.966 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:54.970 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:54.972 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:54.974 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9408ms
2025-08-29 13:56:54.975 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:54.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.1764ms
2025-08-29 13:56:57.080 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:57.082 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:57.083 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:57.084 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:57.088 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:57.091 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:57.092 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5338ms
2025-08-29 13:56:57.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:57.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.8104ms
2025-08-29 13:56:57.110 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:57.113 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:57.114 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:57.115 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:57.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:57.123 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:57.124 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6746ms
2025-08-29 13:56:57.125 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:57.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.6771ms
2025-08-29 13:56:57.162 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:56:57.164 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:57.165 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:57.166 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:57.170 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:56:57.172 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:57.173 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3579ms
2025-08-29 13:56:57.174 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:56:57.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.48ms
2025-08-29 13:56:59.818 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:56:59.820 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:59.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.1411ms
2025-08-29 13:56:59.823 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 859
2025-08-29 13:56:59.825 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:59.826 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:56:59.827 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:59.830 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:56:59.847 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='133011fb-66f1-4766-bfa7-d909efef0830', @p1='21222f17-d7b5-463e-9ffd-1ebd8770b8ac', @p2='3d8a11ab-bbdf-4646-8a57-4a2a8fce0838', @p3='4f0d094a-6f55-4576-b62d-f5c97b1ba761', @p4='520d184a-c32b-4017-999e-13c11bac332c', @p5='52549c1a-fcf1-4fa9-9450-d65477343107', @p6='5531f9cd-3d28-4680-ac38-450b04217b08', @p7='5b35f9dd-0ba6-4b95-97c5-1126061da12c', @p8='5dfa8c0a-9bdc-4e88-8389-5c6bd0bd37d9', @p9='704870e3-f958-494d-84e2-3c0ceef4ab25', @p10='85a1c00a-db5d-42dd-a3e9-bf7e1327fd77', @p11='8bcdc066-06fb-4a34-ba44-942015c4d8cc', @p12='8e6d01ac-d801-466e-b6f2-a97e0f7d18d6', @p13='93e70f6d-f2ee-4711-adb8-e618ef5ecce0', @p14='96b6cfb6-a559-49f4-9a2c-598ceb0cfee2', @p15='9cfa93ac-34e5-4c6c-8658-c547f7a0d1c8', @p16='aa66c6b0-9453-4918-b435-a93e3d03aeb5', @p17='c6074955-fd81-49ea-b69f-7483e89f0c38', @p18='cd53179c-a5ff-4654-9cb7-2bd567505960', @p19='d106ccfe-1bb3-47aa-9fa0-99db00468c46', @p20='e4c69722-a77a-40e8-8432-2cf641dfb59a', @p21='ec0861b4-49b5-4428-9aa4-4781a289a871', @p22='0cff5b82-6f95-420b-b37c-1f32265abe5c', @p23='2025-08-29T08:26:59.8363780Z' (DbType = DateTime), @p24='system', @p25='True', @p26='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p27='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p28='14fb85d5-ef5c-4a4a-8efb-f743edb117d5', @p29='2025-08-29T08:26:59.8363301Z' (DbType = DateTime), @p30='system', @p31='True', @p32='821480c6-1464-415e-bba8-066fcb4e7e63', @p33='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p34='15bbae04-e4f6-483e-a5a0-2d4847f8fe03', @p35='2025-08-29T08:26:59.8363602Z' (DbType = DateTime), @p36='system', @p37='True', @p38='30000000-0000-0000-0000-000000000003', @p39='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p40='1bae510d-f420-4d74-bdf8-58300821c848', @p41='2025-08-29T08:26:59.8363474Z' (DbType = DateTime), @p42='system', @p43='True', @p44='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p45='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p46='28b47f1d-07ec-4890-86c0-33d0b6eaefaf', @p47='2025-08-29T08:26:59.8363676Z' (DbType = DateTime), @p48='system', @p49='True', @p50='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p51='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p52='3626fb2f-49eb-40f9-a042-a74f3c91e0dd', @p53='2025-08-29T08:26:59.8363832Z' (DbType = DateTime), @p54='system', @p55='True', @p56='c819f1bd-422d-4609-916c-cc185fe44ab0', @p57='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p58='481d90d3-29da-4c7e-8598-7ebfb3ed2dc3', @p59='2025-08-29T08:26:59.8363340Z' (DbType = DateTime), @p60='system', @p61='True', @p62='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p63='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p64='4f0cd41b-cd40-4090-85ef-2fbceb46dbee', @p65='2025-08-29T08:26:59.8363394Z' (DbType = DateTime), @p66='system', @p67='True', @p68='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p69='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p70='6df54898-be85-4606-ac46-61bd459de315', @p71='2025-08-29T08:26:59.8363806Z' (DbType = DateTime), @p72='system', @p73='True', @p74='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p75='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p76='9718af73-050a-4241-a357-d1dc5f81a6bc', @p77='2025-08-29T08:26:59.8363368Z' (DbType = DateTime), @p78='system', @p79='True', @p80='9ae90cfe-3fea-4307-b024-3083c2728148', @p81='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p82='9de1e121-1c66-483c-b79b-39a4729bb1d6', @p83='2025-08-29T08:26:59.8363932Z' (DbType = DateTime), @p84='system', @p85='True', @p86='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p87='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p88='a08d1701-e50b-487f-abf9-50b26ce958ad', @p89='2025-08-29T08:26:59.8363651Z' (DbType = DateTime), @p90='system', @p91='True', @p92='30000000-0000-0000-0000-000000000000', @p93='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p94='a9536a60-17a1-4235-bd70-2eee5eeb252a', @p95='2025-08-29T08:26:59.8363530Z' (DbType = DateTime), @p96='system', @p97='True', @p98='30000000-0000-0000-0000-000000000004', @p99='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p100='af5bae3e-b684-45c3-9831-aff81d9c76e3', @p101='2025-08-29T08:26:59.8363505Z' (DbType = DateTime), @p102='system', @p103='True', @p104='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p105='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p106='b3535c12-695c-4742-a7fa-3193f87b7645', @p107='2025-08-29T08:26:59.8362803Z' (DbType = DateTime), @p108='system', @p109='True', @p110='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p111='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p112='b899b74a-6985-4632-a50f-097d692dc8a6', @p113='2025-08-29T08:26:59.8363421Z' (DbType = DateTime), @p114='system', @p115='True', @p116='7d7cbceb-4ce7-4835-85cd-59562487298d', @p117='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p118='c374ae17-74d4-4eb5-8408-209b9b968cc8', @p119='2025-08-29T08:26:59.8363857Z' (DbType = DateTime), @p120='system', @p121='True', @p122='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p123='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p124='c9b946fb-6ee3-44ce-ba5f-bafb8cf66878', @p125='2025-08-29T08:26:59.8363554Z' (DbType = DateTime), @p126='system', @p127='True', @p128='30000000-0000-0000-0000-000000000002', @p129='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p130='cd33b5fe-270f-459b-b56e-b8fa11a71188', @p131='2025-08-29T08:26:59.8363727Z' (DbType = DateTime), @p132='system', @p133='True', @p134='29461562-ef9c-48c0-a606-482ff57b8f95', @p135='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p136='cf06f78c-f957-4583-8240-c3f074587346', @p137='2025-08-29T08:26:59.8363578Z' (DbType = DateTime), @p138='system', @p139='True', @p140='30000000-0000-0000-0000-000000000001', @p141='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p142='fbe0af7a-7f08-4233-9b2c-f73a4b5cdc19', @p143='2025-08-29T08:26:59.8363880Z' (DbType = DateTime), @p144='system', @p145='True', @p146='0485154c-dde5-4732-a7aa-a379c77a5b27', @p147='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p148='fea819b5-3192-4a6f-8e6a-97c2fc750fa0', @p149='2025-08-29T08:26:59.8363700Z' (DbType = DateTime), @p150='system', @p151='True', @p152='974af1f9-3caa-4857-a1a7-48462c389332', @p153='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p40, @p41, @p42, @p43, @p44, @p45);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p58, @p59, @p60, @p61, @p62, @p63);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p88, @p89, @p90, @p91, @p92, @p93);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p94, @p95, @p96, @p97, @p98, @p99);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p100, @p101, @p102, @p103, @p104, @p105);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p106, @p107, @p108, @p109, @p110, @p111);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p112, @p113, @p114, @p115, @p116, @p117);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p118, @p119, @p120, @p121, @p122, @p123);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p124, @p125, @p126, @p127, @p128, @p129);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p130, @p131, @p132, @p133, @p134, @p135);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p136, @p137, @p138, @p139, @p140, @p141);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p142, @p143, @p144, @p145, @p146, @p147);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p148, @p149, @p150, @p151, @p152, @p153);
2025-08-29 13:56:59.850 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:56:59.851 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 22.5064ms
2025-08-29 13:56:59.852 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:56:59.853 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 29.3696ms
2025-08-29 13:56:59.855 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:56:59.857 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:56:59.857 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:56:59.858 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:56:59.861 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:56:59.863 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:56:59.864 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.8522ms
2025-08-29 13:56:59.865 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:56:59.866 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.0208ms
2025-08-29 13:57:02.620 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:02.623 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:02.623 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4123ms
2025-08-29 13:57:02.626 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:02.628 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:02.629 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:02.630 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:02.634 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:02.638 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:02.639 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4791ms
2025-08-29 13:57:02.642 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:02.644 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8602ms
2025-08-29 13:57:02.676 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:02.680 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:02.681 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:02.682 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:02.687 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:02.692 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:02.693 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0963ms
2025-08-29 13:57:02.704 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:02.705 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.4969ms
2025-08-29 13:57:02.748 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:02.751 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:02.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:02.753 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:02.757 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:02.760 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:02.761 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7019ms
2025-08-29 13:57:02.763 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:02.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.2012ms
2025-08-29 13:57:03.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:03.948 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:03.948 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:03.949 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:03.953 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:03.956 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:03.957 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2687ms
2025-08-29 13:57:03.958 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:03.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0334ms
2025-08-29 13:57:04.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:04.010 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:04.011 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.012 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:04.017 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:04.020 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:04.021 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1853ms
2025-08-29 13:57:04.023 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.025 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.3116ms
2025-08-29 13:57:04.059 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:04.061 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:04.062 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.063 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:04.068 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:04.072 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:04.073 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2415ms
2025-08-29 13:57:04.074 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.075 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.5318ms
2025-08-29 13:57:04.811 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:04.813 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:04.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.815 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:04.817 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:04.820 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:04.821 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.8277ms
2025-08-29 13:57:04.822 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.823 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.1206ms
2025-08-29 13:57:04.839 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:04.845 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:04.847 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.848 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:04.852 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:04.858 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:04.860 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2105ms
2025-08-29 13:57:04.861 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.4163ms
2025-08-29 13:57:04.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:04.903 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:04.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.905 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:04.908 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:04.912 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:04.913 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3109ms
2025-08-29 13:57:04.914 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:04.915 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7972ms
2025-08-29 13:57:14.384 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:57:14.386 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:14.386 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.8226ms
2025-08-29 13:57:14.389 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 859
2025-08-29 13:57:14.391 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:14.391 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:57:14.392 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:14.395 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:57:14.416 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='0cff5b82-6f95-420b-b37c-1f32265abe5c', @p1='14fb85d5-ef5c-4a4a-8efb-f743edb117d5', @p2='15bbae04-e4f6-483e-a5a0-2d4847f8fe03', @p3='1bae510d-f420-4d74-bdf8-58300821c848', @p4='28b47f1d-07ec-4890-86c0-33d0b6eaefaf', @p5='3626fb2f-49eb-40f9-a042-a74f3c91e0dd', @p6='481d90d3-29da-4c7e-8598-7ebfb3ed2dc3', @p7='4f0cd41b-cd40-4090-85ef-2fbceb46dbee', @p8='6df54898-be85-4606-ac46-61bd459de315', @p9='9718af73-050a-4241-a357-d1dc5f81a6bc', @p10='9de1e121-1c66-483c-b79b-39a4729bb1d6', @p11='a08d1701-e50b-487f-abf9-50b26ce958ad', @p12='a9536a60-17a1-4235-bd70-2eee5eeb252a', @p13='af5bae3e-b684-45c3-9831-aff81d9c76e3', @p14='b3535c12-695c-4742-a7fa-3193f87b7645', @p15='b899b74a-6985-4632-a50f-097d692dc8a6', @p16='c374ae17-74d4-4eb5-8408-209b9b968cc8', @p17='c9b946fb-6ee3-44ce-ba5f-bafb8cf66878', @p18='cd33b5fe-270f-459b-b56e-b8fa11a71188', @p19='cf06f78c-f957-4583-8240-c3f074587346', @p20='fbe0af7a-7f08-4233-9b2c-f73a4b5cdc19', @p21='fea819b5-3192-4a6f-8e6a-97c2fc750fa0', @p22='02d1cf71-f4bd-48b8-a4be-72df51c50b48', @p23='2025-08-29T08:27:14.3976215Z' (DbType = DateTime), @p24='system', @p25='True', @p26='7d7cbceb-4ce7-4835-85cd-59562487298d', @p27='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p28='123d2dba-047d-49ea-b604-5a1d3cbc796f', @p29='2025-08-29T08:27:14.3976126Z' (DbType = DateTime), @p30='system', @p31='True', @p32='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p33='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p34='15f355ac-43fc-447f-a6d6-13b90bf057b9', @p35='2025-08-29T08:27:14.3976404Z' (DbType = DateTime), @p36='system', @p37='True', @p38='30000000-0000-0000-0000-000000000004', @p39='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p40='17eb10d0-ca76-4560-9ebd-52384c0b6888', @p41='2025-08-29T08:27:14.3976309Z' (DbType = DateTime), @p42='system', @p43='True', @p44='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p45='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p46='1f37d978-0f71-4071-873b-b606692a6266', @p47='2025-08-29T08:27:14.3976185Z' (DbType = DateTime), @p48='system', @p49='True', @p50='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p51='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p52='3e1292eb-77ca-46d5-98d8-d2d58bd4a4ed', @p53='2025-08-29T08:27:14.3977067Z' (DbType = DateTime), @p54='system', @p55='True', @p56='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p57='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p58='4e57abad-3c35-4e96-a528-42c30697d023', @p59='2025-08-29T08:27:14.3976358Z' (DbType = DateTime), @p60='system', @p61='True', @p62='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p63='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p64='5091ae18-3406-499a-83cd-22c3df5d0d8e', @p65='2025-08-29T08:27:14.3976785Z' (DbType = DateTime), @p66='system', @p67='True', @p68='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p69='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p70='5a604035-800c-4667-8167-e8d825551208', @p71='2025-08-29T08:27:14.3976865Z' (DbType = DateTime), @p72='system', @p73='True', @p74='c819f1bd-422d-4609-916c-cc185fe44ab0', @p75='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p76='5d67992f-b797-4305-afb4-ff237c04cb27', @p77='2025-08-29T08:27:14.3976075Z' (DbType = DateTime), @p78='system', @p79='True', @p80='821480c6-1464-415e-bba8-066fcb4e7e63', @p81='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p82='660ee0e4-cc35-4837-9fc1-ca13e13506bb', @p83='2025-08-29T08:27:14.3977028Z' (DbType = DateTime), @p84='system', @p85='True', @p86='0485154c-dde5-4732-a7aa-a379c77a5b27', @p87='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p88='841cf532-d4ce-40ba-91e0-8f13a352255e', @p89='2025-08-29T08:27:14.3976696Z' (DbType = DateTime), @p90='system', @p91='True', @p92='974af1f9-3caa-4857-a1a7-48462c389332', @p93='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p94='96503c9b-f07f-471e-b3fc-7b1ef90661b8', @p95='2025-08-29T08:27:14.3976821Z' (DbType = DateTime), @p96='system', @p97='True', @p98='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p99='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p100='a1796f4f-9dee-4801-a8fe-8f1908d5900d', @p101='2025-08-29T08:27:14.3976645Z' (DbType = DateTime), @p102='system', @p103='True', @p104='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p105='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p106='a3e85926-03ec-42a2-8edd-4a3ef373c034', @p107='2025-08-29T08:27:14.3976155Z' (DbType = DateTime), @p108='system', @p109='True', @p110='9ae90cfe-3fea-4307-b024-3083c2728148', @p111='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p112='b958bb1c-eaa2-4bf4-84ed-4ed1f577395b', @p113='2025-08-29T08:27:14.3976734Z' (DbType = DateTime), @p114='system', @p115='True', @p116='29461562-ef9c-48c0-a606-482ff57b8f95', @p117='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p118='ba20d3c5-df39-4ba9-992d-46219f21b182', @p119='2025-08-29T08:27:14.3976537Z' (DbType = DateTime), @p120='system', @p121='True', @p122='30000000-0000-0000-0000-000000000003', @p123='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p124='bb3e448b-4e05-497b-b20e-c34e8ceca139', @p125='2025-08-29T08:27:14.3976446Z' (DbType = DateTime), @p126='system', @p127='True', @p128='30000000-0000-0000-0000-000000000002', @p129='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p130='cf3fcfaa-67b9-4a26-a7d2-336c9a663f28', @p131='2025-08-29T08:27:14.3976596Z' (DbType = DateTime), @p132='system', @p133='True', @p134='30000000-0000-0000-0000-000000000000', @p135='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p136='dd29e119-edc7-4006-9158-5e8517b1a355', @p137='2025-08-29T08:27:14.3976909Z' (DbType = DateTime), @p138='system', @p139='True', @p140='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p141='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p142='dd62b82a-de44-42f9-9345-3c91f4e3c9c6', @p143='2025-08-29T08:27:14.3976491Z' (DbType = DateTime), @p144='system', @p145='True', @p146='30000000-0000-0000-0000-000000000001', @p147='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p148='ee636691-09c1-4bbb-aa81-d0cdb3912f87', @p149='2025-08-29T08:27:14.3975584Z' (DbType = DateTime), @p150='system', @p151='True', @p152='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p153='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p40, @p41, @p42, @p43, @p44, @p45);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p58, @p59, @p60, @p61, @p62, @p63);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p88, @p89, @p90, @p91, @p92, @p93);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p94, @p95, @p96, @p97, @p98, @p99);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p100, @p101, @p102, @p103, @p104, @p105);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p106, @p107, @p108, @p109, @p110, @p111);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p112, @p113, @p114, @p115, @p116, @p117);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p118, @p119, @p120, @p121, @p122, @p123);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p124, @p125, @p126, @p127, @p128, @p129);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p130, @p131, @p132, @p133, @p134, @p135);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p136, @p137, @p138, @p139, @p140, @p141);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p142, @p143, @p144, @p145, @p146, @p147);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p148, @p149, @p150, @p151, @p152, @p153);
2025-08-29 13:57:14.419 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:14.420 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 26.7774ms
2025-08-29 13:57:14.421 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:57:14.422 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 33.0867ms
2025-08-29 13:57:14.424 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:57:14.426 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:14.426 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:57:14.427 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:14.430 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:57:14.432 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:57:14.434 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.2572ms
2025-08-29 13:57:14.435 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:57:14.435 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.263ms
2025-08-29 13:57:17.403 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:17.405 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:17.406 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7819ms
2025-08-29 13:57:17.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:17.410 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:17.411 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:17.412 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:17.415 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:17.417 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:17.418 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.8897ms
2025-08-29 13:57:17.419 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:17.420 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.7726ms
2025-08-29 13:57:17.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:17.432 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:17.433 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:17.435 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:17.438 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:17.442 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:17.443 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3299ms
2025-08-29 13:57:17.444 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:17.445 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3761ms
2025-08-29 13:57:17.490 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:17.492 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:17.493 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:17.494 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:17.499 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:17.501 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:17.502 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.378ms
2025-08-29 13:57:17.503 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:17.504 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.8173ms
2025-08-29 13:57:18.296 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:18.299 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:18.300 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.301 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:18.304 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:18.307 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:18.308 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.2069ms
2025-08-29 13:57:18.309 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.310 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3291ms
2025-08-29 13:57:18.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:18.327 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:18.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.330 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:18.338 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:18.342 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:18.344 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2144ms
2025-08-29 13:57:18.346 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.791ms
2025-08-29 13:57:18.386 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:18.388 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:18.389 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.390 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:18.394 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:18.398 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:18.399 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0383ms
2025-08-29 13:57:18.400 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.6825ms
2025-08-29 13:57:18.916 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:18.919 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:18.920 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.921 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:18.923 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:18.926 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:18.927 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4237ms
2025-08-29 13:57:18.928 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.929 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.0603ms
2025-08-29 13:57:18.941 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:18.945 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:18.946 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.948 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:18.953 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:18.957 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:18.961 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.9914ms
2025-08-29 13:57:18.964 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:18.966 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.6126ms
2025-08-29 13:57:19.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:19.007 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:19.008 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.009 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:19.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:19.016 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:19.017 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3541ms
2025-08-29 13:57:19.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.019 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2516ms
2025-08-29 13:57:19.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:19.465 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:19.466 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.467 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:19.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:19.473 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:19.474 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5611ms
2025-08-29 13:57:19.475 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.476 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.0959ms
2025-08-29 13:57:19.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:19.489 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:19.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.491 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:19.500 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:19.504 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:19.505 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5761ms
2025-08-29 13:57:19.507 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.508 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.1645ms
2025-08-29 13:57:19.551 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:19.554 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:19.555 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.556 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:19.559 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:19.563 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:19.564 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6453ms
2025-08-29 13:57:19.565 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.566 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7611ms
2025-08-29 13:57:19.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:19.715 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:19.717 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.718 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:19.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:19.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:19.729 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8069ms
2025-08-29 13:57:19.730 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.731 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.608ms
2025-08-29 13:57:19.750 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:19.753 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:19.754 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.756 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:19.760 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:19.765 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:19.767 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3901ms
2025-08-29 13:57:19.769 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.770 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.783ms
2025-08-29 13:57:19.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:57:19.817 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:57:19.818 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.819 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:57:19.822 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:57:19.825 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:57:19.827 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1327ms
2025-08-29 13:57:19.828 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:57:19.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5463ms
2025-08-29 13:58:01.485 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:58:01.491 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:01.492 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 7.2617ms
2025-08-29 13:58:01.498 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 13:58:01.500 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:01.501 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:58:01.502 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:58:01.503 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:58:01.504 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.1726ms
2025-08-29 13:58:01.505 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:58:01.506 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 8.0469ms
2025-08-29 13:58:02.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:58:02.694 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:02.695 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.6587ms
2025-08-29 13:58:02.697 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:58:02.699 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:02.700 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:58:02.700 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:58:02.702 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:58:02.703 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.1826ms
2025-08-29 13:58:02.704 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:58:02.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.7112ms
2025-08-29 13:58:08.273 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:58:08.275 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:08.276 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.9015ms
2025-08-29 13:58:08.278 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 898
2025-08-29 13:58:08.280 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:08.281 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:58:08.281 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:58:08.284 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 13:58:08.302 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='02d1cf71-f4bd-48b8-a4be-72df51c50b48', @p1='123d2dba-047d-49ea-b604-5a1d3cbc796f', @p2='15f355ac-43fc-447f-a6d6-13b90bf057b9', @p3='17eb10d0-ca76-4560-9ebd-52384c0b6888', @p4='1f37d978-0f71-4071-873b-b606692a6266', @p5='3e1292eb-77ca-46d5-98d8-d2d58bd4a4ed', @p6='4e57abad-3c35-4e96-a528-42c30697d023', @p7='5091ae18-3406-499a-83cd-22c3df5d0d8e', @p8='5a604035-800c-4667-8167-e8d825551208', @p9='5d67992f-b797-4305-afb4-ff237c04cb27', @p10='660ee0e4-cc35-4837-9fc1-ca13e13506bb', @p11='841cf532-d4ce-40ba-91e0-8f13a352255e', @p12='96503c9b-f07f-471e-b3fc-7b1ef90661b8', @p13='a1796f4f-9dee-4801-a8fe-8f1908d5900d', @p14='a3e85926-03ec-42a2-8edd-4a3ef373c034', @p15='b958bb1c-eaa2-4bf4-84ed-4ed1f577395b', @p16='ba20d3c5-df39-4ba9-992d-46219f21b182', @p17='bb3e448b-4e05-497b-b20e-c34e8ceca139', @p18='cf3fcfaa-67b9-4a26-a7d2-336c9a663f28', @p19='dd29e119-edc7-4006-9158-5e8517b1a355', @p20='dd62b82a-de44-42f9-9345-3c91f4e3c9c6', @p21='ee636691-09c1-4bbb-aa81-d0cdb3912f87', @p22='067e7c95-53d5-4959-b62b-71eee24cccbe', @p23='2025-08-29T08:28:08.2871829Z' (DbType = DateTime), @p24='system', @p25='True', @p26='29461562-ef9c-48c0-a606-482ff57b8f95', @p27='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p28='076bb939-0cb2-4ad2-9ab0-34b956fd2d28', @p29='2025-08-29T08:28:08.2871801Z' (DbType = DateTime), @p30='system', @p31='True', @p32='974af1f9-3caa-4857-a1a7-48462c389332', @p33='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p34='11afae8c-83f0-49a5-9f12-e8814aa0a640', @p35='2025-08-29T08:28:08.2871979Z' (DbType = DateTime), @p36='system', @p37='True', @p38='0485154c-dde5-4732-a7aa-a379c77a5b27', @p39='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p40='1b7eb87a-35d5-48fc-a7f2-a2ee0fad203a', @p41='2025-08-29T08:28:08.2871906Z' (DbType = DateTime), @p42='system', @p43='True', @p44='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p45='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p46='5de04fd3-4305-44a2-a3d9-09a64a547fde', @p47='2025-08-29T08:28:08.2871931Z' (DbType = DateTime), @p48='system', @p49='True', @p50='c819f1bd-422d-4609-916c-cc185fe44ab0', @p51='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p52='67300a2a-9554-47c5-a73a-87723d008c38', @p53='2025-08-29T08:28:08.2871489Z' (DbType = DateTime), @p54='system', @p55='True', @p56='7d7cbceb-4ce7-4835-85cd-59562487298d', @p57='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p58='746dfdf5-5d06-43cb-ae54-e4d4d6b84d32', @p59='2025-08-29T08:28:08.2871332Z' (DbType = DateTime), @p60='system', @p61='True', @p62='821480c6-1464-415e-bba8-066fcb4e7e63', @p63='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p64='74870d6a-24bc-4725-98d9-bdc38dace22c', @p65='2025-08-29T08:28:08.2871956Z' (DbType = DateTime), @p66='system', @p67='True', @p68='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p69='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p70='8147d69b-1bf1-4862-a894-8e7344ebd382', @p71='2025-08-29T08:28:08.2871749Z' (DbType = DateTime), @p72='system', @p73='True', @p74='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p75='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p76='81681ac1-cb62-4400-81b0-48c158482646', @p77='2025-08-29T08:28:08.2871525Z' (DbType = DateTime), @p78='system', @p79='True', @p80='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p81='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p82='8a8c8047-4e03-43bd-bc9d-e57c085a5e3f', @p83='2025-08-29T08:28:08.2871698Z' (DbType = DateTime), @p84='system', @p85='True', @p86='30000000-0000-0000-0000-000000000007', @p87='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p88='939fcc1c-a143-4820-98bc-6d6781a2a5df', @p89='2025-08-29T08:28:08.2871435Z' (DbType = DateTime), @p90='system', @p91='True', @p92='9ae90cfe-3fea-4307-b024-3083c2728148', @p93='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p94='9ac9f71a-96fd-43bb-96b2-8f5c1eae520d', @p95='2025-08-29T08:28:08.2871550Z' (DbType = DateTime), @p96='system', @p97='True', @p98='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p99='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p100='a1a25811-fe88-4221-af7b-fd54383bd142', @p101='2025-08-29T08:28:08.2871463Z' (DbType = DateTime), @p102='system', @p103='True', @p104='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p105='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p106='c3bf6e69-1c2d-4589-8fc1-5fc7c9fad7e3', @p107='2025-08-29T08:28:08.2871625Z' (DbType = DateTime), @p108='system', @p109='True', @p110='30000000-0000-0000-0000-000000000002', @p111='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p112='cff2ad71-b22b-44d8-acb3-840821799afe', @p113='2025-08-29T08:28:08.2871723Z' (DbType = DateTime), @p114='system', @p115='True', @p116='30000000-0000-0000-0000-000000000000', @p117='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p118='dab0118d-0354-426a-a02c-41e6f96140e4', @p119='2025-08-29T08:28:08.2871373Z' (DbType = DateTime), @p120='system', @p121='True', @p122='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p123='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p124='e9c3e90e-ef44-4a17-a651-889cb023c870', @p125='2025-08-29T08:28:08.2872004Z' (DbType = DateTime), @p126='system', @p127='True', @p128='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p129='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p130='eb8fb5e4-8c6b-413a-9454-58f708397527', @p131='2025-08-29T08:28:08.2871673Z' (DbType = DateTime), @p132='system', @p133='True', @p134='30000000-0000-0000-0000-000000000003', @p135='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p136='f04d28c9-73e2-4139-aa31-05c7468fb582', @p137='2025-08-29T08:28:08.2871853Z' (DbType = DateTime), @p138='system', @p139='True', @p140='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p141='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p142='f474cfb3-2e82-4714-a5c7-4084177d37f0', @p143='2025-08-29T08:28:08.2871649Z' (DbType = DateTime), @p144='system', @p145='True', @p146='30000000-0000-0000-0000-000000000001', @p147='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p148='f59e5c9f-e127-44d7-8a54-3d800c13d963', @p149='2025-08-29T08:28:08.2871575Z' (DbType = DateTime), @p150='system', @p151='True', @p152='30000000-0000-0000-0000-000000000004', @p153='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p154='fd2de521-8dba-464d-ba0e-2c049872c81a', @p155='2025-08-29T08:28:08.2870770Z' (DbType = DateTime), @p156='system', @p157='True', @p158='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p159='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p40, @p41, @p42, @p43, @p44, @p45);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p58, @p59, @p60, @p61, @p62, @p63);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p88, @p89, @p90, @p91, @p92, @p93);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p94, @p95, @p96, @p97, @p98, @p99);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p100, @p101, @p102, @p103, @p104, @p105);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p106, @p107, @p108, @p109, @p110, @p111);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p112, @p113, @p114, @p115, @p116, @p117);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p118, @p119, @p120, @p121, @p122, @p123);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p124, @p125, @p126, @p127, @p128, @p129);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p130, @p131, @p132, @p133, @p134, @p135);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p136, @p137, @p138, @p139, @p140, @p141);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p142, @p143, @p144, @p145, @p146, @p147);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p148, @p149, @p150, @p151, @p152, @p153);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p154, @p155, @p156, @p157, @p158, @p159);
2025-08-29 13:58:08.307 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:58:08.308 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 25.6919ms
2025-08-29 13:58:08.309 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 13:58:08.310 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 31.6419ms
2025-08-29 13:58:08.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 13:58:08.314 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:08.314 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:58:08.315 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:58:08.318 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 13:58:08.321 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 13:58:08.322 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.4196ms
2025-08-29 13:58:08.323 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 13:58:08.324 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.6405ms
2025-08-29 13:58:13.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:58:13.261 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:13.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9652ms
2025-08-29 13:58:13.264 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:58:13.267 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:13.269 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:58:13.269 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:58:13.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:58:13.276 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:58:13.277 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3132ms
2025-08-29 13:58:13.278 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:58:13.280 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.1308ms
2025-08-29 13:58:13.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:58:13.298 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:13.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:58:13.301 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:58:13.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:58:13.318 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:58:13.320 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6911ms
2025-08-29 13:58:13.321 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:58:13.322 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.3498ms
2025-08-29 13:58:13.362 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 13:58:13.364 +05:30 [INF] CORS policy execution successful.
2025-08-29 13:58:13.366 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:58:13.367 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 13:58:13.371 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 13:58:13.374 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 13:58:13.375 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9356ms
2025-08-29 13:58:13.376 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 13:58:13.377 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0752ms
2025-08-29 14:01:39.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:01:40.003 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:01:40.004 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.8163ms
2025-08-29 14:01:40.011 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:01:40.014 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:01:40.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:40.016 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:01:40.179 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:01:40.181 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:01:40.182 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 164.3914ms
2025-08-29 14:01:40.183 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:40.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 172.9894ms
2025-08-29 14:01:40.191 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:01:40.193 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:01:40.194 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:40.195 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:01:40.198 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:01:40.200 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:01:40.202 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5464ms
2025-08-29 14:01:40.203 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:40.204 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.8063ms
2025-08-29 14:01:40.244 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:01:40.246 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:01:40.247 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:40.248 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:01:40.251 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:01:40.255 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:01:40.256 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9751ms
2025-08-29 14:01:40.257 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:40.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.7097ms
2025-08-29 14:01:44.429 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:01:44.431 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:01:44.433 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:44.434 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:01:44.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:01:44.439 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:01:44.440 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.354ms
2025-08-29 14:01:44.441 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:44.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.505ms
2025-08-29 14:01:44.451 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:01:44.453 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:01:44.453 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:44.454 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:01:44.457 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:01:44.460 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:01:44.462 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6976ms
2025-08-29 14:01:44.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:44.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1116ms
2025-08-29 14:01:44.515 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:01:44.517 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:01:44.518 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:44.519 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:01:44.524 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:01:44.530 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:01:44.531 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4625ms
2025-08-29 14:01:44.533 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:01:44.534 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.1871ms
2025-08-29 14:03:09.016 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:03:09.021 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:09.022 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 6.5714ms
2025-08-29 14:03:09.028 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 14:03:09.030 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:09.031 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:03:09.032 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:03:09.037 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:03:09.048 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='067e7c95-53d5-4959-b62b-71eee24cccbe', @p1='076bb939-0cb2-4ad2-9ab0-34b956fd2d28', @p2='11afae8c-83f0-49a5-9f12-e8814aa0a640', @p3='1b7eb87a-35d5-48fc-a7f2-a2ee0fad203a', @p4='5de04fd3-4305-44a2-a3d9-09a64a547fde', @p5='67300a2a-9554-47c5-a73a-87723d008c38', @p6='746dfdf5-5d06-43cb-ae54-e4d4d6b84d32', @p7='74870d6a-24bc-4725-98d9-bdc38dace22c', @p8='8147d69b-1bf1-4862-a894-8e7344ebd382', @p9='81681ac1-cb62-4400-81b0-48c158482646', @p10='8a8c8047-4e03-43bd-bc9d-e57c085a5e3f', @p11='939fcc1c-a143-4820-98bc-6d6781a2a5df', @p12='9ac9f71a-96fd-43bb-96b2-8f5c1eae520d', @p13='a1a25811-fe88-4221-af7b-fd54383bd142', @p14='c3bf6e69-1c2d-4589-8fc1-5fc7c9fad7e3', @p15='cff2ad71-b22b-44d8-acb3-840821799afe', @p16='dab0118d-0354-426a-a02c-41e6f96140e4', @p17='e9c3e90e-ef44-4a17-a651-889cb023c870', @p18='eb8fb5e4-8c6b-413a-9454-58f708397527', @p19='f04d28c9-73e2-4139-aa31-05c7468fb582', @p20='f474cfb3-2e82-4714-a5c7-4084177d37f0', @p21='f59e5c9f-e127-44d7-8a54-3d800c13d963', @p22='fd2de521-8dba-464d-ba0e-2c049872c81a', @p23='08f06745-a9d1-4815-9dad-27e713fc40c6', @p24='2025-08-29T08:33:09.0412261Z' (DbType = DateTime), @p25='system', @p26='True', @p27='c819f1bd-422d-4609-916c-cc185fe44ab0', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='1311c14c-be8b-4a6f-a674-e45395628808', @p30='2025-08-29T08:33:09.0407982Z' (DbType = DateTime), @p31='system', @p32='True', @p33='9ae90cfe-3fea-4307-b024-3083c2728148', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='20b14904-b057-49a2-967c-437a2124a9aa', @p36='2025-08-29T08:33:09.0408497Z' (DbType = DateTime), @p37='system', @p38='True', @p39='30000000-0000-0000-0000-000000000007', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='23e626bc-6b5d-4e43-be26-00317c539a3a', @p42='2025-08-29T08:33:09.0412298Z' (DbType = DateTime), @p43='system', @p44='True', @p45='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='25de35e6-9922-4e5e-ba6a-996d2b22920f', @p48='2025-08-29T08:33:09.0407208Z' (DbType = DateTime), @p49='system', @p50='True', @p51='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='41c9020d-57de-4ee1-bd26-81a8078ccf19', @p54='2025-08-29T08:33:09.0412456Z' (DbType = DateTime), @p55='system', @p56='True', @p57='30000000-0000-0000-0000-000000000008', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='48851853-dc1c-4875-a95c-f017fc6d4e80', @p60='2025-08-29T08:33:09.0412206Z' (DbType = DateTime), @p61='system', @p62='True', @p63='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='48de14b0-bc8c-429a-b820-9146fcd76854', @p66='2025-08-29T08:33:09.0408544Z' (DbType = DateTime), @p67='system', @p68='True', @p69='30000000-0000-0000-0000-000000000000', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='49851c2d-d75d-4379-abb8-4c7dd325f5cf', @p72='2025-08-29T08:33:09.0408910Z' (DbType = DateTime), @p73='system', @p74='True', @p75='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='4fe26908-c8ab-45a7-bc34-248c1ee0045c', @p78='2025-08-29T08:33:09.0412375Z' (DbType = DateTime), @p79='system', @p80='True', @p81='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='7076b1ce-4882-4695-a25b-1935151cb4e4', @p84='2025-08-29T08:33:09.0408354Z' (DbType = DateTime), @p85='system', @p86='True', @p87='30000000-0000-0000-0000-000000000002', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='7cf2b0aa-60b6-43db-925e-256417d735e1', @p90='2025-08-29T08:33:09.0408033Z' (DbType = DateTime), @p91='system', @p92='True', @p93='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='9b6462c3-b708-46d8-8dc1-58a94fc020b5', @p96='2025-08-29T08:33:09.0408083Z' (DbType = DateTime), @p97='system', @p98='True', @p99='7d7cbceb-4ce7-4835-85cd-59562487298d', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='b410b135-262e-4e1c-81e0-e9d5421d2c28', @p102='2025-08-29T08:33:09.0409036Z' (DbType = DateTime), @p103='system', @p104='True', @p105='29461562-ef9c-48c0-a606-482ff57b8f95', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='b4481693-fb5e-4028-9f5a-edabf6b906f2', @p108='2025-08-29T08:33:09.0407783Z' (DbType = DateTime), @p109='system', @p110='True', @p111='821480c6-1464-415e-bba8-066fcb4e7e63', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p113='b74680dc-88e1-4173-8b9e-073bd52a97fc', @p114='2025-08-29T08:33:09.0412332Z' (DbType = DateTime), @p115='system', @p116='True', @p117='0485154c-dde5-4732-a7aa-a379c77a5b27', @p118='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p119='be6ab9dd-4d9a-4cce-a931-173d7e1d48b9', @p120='2025-08-29T08:33:09.0411986Z' (DbType = DateTime), @p121='system', @p122='True', @p123='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p124='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p125='cb293baa-5555-415d-b86d-61a08f964456', @p126='2025-08-29T08:33:09.0408401Z' (DbType = DateTime), @p127='system', @p128='True', @p129='30000000-0000-0000-0000-000000000001', @p130='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p131='d8d79df5-2780-40d7-b5d4-d96c19b44b21', @p132='2025-08-29T08:33:09.0408131Z' (DbType = DateTime), @p133='system', @p134='True', @p135='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p136='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p137='d93c7c35-a9bf-4ee3-beea-a605fc3a4b83', @p138='2025-08-29T08:33:09.0408981Z' (DbType = DateTime), @p139='system', @p140='True', @p141='974af1f9-3caa-4857-a1a7-48462c389332', @p142='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p143='e67ab83b-194d-4f64-b3d8-232021e4e247', @p144='2025-08-29T08:33:09.0408304Z' (DbType = DateTime), @p145='system', @p146='True', @p147='30000000-0000-0000-0000-000000000004', @p148='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p149='e88891f1-98cf-4022-b084-c40657a593ec', @p150='2025-08-29T08:33:09.0407926Z' (DbType = DateTime), @p151='system', @p152='True', @p153='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p154='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p155='eef4d2d9-8b01-4ea8-8cd9-a608665f1594', @p156='2025-08-29T08:33:09.0408451Z' (DbType = DateTime), @p157='system', @p158='True', @p159='30000000-0000-0000-0000-000000000003', @p160='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p161='fe0ca4d9-214a-4c9e-939d-f16e97012fc2', @p162='2025-08-29T08:33:09.0408180Z' (DbType = DateTime), @p163='system', @p164='True', @p165='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p166='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p125, @p126, @p127, @p128, @p129, @p130);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p131, @p132, @p133, @p134, @p135, @p136);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p137, @p138, @p139, @p140, @p141, @p142);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p143, @p144, @p145, @p146, @p147, @p148);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p149, @p150, @p151, @p152, @p153, @p154);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p155, @p156, @p157, @p158, @p159, @p160);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p161, @p162, @p163, @p164, @p165, @p166);
2025-08-29 14:03:09.053 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:03:09.054 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 19.7149ms
2025-08-29 14:03:09.055 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:03:09.056 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 27.7671ms
2025-08-29 14:03:09.059 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:03:09.060 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:09.061 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:03:09.062 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:03:09.066 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:03:09.069 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:03:09.070 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.2009ms
2025-08-29 14:03:09.071 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:03:09.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 13.4755ms
2025-08-29 14:03:11.378 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 14:03:11.381 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:11.382 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:03:11.383 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:03:11.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:03:11.399 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='08f06745-a9d1-4815-9dad-27e713fc40c6', @p1='1311c14c-be8b-4a6f-a674-e45395628808', @p2='20b14904-b057-49a2-967c-437a2124a9aa', @p3='23e626bc-6b5d-4e43-be26-00317c539a3a', @p4='25de35e6-9922-4e5e-ba6a-996d2b22920f', @p5='41c9020d-57de-4ee1-bd26-81a8078ccf19', @p6='48851853-dc1c-4875-a95c-f017fc6d4e80', @p7='48de14b0-bc8c-429a-b820-9146fcd76854', @p8='49851c2d-d75d-4379-abb8-4c7dd325f5cf', @p9='4fe26908-c8ab-45a7-bc34-248c1ee0045c', @p10='7076b1ce-4882-4695-a25b-1935151cb4e4', @p11='7cf2b0aa-60b6-43db-925e-256417d735e1', @p12='9b6462c3-b708-46d8-8dc1-58a94fc020b5', @p13='b410b135-262e-4e1c-81e0-e9d5421d2c28', @p14='b4481693-fb5e-4028-9f5a-edabf6b906f2', @p15='b74680dc-88e1-4173-8b9e-073bd52a97fc', @p16='be6ab9dd-4d9a-4cce-a931-173d7e1d48b9', @p17='cb293baa-5555-415d-b86d-61a08f964456', @p18='d8d79df5-2780-40d7-b5d4-d96c19b44b21', @p19='d93c7c35-a9bf-4ee3-beea-a605fc3a4b83', @p20='e67ab83b-194d-4f64-b3d8-232021e4e247', @p21='e88891f1-98cf-4022-b084-c40657a593ec', @p22='eef4d2d9-8b01-4ea8-8cd9-a608665f1594', @p23='fe0ca4d9-214a-4c9e-939d-f16e97012fc2', @p24='080028bf-d018-443a-95bd-0329c43629d0', @p25='2025-08-29T08:33:11.3906320Z' (DbType = DateTime), @p26='system', @p27='True', @p28='821480c6-1464-415e-bba8-066fcb4e7e63', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='0cfa91fb-5e1a-4560-952d-16ecedfc2d81', @p31='2025-08-29T08:33:11.3906483Z' (DbType = DateTime), @p32='system', @p33='True', @p34='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='1244d1c7-0e45-461a-b1a6-269f94c51e0a', @p37='2025-08-29T08:33:11.3907751Z' (DbType = DateTime), @p38='system', @p39='True', @p40='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='13405862-5322-492e-97fe-a175362fc085', @p43='2025-08-29T08:33:11.3907680Z' (DbType = DateTime), @p44='system', @p45='True', @p46='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='22dac345-a4ed-4f60-870f-afe4accedb64', @p49='2025-08-29T08:33:11.3906579Z' (DbType = DateTime), @p50='system', @p51='True', @p52='7d7cbceb-4ce7-4835-85cd-59562487298d', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='3496b43b-fcc3-43e9-8b05-1a189ae92cf6', @p55='2025-08-29T08:33:11.3906390Z' (DbType = DateTime), @p56='system', @p57='True', @p58='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='38f0447b-cbc2-42aa-bcd8-4d1088d8b30d', @p61='2025-08-29T08:33:11.3907572Z' (DbType = DateTime), @p62='system', @p63='True', @p64='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='39962309-75ef-42fa-b95f-20f9af433b88', @p67='2025-08-29T08:33:11.3906711Z' (DbType = DateTime), @p68='system', @p69='True', @p70='30000000-0000-0000-0000-000000000004', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='399e70d9-2f60-4ca8-b4c4-9555f14c3617', @p73='2025-08-29T08:33:11.3906656Z' (DbType = DateTime), @p74='system', @p75='True', @p76='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='5ec7af12-8ecb-4618-b468-c1bf862a64cc', @p79='2025-08-29T08:33:11.3907652Z' (DbType = DateTime), @p80='system', @p81='True', @p82='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='6646dd39-7975-4458-ad2f-c60a2ce1a3b5', @p85='2025-08-29T08:33:11.3907343Z' (DbType = DateTime), @p86='system', @p87='True', @p88='30000000-0000-0000-0000-000000000001', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='72990198-d553-47b1-babc-71d4d8c6ca79', @p91='2025-08-29T08:33:11.3907482Z' (DbType = DateTime), @p92='system', @p93='True', @p94='30000000-0000-0000-0000-000000000007', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='7d08f86b-3457-4d18-9681-47158320d7a3', @p97='2025-08-29T08:33:11.3907627Z' (DbType = DateTime), @p98='system', @p99='True', @p100='29461562-ef9c-48c0-a606-482ff57b8f95', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='7da912ab-12ad-4f9a-b557-7217702b1249', @p103='2025-08-29T08:33:11.3907774Z' (DbType = DateTime), @p104='system', @p105='True', @p106='0485154c-dde5-4732-a7aa-a379c77a5b27', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='83ac52c2-1b3b-4fef-a6b3-38fa7ab88e8d', @p109='2025-08-29T08:33:11.3907821Z' (DbType = DateTime), @p110='system', @p111='True', @p112='30000000-0000-0000-0000-000000000008', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='96d44a70-71c1-4fb3-afee-78333c8613aa', @p115='2025-08-29T08:33:11.3906753Z' (DbType = DateTime), @p116='system', @p117='True', @p118='30000000-0000-0000-0000-000000000002', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='bcf72eea-5819-454c-8dfa-193acc35ea32', @p121='2025-08-29T08:33:11.3905813Z' (DbType = DateTime), @p122='system', @p123='True', @p124='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='c049aa64-ab5a-4bdd-b58d-6e328095f39e', @p127='2025-08-29T08:33:11.3906435Z' (DbType = DateTime), @p128='system', @p129='True', @p130='9ae90cfe-3fea-4307-b024-3083c2728148', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='dd5e4d6a-27e2-44a6-9aa8-4777bdd5ca23', @p133='2025-08-29T08:33:11.3907798Z' (DbType = DateTime), @p134='system', @p135='True', @p136='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='e2f25360-c1d1-40ae-a6bd-c042a34db76b', @p139='2025-08-29T08:33:11.3907727Z' (DbType = DateTime), @p140='system', @p141='True', @p142='c819f1bd-422d-4609-916c-cc185fe44ab0', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='e689eafa-5da2-4368-9aea-91d2d403a3d3', @p145='2025-08-29T08:33:11.3907451Z' (DbType = DateTime), @p146='system', @p147='True', @p148='30000000-0000-0000-0000-000000000003', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='e9a6761a-836e-4767-bb1e-e5fc03eb0330', @p151='2025-08-29T08:33:11.3906619Z' (DbType = DateTime), @p152='system', @p153='True', @p154='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='ef6369a0-7351-407c-875f-6508dcfea571', @p157='2025-08-29T08:33:11.3907599Z' (DbType = DateTime), @p158='system', @p159='True', @p160='974af1f9-3caa-4857-a1a7-48462c389332', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p162='f7ea7a06-424e-4606-a817-7a227ee5c647', @p163='2025-08-29T08:33:11.3907508Z' (DbType = DateTime), @p164='system', @p165='True', @p166='30000000-0000-0000-0000-000000000000', @p167='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p162, @p163, @p164, @p165, @p166, @p167);
2025-08-29 14:03:11.403 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:03:11.404 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 19.0622ms
2025-08-29 14:03:11.405 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:03:11.405 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 27.0511ms
2025-08-29 14:03:11.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:03:11.410 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:11.410 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:03:11.412 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:03:11.415 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:03:11.418 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:03:11.419 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.7077ms
2025-08-29 14:03:11.420 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:03:11.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.7802ms
2025-08-29 14:03:18.228 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:03:18.231 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:18.232 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7114ms
2025-08-29 14:03:18.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:03:18.237 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:18.238 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:03:18.239 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:03:18.243 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:03:18.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:03:18.249 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1183ms
2025-08-29 14:03:18.251 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:03:18.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4346ms
2025-08-29 14:03:18.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:03:18.282 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:18.283 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:03:18.284 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:03:18.289 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:03:18.293 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:03:18.295 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2974ms
2025-08-29 14:03:18.296 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:03:18.297 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7624ms
2025-08-29 14:03:18.337 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:03:18.340 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:03:18.342 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:03:18.343 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:03:18.347 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:03:18.350 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:03:18.352 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6406ms
2025-08-29 14:03:18.353 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:03:18.354 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.8442ms
2025-08-29 14:04:35.260 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:04:35.267 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:04:35.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.5401ms
2025-08-29 14:04:35.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:04:35.280 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:04:35.281 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:04:35.282 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:04:35.287 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:04:35.292 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:04:35.294 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6091ms
2025-08-29 14:04:35.296 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:04:35.298 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.4576ms
2025-08-29 14:04:35.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:04:35.327 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:04:35.329 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:04:35.330 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:04:35.334 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:04:35.339 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:04:35.341 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5151ms
2025-08-29 14:04:35.342 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:04:35.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.0873ms
2025-08-29 14:04:35.388 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:04:35.391 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:04:35.392 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:04:35.393 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:04:35.397 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:04:35.400 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:04:35.402 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0659ms
2025-08-29 14:04:35.403 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:04:35.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.2637ms
2025-08-29 14:14:30.630 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:14:30.635 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:14:30.637 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.6983ms
2025-08-29 14:14:30.647 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:14:30.652 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:14:30.654 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:14:30.656 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:14:30.842 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:14:30.845 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:14:30.846 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 188.2401ms
2025-08-29 14:14:30.848 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:14:30.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 202.0479ms
2025-08-29 14:14:30.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:14:30.886 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:14:30.887 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:14:30.888 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:14:30.891 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:14:30.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:14:30.897 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4918ms
2025-08-29 14:14:30.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:14:30.900 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.8148ms
2025-08-29 14:14:30.949 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:14:30.952 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:14:30.954 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:14:30.955 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:14:30.960 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:14:30.963 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:14:30.965 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5534ms
2025-08-29 14:14:30.966 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:14:30.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.7021ms
2025-08-29 14:36:04.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:36:04.474 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:36:04.476 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.042ms
2025-08-29 14:36:04.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:36:04.491 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:36:04.493 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:36:04.495 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:36:04.816 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:36:04.819 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:36:04.821 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 323.455ms
2025-08-29 14:36:04.823 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:36:04.824 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 339.1782ms
2025-08-29 14:36:04.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:36:04.835 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:36:04.836 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:36:04.837 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:36:04.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:36:04.846 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:36:04.848 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7795ms
2025-08-29 14:36:04.850 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:36:04.852 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8215ms
2025-08-29 14:36:04.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:36:04.910 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:36:04.912 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:36:04.913 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:36:04.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:36:04.923 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:36:04.924 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0112ms
2025-08-29 14:36:04.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:36:04.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.3082ms
2025-08-29 14:38:40.755 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:38:40.763 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:40.764 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 8.6053ms
2025-08-29 14:38:40.766 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:38:40.773 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:40.775 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:38:40.776 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:38:40.782 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:38:40.784 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.0178ms
2025-08-29 14:38:40.786 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:38:40.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 20.3457ms
2025-08-29 14:38:42.250 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:38:42.252 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:42.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.3045ms
2025-08-29 14:38:42.255 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:38:42.257 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:42.258 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:38:42.259 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:38:42.265 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:38:42.268 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 7.8604ms
2025-08-29 14:38:42.269 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:38:42.270 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 14.6906ms
2025-08-29 14:38:45.724 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:38:45.726 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:45.728 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.6578ms
2025-08-29 14:38:45.733 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 859
2025-08-29 14:38:45.736 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:45.741 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:38:45.742 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:38:45.757 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:38:45.794 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='080028bf-d018-443a-95bd-0329c43629d0', @p1='0cfa91fb-5e1a-4560-952d-16ecedfc2d81', @p2='1244d1c7-0e45-461a-b1a6-269f94c51e0a', @p3='13405862-5322-492e-97fe-a175362fc085', @p4='22dac345-a4ed-4f60-870f-afe4accedb64', @p5='3496b43b-fcc3-43e9-8b05-1a189ae92cf6', @p6='38f0447b-cbc2-42aa-bcd8-4d1088d8b30d', @p7='39962309-75ef-42fa-b95f-20f9af433b88', @p8='399e70d9-2f60-4ca8-b4c4-9555f14c3617', @p9='5ec7af12-8ecb-4618-b468-c1bf862a64cc', @p10='6646dd39-7975-4458-ad2f-c60a2ce1a3b5', @p11='72990198-d553-47b1-babc-71d4d8c6ca79', @p12='7d08f86b-3457-4d18-9681-47158320d7a3', @p13='7da912ab-12ad-4f9a-b557-7217702b1249', @p14='83ac52c2-1b3b-4fef-a6b3-38fa7ab88e8d', @p15='96d44a70-71c1-4fb3-afee-78333c8613aa', @p16='bcf72eea-5819-454c-8dfa-193acc35ea32', @p17='c049aa64-ab5a-4bdd-b58d-6e328095f39e', @p18='dd5e4d6a-27e2-44a6-9aa8-4777bdd5ca23', @p19='e2f25360-c1d1-40ae-a6bd-c042a34db76b', @p20='e689eafa-5da2-4368-9aea-91d2d403a3d3', @p21='e9a6761a-836e-4767-bb1e-e5fc03eb0330', @p22='ef6369a0-7351-407c-875f-6508dcfea571', @p23='f7ea7a06-424e-4606-a817-7a227ee5c647', @p24='09b20b87-eab8-4a5d-a8d9-3ed2acd0abe4', @p25='2025-08-29T09:08:45.7725941Z' (DbType = DateTime), @p26='system', @p27='True', @p28='29461562-ef9c-48c0-a606-482ff57b8f95', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='09fa5964-2e55-462f-bb76-9429dca39c02', @p31='2025-08-29T09:08:45.7725743Z' (DbType = DateTime), @p32='system', @p33='True', @p34='30000000-0000-0000-0000-000000000001', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='0d68d002-4999-4b86-aa50-2b66c1a8b9d6', @p37='2025-08-29T09:08:45.7726156Z' (DbType = DateTime), @p38='system', @p39='True', @p40='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='110693f0-e6a5-467e-895e-e31c472eb597', @p43='2025-08-29T09:08:45.7725974Z' (DbType = DateTime), @p44='system', @p45='True', @p46='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='23399716-2fed-44ff-8f8c-bdfb248beabe', @p49='2025-08-29T09:08:45.7725504Z' (DbType = DateTime), @p50='system', @p51='True', @p52='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='23ec9d7c-50a6-4c8b-85de-3acdee8a14f7', @p55='2025-08-29T09:08:45.7725832Z' (DbType = DateTime), @p56='system', @p57='True', @p58='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='34fc3043-37c5-4a87-a965-6e38d4431866', @p61='2025-08-29T09:08:45.7725910Z' (DbType = DateTime), @p62='system', @p63='True', @p64='974af1f9-3caa-4857-a1a7-48462c389332', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='4792f78e-78c2-4595-a28d-a93546b6f0b0', @p67='2025-08-29T09:08:45.7725411Z' (DbType = DateTime), @p68='system', @p69='True', @p70='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='5a6a2de6-25a2-4400-bf1b-7e88344fafea', @p73='2025-08-29T09:08:45.7725773Z' (DbType = DateTime), @p74='system', @p75='True', @p76='30000000-0000-0000-0000-000000000003', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='5c1a5b1d-e13e-487a-a1d9-859c12691251', @p79='2025-08-29T09:08:45.7725069Z' (DbType = DateTime), @p80='system', @p81='True', @p82='821480c6-1464-415e-bba8-066fcb4e7e63', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='6af48a0f-ee5b-4c60-ae74-cf13f22924f8', @p85='2025-08-29T09:08:45.7726098Z' (DbType = DateTime), @p86='system', @p87='True', @p88='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='745d2af9-8c0b-4542-8cee-29032d1fb741', @p91='2025-08-29T09:08:45.7725714Z' (DbType = DateTime), @p92='system', @p93='True', @p94='30000000-0000-0000-0000-000000000002', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='80a1147d-7741-410f-a208-1e7769f599f6', @p97='2025-08-29T09:08:45.7726035Z' (DbType = DateTime), @p98='system', @p99='True', @p100='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='8fa31124-b30c-412e-b1e7-2c67ff8d6681', @p103='2025-08-29T09:08:45.7725803Z' (DbType = DateTime), @p104='system', @p105='True', @p106='30000000-0000-0000-0000-000000000000', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='9310af0c-1ba1-4c51-9e5c-14d3d1cc3370', @p109='2025-08-29T09:08:45.7725683Z' (DbType = DateTime), @p110='system', @p111='True', @p112='30000000-0000-0000-0000-000000000004', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='ab049f9a-2d94-4610-8ad9-769f3d144a49', @p115='2025-08-29T09:08:45.7726127Z' (DbType = DateTime), @p116='system', @p117='True', @p118='0485154c-dde5-4732-a7aa-a379c77a5b27', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='be459ae9-05d7-4919-aa8e-4d5791453e46', @p121='2025-08-29T09:08:45.7725568Z' (DbType = DateTime), @p122='system', @p123='True', @p124='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='d2232b66-530f-4f77-882a-ba36174d1ee9', @p127='2025-08-29T09:08:45.7725596Z' (DbType = DateTime), @p128='system', @p129='True', @p130='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='d961dc85-d560-4ed1-867e-5a9c5511e90d', @p133='2025-08-29T09:08:45.7725463Z' (DbType = DateTime), @p134='system', @p135='True', @p136='9ae90cfe-3fea-4307-b024-3083c2728148', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='e1d75afa-7d25-40ef-93aa-04b7a5e84193', @p139='2025-08-29T09:08:45.7695561Z' (DbType = DateTime), @p140='system', @p141='True', @p142='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='e4580b8b-82f5-44ad-b349-d3a28328e18d', @p145='2025-08-29T09:08:45.7725536Z' (DbType = DateTime), @p146='system', @p147='True', @p148='7d7cbceb-4ce7-4835-85cd-59562487298d', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='e80710a3-c550-4514-a14c-bd96530dae27', @p151='2025-08-29T09:08:45.7726070Z' (DbType = DateTime), @p152='system', @p153='True', @p154='c819f1bd-422d-4609-916c-cc185fe44ab0', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
2025-08-29 14:38:45.800 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:38:45.801 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 57.5797ms
2025-08-29 14:38:45.802 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:38:45.803 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 69.6898ms
2025-08-29 14:38:45.806 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:38:45.808 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:45.809 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:38:45.810 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:38:45.815 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:38:45.817 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:38:45.819 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 7.7419ms
2025-08-29 14:38:45.820 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:38:45.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 15.5203ms
2025-08-29 14:38:55.055 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:38:55.058 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:55.060 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0553ms
2025-08-29 14:38:55.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:38:55.067 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:55.068 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:38:55.069 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:38:55.073 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:38:55.077 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:38:55.079 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1019ms
2025-08-29 14:38:55.081 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:38:55.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.0389ms
2025-08-29 14:38:55.150 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:38:55.153 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:55.155 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:38:55.157 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:38:55.162 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:38:55.167 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:38:55.169 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4228ms
2025-08-29 14:38:55.171 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:38:55.173 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.1498ms
2025-08-29 14:38:55.252 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:38:55.255 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:38:55.257 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:38:55.258 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:38:55.261 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:38:55.266 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:38:55.274 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.3229ms
2025-08-29 14:38:55.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:38:55.277 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.4098ms
2025-08-29 14:39:28.660 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-29 14:39:28.670 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:28.672 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 204 null null 11.8095ms
2025-08-29 14:39:28.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-29 14:39:28.684 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:28.685 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 14:39:28.689 +05:30 [INF] Route matched with {action = "GetPaginatedLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedLogs(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 14:39:28.826 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
2025-08-29 14:39:28.850 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 14:39:28.853 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:39:28.887 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api) in 196.2401ms
2025-08-29 14:39:28.888 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 14:39:28.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 200 null application/json; charset=utf-8 208.5269ms
2025-08-29 14:39:31.870 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=2&pageSize=10 - null null
2025-08-29 14:39:31.872 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:31.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=2&pageSize=10 - 204 null null 3.0127ms
2025-08-29 14:39:31.875 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=2&pageSize=10 - null null
2025-08-29 14:39:31.877 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:31.878 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 14:39:31.879 +05:30 [INF] Route matched with {action = "GetPaginatedLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedLogs(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 14:39:31.885 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
2025-08-29 14:39:31.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1 OFFSET @__p_1
2025-08-29 14:39:31.894 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:39:31.895 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api) in 13.9302ms
2025-08-29 14:39:31.896 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 14:39:31.897 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=2&pageSize=10 - 200 null application/json; charset=utf-8 21.8167ms
2025-08-29 14:39:34.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=3&pageSize=10 - null null
2025-08-29 14:39:34.202 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:34.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=3&pageSize=10 - 204 null null 2.6293ms
2025-08-29 14:39:34.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=3&pageSize=10 - null null
2025-08-29 14:39:34.208 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:34.209 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 14:39:34.210 +05:30 [INF] Route matched with {action = "GetPaginatedLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedLogs(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 14:39:34.213 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
2025-08-29 14:39:34.217 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='20'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-29 14:39:34.220 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:39:34.221 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api) in 9.9252ms
2025-08-29 14:39:34.222 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-29 14:39:34.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=3&pageSize=10 - 200 null application/json; charset=utf-8 18.9704ms
2025-08-29 14:39:42.595 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - null null
2025-08-29 14:39:42.597 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:42.599 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - 204 null null 4.0362ms
2025-08-29 14:39:42.602 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs - null null
2025-08-29 14:39:42.605 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:42.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 14:39:42.607 +05:30 [INF] Route matched with {action = "GetAll", controller = "TrackingViewer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid]) on controller xbytechat.api.Features.Tracking.Controllers.TrackingViewerController (xbytechat.api).
2025-08-29 14:39:42.618 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."ContactPhone", CASE
    WHEN c."Id" IS NOT NULL THEN c."Name"
    ELSE '(N/A)'
END AS "ContactName", t."ButtonText", t."CTAType", t."SourceType", t."ClickedAt", t."DeviceType", t."Country", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE '(Unknown)'
END AS "CampaignName"
FROM "TrackingLogs" AS t
LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
LEFT JOIN "Campaigns" AS c0 ON t."CampaignId" = c0."Id"
ORDER BY t."ClickedAt" DESC
2025-08-29 14:39:42.621 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType86`10[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:39:42.622 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api) in 13.1517ms
2025-08-29 14:39:42.624 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 14:39:42.625 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/logs - 200 null application/json; charset=utf-8 22.2593ms
2025-08-29 14:39:45.739 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-29 14:39:45.741 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 14:39:45.743 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:45.745 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:45.746 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 7.0118ms
2025-08-29 14:39:45.747 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 6.2136ms
2025-08-29 14:39:45.754 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 14:39:45.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-29 14:39:45.762 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:45.765 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:39:45.766 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 14:39:45.766 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 14:39:45.768 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 14:39:45.769 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 14:39:45.774 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-29 14:39:45.776 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-29 14:39:45.778 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:39:45.782 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 11.078ms
2025-08-29 14:39:45.784 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 14:39:45.784 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 14:39:45.788 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 34.0725ms
2025-08-29 14:39:45.796 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 14:39:45.808 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 14:39:45.811 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 38.4249ms
2025-08-29 14:39:45.814 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 14:39:45.816 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 56.1285ms
2025-08-29 14:40:25.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-29 14:40:25.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 14:40:25.262 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:25.264 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:25.265 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.3567ms
2025-08-29 14:40:25.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 9.1308ms
2025-08-29 14:40:25.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-29 14:40:25.280 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 14:40:25.282 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:25.284 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:25.285 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 14:40:25.286 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 14:40:25.287 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 14:40:25.289 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 14:40:25.292 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-29 14:40:25.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-29 14:40:25.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:40:25.315 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 22.9575ms
2025-08-29 14:40:25.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 14:40:25.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 38.4926ms
2025-08-29 14:40:25.461 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 14:40:25.466 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 14:40:25.470 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 14:40:25.471 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 181.2088ms
2025-08-29 14:40:25.472 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 14:40:25.474 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 197.2967ms
2025-08-29 14:40:29.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - null null
2025-08-29 14:40:29.624 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:29.625 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - 204 null null 3.6517ms
2025-08-29 14:40:29.636 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs - null null
2025-08-29 14:40:29.640 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:29.641 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 14:40:29.643 +05:30 [INF] Route matched with {action = "GetAll", controller = "TrackingViewer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid]) on controller xbytechat.api.Features.Tracking.Controllers.TrackingViewerController (xbytechat.api).
2025-08-29 14:40:29.650 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."ContactPhone", CASE
    WHEN c."Id" IS NOT NULL THEN c."Name"
    ELSE '(N/A)'
END AS "ContactName", t."ButtonText", t."CTAType", t."SourceType", t."ClickedAt", t."DeviceType", t."Country", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE '(Unknown)'
END AS "CampaignName"
FROM "TrackingLogs" AS t
LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
LEFT JOIN "Campaigns" AS c0 ON t."CampaignId" = c0."Id"
ORDER BY t."ClickedAt" DESC
2025-08-29 14:40:29.652 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType86`10[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:40:29.654 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api) in 8.7354ms
2025-08-29 14:40:29.655 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-29 14:40:29.656 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/logs - 200 null application/json; charset=utf-8 20.3335ms
2025-08-29 14:40:33.736 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 14:40:33.739 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:33.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 4.0067ms
2025-08-29 14:40:33.751 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 14:40:33.754 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:33.755 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 14:40:33.758 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 14:40:33.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."CreatedAt", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND NOT (c."IsPublished") AND c."IsActive"
ORDER BY c."CreatedAt" DESC
2025-08-29 14:40:33.772 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:40:33.774 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 14.608ms
2025-08-29 14:40:33.776 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 14:40:33.777 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 200 null application/json; charset=utf-8 25.9809ms
2025-08-29 14:40:47.366 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 14:40:47.370 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:47.371 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/summary - 204 null null 5.2087ms
2025-08-29 14:40:47.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - null null
2025-08-29 14:40:47.389 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:47.391 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 14:40:47.393 +05:30 [INF] Route matched with {action = "GetSummary", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSummary() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 14:40:47.397 +05:30 [INF] 📊 Generating Flow Analytics Summary for BusinessId: "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d"
2025-08-29 14:40:47.404 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."RawResponse", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
2025-08-29 14:40:47.409 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.FlowAnalytics.DTOs.FlowAnalyticsSummaryDto'.
2025-08-29 14:40:47.410 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api) in 15.5372ms
2025-08-29 14:40:47.411 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetSummary (xbytechat.api)'
2025-08-29 14:40:47.412 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/summary - 200 null application/json; charset=utf-8 27.0042ms
2025-08-29 14:40:47.415 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/most-triggered-steps - null null
2025-08-29 14:40:47.417 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:47.418 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/most-triggered-steps - 204 null null 3.0288ms
2025-08-29 14:40:47.421 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/most-triggered-steps - null null
2025-08-29 14:40:47.423 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:47.424 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api)'
2025-08-29 14:40:47.425 +05:30 [INF] Route matched with {action = "GetMostTriggeredSteps", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMostTriggeredSteps() on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 14:40:47.432 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='5'], CommandType='"Text"', CommandTimeout='30']
SELECT f."StepId", f."StepName", count(*)::int AS "TriggerCount", max(f."ExecutedAt") AS "LastTriggeredAt"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
GROUP BY f."StepId", f."StepName"
ORDER BY count(*)::int DESC
LIMIT @__p_1
2025-08-29 14:40:47.434 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.FlowAnalytics.DTOs.MostTriggeredStepDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:40:47.435 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api) in 9.1867ms
2025-08-29 14:40:47.436 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetMostTriggeredSteps (xbytechat.api)'
2025-08-29 14:40:47.437 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/most-triggered-steps - 200 null application/json; charset=utf-8 15.9278ms
2025-08-29 14:40:47.439 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/step-journey-breakdown - null null
2025-08-29 14:40:47.441 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:47.442 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/flow-analytics/step-journey-breakdown - 204 null null 2.2508ms
2025-08-29 14:40:47.444 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/flow-analytics/step-journey-breakdown - null null
2025-08-29 14:40:47.446 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:47.446 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api)'
2025-08-29 14:40:47.447 +05:30 [INF] Route matched with {action = "GetStepJourneyBreakdown", controller = "FlowAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStepJourneyBreakdown(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime]) on controller xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController (xbytechat.api).
2025-08-29 14:40:47.451 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."RawResponse", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__businessId_0
2025-08-29 14:40:47.455 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.FlowAnalytics.DTOs.FlowAnalyticsStepJourneyDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:40:47.456 +05:30 [INF] Executed action xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api) in 6.9259ms
2025-08-29 14:40:47.457 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FlowAnalytics.Controllers.FlowAnalyticsController.GetStepJourneyBreakdown (xbytechat.api)'
2025-08-29 14:40:47.458 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/flow-analytics/step-journey-breakdown - 200 null application/json; charset=utf-8 14.0984ms
2025-08-29 14:40:51.533 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 14:40:51.538 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:51.539 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 5.302ms
2025-08-29 14:40:51.543 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 14:40:51.546 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:40:51.547 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 14:40:51.550 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-29 14:40:51.560 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-29 14:40:51.562 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 14:40:51.563 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 11.6445ms
2025-08-29 14:40:51.565 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 14:40:51.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 22.7316ms
2025-08-29 14:44:17.109 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:17.162 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:17.163 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 54.0172ms
2025-08-29 14:44:17.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:17.178 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:17.179 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:17.181 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:17.188 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:17.196 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:17.197 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.3281ms
2025-08-29 14:44:17.199 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:17.200 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.8839ms
2025-08-29 14:44:17.245 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:17.248 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:17.249 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:17.250 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:17.299 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:17.302 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:17.303 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 52.2748ms
2025-08-29 14:44:17.305 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:17.306 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 61.3461ms
2025-08-29 14:44:17.346 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:17.349 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:17.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:17.351 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:17.354 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:17.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:17.359 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8187ms
2025-08-29 14:44:17.361 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:17.366 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.7473ms
2025-08-29 14:44:26.229 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 14:44:26.232 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.233 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.6968ms
2025-08-29 14:44:26.235 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 14:44:26.238 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.239 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:44:26.242 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 14:44:26.251 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 14:44:26.265 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 14:44:26.277 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 14:44:26.298 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 14:44:26.303 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 14:44:26.313 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 14:44:26.314 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 14:44:26.315 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:26.317 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 73.4178ms
2025-08-29 14:44:26.318 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:44:26.319 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 83.6666ms
2025-08-29 14:44:26.322 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:26.324 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.325 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7053ms
2025-08-29 14:44:26.329 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:26.332 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.332 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.333 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:26.336 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:26.339 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:26.340 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4316ms
2025-08-29 14:44:26.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.342 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.612ms
2025-08-29 14:44:26.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:26.358 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.360 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:26.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:26.368 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:26.370 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2012ms
2025-08-29 14:44:26.371 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.372 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1334ms
2025-08-29 14:44:26.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:26.393 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.394 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.396 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:26.400 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:26.404 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:26.406 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2857ms
2025-08-29 14:44:26.408 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.4708ms
2025-08-29 14:44:26.453 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:26.456 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.457 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.459 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:26.464 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:26.468 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:26.470 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8241ms
2025-08-29 14:44:26.472 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.474 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3797ms
2025-08-29 14:44:26.496 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:26.499 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:26.501 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.502 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:26.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:26.509 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:26.511 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7306ms
2025-08-29 14:44:26.512 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:26.513 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6206ms
2025-08-29 14:44:37.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 14:44:37.890 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:37.891 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1194ms
2025-08-29 14:44:37.893 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 14:44:37.895 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:37.896 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:44:37.898 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 14:44:37.900 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 14:44:37.903 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 14:44:37.909 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 14:44:37.915 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 14:44:37.918 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 14:44:37.920 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 14:44:37.921 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 14:44:37.922 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:37.923 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 23.8254ms
2025-08-29 14:44:37.925 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:44:37.926 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 32.7371ms
2025-08-29 14:44:37.930 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:37.932 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:37.933 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5152ms
2025-08-29 14:44:37.937 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:37.939 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:37.940 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:37.941 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:37.945 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:37.950 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:37.951 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7921ms
2025-08-29 14:44:37.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:37.954 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4676ms
2025-08-29 14:44:37.971 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:37.974 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:37.976 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:37.978 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:37.984 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:37.988 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:37.990 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.1444ms
2025-08-29 14:44:37.991 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:37.993 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.8786ms
2025-08-29 14:44:37.994 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:38.001 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:38.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:38.004 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:38.009 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:38.014 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:38.016 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5496ms
2025-08-29 14:44:38.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:38.020 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.2226ms
2025-08-29 14:44:38.048 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:38.052 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:38.053 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:38.054 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:38.059 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:38.064 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:38.067 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0533ms
2025-08-29 14:44:38.069 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:38.070 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.1336ms
2025-08-29 14:44:38.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:44:38.086 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:44:38.088 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:38.089 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:44:38.094 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:44:38.099 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:44:38.100 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7831ms
2025-08-29 14:44:38.101 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:44:38.103 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.7487ms
2025-08-29 14:45:10.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:45:10.925 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:45:10.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1932ms
2025-08-29 14:45:10.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:45:10.933 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:45:10.934 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:45:10.935 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:45:10.940 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:45:10.952 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:45:10.953 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.0057ms
2025-08-29 14:45:10.955 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:45:10.956 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.5007ms
2025-08-29 14:45:11.008 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:45:11.015 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:45:11.017 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:45:11.018 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:45:11.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:45:11.027 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:45:11.028 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4921ms
2025-08-29 14:45:11.030 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:45:11.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3397ms
2025-08-29 14:45:11.076 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:45:11.080 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:45:11.082 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:45:11.083 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:45:11.096 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:45:11.108 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:45:11.110 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 25.2933ms
2025-08-29 14:45:11.112 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:45:11.113 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.8813ms
2025-08-29 14:48:05.243 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 14:48:05.247 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:05.248 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.0189ms
2025-08-29 14:48:05.256 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 14:48:05.260 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:05.262 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:48:05.263 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 14:48:05.267 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 14:48:05.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 14:48:05.426 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 14:48:05.428 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 14:48:05.429 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 14:48:05.430 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 14:48:05.431 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:05.432 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 166.8646ms
2025-08-29 14:48:05.434 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:48:05.435 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 178.4043ms
2025-08-29 14:48:05.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:05.439 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:05.440 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0509ms
2025-08-29 14:48:05.443 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:05.445 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:05.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:05.446 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:05.448 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:05.450 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.1518ms
2025-08-29 14:48:05.451 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:05.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.5139ms
2025-08-29 14:48:05.489 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:05.492 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:05.493 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:05.494 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:05.496 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:05.498 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7875ms
2025-08-29 14:48:05.499 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:05.500 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.9903ms
2025-08-29 14:48:10.590 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 14:48:10.591 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 14:48:10.601 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:10.603 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:10.604 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 14.2871ms
2025-08-29 14:48:10.605 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 14.0436ms
2025-08-29 14:48:10.607 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 14:48:10.610 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 14:48:10.612 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:10.614 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:10.615 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 14:48:10.615 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 14:48:10.616 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 14:48:10.617 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:10.622 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 14:48:10.625 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:10.629 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 9.6057ms
2025-08-29 14:48:10.633 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 14:48:10.635 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 27.82ms
2025-08-29 14:48:10.638 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:48:10.640 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:10.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3ms
2025-08-29 14:48:10.644 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:48:10.646 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:10.647 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:10.648 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:10.654 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:10.657 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:10.658 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 8.5132ms
2025-08-29 14:48:10.660 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:10.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 17.0435ms
2025-08-29 14:48:10.772 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 14:48:10.774 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 14:48:10.776 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 158.3099ms
2025-08-29 14:48:10.778 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 14:48:10.779 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 169.1471ms
2025-08-29 14:48:18.558 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:48:18.561 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:18.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.9261ms
2025-08-29 14:48:18.564 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 274
2025-08-29 14:48:18.566 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:18.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:18.571 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:18.575 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:48:18.583 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0e9d23c5-2af4-4448-8f0b-8528e772553a', @p1='8eed198f-2551-4fb9-a6c0-20dc8e7c2cc9', @p2='b5248d90-6ebf-4d5d-a7df-3161d8312ac3', @p3='bce41b8d-bcf4-4374-9661-6727482791b5', @p4='ecda486c-ed9a-43ed-bb4b-5e8f4e32fc4b', @p5='0133e72b-b850-488d-8292-5915cdaa76ff', @p6='2025-08-29T09:18:18.5793406Z' (DbType = DateTime), @p7='system', @p8='True', @p9='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p10='3e92e204-cda8-4128-94c6-ac1e977e1152', @p11='3bffb0f0-c9dd-4a95-b363-f8dd4eb4fa86', @p12='2025-08-29T09:18:18.5792342Z' (DbType = DateTime), @p13='system', @p14='True', @p15='821480c6-1464-415e-bba8-066fcb4e7e63', @p16='3e92e204-cda8-4128-94c6-ac1e977e1152', @p17='61836946-cb6e-4e04-ab1a-676214b874ff', @p18='2025-08-29T09:18:18.5793467Z' (DbType = DateTime), @p19='system', @p20='True', @p21='30000000-0000-0000-0000-000000000007', @p22='3e92e204-cda8-4128-94c6-ac1e977e1152', @p23='69bef4b9-de11-4acd-ab45-778cc74466f7', @p24='2025-08-29T09:18:18.5793503Z' (DbType = DateTime), @p25='system', @p26='True', @p27='30000000-0000-0000-0000-000000000008', @p28='3e92e204-cda8-4128-94c6-ac1e977e1152', @p29='d2b56d5a-3c70-4158-9d8d-b323c8ef6594', @p30='2025-08-29T09:18:18.5793577Z' (DbType = DateTime), @p31='system', @p32='True', @p33='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p34='3e92e204-cda8-4128-94c6-ac1e977e1152', @p35='e96577d5-7fa1-4fbc-945b-379b29b1ec04', @p36='2025-08-29T09:18:18.5793196Z' (DbType = DateTime), @p37='system', @p38='True', @p39='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p40='3e92e204-cda8-4128-94c6-ac1e977e1152', @p41='fdb99dac-8203-4b3a-87c7-c03e1a88ec7e', @p42='2025-08-29T09:18:18.5793535Z' (DbType = DateTime), @p43='system', @p44='True', @p45='30000000-0000-0000-0000-000000000000', @p46='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
2025-08-29 14:48:18.587 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:18.588 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 15.2366ms
2025-08-29 14:48:18.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:18.590 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 26.282ms
2025-08-29 14:48:18.592 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:48:18.595 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:18.595 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:18.596 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:18.600 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:18.603 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:18.605 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.5886ms
2025-08-29 14:48:18.606 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:18.607 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 14.124ms
2025-08-29 14:48:19.299 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 274
2025-08-29 14:48:19.302 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:19.322 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:19.323 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:19.327 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:48:19.333 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0133e72b-b850-488d-8292-5915cdaa76ff', @p1='3bffb0f0-c9dd-4a95-b363-f8dd4eb4fa86', @p2='61836946-cb6e-4e04-ab1a-676214b874ff', @p3='69bef4b9-de11-4acd-ab45-778cc74466f7', @p4='d2b56d5a-3c70-4158-9d8d-b323c8ef6594', @p5='e96577d5-7fa1-4fbc-945b-379b29b1ec04', @p6='fdb99dac-8203-4b3a-87c7-c03e1a88ec7e', @p7='084782ae-b7c2-47cd-80f1-55effc2c6d1b', @p8='2025-08-29T09:18:19.3303110Z' (DbType = DateTime), @p9='system', @p10='True', @p11='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p12='3e92e204-cda8-4128-94c6-ac1e977e1152', @p13='38165f20-d6eb-4d23-9b03-3dc8dba2bffa', @p14='2025-08-29T09:18:19.3303076Z' (DbType = DateTime), @p15='system', @p16='True', @p17='30000000-0000-0000-0000-000000000000', @p18='3e92e204-cda8-4128-94c6-ac1e977e1152', @p19='5e57ca82-bdad-4a21-9d61-c49e88c55ac0', @p20='2025-08-29T09:18:19.3302472Z' (DbType = DateTime), @p21='system', @p22='True', @p23='821480c6-1464-415e-bba8-066fcb4e7e63', @p24='3e92e204-cda8-4128-94c6-ac1e977e1152', @p25='7e773c83-2640-44dc-818d-f1c1d2b2b703', @p26='2025-08-29T09:18:19.3303052Z' (DbType = DateTime), @p27='system', @p28='True', @p29='30000000-0000-0000-0000-000000000008', @p30='3e92e204-cda8-4128-94c6-ac1e977e1152', @p31='80665543-de58-427d-aec5-70d5d5af7a94', @p32='2025-08-29T09:18:19.3302915Z' (DbType = DateTime), @p33='system', @p34='True', @p35='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p36='3e92e204-cda8-4128-94c6-ac1e977e1152', @p37='d6efd76a-7e2a-46d4-a5aa-f1076d9f4fc6', @p38='2025-08-29T09:18:19.3303023Z' (DbType = DateTime), @p39='system', @p40='True', @p41='30000000-0000-0000-0000-000000000007', @p42='3e92e204-cda8-4128-94c6-ac1e977e1152', @p43='e97e463f-86ab-4cf0-9f8b-fa79819bd8da', @p44='2025-08-29T09:18:19.3302958Z' (DbType = DateTime), @p45='system', @p46='True', @p47='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p48='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
2025-08-29 14:48:19.336 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:19.337 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 12.8769ms
2025-08-29 14:48:19.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:19.339 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 39.5753ms
2025-08-29 14:48:19.342 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:48:19.344 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:19.345 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:19.345 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:19.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:19.351 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:19.352 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.546ms
2025-08-29 14:48:19.353 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:19.354 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 12.4488ms
2025-08-29 14:48:28.093 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:48:28.095 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:28.096 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.9128ms
2025-08-29 14:48:28.099 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 313
2025-08-29 14:48:28.101 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:28.102 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:28.103 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:28.108 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:48:28.115 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='084782ae-b7c2-47cd-80f1-55effc2c6d1b', @p1='38165f20-d6eb-4d23-9b03-3dc8dba2bffa', @p2='5e57ca82-bdad-4a21-9d61-c49e88c55ac0', @p3='7e773c83-2640-44dc-818d-f1c1d2b2b703', @p4='80665543-de58-427d-aec5-70d5d5af7a94', @p5='d6efd76a-7e2a-46d4-a5aa-f1076d9f4fc6', @p6='e97e463f-86ab-4cf0-9f8b-fa79819bd8da', @p7='072eb521-d6c3-4939-a1cb-8f898547c1c7', @p8='2025-08-29T09:18:28.1117023Z' (DbType = DateTime), @p9='system', @p10='True', @p11='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p12='3e92e204-cda8-4128-94c6-ac1e977e1152', @p13='2363b07c-ecda-43e3-a6ab-25465ec2cb74', @p14='2025-08-29T09:18:28.1117098Z' (DbType = DateTime), @p15='system', @p16='True', @p17='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p18='3e92e204-cda8-4128-94c6-ac1e977e1152', @p19='2476b6fe-7e00-426e-9b18-3ff11d7e2958', @p20='2025-08-29T09:18:28.1116619Z' (DbType = DateTime), @p21='system', @p22='True', @p23='30000000-0000-0000-0000-000000000007', @p24='3e92e204-cda8-4128-94c6-ac1e977e1152', @p25='26f0a2e9-8451-4bce-9ae3-fb590f5bec14', @p26='2025-08-29T09:18:28.1116501Z' (DbType = DateTime), @p27='system', @p28='True', @p29='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p30='3e92e204-cda8-4128-94c6-ac1e977e1152', @p31='2dff0991-68c0-4fe2-9251-3c49b2ac57ca', @p32='2025-08-29T09:18:28.1115934Z' (DbType = DateTime), @p33='system', @p34='True', @p35='821480c6-1464-415e-bba8-066fcb4e7e63', @p36='3e92e204-cda8-4128-94c6-ac1e977e1152', @p37='9f6ab460-2538-4fff-9263-2f7d65843b2c', @p38='2025-08-29T09:18:28.1116578Z' (DbType = DateTime), @p39='system', @p40='True', @p41='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p42='3e92e204-cda8-4128-94c6-ac1e977e1152', @p43='add57523-714e-4a16-8751-0227eac94a45', @p44='2025-08-29T09:18:28.1116661Z' (DbType = DateTime), @p45='system', @p46='True', @p47='30000000-0000-0000-0000-000000000008', @p48='3e92e204-cda8-4128-94c6-ac1e977e1152', @p49='c1ab13b7-5cb8-435f-8a41-0f8d3d6bc6d7', @p50='2025-08-29T09:18:28.1116704Z' (DbType = DateTime), @p51='system', @p52='True', @p53='30000000-0000-0000-0000-000000000000', @p54='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
2025-08-29 14:48:28.118 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:28.119 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 15.4945ms
2025-08-29 14:48:28.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:28.122 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 23.0283ms
2025-08-29 14:48:28.125 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 14:48:28.127 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:28.128 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:28.129 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:28.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:28.135 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:28.136 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.5229ms
2025-08-29 14:48:28.137 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:28.138 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 13.5078ms
2025-08-29 14:48:32.973 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:32.975 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:32.976 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.3583ms
2025-08-29 14:48:32.979 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:32.982 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:32.982 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:32.983 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:32.985 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:32.986 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.2234ms
2025-08-29 14:48:32.987 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:32.988 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 8.1696ms
2025-08-29 14:48:38.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:38.370 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:38.371 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.8691ms
2025-08-29 14:48:38.373 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 14:48:38.375 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:38.376 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:38.377 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:38.381 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:48:38.389 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='09b20b87-eab8-4a5d-a8d9-3ed2acd0abe4', @p1='09fa5964-2e55-462f-bb76-9429dca39c02', @p2='0d68d002-4999-4b86-aa50-2b66c1a8b9d6', @p3='110693f0-e6a5-467e-895e-e31c472eb597', @p4='23399716-2fed-44ff-8f8c-bdfb248beabe', @p5='23ec9d7c-50a6-4c8b-85de-3acdee8a14f7', @p6='34fc3043-37c5-4a87-a965-6e38d4431866', @p7='4792f78e-78c2-4595-a28d-a93546b6f0b0', @p8='5a6a2de6-25a2-4400-bf1b-7e88344fafea', @p9='5c1a5b1d-e13e-487a-a1d9-859c12691251', @p10='6af48a0f-ee5b-4c60-ae74-cf13f22924f8', @p11='745d2af9-8c0b-4542-8cee-29032d1fb741', @p12='80a1147d-7741-410f-a208-1e7769f599f6', @p13='8fa31124-b30c-412e-b1e7-2c67ff8d6681', @p14='9310af0c-1ba1-4c51-9e5c-14d3d1cc3370', @p15='ab049f9a-2d94-4610-8ad9-769f3d144a49', @p16='be459ae9-05d7-4919-aa8e-4d5791453e46', @p17='d2232b66-530f-4f77-882a-ba36174d1ee9', @p18='d961dc85-d560-4ed1-867e-5a9c5511e90d', @p19='e1d75afa-7d25-40ef-93aa-04b7a5e84193', @p20='e4580b8b-82f5-44ad-b349-d3a28328e18d', @p21='e80710a3-c550-4514-a14c-bd96530dae27', @p22='0427c727-ca0f-4756-af77-065c925c9ff6', @p23='2025-08-29T09:18:38.3841718Z' (DbType = DateTime), @p24='system', @p25='True', @p26='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p27='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p28='05373805-6719-4c1a-be1c-aeed3553e852', @p29='2025-08-29T09:18:38.3841506Z' (DbType = DateTime), @p30='system', @p31='True', @p32='30000000-0000-0000-0000-000000000000', @p33='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p34='1d6e20c3-a190-40df-92e3-6252d472156f', @p35='2025-08-29T09:18:38.3837360Z' (DbType = DateTime), @p36='system', @p37='True', @p38='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p39='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p40='281123a1-f662-4e70-bce2-30b218da7670', @p41='2025-08-29T09:18:38.3841621Z' (DbType = DateTime), @p42='system', @p43='True', @p44='29461562-ef9c-48c0-a606-482ff57b8f95', @p45='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p46='3b95bb50-c083-44b5-8b6d-009e2d5c5a02', @p47='2025-08-29T09:18:38.3837467Z' (DbType = DateTime), @p48='system', @p49='True', @p50='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p51='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p52='62275185-7319-4844-bc4c-e66817d44d2f', @p53='2025-08-29T09:18:38.3841597Z' (DbType = DateTime), @p54='system', @p55='True', @p56='974af1f9-3caa-4857-a1a7-48462c389332', @p57='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p58='686fd6e8-7713-455d-b6fb-01695113bc36', @p59='2025-08-29T09:18:38.3837443Z' (DbType = DateTime), @p60='system', @p61='True', @p62='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p63='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p64='6b8cebe8-5f99-44bf-8874-f2c2a096b5ba', @p65='2025-08-29T09:18:38.3841742Z' (DbType = DateTime), @p66='system', @p67='True', @p68='0485154c-dde5-4732-a7aa-a379c77a5b27', @p69='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p70='7c273c8e-393f-453f-bcca-ae2b6aa903d4', @p71='2025-08-29T09:18:38.3841791Z' (DbType = DateTime), @p72='system', @p73='True', @p74='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p75='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p76='8302ced1-cae5-42a2-abc2-5135055a8c29', @p77='2025-08-29T09:18:38.3841320Z' (DbType = DateTime), @p78='system', @p79='True', @p80='30000000-0000-0000-0000-000000000004', @p81='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p82='874383c1-00f1-49d3-903d-f81d41ca1598', @p83='2025-08-29T09:18:38.3841530Z' (DbType = DateTime), @p84='system', @p85='True', @p86='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p87='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p88='95543e58-6271-4124-9544-9d1830b4c7b7', @p89='2025-08-29T09:18:38.3837267Z' (DbType = DateTime), @p90='system', @p91='True', @p92='821480c6-1464-415e-bba8-066fcb4e7e63', @p93='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p94='a0984b2a-609d-42af-9822-6481ebcad2ac', @p95='2025-08-29T09:18:38.3836844Z' (DbType = DateTime), @p96='system', @p97='True', @p98='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p99='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p100='bb7cdc25-9620-49e7-a8de-9d40aa4732cc', @p101='2025-08-29T09:18:38.3837491Z' (DbType = DateTime), @p102='system', @p103='True', @p104='30000000-0000-0000-0000-000000000001', @p105='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p106='bde11af3-77b0-4846-8ba1-b1d93673aee4', @p107='2025-08-29T09:18:38.3841647Z' (DbType = DateTime), @p108='system', @p109='True', @p110='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p111='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p112='c519b032-9dc3-4363-8a6c-dbe8c5e1121b', @p113='2025-08-29T09:18:38.3841477Z' (DbType = DateTime), @p114='system', @p115='True', @p116='30000000-0000-0000-0000-000000000008', @p117='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p118='c9b46ca8-38b0-4bd5-86b2-0d84baa5bdc3', @p119='2025-08-29T09:18:38.3837517Z' (DbType = DateTime), @p120='system', @p121='True', @p122='30000000-0000-0000-0000-000000000003', @p123='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p124='cc3b54e7-d9e7-4d12-8910-71e21cc1b1c2', @p125='2025-08-29T09:18:38.3841446Z' (DbType = DateTime), @p126='system', @p127='True', @p128='30000000-0000-0000-0000-000000000007', @p129='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p130='e091a164-7996-43ce-84a6-eb7f11da1ffd', @p131='2025-08-29T09:18:38.3837541Z' (DbType = DateTime), @p132='system', @p133='True', @p134='30000000-0000-0000-0000-000000000002', @p135='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p136='eabc3ad9-ca6d-4b08-8ef1-311484bfaf41', @p137='2025-08-29T09:18:38.3837306Z' (DbType = DateTime), @p138='system', @p139='True', @p140='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p141='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p142='ebdd7dbd-62fc-4812-b3a5-76a6193b35d7', @p143='2025-08-29T09:18:38.3841671Z' (DbType = DateTime), @p144='system', @p145='True', @p146='c819f1bd-422d-4609-916c-cc185fe44ab0', @p147='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p148='eccc2293-aabc-4ca0-98a2-e677789fa90d', @p149='2025-08-29T09:18:38.3841768Z' (DbType = DateTime), @p150='system', @p151='True', @p152='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p153='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p154='ecd5363a-0302-49b2-b024-7dd7428d09be', @p155='2025-08-29T09:18:38.3837334Z' (DbType = DateTime), @p156='system', @p157='True', @p158='9ae90cfe-3fea-4307-b024-3083c2728148', @p159='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p160='fc50b812-989f-45f5-8812-3f04c37748b7', @p161='2025-08-29T09:18:38.3837417Z' (DbType = DateTime), @p162='system', @p163='True', @p164='7d7cbceb-4ce7-4835-85cd-59562487298d', @p165='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p40, @p41, @p42, @p43, @p44, @p45);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p58, @p59, @p60, @p61, @p62, @p63);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p82, @p83, @p84, @p85, @p86, @p87);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p88, @p89, @p90, @p91, @p92, @p93);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p94, @p95, @p96, @p97, @p98, @p99);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p100, @p101, @p102, @p103, @p104, @p105);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p106, @p107, @p108, @p109, @p110, @p111);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p112, @p113, @p114, @p115, @p116, @p117);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p118, @p119, @p120, @p121, @p122, @p123);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p124, @p125, @p126, @p127, @p128, @p129);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p130, @p131, @p132, @p133, @p134, @p135);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p136, @p137, @p138, @p139, @p140, @p141);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p142, @p143, @p144, @p145, @p146, @p147);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p148, @p149, @p150, @p151, @p152, @p153);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p154, @p155, @p156, @p157, @p158, @p159);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p160, @p161, @p162, @p163, @p164, @p165);
2025-08-29 14:48:38.394 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:38.395 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 16.4795ms
2025-08-29 14:48:38.396 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:38.397 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 23.2564ms
2025-08-29 14:48:38.399 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:38.401 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:38.401 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:38.402 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:38.405 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:38.409 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:38.410 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.0413ms
2025-08-29 14:48:38.411 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:38.412 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.9755ms
2025-08-29 14:48:50.106 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:50.108 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:50.108 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.6872ms
2025-08-29 14:48:50.111 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 14:48:50.113 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:50.114 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.115 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:50.119 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:48:50.129 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='0427c727-ca0f-4756-af77-065c925c9ff6', @p1='05373805-6719-4c1a-be1c-aeed3553e852', @p2='1d6e20c3-a190-40df-92e3-6252d472156f', @p3='281123a1-f662-4e70-bce2-30b218da7670', @p4='3b95bb50-c083-44b5-8b6d-009e2d5c5a02', @p5='62275185-7319-4844-bc4c-e66817d44d2f', @p6='686fd6e8-7713-455d-b6fb-01695113bc36', @p7='6b8cebe8-5f99-44bf-8874-f2c2a096b5ba', @p8='7c273c8e-393f-453f-bcca-ae2b6aa903d4', @p9='8302ced1-cae5-42a2-abc2-5135055a8c29', @p10='874383c1-00f1-49d3-903d-f81d41ca1598', @p11='95543e58-6271-4124-9544-9d1830b4c7b7', @p12='a0984b2a-609d-42af-9822-6481ebcad2ac', @p13='bb7cdc25-9620-49e7-a8de-9d40aa4732cc', @p14='bde11af3-77b0-4846-8ba1-b1d93673aee4', @p15='c519b032-9dc3-4363-8a6c-dbe8c5e1121b', @p16='c9b46ca8-38b0-4bd5-86b2-0d84baa5bdc3', @p17='cc3b54e7-d9e7-4d12-8910-71e21cc1b1c2', @p18='e091a164-7996-43ce-84a6-eb7f11da1ffd', @p19='eabc3ad9-ca6d-4b08-8ef1-311484bfaf41', @p20='ebdd7dbd-62fc-4812-b3a5-76a6193b35d7', @p21='eccc2293-aabc-4ca0-98a2-e677789fa90d', @p22='ecd5363a-0302-49b2-b024-7dd7428d09be', @p23='fc50b812-989f-45f5-8812-3f04c37748b7', @p24='0f3d6694-f609-4cfa-b484-ec2cb3e5b3af', @p25='2025-08-29T09:18:50.1224827Z' (DbType = DateTime), @p26='system', @p27='True', @p28='974af1f9-3caa-4857-a1a7-48462c389332', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='1a4a87a1-25d1-44bc-8296-240ae04285b4', @p31='2025-08-29T09:18:50.1224177Z' (DbType = DateTime), @p32='system', @p33='True', @p34='30000000-0000-0000-0000-000000000003', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='1d2da28c-bef7-4aff-adfa-6a344b74843a', @p37='2025-08-29T09:18:50.1224541Z' (DbType = DateTime), @p38='system', @p39='True', @p40='30000000-0000-0000-0000-000000000000', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='234be2b4-4ab5-4ad5-ba0a-54f5bae33d98', @p43='2025-08-29T09:18:50.1224779Z' (DbType = DateTime), @p44='system', @p45='True', @p46='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='2a36e810-9dba-444d-93e9-51dd2a30cebe', @p49='2025-08-29T09:18:50.1225128Z' (DbType = DateTime), @p50='system', @p51='True', @p52='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='2a677bc3-3987-4dbe-bf35-a8769942a904', @p55='2025-08-29T09:18:50.1223945Z' (DbType = DateTime), @p56='system', @p57='True', @p58='9ae90cfe-3fea-4307-b024-3083c2728148', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='2ae52494-8535-4772-8407-384973e371bd', @p61='2025-08-29T09:18:50.1224927Z' (DbType = DateTime), @p62='system', @p63='True', @p64='c819f1bd-422d-4609-916c-cc185fe44ab0', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='2cb1b22a-a852-47b4-a03d-ea58a403b1e8', @p67='2025-08-29T09:18:50.1223901Z' (DbType = DateTime), @p68='system', @p69='True', @p70='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='3171c747-f66c-4125-93c4-fb5b2221cdc9', @p73='2025-08-29T09:18:50.1225184Z' (DbType = DateTime), @p74='system', @p75='True', @p76='0485154c-dde5-4732-a7aa-a379c77a5b27', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='3bd29006-bea0-4444-8145-920ba897b078', @p79='2025-08-29T09:18:50.1223979Z' (DbType = DateTime), @p80='system', @p81='True', @p82='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='534f8702-9e17-46cf-9193-c1a53a13b922', @p85='2025-08-29T09:18:50.1223855Z' (DbType = DateTime), @p86='system', @p87='True', @p88='821480c6-1464-415e-bba8-066fcb4e7e63', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='5f7b1dd9-2f4d-4541-bc91-574f98b010bd', @p91='2025-08-29T09:18:50.1223403Z' (DbType = DateTime), @p92='system', @p93='True', @p94='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='71228301-e958-4892-acdd-923da7b61df6', @p97='2025-08-29T09:18:50.1224409Z' (DbType = DateTime), @p98='system', @p99='True', @p100='30000000-0000-0000-0000-000000000004', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='7f9462d0-fab3-47a5-93e2-71039edd3c2d', @p103='2025-08-29T09:18:50.1224893Z' (DbType = DateTime), @p104='system', @p105='True', @p106='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='a42e1691-d284-446e-93e6-e9d4f6f20583', @p109='2025-08-29T09:18:50.1225247Z' (DbType = DateTime), @p110='system', @p111='True', @p112='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='a439cfc7-a56b-4752-8c0e-0cdcbf0394d3', @p115='2025-08-29T09:18:50.1225216Z' (DbType = DateTime), @p116='system', @p117='True', @p118='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='a46938ef-13ca-470c-ab7c-670321276342', @p121='2025-08-29T09:18:50.1224010Z' (DbType = DateTime), @p122='system', @p123='True', @p124='7d7cbceb-4ce7-4835-85cd-59562487298d', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='af9320f6-6ab1-4ca9-8dba-517c8b5878bc', @p127='2025-08-29T09:18:50.1224209Z' (DbType = DateTime), @p128='system', @p129='True', @p130='30000000-0000-0000-0000-000000000002', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='c76ed02e-6486-49df-be0d-96a1d7352a96', @p133='2025-08-29T09:18:50.1224078Z' (DbType = DateTime), @p134='system', @p135='True', @p136='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='d64d11ad-c140-43a7-9269-f81ea0609102', @p139='2025-08-29T09:18:50.1224111Z' (DbType = DateTime), @p140='system', @p141='True', @p142='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='daf6fc64-53b1-456f-b2ef-3432b105e775', @p145='2025-08-29T09:18:50.1224473Z' (DbType = DateTime), @p146='system', @p147='True', @p148='30000000-0000-0000-0000-000000000007', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='e40a7f71-015c-4361-af5f-f85bfe977ad3', @p151='2025-08-29T09:18:50.1224859Z' (DbType = DateTime), @p152='system', @p153='True', @p154='29461562-ef9c-48c0-a606-482ff57b8f95', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='e543a267-4aa0-4ed8-85f0-cfaa54881683', @p157='2025-08-29T09:18:50.1224505Z' (DbType = DateTime), @p158='system', @p159='True', @p160='30000000-0000-0000-0000-000000000008', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p162='eef7651d-4aff-4438-bed8-dc3c888920da', @p163='2025-08-29T09:18:50.1224145Z' (DbType = DateTime), @p164='system', @p165='True', @p166='30000000-0000-0000-0000-000000000001', @p167='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p162, @p163, @p164, @p165, @p166, @p167);
2025-08-29 14:48:50.133 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:50.134 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 17.5138ms
2025-08-29 14:48:50.136 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.137 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 25.6502ms
2025-08-29 14:48:50.139 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:50.141 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:50.142 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.143 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:50.147 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:50.150 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:50.151 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.1526ms
2025-08-29 14:48:50.152 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.153 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 13.4702ms
2025-08-29 14:48:50.352 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 14:48:50.354 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:50.355 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.356 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:50.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:48:50.371 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='0f3d6694-f609-4cfa-b484-ec2cb3e5b3af', @p1='1a4a87a1-25d1-44bc-8296-240ae04285b4', @p2='1d2da28c-bef7-4aff-adfa-6a344b74843a', @p3='234be2b4-4ab5-4ad5-ba0a-54f5bae33d98', @p4='2a36e810-9dba-444d-93e9-51dd2a30cebe', @p5='2a677bc3-3987-4dbe-bf35-a8769942a904', @p6='2ae52494-8535-4772-8407-384973e371bd', @p7='2cb1b22a-a852-47b4-a03d-ea58a403b1e8', @p8='3171c747-f66c-4125-93c4-fb5b2221cdc9', @p9='3bd29006-bea0-4444-8145-920ba897b078', @p10='534f8702-9e17-46cf-9193-c1a53a13b922', @p11='5f7b1dd9-2f4d-4541-bc91-574f98b010bd', @p12='71228301-e958-4892-acdd-923da7b61df6', @p13='7f9462d0-fab3-47a5-93e2-71039edd3c2d', @p14='a42e1691-d284-446e-93e6-e9d4f6f20583', @p15='a439cfc7-a56b-4752-8c0e-0cdcbf0394d3', @p16='a46938ef-13ca-470c-ab7c-670321276342', @p17='af9320f6-6ab1-4ca9-8dba-517c8b5878bc', @p18='c76ed02e-6486-49df-be0d-96a1d7352a96', @p19='d64d11ad-c140-43a7-9269-f81ea0609102', @p20='daf6fc64-53b1-456f-b2ef-3432b105e775', @p21='e40a7f71-015c-4361-af5f-f85bfe977ad3', @p22='e543a267-4aa0-4ed8-85f0-cfaa54881683', @p23='eef7651d-4aff-4438-bed8-dc3c888920da', @p24='05aaed6d-456e-46eb-aa0a-245574e10bf7', @p25='2025-08-29T09:18:50.3651444Z' (DbType = DateTime), @p26='system', @p27='True', @p28='30000000-0000-0000-0000-000000000000', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='1f32db21-9125-4003-b99d-3c0228d960ff', @p31='2025-08-29T09:18:50.3651614Z' (DbType = DateTime), @p32='system', @p33='True', @p34='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='22a7e1ce-02ee-45c5-a4aa-6f9203aaa8fc', @p37='2025-08-29T09:18:50.3651470Z' (DbType = DateTime), @p38='system', @p39='True', @p40='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='3a5f8243-6163-4490-ae10-a82090b352ff', @p43='2025-08-29T09:18:50.3651070Z' (DbType = DateTime), @p44='system', @p45='True', @p46='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='3bb0052a-b5a1-4b49-b0a7-3d106afda1e4', @p49='2025-08-29T09:18:50.3651177Z' (DbType = DateTime), @p50='system', @p51='True', @p52='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='3bdf7a0e-07b9-436c-831b-776b1de6078b', @p55='2025-08-29T09:18:50.3649784Z' (DbType = DateTime), @p56='system', @p57='True', @p58='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='3ec74117-f693-4380-97a7-32037c256f94', @p61='2025-08-29T09:18:50.3651235Z' (DbType = DateTime), @p62='system', @p63='True', @p64='30000000-0000-0000-0000-000000000001', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='4ef63198-33f8-411a-a46f-4eddbac4e8be', @p67='2025-08-29T09:18:50.3651393Z' (DbType = DateTime), @p68='system', @p69='True', @p70='30000000-0000-0000-0000-000000000008', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='4f8c6433-be8e-4c4d-9ba2-245bea44021c', @p73='2025-08-29T09:18:50.3651637Z' (DbType = DateTime), @p74='system', @p75='True', @p76='0485154c-dde5-4732-a7aa-a379c77a5b27', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='583dd109-e79a-457d-84f3-689b4a1f2a6d', @p79='2025-08-29T09:18:50.3651494Z' (DbType = DateTime), @p80='system', @p81='True', @p82='974af1f9-3caa-4857-a1a7-48462c389332', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='5bafb31e-c6e1-4486-aae1-4928f0e5b448', @p85='2025-08-29T09:18:50.3651345Z' (DbType = DateTime), @p86='system', @p87='True', @p88='30000000-0000-0000-0000-000000000004', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='615f0866-2246-495c-b379-bff7e875f66a', @p91='2025-08-29T09:18:50.3651207Z' (DbType = DateTime), @p92='system', @p93='True', @p94='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='67655248-b66b-442d-95e4-9178d78d75bd', @p97='2025-08-29T09:18:50.3651258Z' (DbType = DateTime), @p98='system', @p99='True', @p100='30000000-0000-0000-0000-000000000003', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='70c79e96-9467-4617-805f-8969db522b3f', @p103='2025-08-29T09:18:50.3651660Z' (DbType = DateTime), @p104='system', @p105='True', @p106='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='7452b693-5a1b-43be-aed4-3c48c9ed4493', @p109='2025-08-29T09:18:50.3651685Z' (DbType = DateTime), @p110='system', @p111='True', @p112='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='77b54700-eb94-469e-a5af-6853ec98d096', @p115='2025-08-29T09:18:50.3650442Z' (DbType = DateTime), @p116='system', @p117='True', @p118='9ae90cfe-3fea-4307-b024-3083c2728148', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='79743f3c-6994-4a1a-abdc-3f864b4741cf', @p121='2025-08-29T09:18:50.3650352Z' (DbType = DateTime), @p122='system', @p123='True', @p124='821480c6-1464-415e-bba8-066fcb4e7e63', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='83c1d1dd-77bf-47e6-9363-6d7c79c63cbd', @p127='2025-08-29T09:18:50.3651591Z' (DbType = DateTime), @p128='system', @p129='True', @p130='c819f1bd-422d-4609-916c-cc185fe44ab0', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='8e7bd09c-3766-41ce-8e76-df8b8196ef25', @p133='2025-08-29T09:18:50.3651150Z' (DbType = DateTime), @p134='system', @p135='True', @p136='7d7cbceb-4ce7-4835-85cd-59562487298d', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='96eeb695-8da8-4676-b38d-ef23051bed05', @p139='2025-08-29T09:18:50.3651543Z' (DbType = DateTime), @p140='system', @p141='True', @p142='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='bb4274de-4a58-46e5-8068-7d4e60adc858', @p145='2025-08-29T09:18:50.3651517Z' (DbType = DateTime), @p146='system', @p147='True', @p148='29461562-ef9c-48c0-a606-482ff57b8f95', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='c27b4a5f-d128-4615-91d0-10998bd3c302', @p151='2025-08-29T09:18:50.3651321Z' (DbType = DateTime), @p152='system', @p153='True', @p154='30000000-0000-0000-0000-000000000002', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='c39917bc-c11e-4822-9921-fb3d6db42f24', @p157='2025-08-29T09:18:50.3650407Z' (DbType = DateTime), @p158='system', @p159='True', @p160='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p162='e17200ee-3c91-4b95-8098-28da551d600b', @p163='2025-08-29T09:18:50.3651370Z' (DbType = DateTime), @p164='system', @p165='True', @p166='30000000-0000-0000-0000-000000000007', @p167='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p162, @p163, @p164, @p165, @p166, @p167);
2025-08-29 14:48:50.374 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:50.376 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 17.4741ms
2025-08-29 14:48:50.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.378 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 26.1497ms
2025-08-29 14:48:50.381 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:50.383 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:50.384 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.385 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:50.389 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:50.397 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:50.398 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 12.0556ms
2025-08-29 14:48:50.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.400 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 18.7903ms
2025-08-29 14:48:50.534 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 14:48:50.536 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:50.538 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.539 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:50.542 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:48:50.554 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='05aaed6d-456e-46eb-aa0a-245574e10bf7', @p1='1f32db21-9125-4003-b99d-3c0228d960ff', @p2='22a7e1ce-02ee-45c5-a4aa-6f9203aaa8fc', @p3='3a5f8243-6163-4490-ae10-a82090b352ff', @p4='3bb0052a-b5a1-4b49-b0a7-3d106afda1e4', @p5='3bdf7a0e-07b9-436c-831b-776b1de6078b', @p6='3ec74117-f693-4380-97a7-32037c256f94', @p7='4ef63198-33f8-411a-a46f-4eddbac4e8be', @p8='4f8c6433-be8e-4c4d-9ba2-245bea44021c', @p9='583dd109-e79a-457d-84f3-689b4a1f2a6d', @p10='5bafb31e-c6e1-4486-aae1-4928f0e5b448', @p11='615f0866-2246-495c-b379-bff7e875f66a', @p12='70c79e96-9467-4617-805f-8969db522b3f', @p13='7452b693-5a1b-43be-aed4-3c48c9ed4493', @p14='77b54700-eb94-469e-a5af-6853ec98d096', @p15='79743f3c-6994-4a1a-abdc-3f864b4741cf', @p16='83c1d1dd-77bf-47e6-9363-6d7c79c63cbd', @p17='8e7bd09c-3766-41ce-8e76-df8b8196ef25', @p18='96eeb695-8da8-4676-b38d-ef23051bed05', @p19='bb4274de-4a58-46e5-8068-7d4e60adc858', @p20='c27b4a5f-d128-4615-91d0-10998bd3c302', @p21='c39917bc-c11e-4822-9921-fb3d6db42f24', @p22='e17200ee-3c91-4b95-8098-28da551d600b', @p23='67655248-b66b-442d-95e4-9178d78d75bd', @p24='1c26bf06-3ff1-409a-9838-9f73f494d81d', @p25='2025-08-29T09:18:50.5465074Z' (DbType = DateTime), @p26='system', @p27='True', @p28='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='26928791-1449-4cdd-ab79-e9a42da17044', @p31='2025-08-29T09:18:50.5465049Z' (DbType = DateTime), @p32='system', @p33='True', @p34='7d7cbceb-4ce7-4835-85cd-59562487298d', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='2aa6d3d9-846c-48d6-a0fd-0e5d6ad1e7c7', @p37='2025-08-29T09:18:50.5464584Z' (DbType = DateTime), @p38='system', @p39='True', @p40='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='2e82753a-8e72-4555-9978-9b7e6ee794aa', @p43='2025-08-29T09:18:50.5465214Z' (DbType = DateTime), @p44='system', @p45='True', @p46='30000000-0000-0000-0000-000000000002', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='45941ac5-9421-4d5a-86bf-f03a056d3f38', @p49='2025-08-29T09:18:50.5464611Z' (DbType = DateTime), @p50='system', @p51='True', @p52='9ae90cfe-3fea-4307-b024-3083c2728148', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='45983122-bfe8-412d-96f0-ba8dd323be8a', @p55='2025-08-29T09:18:50.5469781Z' (DbType = DateTime), @p56='system', @p57='True', @p58='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='497b5433-c82d-4b61-ace7-ba389ef2563f', @p61='2025-08-29T09:18:50.5464541Z' (DbType = DateTime), @p62='system', @p63='True', @p64='821480c6-1464-415e-bba8-066fcb4e7e63', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='517d3649-be88-4df2-a533-f2dd9305606e', @p67='2025-08-29T09:18:50.5465236Z' (DbType = DateTime), @p68='system', @p69='True', @p70='30000000-0000-0000-0000-000000000004', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='6ddb6e80-16dc-4a1b-9b0a-0012db0e21da', @p73='2025-08-29T09:18:50.5465410Z' (DbType = DateTime), @p74='system', @p75='True', @p76='29461562-ef9c-48c0-a606-482ff57b8f95', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='6fbce6b0-89ac-4552-8c3b-a7707ce1767a', @p79='2025-08-29T09:18:50.5465132Z' (DbType = DateTime), @p80='system', @p81='True', @p82='30000000-0000-0000-0000-000000000001', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='713a4563-132a-447c-9f86-4e45a246ed25', @p85='2025-08-29T09:18:50.5465259Z' (DbType = DateTime), @p86='system', @p87='True', @p88='30000000-0000-0000-0000-000000000007', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='9bbdf8cf-7b3b-4c06-820c-e76436490a0f', @p91='2025-08-29T09:18:50.5469989Z' (DbType = DateTime), @p92='system', @p93='True', @p94='0485154c-dde5-4732-a7aa-a379c77a5b27', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='9be3d77b-d1e8-4443-8c59-1021fa47d1eb', @p97='2025-08-29T09:18:50.5465108Z' (DbType = DateTime), @p98='system', @p99='True', @p100='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='a31267b9-ea33-4ac5-afa1-b23363edf538', @p103='2025-08-29T09:18:50.5465387Z' (DbType = DateTime), @p104='system', @p105='True', @p106='974af1f9-3caa-4857-a1a7-48462c389332', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='a39c1e3b-ca1b-4fbb-8f3c-5ab1b6a8b5da', @p109='2025-08-29T09:18:50.5465337Z' (DbType = DateTime), @p110='system', @p111='True', @p112='30000000-0000-0000-0000-000000000000', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='a42df884-ce8f-45a9-9104-6c0fd3dce1e7', @p115='2025-08-29T09:18:50.5469914Z' (DbType = DateTime), @p116='system', @p117='True', @p118='c819f1bd-422d-4609-916c-cc185fe44ab0', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='a924452b-a4af-4fb9-804c-989d5c7c9de7', @p121='2025-08-29T09:18:50.5469954Z' (DbType = DateTime), @p122='system', @p123='True', @p124='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='aace83e2-2020-476d-96ea-4003b50b428d', @p127='2025-08-29T09:18:50.5463791Z' (DbType = DateTime), @p128='system', @p129='True', @p130='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='af7fb2e7-e42c-4a5d-8d1a-33faeee429f8', @p133='2025-08-29T09:18:50.5470025Z' (DbType = DateTime), @p134='system', @p135='True', @p136='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='cda814aa-4f2a-4fd3-9e99-7b35358f9265', @p139='2025-08-29T09:18:50.5465188Z' (DbType = DateTime), @p140='system', @p141='True', @p142='30000000-0000-0000-0000-000000000003', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='e462f19e-83e8-4687-8a14-9bccb76c6c10', @p145='2025-08-29T09:18:50.5465364Z' (DbType = DateTime), @p146='system', @p147='True', @p148='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='e537be0d-d863-4819-9a5b-02c36556aec3', @p151='2025-08-29T09:18:50.5465283Z' (DbType = DateTime), @p152='system', @p153='True', @p154='30000000-0000-0000-0000-000000000008', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='f8725db7-1097-475a-bc6b-48c7b1bd9a79', @p157='2025-08-29T09:18:50.5465010Z' (DbType = DateTime), @p158='system', @p159='True', @p160='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p162='fee6886b-32e6-4967-8fb6-c8562b7117d7', @p163='2025-08-29T09:18:50.5470056Z' (DbType = DateTime), @p164='system', @p165='True', @p166='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p167='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p162, @p163, @p164, @p165, @p166, @p167);
2025-08-29 14:48:50.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:50.558 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 17.8024ms
2025-08-29 14:48:50.559 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.560 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 26.6695ms
2025-08-29 14:48:50.563 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:48:50.565 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:50.566 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.567 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:50.570 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:48:50.573 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:48:50.574 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.2524ms
2025-08-29 14:48:50.575 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:48:50.576 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 13.687ms
2025-08-29 14:48:54.913 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:54.916 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:54.917 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5167ms
2025-08-29 14:48:54.920 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:54.922 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:54.923 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:54.924 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:54.929 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:54.933 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:54.934 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2932ms
2025-08-29 14:48:54.935 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:54.937 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.9054ms
2025-08-29 14:48:54.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:54.961 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:54.967 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:54.969 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:54.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:54.979 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:54.981 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5933ms
2025-08-29 14:48:54.983 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:54.984 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.1665ms
2025-08-29 14:48:55.041 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:55.044 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:55.046 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:55.047 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:55.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:55.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:55.060 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0347ms
2025-08-29 14:48:55.072 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:55.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.7943ms
2025-08-29 14:48:56.108 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:56.111 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:56.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:56.113 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:56.116 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:56.119 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:56.121 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.9209ms
2025-08-29 14:48:56.122 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:56.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.9192ms
2025-08-29 14:48:56.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:56.142 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:56.144 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:56.145 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:56.154 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:56.159 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:56.161 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.1306ms
2025-08-29 14:48:56.163 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:56.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.3574ms
2025-08-29 14:48:56.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:56.216 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:56.217 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:56.218 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:56.222 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:56.226 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:56.228 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7863ms
2025-08-29 14:48:56.230 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:56.231 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.4131ms
2025-08-29 14:48:57.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:57.869 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:57.870 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:57.871 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:57.875 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:57.878 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:57.879 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1807ms
2025-08-29 14:48:57.880 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:57.881 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2873ms
2025-08-29 14:48:57.897 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:57.900 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:57.901 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:57.903 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:57.907 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:57.911 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:57.912 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0218ms
2025-08-29 14:48:57.914 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:57.915 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2103ms
2025-08-29 14:48:57.953 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:48:57.956 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:48:57.958 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:57.959 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:48:57.964 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:48:57.968 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:48:57.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6144ms
2025-08-29 14:48:57.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:48:57.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.5946ms
2025-08-29 14:49:14.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 14:49:14.972 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:14.973 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.8331ms
2025-08-29 14:49:14.975 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 14:49:14.978 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:14.978 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:49:14.979 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 14:49:14.982 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 14:49:14.984 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 14:49:14.989 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 14:49:14.995 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 14:49:14.998 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 14:49:14.999 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 14:49:15.000 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 14:49:15.001 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:49:15.002 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 21.7688ms
2025-08-29 14:49:15.004 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:49:15.005 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 29.3653ms
2025-08-29 14:49:15.007 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:49:15.010 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:15.011 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.794ms
2025-08-29 14:49:15.015 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:49:15.017 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:15.018 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.020 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:49:15.024 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:49:15.028 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:49:15.030 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0391ms
2025-08-29 14:49:15.031 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.033 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8515ms
2025-08-29 14:49:15.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:49:15.048 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:15.049 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.050 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:49:15.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:49:15.059 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:49:15.061 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9307ms
2025-08-29 14:49:15.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:49:15.062 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.065 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:15.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4701ms
2025-08-29 14:49:15.067 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.071 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:49:15.077 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:49:15.081 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:49:15.083 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.9003ms
2025-08-29 14:49:15.084 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.086 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.1675ms
2025-08-29 14:49:15.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:49:15.155 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:15.157 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.158 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:49:15.163 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:49:15.168 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:49:15.170 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5405ms
2025-08-29 14:49:15.171 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:49:15.172 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.175 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:49:15.177 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.8427ms
2025-08-29 14:49:15.178 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.183 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:49:15.188 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:49:15.192 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:49:15.194 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7493ms
2025-08-29 14:49:15.195 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:49:15.197 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.678ms
2025-08-29 14:51:22.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:22.971 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:22.972 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.1353ms
2025-08-29 14:51:22.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:22.986 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:22.988 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:22.989 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:22.994 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:22.997 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:22.999 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8398ms
2025-08-29 14:51:23.000 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:23.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.7ms
2025-08-29 14:51:23.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:23.067 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:23.069 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:23.071 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:23.078 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:23.083 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:23.085 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8073ms
2025-08-29 14:51:23.087 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:23.088 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.4469ms
2025-08-29 14:51:23.162 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:23.167 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:23.168 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:23.170 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:23.176 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:23.180 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:23.182 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.273ms
2025-08-29 14:51:23.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:23.185 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.9766ms
2025-08-29 14:51:26.136 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:26.138 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:26.139 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:26.140 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:26.143 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:26.146 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:26.148 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4331ms
2025-08-29 14:51:26.149 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:26.150 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.5198ms
2025-08-29 14:51:26.167 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:26.170 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:26.173 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:26.175 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:26.180 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:26.190 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:26.192 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.9282ms
2025-08-29 14:51:26.193 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:26.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.3214ms
2025-08-29 14:51:26.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:26.239 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:26.241 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:26.242 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:26.246 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:26.249 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:26.251 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1669ms
2025-08-29 14:51:26.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:26.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.7026ms
2025-08-29 14:51:59.434 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:59.442 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:59.443 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.8859ms
2025-08-29 14:51:59.453 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:59.455 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:59.457 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:59.458 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:59.466 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:59.471 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:59.473 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1541ms
2025-08-29 14:51:59.476 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:59.477 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.5404ms
2025-08-29 14:51:59.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:59.496 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:59.497 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:59.499 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:59.505 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:59.509 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:59.511 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7265ms
2025-08-29 14:51:59.513 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:59.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.94ms
2025-08-29 14:51:59.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:51:59.575 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:51:59.576 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:59.578 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:51:59.583 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:51:59.586 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:51:59.588 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4659ms
2025-08-29 14:51:59.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:51:59.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2624ms
2025-08-29 14:54:25.854 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:54:25.858 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:54:25.859 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.2604ms
2025-08-29 14:54:25.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:54:25.869 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:54:25.871 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:54:25.872 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:54:26.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:54:26.056 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:54:26.057 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 183.9535ms
2025-08-29 14:54:26.059 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:54:26.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 193.7631ms
2025-08-29 14:54:26.068 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:54:26.070 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:54:26.071 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:54:26.073 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:54:26.077 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:54:26.080 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:54:26.082 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5255ms
2025-08-29 14:54:26.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:54:26.085 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0099ms
2025-08-29 14:54:26.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:54:26.141 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:54:26.142 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:54:26.143 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:54:26.147 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:54:26.152 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:54:26.154 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6019ms
2025-08-29 14:54:26.156 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:54:26.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.2825ms
2025-08-29 14:55:28.182 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:28.189 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:28.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.7744ms
2025-08-29 14:55:28.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:28.202 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:28.203 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:28.204 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:28.209 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:28.215 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:28.217 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8973ms
2025-08-29 14:55:28.219 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:28.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.3632ms
2025-08-29 14:55:28.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:28.244 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:28.246 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:28.248 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:28.253 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:28.256 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:28.258 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3279ms
2025-08-29 14:55:28.260 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:28.262 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.7361ms
2025-08-29 14:55:28.320 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:28.323 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:28.325 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:28.326 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:28.330 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:28.334 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:28.335 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2051ms
2025-08-29 14:55:28.337 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:28.338 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4945ms
2025-08-29 14:55:39.496 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 14:55:39.499 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.500 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.2477ms
2025-08-29 14:55:39.507 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 14:55:39.510 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.511 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:55:39.513 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 14:55:39.516 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 14:55:39.522 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 14:55:39.526 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 14:55:39.545 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 14:55:39.548 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 14:55:39.549 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 14:55:39.551 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 14:55:39.553 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:39.555 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 39.4736ms
2025-08-29 14:55:39.557 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 14:55:39.559 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 52.3294ms
2025-08-29 14:55:39.565 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:39.571 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.572 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.4772ms
2025-08-29 14:55:39.577 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:39.580 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.581 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.582 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:39.586 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:39.591 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:39.592 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2285ms
2025-08-29 14:55:39.594 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.595 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4791ms
2025-08-29 14:55:39.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:39.614 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.615 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.617 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:39.622 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:39.626 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:39.628 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3949ms
2025-08-29 14:55:39.630 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.632 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.5935ms
2025-08-29 14:55:39.632 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:39.647 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.648 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.650 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:39.656 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:39.661 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:39.663 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7574ms
2025-08-29 14:55:39.664 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.666 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.3583ms
2025-08-29 14:55:39.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:39.686 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.687 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.688 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:39.693 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:39.697 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:39.701 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6024ms
2025-08-29 14:55:39.704 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.706 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.3717ms
2025-08-29 14:55:39.735 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:55:39.739 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:55:39.740 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.741 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:55:39.747 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:55:39.751 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:55:39.752 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9334ms
2025-08-29 14:55:39.753 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:55:39.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.7079ms
2025-08-29 14:57:11.232 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:57:11.245 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:57:11.246 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.9986ms
2025-08-29 14:57:11.253 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:57:11.257 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:57:11.259 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:57:11.261 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:57:11.268 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:57:11.273 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:57:11.275 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4147ms
2025-08-29 14:57:11.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:57:11.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.3503ms
2025-08-29 14:57:11.289 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:57:11.293 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:57:11.294 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:57:11.296 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:57:11.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:57:11.305 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:57:11.307 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3048ms
2025-08-29 14:57:11.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:57:11.309 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.3163ms
2025-08-29 14:57:11.381 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:57:11.384 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:57:11.385 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:57:11.387 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:57:11.395 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:57:11.399 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:57:11.402 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.9952ms
2025-08-29 14:57:11.404 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:57:11.406 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.4408ms
2025-08-29 14:58:05.747 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:58:05.755 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:58:05.756 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.3691ms
2025-08-29 14:58:05.763 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:58:05.766 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:58:05.767 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:58:05.768 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:58:05.772 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:58:05.782 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:58:05.786 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.4027ms
2025-08-29 14:58:05.788 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:58:05.789 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.2332ms
2025-08-29 14:58:05.804 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:58:05.808 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:58:05.810 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:58:05.811 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:58:05.816 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:58:05.822 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:58:05.824 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.795ms
2025-08-29 14:58:05.826 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:58:05.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.7191ms
2025-08-29 14:58:05.908 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:58:05.912 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:58:05.913 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:58:05.915 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:58:05.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:58:05.925 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:58:05.926 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2751ms
2025-08-29 14:58:05.928 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:58:05.929 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.745ms
2025-08-29 14:59:21.125 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:21.133 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:21.134 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.8589ms
2025-08-29 14:59:21.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:21.146 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:21.148 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:21.149 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:21.155 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:21.162 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:21.165 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.0454ms
2025-08-29 14:59:21.167 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:21.168 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.5824ms
2025-08-29 14:59:21.191 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:21.195 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:21.197 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:21.198 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:21.205 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:21.214 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:21.216 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.1025ms
2025-08-29 14:59:21.219 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:21.220 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.6163ms
2025-08-29 14:59:21.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:21.316 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:21.317 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:21.319 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:21.324 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:21.329 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:21.331 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4739ms
2025-08-29 14:59:21.334 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:21.335 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.2623ms
2025-08-29 14:59:31.531 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:59:31.533 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:31.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.778ms
2025-08-29 14:59:31.536 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 898
2025-08-29 14:59:31.538 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:31.539 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:59:31.540 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:31.660 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:59:31.669 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='1c26bf06-3ff1-409a-9838-9f73f494d81d', @p1='26928791-1449-4cdd-ab79-e9a42da17044', @p2='2aa6d3d9-846c-48d6-a0fd-0e5d6ad1e7c7', @p3='2e82753a-8e72-4555-9978-9b7e6ee794aa', @p4='45941ac5-9421-4d5a-86bf-f03a056d3f38', @p5='45983122-bfe8-412d-96f0-ba8dd323be8a', @p6='497b5433-c82d-4b61-ace7-ba389ef2563f', @p7='517d3649-be88-4df2-a533-f2dd9305606e', @p8='6ddb6e80-16dc-4a1b-9b0a-0012db0e21da', @p9='6fbce6b0-89ac-4552-8c3b-a7707ce1767a', @p10='713a4563-132a-447c-9f86-4e45a246ed25', @p11='9bbdf8cf-7b3b-4c06-820c-e76436490a0f', @p12='9be3d77b-d1e8-4443-8c59-1021fa47d1eb', @p13='a31267b9-ea33-4ac5-afa1-b23363edf538', @p14='a39c1e3b-ca1b-4fbb-8f3c-5ab1b6a8b5da', @p15='a42df884-ce8f-45a9-9104-6c0fd3dce1e7', @p16='a924452b-a4af-4fb9-804c-989d5c7c9de7', @p17='aace83e2-2020-476d-96ea-4003b50b428d', @p18='af7fb2e7-e42c-4a5d-8d1a-33faeee429f8', @p19='cda814aa-4f2a-4fd3-9e99-7b35358f9265', @p20='e462f19e-83e8-4687-8a14-9bccb76c6c10', @p21='e537be0d-d863-4819-9a5b-02c36556aec3', @p22='f8725db7-1097-475a-bc6b-48c7b1bd9a79', @p23='fee6886b-32e6-4967-8fb6-c8562b7117d7', @p24='0ad8c5e8-8d53-4062-b9b7-64263f6aa1a0', @p25='2025-08-29T09:29:31.6622012Z' (DbType = DateTime), @p26='system', @p27='True', @p28='9ae90cfe-3fea-4307-b024-3083c2728148', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='0cf7dae9-2596-4d7d-81a2-6f3f7336f8bf', @p31='2025-08-29T09:29:31.6620417Z' (DbType = DateTime), @p32='system', @p33='True', @p34='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='15462a0c-5d50-4029-bd60-61200cb70f22', @p37='2025-08-29T09:29:31.6622225Z' (DbType = DateTime), @p38='system', @p39='True', @p40='30000000-0000-0000-0000-000000000003', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='215efeef-d8c7-4a88-90de-8e353b031899', @p43='2025-08-29T09:29:31.6622300Z' (DbType = DateTime), @p44='system', @p45='True', @p46='30000000-0000-0000-0000-000000000007', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='37c79df1-25d6-41f8-89c7-fc51179d6da0', @p49='2025-08-29T09:29:31.6622251Z' (DbType = DateTime), @p50='system', @p51='True', @p52='30000000-0000-0000-0000-000000000002', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='43ec7c4e-cfca-40ca-9a1a-4838305d4af0', @p55='2025-08-29T09:29:31.6622563Z' (DbType = DateTime), @p56='system', @p57='True', @p58='0485154c-dde5-4732-a7aa-a379c77a5b27', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='48877969-25b5-4ecf-818a-433525ce9215', @p61='2025-08-29T09:29:31.6622089Z' (DbType = DateTime), @p62='system', @p63='True', @p64='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='4a0f326e-22e2-4054-b8c2-00ac41a67163', @p67='2025-08-29T09:29:31.6622488Z' (DbType = DateTime), @p68='system', @p69='True', @p70='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='4de4143c-b0d7-4833-a972-d6943b07aa36', @p73='2025-08-29T09:29:31.6622041Z' (DbType = DateTime), @p74='system', @p75='True', @p76='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='4fb11086-fb1d-4bd1-9b01-ce9759208c10', @p79='2025-08-29T09:29:31.6622641Z' (DbType = DateTime), @p80='system', @p81='True', @p82='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='5f7b11f7-0771-4b73-9158-c38716e4aac7', @p85='2025-08-29T09:29:31.6622064Z' (DbType = DateTime), @p86='system', @p87='True', @p88='7d7cbceb-4ce7-4835-85cd-59562487298d', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='6aa8bc7b-de80-431e-a6f2-d07607036ecb', @p91='2025-08-29T09:29:31.6622381Z' (DbType = DateTime), @p92='system', @p93='True', @p94='30000000-0000-0000-0000-000000000000', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='6eb26e6b-a016-4445-8ffe-b88e0a6a4224', @p97='2025-08-29T09:29:31.6622354Z' (DbType = DateTime), @p98='system', @p99='True', @p100='30000000-0000-0000-0000-000000000008', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='91f17c99-1f1c-4a45-a6ab-1404babb1495', @p103='2025-08-29T09:29:31.6621917Z' (DbType = DateTime), @p104='system', @p105='True', @p106='821480c6-1464-415e-bba8-066fcb4e7e63', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='a97a6fbb-3975-40d5-95f1-892626a8355f', @p109='2025-08-29T09:29:31.6622539Z' (DbType = DateTime), @p110='system', @p111='True', @p112='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='aea8e26e-d77b-4561-9558-8e3a8ed2f70c', @p115='2025-08-29T09:29:31.6622200Z' (DbType = DateTime), @p116='system', @p117='True', @p118='30000000-0000-0000-0000-000000000001', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='b51a6993-52d4-4bc8-a629-38d7efad2832', @p121='2025-08-29T09:29:31.6621983Z' (DbType = DateTime), @p122='system', @p123='True', @p124='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='b9fefa01-1f08-4cd7-8b80-08efe3241f9c', @p127='2025-08-29T09:29:31.6622275Z' (DbType = DateTime), @p128='system', @p129='True', @p130='30000000-0000-0000-0000-000000000004', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='baaf19a1-0972-4ee4-83a2-4854d1cbe479', @p133='2025-08-29T09:29:31.6622143Z' (DbType = DateTime), @p134='system', @p135='True', @p136='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='bad8f232-b333-4eac-8625-f2f82829b901', @p139='2025-08-29T09:29:31.6622514Z' (DbType = DateTime), @p140='system', @p141='True', @p142='c819f1bd-422d-4609-916c-cc185fe44ab0', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='ca51dcf5-d749-4ad7-b88f-8d627ab677ff', @p145='2025-08-29T09:29:31.6622430Z' (DbType = DateTime), @p146='system', @p147='True', @p148='29461562-ef9c-48c0-a606-482ff57b8f95', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='ceb2920c-6735-428f-97b7-b54bfa6651f0', @p151='2025-08-29T09:29:31.6622587Z' (DbType = DateTime), @p152='system', @p153='True', @p154='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='f4b81f0f-e53a-4289-889d-8847ea8a6e00', @p157='2025-08-29T09:29:31.6622404Z' (DbType = DateTime), @p158='system', @p159='True', @p160='974af1f9-3caa-4857-a1a7-48462c389332', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
2025-08-29 14:59:31.672 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:31.673 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 132.377ms
2025-08-29 14:59:31.674 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:59:31.675 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 139.6222ms
2025-08-29 14:59:31.677 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:59:31.679 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:31.680 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:59:31.681 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:31.684 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:59:31.686 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:59:31.687 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.5285ms
2025-08-29 14:59:31.688 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:59:31.689 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.7392ms
2025-08-29 14:59:34.463 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 14:59:34.465 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:34.466 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:59:34.467 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:34.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 14:59:34.478 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='0ad8c5e8-8d53-4062-b9b7-64263f6aa1a0', @p1='0cf7dae9-2596-4d7d-81a2-6f3f7336f8bf', @p2='15462a0c-5d50-4029-bd60-61200cb70f22', @p3='215efeef-d8c7-4a88-90de-8e353b031899', @p4='37c79df1-25d6-41f8-89c7-fc51179d6da0', @p5='43ec7c4e-cfca-40ca-9a1a-4838305d4af0', @p6='48877969-25b5-4ecf-818a-433525ce9215', @p7='4a0f326e-22e2-4054-b8c2-00ac41a67163', @p8='4de4143c-b0d7-4833-a972-d6943b07aa36', @p9='4fb11086-fb1d-4bd1-9b01-ce9759208c10', @p10='5f7b11f7-0771-4b73-9158-c38716e4aac7', @p11='6aa8bc7b-de80-431e-a6f2-d07607036ecb', @p12='6eb26e6b-a016-4445-8ffe-b88e0a6a4224', @p13='91f17c99-1f1c-4a45-a6ab-1404babb1495', @p14='a97a6fbb-3975-40d5-95f1-892626a8355f', @p15='aea8e26e-d77b-4561-9558-8e3a8ed2f70c', @p16='b51a6993-52d4-4bc8-a629-38d7efad2832', @p17='b9fefa01-1f08-4cd7-8b80-08efe3241f9c', @p18='baaf19a1-0972-4ee4-83a2-4854d1cbe479', @p19='bad8f232-b333-4eac-8625-f2f82829b901', @p20='ca51dcf5-d749-4ad7-b88f-8d627ab677ff', @p21='ceb2920c-6735-428f-97b7-b54bfa6651f0', @p22='f4b81f0f-e53a-4289-889d-8847ea8a6e00', @p23='18945558-201e-4fb5-acef-1136313e8c97', @p24='2025-08-29T09:29:34.4731644Z' (DbType = DateTime), @p25='system', @p26='True', @p27='821480c6-1464-415e-bba8-066fcb4e7e63', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='217baa28-5041-4076-8b9d-53b523b96bf5', @p30='2025-08-29T09:29:34.4731812Z' (DbType = DateTime), @p31='system', @p32='True', @p33='7d7cbceb-4ce7-4835-85cd-59562487298d', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='2b393fe3-2391-4f9a-8b95-e461bb10a1b7', @p36='2025-08-29T09:29:34.4732540Z' (DbType = DateTime), @p37='system', @p38='True', @p39='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='33b8edd5-33f3-4b24-a751-e82f1ac6fd5f', @p42='2025-08-29T09:29:34.4732518Z' (DbType = DateTime), @p43='system', @p44='True', @p45='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='3792c6e8-b96d-4b40-8f93-07b68ffa159d', @p48='2025-08-29T09:29:34.4732039Z' (DbType = DateTime), @p49='system', @p50='True', @p51='30000000-0000-0000-0000-000000000007', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='56d57b79-cb96-41c1-87cc-9ca3860f334b', @p54='2025-08-29T09:29:34.4732185Z' (DbType = DateTime), @p55='system', @p56='True', @p57='29461562-ef9c-48c0-a606-482ff57b8f95', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='5fa3e2bf-9b25-4394-b7df-6f1b5c6f7225', @p60='2025-08-29T09:29:34.4731786Z' (DbType = DateTime), @p61='system', @p62='True', @p63='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='639fcfbc-dc26-4738-a5a4-1d7a3ab1a7e2', @p66='2025-08-29T09:29:34.4731710Z' (DbType = DateTime), @p67='system', @p68='True', @p69='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='67d3cdea-b715-4585-a115-028af128b467', @p72='2025-08-29T09:29:34.4732064Z' (DbType = DateTime), @p73='system', @p74='True', @p75='30000000-0000-0000-0000-000000000008', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='79269b89-e2cf-4eaa-8c7c-a2129acdd3c9', @p78='2025-08-29T09:29:34.4731156Z' (DbType = DateTime), @p79='system', @p80='True', @p81='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='85ab6751-8068-483a-8388-cae60d9c6f2d', @p84='2025-08-29T09:29:34.4731866Z' (DbType = DateTime), @p85='system', @p86='True', @p87='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='8f62a803-ff89-47c4-93b9-381d0b21d2b0', @p90='2025-08-29T09:29:34.4732114Z' (DbType = DateTime), @p91='system', @p92='True', @p93='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='92c005e7-b4b1-4d24-a7bb-8dfec746ebca', @p96='2025-08-29T09:29:34.4731891Z' (DbType = DateTime), @p97='system', @p98='True', @p99='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='932ca91b-93e3-4da5-b0b2-7279276cf1c9', @p102='2025-08-29T09:29:34.4731939Z' (DbType = DateTime), @p103='system', @p104='True', @p105='30000000-0000-0000-0000-000000000003', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='9f3fbc20-b5b4-4583-9f17-2951cfdeba35', @p108='2025-08-29T09:29:34.4732261Z' (DbType = DateTime), @p109='system', @p110='True', @p111='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p113='d0905718-b7f2-47cb-aef1-0787bab8a6c7', @p114='2025-08-29T09:29:34.4731747Z' (DbType = DateTime), @p115='system', @p116='True', @p117='9ae90cfe-3fea-4307-b024-3083c2728148', @p118='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p119='d6e6445f-d4d1-4bcb-b878-4d34dab7238a', @p120='2025-08-29T09:29:34.4731963Z' (DbType = DateTime), @p121='system', @p122='True', @p123='30000000-0000-0000-0000-000000000002', @p124='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p125='d7edefdd-fc15-494f-ac44-f8b3cf205057', @p126='2025-08-29T09:29:34.4732088Z' (DbType = DateTime), @p127='system', @p128='True', @p129='30000000-0000-0000-0000-000000000000', @p130='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p131='dea9d9fa-7ce9-41d4-a7ea-525de2b74e53', @p132='2025-08-29T09:29:34.4732481Z' (DbType = DateTime), @p133='system', @p134='True', @p135='0485154c-dde5-4732-a7aa-a379c77a5b27', @p136='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p137='e04c6cb5-d4d4-4d11-a10c-2092db10bfb7', @p138='2025-08-29T09:29:34.4732211Z' (DbType = DateTime), @p139='system', @p140='True', @p141='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p142='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p143='e345067e-2416-4d21-8847-32a5dd518111', @p144='2025-08-29T09:29:34.4731917Z' (DbType = DateTime), @p145='system', @p146='True', @p147='30000000-0000-0000-0000-000000000001', @p148='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p149='ecc12595-7e89-4424-b7ca-c2711bc511d8', @p150='2025-08-29T09:29:34.4732161Z' (DbType = DateTime), @p151='system', @p152='True', @p153='974af1f9-3caa-4857-a1a7-48462c389332', @p154='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p155='f1cc7719-4979-4229-971e-7349febed67c', @p156='2025-08-29T09:29:34.4731987Z' (DbType = DateTime), @p157='system', @p158='True', @p159='30000000-0000-0000-0000-000000000004', @p160='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p161='f8fa7de8-78a7-431e-ae41-7e7b7aa6a8b9', @p162='2025-08-29T09:29:34.4732236Z' (DbType = DateTime), @p163='system', @p164='True', @p165='c819f1bd-422d-4609-916c-cc185fe44ab0', @p166='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p125, @p126, @p127, @p128, @p129, @p130);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p131, @p132, @p133, @p134, @p135, @p136);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p137, @p138, @p139, @p140, @p141, @p142);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p143, @p144, @p145, @p146, @p147, @p148);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p149, @p150, @p151, @p152, @p153, @p154);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p155, @p156, @p157, @p158, @p159, @p160);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p161, @p162, @p163, @p164, @p165, @p166);
2025-08-29 14:59:34.482 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:34.483 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 14.6273ms
2025-08-29 14:59:34.484 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 14:59:34.485 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 21.8619ms
2025-08-29 14:59:34.488 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 14:59:34.489 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:34.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:59:34.491 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:34.493 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 14:59:34.495 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 14:59:34.496 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.6664ms
2025-08-29 14:59:34.497 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 14:59:34.499 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.2262ms
2025-08-29 14:59:38.550 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:38.553 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:38.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5005ms
2025-08-29 14:59:38.556 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:38.558 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:38.559 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:38.559 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:38.563 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:38.566 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:38.570 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3305ms
2025-08-29 14:59:38.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:38.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.0112ms
2025-08-29 14:59:38.597 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:38.600 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:38.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:38.602 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:38.606 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:38.611 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:38.613 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5112ms
2025-08-29 14:59:38.615 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:38.616 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.3574ms
2025-08-29 14:59:38.650 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:38.653 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:38.654 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:38.656 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:38.662 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:38.670 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:38.675 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.3443ms
2025-08-29 14:59:38.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:38.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.2611ms
2025-08-29 14:59:39.675 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:39.678 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:39.678 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:39.679 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:39.683 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:39.686 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:39.688 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8511ms
2025-08-29 14:59:39.689 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:39.690 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.1816ms
2025-08-29 14:59:39.713 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:39.716 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:39.718 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:39.719 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:39.725 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:39.729 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:39.731 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3934ms
2025-08-29 14:59:39.733 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:39.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9719ms
2025-08-29 14:59:39.771 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:39.773 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:39.774 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:39.775 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:39.785 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:39.788 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:39.790 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8209ms
2025-08-29 14:59:39.791 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:39.792 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3134ms
2025-08-29 14:59:40.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:40.585 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:40.586 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:40.587 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:40.591 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:40.594 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:40.596 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4348ms
2025-08-29 14:59:40.598 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:40.599 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.7607ms
2025-08-29 14:59:40.620 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:40.624 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:40.626 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:40.630 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:40.635 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:40.639 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:40.641 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5148ms
2025-08-29 14:59:40.643 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:40.645 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.7576ms
2025-08-29 14:59:40.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:40.685 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:40.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:40.687 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:40.692 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:40.696 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:40.697 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4284ms
2025-08-29 14:59:40.698 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:40.699 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2049ms
2025-08-29 14:59:54.091 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:54.094 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:54.094 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.09ms
2025-08-29 14:59:54.097 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:54.100 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:54.101 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:54.103 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:54.107 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:54.111 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:54.112 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2014ms
2025-08-29 14:59:54.114 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:54.115 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.3106ms
2025-08-29 14:59:54.146 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:54.150 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:54.151 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:54.153 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:54.159 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:54.163 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:54.165 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5595ms
2025-08-29 14:59:54.167 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:54.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4622ms
2025-08-29 14:59:54.211 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 14:59:54.214 +05:30 [INF] CORS policy execution successful.
2025-08-29 14:59:54.216 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:54.217 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 14:59:54.222 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 14:59:54.227 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 14:59:54.228 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7836ms
2025-08-29 14:59:54.230 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 14:59:54.231 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.7525ms
2025-08-29 15:02:41.936 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:02:41.945 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:02:41.947 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.32ms
2025-08-29 15:02:41.952 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:02:41.956 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:02:41.957 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:02:41.959 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:02:41.964 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:02:41.969 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:02:41.972 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.2758ms
2025-08-29 15:02:41.975 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:02:41.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.128ms
2025-08-29 15:02:41.999 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:02:42.003 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:02:42.005 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:02:42.006 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:02:42.012 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:02:42.016 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:02:42.018 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5489ms
2025-08-29 15:02:42.020 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:02:42.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.4467ms
2025-08-29 15:02:42.101 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:02:42.107 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:02:42.109 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:02:42.111 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:02:42.116 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:02:42.123 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:02:42.125 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7145ms
2025-08-29 15:02:42.129 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:02:42.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.7798ms
2025-08-29 15:03:16.927 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:03:16.938 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:03:16.940 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.4885ms
2025-08-29 15:03:16.950 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:03:16.953 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:03:16.955 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:03:16.956 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:03:16.961 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:03:16.965 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:03:16.968 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6529ms
2025-08-29 15:03:16.972 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:03:16.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.0016ms
2025-08-29 15:03:16.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:03:16.999 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:03:17.000 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:03:17.002 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:03:17.007 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:03:17.017 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:03:17.019 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.9216ms
2025-08-29 15:03:17.021 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:03:17.023 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.6674ms
2025-08-29 15:03:17.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:03:17.097 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:03:17.098 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:03:17.100 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:03:17.106 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:03:17.111 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:03:17.113 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.9732ms
2025-08-29 15:03:17.115 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:03:17.117 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.7864ms
2025-08-29 15:04:05.024 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:04:05.034 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:04:05.036 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.4774ms
2025-08-29 15:04:05.048 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:04:05.054 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:04:05.055 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:04:05.057 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:04:05.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:04:05.071 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:04:05.079 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.1846ms
2025-08-29 15:04:05.084 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:04:05.087 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.4154ms
2025-08-29 15:04:05.105 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:04:05.109 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:04:05.111 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:04:05.112 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:04:05.117 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:04:05.121 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:04:05.123 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8311ms
2025-08-29 15:04:05.125 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:04:05.126 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.8683ms
2025-08-29 15:04:05.195 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:04:05.198 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:04:05.200 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:04:05.202 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:04:05.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:04:05.210 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:04:05.212 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1033ms
2025-08-29 15:04:05.214 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:04:05.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.4215ms
2025-08-29 15:05:00.510 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:05:00.514 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:05:00.515 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.3529ms
2025-08-29 15:05:00.528 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:05:00.531 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:05:00.533 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:05:00.534 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:05:00.749 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:05:00.752 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:05:00.754 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 216.9871ms
2025-08-29 15:05:00.756 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:05:00.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 230.3546ms
2025-08-29 15:05:00.768 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:05:00.772 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:05:00.773 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:05:00.774 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:05:00.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:05:00.789 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:05:00.792 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.8359ms
2025-08-29 15:05:00.794 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:05:00.795 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.7267ms
2025-08-29 15:05:00.865 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:05:00.870 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:05:00.871 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:05:00.873 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:05:00.879 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:05:00.883 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:05:00.885 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8903ms
2025-08-29 15:05:00.887 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:05:00.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.0054ms
2025-08-29 15:05:57.147 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:05:57.157 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:05:57.160 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 12.9377ms
2025-08-29 15:05:57.168 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 15:05:57.176 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:05:57.177 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:05:57.179 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:05:57.185 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 15:05:57.206 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='18945558-201e-4fb5-acef-1136313e8c97', @p1='217baa28-5041-4076-8b9d-53b523b96bf5', @p2='2b393fe3-2391-4f9a-8b95-e461bb10a1b7', @p3='33b8edd5-33f3-4b24-a751-e82f1ac6fd5f', @p4='3792c6e8-b96d-4b40-8f93-07b68ffa159d', @p5='56d57b79-cb96-41c1-87cc-9ca3860f334b', @p6='5fa3e2bf-9b25-4394-b7df-6f1b5c6f7225', @p7='639fcfbc-dc26-4738-a5a4-1d7a3ab1a7e2', @p8='67d3cdea-b715-4585-a115-028af128b467', @p9='79269b89-e2cf-4eaa-8c7c-a2129acdd3c9', @p10='85ab6751-8068-483a-8388-cae60d9c6f2d', @p11='8f62a803-ff89-47c4-93b9-381d0b21d2b0', @p12='92c005e7-b4b1-4d24-a7bb-8dfec746ebca', @p13='932ca91b-93e3-4da5-b0b2-7279276cf1c9', @p14='9f3fbc20-b5b4-4583-9f17-2951cfdeba35', @p15='d0905718-b7f2-47cb-aef1-0787bab8a6c7', @p16='d6e6445f-d4d1-4bcb-b878-4d34dab7238a', @p17='d7edefdd-fc15-494f-ac44-f8b3cf205057', @p18='dea9d9fa-7ce9-41d4-a7ea-525de2b74e53', @p19='e04c6cb5-d4d4-4d11-a10c-2092db10bfb7', @p20='e345067e-2416-4d21-8847-32a5dd518111', @p21='ecc12595-7e89-4424-b7ca-c2711bc511d8', @p22='f1cc7719-4979-4229-971e-7349febed67c', @p23='f8fa7de8-78a7-431e-ae41-7e7b7aa6a8b9', @p24='04f3506e-fb5d-46d9-b6eb-4bdf370b662b', @p25='2025-08-29T09:35:57.1956837Z' (DbType = DateTime), @p26='system', @p27='True', @p28='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='0b6a6a1a-f52e-4eb2-9561-a5534e477a4d', @p31='2025-08-29T09:35:57.1956679Z' (DbType = DateTime), @p32='system', @p33='True', @p34='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='0bd8dc9f-5133-419d-a2ff-f945b0f83ca3', @p37='2025-08-29T09:35:57.1956597Z' (DbType = DateTime), @p38='system', @p39='True', @p40='29461562-ef9c-48c0-a606-482ff57b8f95', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='1d4d44c9-4ee3-4e5b-9f3c-289bda0eb71d', @p43='2025-08-29T09:35:57.1956107Z' (DbType = DateTime), @p44='system', @p45='True', @p46='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='2d8f6024-44dd-41f9-b52f-be3f7e0d6ab1', @p49='2025-08-29T09:35:57.1955931Z' (DbType = DateTime), @p50='system', @p51='True', @p52='9ae90cfe-3fea-4307-b024-3083c2728148', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='3e7e44d0-f7fd-4ff4-a704-cc170ef539e1', @p55='2025-08-29T09:35:57.1956799Z' (DbType = DateTime), @p56='system', @p57='True', @p58='0485154c-dde5-4732-a7aa-a379c77a5b27', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='4b401b59-a559-4599-909e-c9c736ca5ef6', @p61='2025-08-29T09:35:57.1956557Z' (DbType = DateTime), @p62='system', @p63='True', @p64='974af1f9-3caa-4857-a1a7-48462c389332', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='523bbc55-4f6b-460a-ab4c-74b4a5b3180b', @p67='2025-08-29T09:35:57.1956759Z' (DbType = DateTime), @p68='system', @p69='True', @p70='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='530914cb-3cee-4ece-9151-2e7757172a90', @p73='2025-08-29T09:35:57.1956912Z' (DbType = DateTime), @p74='system', @p75='True', @p76='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='5f190eee-0c8d-4a33-bba2-5f06ac636d96', @p79='2025-08-29T09:35:57.1956346Z' (DbType = DateTime), @p80='system', @p81='True', @p82='30000000-0000-0000-0000-000000000007', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='6be56234-9ad1-4dd3-8dd6-990356c435b1', @p85='2025-08-29T09:35:57.1955760Z' (DbType = DateTime), @p86='system', @p87='True', @p88='821480c6-1464-415e-bba8-066fcb4e7e63', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='6c02e6d4-28ec-42d7-aa47-0c1ff90f0a77', @p91='2025-08-29T09:35:57.1955830Z' (DbType = DateTime), @p92='system', @p93='True', @p94='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='918e9a4a-5761-4dde-bef0-abfa7176b158', @p97='2025-08-29T09:35:57.1956268Z' (DbType = DateTime), @p98='system', @p99='True', @p100='30000000-0000-0000-0000-000000000002', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='ac6a6466-9b03-452f-83d9-e3943e844ea0', @p103='2025-08-29T09:35:57.1956186Z' (DbType = DateTime), @p104='system', @p105='True', @p106='30000000-0000-0000-0000-000000000001', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='ae4b0586-e737-46d1-8eb9-705b9f6431ba', @p109='2025-08-29T09:35:57.1956227Z' (DbType = DateTime), @p110='system', @p111='True', @p112='30000000-0000-0000-0000-000000000003', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='b2862c8d-19c7-465f-914b-367bdb9fb418', @p115='2025-08-29T09:35:57.1956518Z' (DbType = DateTime), @p116='system', @p117='True', @p118='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='b4ce94ac-47d4-4e2e-ad92-eff50ecd26d8', @p121='2025-08-29T09:35:57.1956026Z' (DbType = DateTime), @p122='system', @p123='True', @p124='7d7cbceb-4ce7-4835-85cd-59562487298d', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='c3cf373b-6ce8-4e9f-aaf7-1b3a6e94b102', @p127='2025-08-29T09:35:57.1956389Z' (DbType = DateTime), @p128='system', @p129='True', @p130='30000000-0000-0000-0000-000000000008', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='cb9e86f7-89e0-46f4-8cc0-814de8a3b966', @p133='2025-08-29T09:35:57.1956067Z' (DbType = DateTime), @p134='system', @p135='True', @p136='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='d96e4da7-7d3d-4be1-a677-d366b1e8c399', @p139='2025-08-29T09:35:57.1956307Z' (DbType = DateTime), @p140='system', @p141='True', @p142='30000000-0000-0000-0000-000000000004', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='df209217-0fef-45b4-824d-7d2361089fb0', @p145='2025-08-29T09:35:57.1955975Z' (DbType = DateTime), @p146='system', @p147='True', @p148='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='e0355331-7bef-419b-810f-282c74dcbabb', @p151='2025-08-29T09:35:57.1956476Z' (DbType = DateTime), @p152='system', @p153='True', @p154='30000000-0000-0000-0000-000000000000', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='ec5bd08a-bb44-4e75-a951-a0983f223de6', @p157='2025-08-29T09:35:57.1954764Z' (DbType = DateTime), @p158='system', @p159='True', @p160='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p162='f573d392-6faf-4848-9e95-43e1bfb29838', @p163='2025-08-29T09:35:57.1956718Z' (DbType = DateTime), @p164='system', @p165='True', @p166='c819f1bd-422d-4609-916c-cc185fe44ab0', @p167='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p162, @p163, @p164, @p165, @p166, @p167);
2025-08-29 15:05:57.213 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:05:57.215 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 33.7386ms
2025-08-29 15:05:57.217 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:05:57.218 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 50.4452ms
2025-08-29 15:05:57.222 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:05:57.225 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:05:57.227 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:05:57.228 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:05:57.234 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 15:05:57.237 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:05:57.238 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 7.755ms
2025-08-29 15:05:57.240 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:05:57.241 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 19.5902ms
2025-08-29 15:06:05.137 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:05.142 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:05.144 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.8307ms
2025-08-29 15:06:05.161 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:05.165 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:05.167 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:05.169 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:05.176 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:05.181 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:05.184 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7762ms
2025-08-29 15:06:05.187 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:05.188 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.7171ms
2025-08-29 15:06:05.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:05.272 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:05.273 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:05.275 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:05.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:05.283 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:05.285 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8587ms
2025-08-29 15:06:05.287 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:05.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.2713ms
2025-08-29 15:06:08.246 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:08.249 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:08.251 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:08.252 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:08.257 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:08.275 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:08.278 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 23.7029ms
2025-08-29 15:06:08.280 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:08.282 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.2326ms
2025-08-29 15:06:08.307 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:08.312 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:08.314 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:08.316 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:08.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:08.326 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:08.328 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.9326ms
2025-08-29 15:06:08.330 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:08.332 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.1569ms
2025-08-29 15:06:08.378 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:08.382 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:08.384 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:08.385 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:08.391 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:08.395 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:08.397 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5473ms
2025-08-29 15:06:08.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:08.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.3681ms
2025-08-29 15:06:10.281 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:10.284 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:10.285 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7419ms
2025-08-29 15:06:10.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:10.295 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:10.296 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:10.297 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:10.303 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:10.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:10.309 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2309ms
2025-08-29 15:06:10.311 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:10.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9616ms
2025-08-29 15:06:10.347 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:10.354 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:10.356 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:10.358 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:10.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:10.370 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:10.372 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2579ms
2025-08-29 15:06:10.375 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:10.377 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.3377ms
2025-08-29 15:06:10.427 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:06:10.431 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:06:10.433 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:10.435 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:06:10.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:06:10.444 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:06:10.447 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2518ms
2025-08-29 15:06:10.449 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:06:10.451 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.1317ms
2025-08-29 15:08:08.534 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:08:08.557 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:08:08.558 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 24.1066ms
2025-08-29 15:08:08.569 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:08:08.573 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:08:08.576 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:08:08.578 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:08:08.592 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:08:08.603 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:08:08.607 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 25.4283ms
2025-08-29 15:08:08.610 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:08:08.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.9466ms
2025-08-29 15:08:08.625 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:08:08.629 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:08:08.630 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:08:08.632 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:08:08.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:08:08.641 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:08:08.642 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4698ms
2025-08-29 15:08:08.644 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:08:08.645 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.2023ms
2025-08-29 15:08:08.723 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:08:08.726 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:08:08.728 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:08:08.730 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:08:08.735 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:08:08.740 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:08:08.742 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.9689ms
2025-08-29 15:08:08.744 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:08:08.746 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4282ms
2025-08-29 15:10:26.697 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:10:26.706 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:10:26.707 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.0346ms
2025-08-29 15:10:26.726 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:10:26.735 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:10:26.737 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:10:26.739 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:10:26.956 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:10:26.960 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:10:26.962 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 220.1088ms
2025-08-29 15:10:26.964 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:10:26.965 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 239.166ms
2025-08-29 15:10:26.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:10:26.981 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:10:26.982 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:10:26.984 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:10:26.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:10:26.992 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:10:26.994 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.048ms
2025-08-29 15:10:26.996 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:10:26.998 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.0564ms
2025-08-29 15:10:27.076 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:10:27.079 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:10:27.081 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:10:27.083 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:10:27.089 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:10:27.099 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:10:27.101 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.3305ms
2025-08-29 15:10:27.104 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:10:27.105 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.9656ms
2025-08-29 15:11:14.981 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:14.993 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:14.994 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.3464ms
2025-08-29 15:11:15.002 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:15.007 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:15.009 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:15.010 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:11:15.035 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:11:15.040 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:11:15.042 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 29.1859ms
2025-08-29 15:11:15.044 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:15.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 44.3629ms
2025-08-29 15:11:15.059 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:15.064 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:15.065 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:15.067 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:11:15.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:11:15.077 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:11:15.079 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0792ms
2025-08-29 15:11:15.081 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:15.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.1618ms
2025-08-29 15:11:15.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:15.156 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:15.157 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:15.159 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:11:15.164 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:11:15.168 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:11:15.170 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1382ms
2025-08-29 15:11:15.172 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:15.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.332ms
2025-08-29 15:11:40.849 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:40.864 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:40.865 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 16.6286ms
2025-08-29 15:11:40.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:40.882 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:40.884 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:40.887 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:11:40.900 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:11:40.912 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:11:40.915 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.0787ms
2025-08-29 15:11:40.916 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:40.918 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 41.3301ms
2025-08-29 15:11:40.938 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:40.942 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:40.944 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:40.945 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:11:40.949 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:11:40.954 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:11:40.956 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4836ms
2025-08-29 15:11:40.957 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:40.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.0212ms
2025-08-29 15:11:41.039 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:11:41.042 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:11:41.043 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:41.045 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:11:41.052 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:11:41.056 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:11:41.058 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0727ms
2025-08-29 15:11:41.060 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:11:41.061 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.669ms
2025-08-29 15:12:33.768 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:33.780 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:33.781 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.7138ms
2025-08-29 15:12:33.792 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:33.796 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:33.798 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:33.800 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:33.809 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:33.821 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:33.823 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.6868ms
2025-08-29 15:12:33.827 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:33.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.7222ms
2025-08-29 15:12:33.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:33.850 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:33.852 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:33.853 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:33.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:33.864 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:33.866 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4731ms
2025-08-29 15:12:33.868 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:33.869 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.8856ms
2025-08-29 15:12:33.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:33.948 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:33.950 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:33.952 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:33.956 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:33.960 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:33.963 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4609ms
2025-08-29 15:12:33.965 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:33.966 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.1854ms
2025-08-29 15:12:44.712 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 15:12:44.717 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:44.719 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.2676ms
2025-08-29 15:12:44.725 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 15:12:44.728 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:44.729 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:12:44.732 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 15:12:44.738 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 15:12:44.747 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 15:12:44.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 15:12:44.773 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 15:12:44.778 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 15:12:44.785 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 15:12:44.787 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 15:12:44.789 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:44.790 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 56.336ms
2025-08-29 15:12:44.792 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:12:44.793 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 68.544ms
2025-08-29 15:12:44.800 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:44.807 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:44.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.2315ms
2025-08-29 15:12:44.818 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:44.822 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:44.824 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:44.825 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:44.831 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:44.835 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:44.837 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0256ms
2025-08-29 15:12:44.839 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:44.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.4262ms
2025-08-29 15:12:44.868 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:44.872 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:44.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:44.876 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:44.882 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:44.887 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:44.889 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.9838ms
2025-08-29 15:12:44.892 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:44.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:44.895 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.9034ms
2025-08-29 15:12:44.907 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:44.914 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:44.916 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:44.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:44.927 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:44.930 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.1555ms
2025-08-29 15:12:44.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:44.934 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.445ms
2025-08-29 15:12:44.972 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:44.976 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:44.978 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:44.981 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:44.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:45.004 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:45.007 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.6014ms
2025-08-29 15:12:45.010 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:45.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.9309ms
2025-08-29 15:12:45.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:12:45.028 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:12:45.030 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:45.032 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:12:45.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:12:45.043 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:12:45.045 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4909ms
2025-08-29 15:12:45.047 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:12:45.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.6768ms
2025-08-29 15:13:47.553 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:13:47.564 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:13:47.566 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.8079ms
2025-08-29 15:13:47.575 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:13:47.581 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:13:47.582 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:13:47.583 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:13:47.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:13:47.595 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:13:47.599 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3815ms
2025-08-29 15:13:47.604 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:13:47.606 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.3955ms
2025-08-29 15:13:47.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:13:47.633 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:13:47.634 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:13:47.636 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:13:47.642 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:13:47.650 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:13:47.652 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.0554ms
2025-08-29 15:13:47.654 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:13:47.656 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.644ms
2025-08-29 15:13:47.722 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:13:47.726 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:13:47.728 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:13:47.729 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:13:47.734 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:13:47.738 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:13:47.740 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.804ms
2025-08-29 15:13:47.742 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:13:47.743 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.0828ms
2025-08-29 15:14:02.461 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:14:02.467 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:02.468 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 6.4153ms
2025-08-29 15:14:02.472 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 898
2025-08-29 15:14:02.476 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:02.477 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:14:02.479 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:02.485 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 15:14:02.505 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='04f3506e-fb5d-46d9-b6eb-4bdf370b662b', @p1='0b6a6a1a-f52e-4eb2-9561-a5534e477a4d', @p2='0bd8dc9f-5133-419d-a2ff-f945b0f83ca3', @p3='1d4d44c9-4ee3-4e5b-9f3c-289bda0eb71d', @p4='2d8f6024-44dd-41f9-b52f-be3f7e0d6ab1', @p5='3e7e44d0-f7fd-4ff4-a704-cc170ef539e1', @p6='4b401b59-a559-4599-909e-c9c736ca5ef6', @p7='523bbc55-4f6b-460a-ab4c-74b4a5b3180b', @p8='530914cb-3cee-4ece-9151-2e7757172a90', @p9='5f190eee-0c8d-4a33-bba2-5f06ac636d96', @p10='6be56234-9ad1-4dd3-8dd6-990356c435b1', @p11='6c02e6d4-28ec-42d7-aa47-0c1ff90f0a77', @p12='918e9a4a-5761-4dde-bef0-abfa7176b158', @p13='ac6a6466-9b03-452f-83d9-e3943e844ea0', @p14='ae4b0586-e737-46d1-8eb9-705b9f6431ba', @p15='b2862c8d-19c7-465f-914b-367bdb9fb418', @p16='b4ce94ac-47d4-4e2e-ad92-eff50ecd26d8', @p17='c3cf373b-6ce8-4e9f-aaf7-1b3a6e94b102', @p18='cb9e86f7-89e0-46f4-8cc0-814de8a3b966', @p19='d96e4da7-7d3d-4be1-a677-d366b1e8c399', @p20='df209217-0fef-45b4-824d-7d2361089fb0', @p21='e0355331-7bef-419b-810f-282c74dcbabb', @p22='ec5bd08a-bb44-4e75-a951-a0983f223de6', @p23='f573d392-6faf-4848-9e95-43e1bfb29838', @p24='1cb4d8cc-4acb-44d6-b1e1-a4016ba83b0f', @p25='2025-08-29T09:44:02.4898735Z' (DbType = DateTime), @p26='system', @p27='True', @p28='821480c6-1464-415e-bba8-066fcb4e7e63', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='25cfe46c-2357-4023-9028-357dc26b525d', @p31='2025-08-29T09:44:02.4901141Z' (DbType = DateTime), @p32='system', @p33='True', @p34='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='263cc1b7-e8e2-4443-8477-80ee7f626afb', @p37='2025-08-29T09:44:02.4899906Z' (DbType = DateTime), @p38='system', @p39='True', @p40='7d7cbceb-4ce7-4835-85cd-59562487298d', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='393b3351-5ed8-4bca-a781-fedeab744544', @p43='2025-08-29T09:44:02.4900090Z' (DbType = DateTime), @p44='system', @p45='True', @p46='30000000-0000-0000-0000-000000000001', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='3fd84294-7e38-4c5f-b170-06e9639c47fb', @p49='2025-08-29T09:44:02.4900376Z' (DbType = DateTime), @p50='system', @p51='True', @p52='30000000-0000-0000-0000-000000000000', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='51dadde1-67c3-4b01-9d9c-6863d2427db0', @p55='2025-08-29T09:44:02.4899860Z' (DbType = DateTime), @p56='system', @p57='True', @p58='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='615cfa9b-e148-4e11-a742-0ff3ab541ede', @p61='2025-08-29T09:44:02.4900416Z' (DbType = DateTime), @p62='system', @p63='True', @p64='974af1f9-3caa-4857-a1a7-48462c389332', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='6e59f5bc-05dd-4020-8414-b04d3cebaf0b', @p67='2025-08-29T09:44:02.4899753Z' (DbType = DateTime), @p68='system', @p69='True', @p70='9ae90cfe-3fea-4307-b024-3083c2728148', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='736c1421-13f3-49fa-8336-45482924d060', @p73='2025-08-29T09:44:02.4899986Z' (DbType = DateTime), @p74='system', @p75='True', @p76='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='73c08d48-fc38-4e2d-8bce-6761459fd179', @p79='2025-08-29T09:44:02.4900172Z' (DbType = DateTime), @p80='system', @p81='True', @p82='30000000-0000-0000-0000-000000000002', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='77f84172-8c74-4ed7-befb-ab5dbaa5c528', @p85='2025-08-29T09:44:02.4900852Z' (DbType = DateTime), @p86='system', @p87='True', @p88='c819f1bd-422d-4609-916c-cc185fe44ab0', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='8aef6130-59e1-44bb-be72-7ee9b2794d4e', @p91='2025-08-29T09:44:02.4898938Z' (DbType = DateTime), @p92='system', @p93='True', @p94='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='9dee916e-555b-41d7-bd57-5ab01ed7d209', @p97='2025-08-29T09:44:02.4899947Z' (DbType = DateTime), @p98='system', @p99='True', @p100='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='a019922c-6fda-4e8e-a1fe-0d354cccdb9a', @p103='2025-08-29T09:44:02.4900212Z' (DbType = DateTime), @p104='system', @p105='True', @p106='30000000-0000-0000-0000-000000000004', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='ae9b69b0-7fd6-4f55-8807-3fccd44c9ed7', @p109='2025-08-29T09:44:02.4897062Z' (DbType = DateTime), @p110='system', @p111='True', @p112='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='ccb2c8a4-2771-4d28-bf30-3c1340928a5c', @p115='2025-08-29T09:44:02.4900454Z' (DbType = DateTime), @p116='system', @p117='True', @p118='29461562-ef9c-48c0-a606-482ff57b8f95', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='dda30942-628b-41f6-9cd0-4e02f2e62628', @p121='2025-08-29T09:44:02.4901331Z' (DbType = DateTime), @p122='system', @p123='True', @p124='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='de823de2-1fe0-4832-9fe7-cfa1bd3d611f', @p127='2025-08-29T09:44:02.4900291Z' (DbType = DateTime), @p128='system', @p129='True', @p130='30000000-0000-0000-0000-000000000008', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='ec4d2105-c8a4-470b-a1c3-aedbe995c30c', @p133='2025-08-29T09:44:02.4901226Z' (DbType = DateTime), @p134='system', @p135='True', @p136='0485154c-dde5-4732-a7aa-a379c77a5b27', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='f0cbccf6-8722-49b4-8894-7fd1e0525521', @p139='2025-08-29T09:44:02.4900252Z' (DbType = DateTime), @p140='system', @p141='True', @p142='30000000-0000-0000-0000-000000000007', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='f3e407e2-f6a0-4c47-974a-8aae7b3214b4', @p145='2025-08-29T09:44:02.4900492Z' (DbType = DateTime), @p146='system', @p147='True', @p148='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='f5fa6b6b-ac31-4850-bb90-2506bf5da256', @p151='2025-08-29T09:44:02.4901291Z' (DbType = DateTime), @p152='system', @p153='True', @p154='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='f8b53f0b-3d46-4ecc-a2ce-bd42b6ea340f', @p157='2025-08-29T09:44:02.4900134Z' (DbType = DateTime), @p158='system', @p159='True', @p160='30000000-0000-0000-0000-000000000003', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
2025-08-29 15:14:02.513 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:02.515 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 34.0226ms
2025-08-29 15:14:02.517 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:14:02.518 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 45.958ms
2025-08-29 15:14:02.522 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:14:02.525 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:02.526 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:14:02.528 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:02.532 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 15:14:02.537 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:14:02.538 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 8.4963ms
2025-08-29 15:14:02.541 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:14:02.542 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 20.3212ms
2025-08-29 15:14:04.784 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 15:14:04.788 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:04.789 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:14:04.791 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:04.796 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 15:14:04.830 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='1cb4d8cc-4acb-44d6-b1e1-a4016ba83b0f', @p1='25cfe46c-2357-4023-9028-357dc26b525d', @p2='263cc1b7-e8e2-4443-8477-80ee7f626afb', @p3='393b3351-5ed8-4bca-a781-fedeab744544', @p4='3fd84294-7e38-4c5f-b170-06e9639c47fb', @p5='51dadde1-67c3-4b01-9d9c-6863d2427db0', @p6='615cfa9b-e148-4e11-a742-0ff3ab541ede', @p7='6e59f5bc-05dd-4020-8414-b04d3cebaf0b', @p8='736c1421-13f3-49fa-8336-45482924d060', @p9='73c08d48-fc38-4e2d-8bce-6761459fd179', @p10='77f84172-8c74-4ed7-befb-ab5dbaa5c528', @p11='8aef6130-59e1-44bb-be72-7ee9b2794d4e', @p12='9dee916e-555b-41d7-bd57-5ab01ed7d209', @p13='a019922c-6fda-4e8e-a1fe-0d354cccdb9a', @p14='ae9b69b0-7fd6-4f55-8807-3fccd44c9ed7', @p15='ccb2c8a4-2771-4d28-bf30-3c1340928a5c', @p16='dda30942-628b-41f6-9cd0-4e02f2e62628', @p17='de823de2-1fe0-4832-9fe7-cfa1bd3d611f', @p18='ec4d2105-c8a4-470b-a1c3-aedbe995c30c', @p19='f0cbccf6-8722-49b4-8894-7fd1e0525521', @p20='f3e407e2-f6a0-4c47-974a-8aae7b3214b4', @p21='f5fa6b6b-ac31-4850-bb90-2506bf5da256', @p22='f8b53f0b-3d46-4ecc-a2ce-bd42b6ea340f', @p23='0181dff7-aaf1-4bf8-911a-313ee87eeefa', @p24='2025-08-29T09:44:04.8200912Z' (DbType = DateTime), @p25='system', @p26='True', @p27='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='04ed6d41-1476-4978-86f1-9e6da43a6049', @p30='2025-08-29T09:44:04.8202426Z' (DbType = DateTime), @p31='system', @p32='True', @p33='30000000-0000-0000-0000-000000000007', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='18a8a6e6-50bb-4421-917b-33123098894e', @p36='2025-08-29T09:44:04.8203234Z' (DbType = DateTime), @p37='system', @p38='True', @p39='0485154c-dde5-4732-a7aa-a379c77a5b27', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='2bd2bef9-da85-4cd9-a5d5-bd39664e49f8', @p42='2025-08-29T09:44:04.8203195Z' (DbType = DateTime), @p43='system', @p44='True', @p45='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='3676c1c6-5efb-4f5e-aa57-434c56a85ab9', @p48='2025-08-29T09:44:04.8203104Z' (DbType = DateTime), @p49='system', @p50='True', @p51='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='576644e0-d923-4b80-9ba2-4921f2bee053', @p54='2025-08-29T09:44:04.8201313Z' (DbType = DateTime), @p55='system', @p56='True', @p57='7d7cbceb-4ce7-4835-85cd-59562487298d', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='58c5dd72-83a3-4088-9185-2393554e82c8', @p60='2025-08-29T09:44:04.8202705Z' (DbType = DateTime), @p61='system', @p62='True', @p63='30000000-0000-0000-0000-000000000000', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='58d0657d-37a9-4b38-bb3c-a748a7f355dc', @p66='2025-08-29T09:44:04.8202303Z' (DbType = DateTime), @p67='system', @p68='True', @p69='30000000-0000-0000-0000-000000000003', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='719f5d83-1680-4a10-8d68-fe67370cc984', @p72='2025-08-29T09:44:04.8202868Z' (DbType = DateTime), @p73='system', @p74='True', @p75='29461562-ef9c-48c0-a606-482ff57b8f95', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='80973c37-1b96-4c72-a448-c80ce4ecf39c', @p78='2025-08-29T09:44:04.8203275Z' (DbType = DateTime), @p79='system', @p80='True', @p81='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='93488a45-3003-435a-83a0-824664e2531a', @p84='2025-08-29T09:44:04.8203156Z' (DbType = DateTime), @p85='system', @p86='True', @p87='c819f1bd-422d-4609-916c-cc185fe44ab0', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='9d626862-b151-4d94-8c18-bc22441c0246', @p90='2025-08-29T09:44:04.8201220Z' (DbType = DateTime), @p91='system', @p92='True', @p93='9ae90cfe-3fea-4307-b024-3083c2728148', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='a5f06cc5-eb99-4a2e-90c9-1ca05b69f0e3', @p96='2025-08-29T09:44:04.8200849Z' (DbType = DateTime), @p97='system', @p98='True', @p99='821480c6-1464-415e-bba8-066fcb4e7e63', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='b1d853c4-7873-4006-abeb-19bbbadc96af', @p102='2025-08-29T09:44:04.8202830Z' (DbType = DateTime), @p103='system', @p104='True', @p105='974af1f9-3caa-4857-a1a7-48462c389332', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='bd5f0c9f-17eb-4392-ba96-4d88c5036fd3', @p108='2025-08-29T09:44:04.8200281Z' (DbType = DateTime), @p109='system', @p110='True', @p111='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p113='c9d7ad85-e6ef-4f42-8631-1d9003968e5c', @p114='2025-08-29T09:44:04.8201400Z' (DbType = DateTime), @p115='system', @p116='True', @p117='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p118='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p119='e35fab31-7afd-415a-a170-d11d021a1681', @p120='2025-08-29T09:44:04.8202346Z' (DbType = DateTime), @p121='system', @p122='True', @p123='30000000-0000-0000-0000-000000000002', @p124='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p125='e385b57c-3bc2-4956-b350-1783b96452c9', @p126='2025-08-29T09:44:04.8202787Z' (DbType = DateTime), @p127='system', @p128='True', @p129='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p130='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p131='e427405f-362b-4e1d-8b75-8e6b779de546', @p132='2025-08-29T09:44:04.8202191Z' (DbType = DateTime), @p133='system', @p134='True', @p135='30000000-0000-0000-0000-000000000001', @p136='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p137='e7758d01-7856-4af3-b655-33854f93789b', @p138='2025-08-29T09:44:04.8201273Z' (DbType = DateTime), @p139='system', @p140='True', @p141='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p142='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p143='e9e5fc82-4503-4946-a8c0-1d407ed8bd88', @p144='2025-08-29T09:44:04.8201352Z' (DbType = DateTime), @p145='system', @p146='True', @p147='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p148='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p149='f06ad731-1220-4a9f-9a4c-3256f20a2d5a', @p150='2025-08-29T09:44:04.8203487Z' (DbType = DateTime), @p151='system', @p152='True', @p153='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p154='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p155='f9615ecb-611f-4f1a-9f72-66d0e0549365', @p156='2025-08-29T09:44:04.8202386Z' (DbType = DateTime), @p157='system', @p158='True', @p159='30000000-0000-0000-0000-000000000004', @p160='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p161='fc93ec14-56e0-4c48-bdd5-30d09334d86c', @p162='2025-08-29T09:44:04.8202466Z' (DbType = DateTime), @p163='system', @p164='True', @p165='30000000-0000-0000-0000-000000000008', @p166='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p125, @p126, @p127, @p128, @p129, @p130);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p131, @p132, @p133, @p134, @p135, @p136);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p137, @p138, @p139, @p140, @p141, @p142);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p143, @p144, @p145, @p146, @p147, @p148);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p149, @p150, @p151, @p152, @p153, @p154);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p155, @p156, @p157, @p158, @p159, @p160);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p161, @p162, @p163, @p164, @p165, @p166);
2025-08-29 15:14:04.837 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:04.838 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 45.2209ms
2025-08-29 15:14:04.840 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:14:04.841 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 57.6015ms
2025-08-29 15:14:04.845 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:14:04.849 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:04.850 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:14:04.851 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:04.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 15:14:04.862 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:14:04.864 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 9.6857ms
2025-08-29 15:14:04.865 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:14:04.867 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 21.5184ms
2025-08-29 15:14:05.527 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 937
2025-08-29 15:14:05.530 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:05.531 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:14:05.532 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:05.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 15:14:05.550 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='0181dff7-aaf1-4bf8-911a-313ee87eeefa', @p1='04ed6d41-1476-4978-86f1-9e6da43a6049', @p2='18a8a6e6-50bb-4421-917b-33123098894e', @p3='2bd2bef9-da85-4cd9-a5d5-bd39664e49f8', @p4='3676c1c6-5efb-4f5e-aa57-434c56a85ab9', @p5='576644e0-d923-4b80-9ba2-4921f2bee053', @p6='58c5dd72-83a3-4088-9185-2393554e82c8', @p7='58d0657d-37a9-4b38-bb3c-a748a7f355dc', @p8='719f5d83-1680-4a10-8d68-fe67370cc984', @p9='80973c37-1b96-4c72-a448-c80ce4ecf39c', @p10='93488a45-3003-435a-83a0-824664e2531a', @p11='9d626862-b151-4d94-8c18-bc22441c0246', @p12='a5f06cc5-eb99-4a2e-90c9-1ca05b69f0e3', @p13='b1d853c4-7873-4006-abeb-19bbbadc96af', @p14='bd5f0c9f-17eb-4392-ba96-4d88c5036fd3', @p15='c9d7ad85-e6ef-4f42-8631-1d9003968e5c', @p16='e35fab31-7afd-415a-a170-d11d021a1681', @p17='e385b57c-3bc2-4956-b350-1783b96452c9', @p18='e427405f-362b-4e1d-8b75-8e6b779de546', @p19='e7758d01-7856-4af3-b655-33854f93789b', @p20='e9e5fc82-4503-4946-a8c0-1d407ed8bd88', @p21='f06ad731-1220-4a9f-9a4c-3256f20a2d5a', @p22='f9615ecb-611f-4f1a-9f72-66d0e0549365', @p23='fc93ec14-56e0-4c48-bdd5-30d09334d86c', @p24='06115cfd-1a2c-4f2e-94d5-043c16e8d197', @p25='2025-08-29T09:44:05.5414997Z' (DbType = DateTime), @p26='system', @p27='True', @p28='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='17533fd7-adcb-487d-9f78-5afb3d79d456', @p31='2025-08-29T09:44:05.5414576Z' (DbType = DateTime), @p32='system', @p33='True', @p34='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='2476a196-4654-45d3-90d0-31dc0593714b', @p37='2025-08-29T09:44:05.5414950Z' (DbType = DateTime), @p38='system', @p39='True', @p40='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='318bf7c0-d3c3-4e38-9273-676c5b2c7053', @p43='2025-08-29T09:44:05.5415658Z' (DbType = DateTime), @p44='system', @p45='True', @p46='29461562-ef9c-48c0-a606-482ff57b8f95', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='33dc9fe9-c1f0-4cf4-bf3e-2030a333a1f2', @p49='2025-08-29T09:44:05.5414805Z' (DbType = DateTime), @p50='system', @p51='True', @p52='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='3f4db569-0810-466c-b700-1501d0ab82da', @p55='2025-08-29T09:44:05.5414727Z' (DbType = DateTime), @p56='system', @p57='True', @p58='9ae90cfe-3fea-4307-b024-3083c2728148', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='66839817-ac6d-475c-bf4d-d81ff97e8f9a', @p61='2025-08-29T09:44:05.5414898Z' (DbType = DateTime), @p62='system', @p63='True', @p64='7d7cbceb-4ce7-4835-85cd-59562487298d', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='7d5a495c-1768-43a3-ae15-a864655257ce', @p67='2025-08-29T09:44:05.5415956Z' (DbType = DateTime), @p68='system', @p69='True', @p70='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='7e6ebb41-d35d-43d7-8dd4-27f285707ca2', @p73='2025-08-29T09:44:05.5415505Z' (DbType = DateTime), @p74='system', @p75='True', @p76='30000000-0000-0000-0000-000000000000', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='8ca5d72a-7b49-4268-876f-2d45e6d9bfd2', @p79='2025-08-29T09:44:05.5415906Z' (DbType = DateTime), @p80='system', @p81='True', @p82='0485154c-dde5-4732-a7aa-a379c77a5b27', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='8e929d67-5672-4068-81c2-5c874833a570', @p85='2025-08-29T09:44:05.5415356Z' (DbType = DateTime), @p86='system', @p87='True', @p88='30000000-0000-0000-0000-000000000008', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='8f0af0cd-0c89-4f77-9d04-888a3282e29b', @p91='2025-08-29T09:44:05.5414502Z' (DbType = DateTime), @p92='system', @p93='True', @p94='821480c6-1464-415e-bba8-066fcb4e7e63', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='945e8d08-54e0-425f-b225-ec5fead876e8', @p97='2025-08-29T09:44:05.5415804Z' (DbType = DateTime), @p98='system', @p99='True', @p100='c819f1bd-422d-4609-916c-cc185fe44ab0', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='b50eab4f-43c6-4611-b186-eee7804cc24b', @p103='2025-08-29T09:44:05.5415300Z' (DbType = DateTime), @p104='system', @p105='True', @p106='30000000-0000-0000-0000-000000000007', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='bfd5b721-a20d-433e-9b6d-f1a67be724e9', @p109='2025-08-29T09:44:05.5413951Z' (DbType = DateTime), @p110='system', @p111='True', @p112='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='c4dcb60b-36ee-40ea-9901-6fb5e7c0a177', @p115='2025-08-29T09:44:05.5415200Z' (DbType = DateTime), @p116='system', @p117='True', @p118='30000000-0000-0000-0000-000000000002', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='dc98cced-b423-4af1-b708-362280823f6f', @p121='2025-08-29T09:44:05.5415754Z' (DbType = DateTime), @p122='system', @p123='True', @p124='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='de4e50a6-a523-4335-8efa-02c07bc523b6', @p127='2025-08-29T09:44:05.5415050Z' (DbType = DateTime), @p128='system', @p129='True', @p130='30000000-0000-0000-0000-000000000001', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='e5cba6ca-4251-45ec-bcd7-8a4f68b97c2d', @p133='2025-08-29T09:44:05.5416007Z' (DbType = DateTime), @p134='system', @p135='True', @p136='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='e79eefc6-aa3e-4e4c-8a51-bbc1f0bcc1ec', @p139='2025-08-29T09:44:05.5415852Z' (DbType = DateTime), @p140='system', @p141='True', @p142='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='f21dd2a6-58f3-4e02-a036-e245f8d67b00', @p145='2025-08-29T09:44:05.5415609Z' (DbType = DateTime), @p146='system', @p147='True', @p148='974af1f9-3caa-4857-a1a7-48462c389332', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='f2783e5f-99d6-4611-85cb-45a8255a1b51', @p151='2025-08-29T09:44:05.5415557Z' (DbType = DateTime), @p152='system', @p153='True', @p154='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='f65d303a-e43f-4673-85c9-61cd01ecf1fc', @p157='2025-08-29T09:44:05.5415148Z' (DbType = DateTime), @p158='system', @p159='True', @p160='30000000-0000-0000-0000-000000000003', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p162='fa9cc80e-42b2-44a5-b5db-d5a28312e888', @p163='2025-08-29T09:44:05.5415250Z' (DbType = DateTime), @p164='system', @p165='True', @p166='30000000-0000-0000-0000-000000000004', @p167='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p162, @p163, @p164, @p165, @p166, @p167);
2025-08-29 15:14:05.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:05.559 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 24.5711ms
2025-08-29 15:14:05.561 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:14:05.562 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 36.0332ms
2025-08-29 15:14:05.566 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:14:05.569 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:05.571 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:14:05.572 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:05.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 15:14:05.580 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:14:05.582 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 7.7362ms
2025-08-29 15:14:05.584 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:14:05.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 18.5105ms
2025-08-29 15:14:09.632 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:14:09.637 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:09.638 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.907ms
2025-08-29 15:14:09.642 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:14:09.646 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:09.647 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:09.648 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:09.654 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:14:09.658 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:09.660 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.9626ms
2025-08-29 15:14:09.662 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:09.664 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.6506ms
2025-08-29 15:14:09.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:14:09.701 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:09.703 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:09.705 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:09.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:14:09.717 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:09.719 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7961ms
2025-08-29 15:14:09.721 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:09.722 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.0022ms
2025-08-29 15:14:09.764 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:14:09.768 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:09.769 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:09.771 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:09.776 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:14:09.781 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:09.783 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3331ms
2025-08-29 15:14:09.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:09.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.4112ms
2025-08-29 15:14:10.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:14:10.999 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:11.001 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:11.002 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:11.028 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:14:11.034 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:11.037 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 31.2508ms
2025-08-29 15:14:11.039 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:11.040 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 44.8641ms
2025-08-29 15:14:11.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:14:11.064 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:11.066 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:11.067 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:11.074 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:14:11.078 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:11.079 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.923ms
2025-08-29 15:14:11.081 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:11.083 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.6537ms
2025-08-29 15:14:11.121 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:14:11.125 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:14:11.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:11.128 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:14:11.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:14:11.137 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:14:11.139 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7301ms
2025-08-29 15:14:11.141 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:14:11.143 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3787ms
2025-08-29 15:17:13.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:17:13.196 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:17:13.198 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.6637ms
2025-08-29 15:17:13.209 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:17:13.212 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:17:13.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:17:13.216 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:17:13.420 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:17:13.424 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:17:13.427 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 208.2143ms
2025-08-29 15:17:13.430 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:17:13.431 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 222.6013ms
2025-08-29 15:17:13.441 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:17:13.444 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:17:13.446 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:17:13.447 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:17:13.452 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:17:13.456 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:17:13.458 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5475ms
2025-08-29 15:17:13.460 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:17:13.462 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.0896ms
2025-08-29 15:17:13.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:17:13.559 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:17:13.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:17:13.563 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:17:13.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:17:13.572 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:17:13.574 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3017ms
2025-08-29 15:17:13.577 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:17:13.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.5357ms
2025-08-29 15:18:09.585 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:09.597 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:09.598 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.5165ms
2025-08-29 15:18:09.607 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:09.611 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:09.612 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:09.614 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:18:09.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:18:09.624 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:18:09.626 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0457ms
2025-08-29 15:18:09.628 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:09.630 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.975ms
2025-08-29 15:18:09.667 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:09.672 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:09.674 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:09.675 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:18:09.681 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:18:09.685 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:18:09.687 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5864ms
2025-08-29 15:18:09.689 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:09.690 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4121ms
2025-08-29 15:18:09.776 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:09.779 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:09.780 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:09.781 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:18:09.786 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:18:09.791 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:18:09.793 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8884ms
2025-08-29 15:18:09.795 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:09.796 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9269ms
2025-08-29 15:18:57.663 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:57.689 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:57.690 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 30.3522ms
2025-08-29 15:18:57.710 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:57.714 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:57.715 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:57.716 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:18:57.726 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:18:57.749 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:18:57.750 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 31.2591ms
2025-08-29 15:18:57.752 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:57.753 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.6844ms
2025-08-29 15:18:57.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:57.811 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:57.813 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:57.814 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:18:57.818 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:18:57.822 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:18:57.824 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6327ms
2025-08-29 15:18:57.825 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:57.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.5509ms
2025-08-29 15:18:57.909 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:18:57.912 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:18:57.914 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:57.915 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:18:57.920 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:18:57.925 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:18:57.927 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5426ms
2025-08-29 15:18:57.929 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:18:57.930 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.0029ms
2025-08-29 15:21:20.563 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:21:20.573 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:21:20.575 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.5774ms
2025-08-29 15:21:20.584 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:21:20.587 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:21:20.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:21:20.591 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:21:20.598 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:21:20.602 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:21:20.606 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.303ms
2025-08-29 15:21:20.608 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:21:20.610 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.501ms
2025-08-29 15:21:20.636 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:21:20.642 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:21:20.644 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:21:20.646 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:21:20.651 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:21:20.655 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:21:20.657 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8672ms
2025-08-29 15:21:20.659 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:21:20.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.9538ms
2025-08-29 15:21:20.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:21:20.737 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:21:20.739 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:21:20.741 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:21:20.747 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:21:20.757 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:21:20.761 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.0172ms
2025-08-29 15:21:20.763 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:21:20.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.7212ms
2025-08-29 15:26:46.670 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:26:46.673 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:46.674 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.0046ms
2025-08-29 15:26:46.677 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:26:46.685 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:46.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:26:46.688 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:46.691 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:26:46.695 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3037ms
2025-08-29 15:26:46.696 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:26:46.698 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.2931ms
2025-08-29 15:26:48.350 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 15:26:48.353 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 15:26:48.357 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:48.359 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:48.360 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 9.4337ms
2025-08-29 15:26:48.361 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 8.1786ms
2025-08-29 15:26:48.363 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 15:26:48.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 15:26:48.367 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:48.368 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:48.369 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 15:26:48.370 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 15:26:48.370 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:48.372 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 15:26:48.563 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 15:26:48.566 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:26:48.567 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 195.2381ms
2025-08-29 15:26:48.569 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 15:26:48.570 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 206.8681ms
2025-08-29 15:26:48.573 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 15:26:48.576 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:48.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.3322ms
2025-08-29 15:26:48.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 15:26:48.584 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:48.585 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:48.586 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:48.588 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:26:48.590 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.311ms
2025-08-29 15:26:48.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:48.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 11.1433ms
2025-08-29 15:26:48.667 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 15:26:48.672 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 15:26:48.675 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 301.4657ms
2025-08-29 15:26:48.676 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 15:26:48.677 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 311.6775ms
2025-08-29 15:26:49.671 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:26:49.673 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:49.674 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.0233ms
2025-08-29 15:26:49.676 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:26:49.678 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:49.679 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:49.680 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:49.681 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:26:49.682 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.2054ms
2025-08-29 15:26:49.683 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:49.684 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.5533ms
2025-08-29 15:26:54.863 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:26:54.865 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:54.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.8569ms
2025-08-29 15:26:54.869 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 976
2025-08-29 15:26:54.871 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:54.872 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:26:54.872 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:54.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 15:26:54.890 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='06115cfd-1a2c-4f2e-94d5-043c16e8d197', @p1='17533fd7-adcb-487d-9f78-5afb3d79d456', @p2='2476a196-4654-45d3-90d0-31dc0593714b', @p3='318bf7c0-d3c3-4e38-9273-676c5b2c7053', @p4='33dc9fe9-c1f0-4cf4-bf3e-2030a333a1f2', @p5='3f4db569-0810-466c-b700-1501d0ab82da', @p6='66839817-ac6d-475c-bf4d-d81ff97e8f9a', @p7='7d5a495c-1768-43a3-ae15-a864655257ce', @p8='7e6ebb41-d35d-43d7-8dd4-27f285707ca2', @p9='8ca5d72a-7b49-4268-876f-2d45e6d9bfd2', @p10='8e929d67-5672-4068-81c2-5c874833a570', @p11='8f0af0cd-0c89-4f77-9d04-888a3282e29b', @p12='945e8d08-54e0-425f-b225-ec5fead876e8', @p13='b50eab4f-43c6-4611-b186-eee7804cc24b', @p14='bfd5b721-a20d-433e-9b6d-f1a67be724e9', @p15='c4dcb60b-36ee-40ea-9901-6fb5e7c0a177', @p16='dc98cced-b423-4af1-b708-362280823f6f', @p17='de4e50a6-a523-4335-8efa-02c07bc523b6', @p18='e5cba6ca-4251-45ec-bcd7-8a4f68b97c2d', @p19='e79eefc6-aa3e-4e4c-8a51-bbc1f0bcc1ec', @p20='f21dd2a6-58f3-4e02-a036-e245f8d67b00', @p21='f2783e5f-99d6-4611-85cb-45a8255a1b51', @p22='f65d303a-e43f-4673-85c9-61cd01ecf1fc', @p23='fa9cc80e-42b2-44a5-b5db-d5a28312e888', @p24='00aa7564-956c-421b-99b9-6b3164b6d75a', @p25='2025-08-29T09:56:54.8806111Z' (DbType = DateTime), @p26='system', @p27='True', @p28='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='21734edf-5b68-46e1-a13c-3ae18c153ee1', @p31='2025-08-29T09:56:54.8806453Z' (DbType = DateTime), @p32='system', @p33='True', @p34='30000000-0000-0000-0000-000000000000', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='23e3f0ac-76d1-4340-86e8-824aa56c3c2f', @p37='2025-08-29T09:56:54.8806187Z' (DbType = DateTime), @p38='system', @p39='True', @p40='30000000-0000-0000-0000-000000000001', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='25873899-3cf0-4a01-bff4-0d3001b29efd', @p43='2025-08-29T09:56:54.8806477Z' (DbType = DateTime), @p44='system', @p45='True', @p46='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='2a30ed94-9add-4bd7-9add-bd3977048a62', @p49='2025-08-29T09:56:54.8806655Z' (DbType = DateTime), @p50='system', @p51='True', @p52='74828fc0-e358-4cfc-b924-13719a0d9f50', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='2add8b84-07a8-4a25-887e-364a797808b3', @p55='2025-08-29T09:56:54.8806382Z' (DbType = DateTime), @p56='system', @p57='True', @p58='30000000-0000-0000-0000-000000000008', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='331772a2-b820-4320-a6da-b748e7c83225', @p61='2025-08-29T09:56:54.8806738Z' (DbType = DateTime), @p62='system', @p63='True', @p64='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='337d21a4-22b5-454a-b850-689a4b9c376f', @p67='2025-08-29T09:56:54.8806893Z' (DbType = DateTime), @p68='system', @p69='True', @p70='29461562-ef9c-48c0-a606-482ff57b8f95', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='51ba26c0-f588-4bf0-a7cb-2a7eaad33633', @p73='2025-08-29T09:56:54.8806154Z' (DbType = DateTime), @p74='system', @p75='True', @p76='30000000-0000-0000-0000-000000000002', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='54c84786-c309-49ff-928d-b33700780298', @p79='2025-08-29T09:56:54.8806715Z' (DbType = DateTime), @p80='system', @p81='True', @p82='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='5a62b09f-0799-40dd-9e71-d4b74fba9434', @p85='2025-08-29T09:56:54.8801887Z' (DbType = DateTime), @p86='system', @p87='True', @p88='7d7cbceb-4ce7-4835-85cd-59562487298d', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='61086ef6-bcfc-47f4-8b74-a16cae131a0b', @p91='2025-08-29T09:56:54.8797109Z' (DbType = DateTime), @p92='system', @p93='True', @p94='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='6f05d097-e4d3-49d6-b849-13af1da4d941', @p97='2025-08-29T09:56:54.8806927Z' (DbType = DateTime), @p98='system', @p99='True', @p100='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='70f2470f-fc0e-443c-a71f-1d345791b947', @p103='2025-08-29T09:56:54.8801861Z' (DbType = DateTime), @p104='system', @p105='True', @p106='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='73b750a1-4659-4fbb-8dcb-3d8f01f500c0', @p109='2025-08-29T09:56:54.8806213Z' (DbType = DateTime), @p110='system', @p111='True', @p112='30000000-0000-0000-0000-000000000004', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='7c903536-f440-42af-a6ee-7385741e5b8c', @p115='2025-08-29T09:56:54.8801820Z' (DbType = DateTime), @p116='system', @p117='True', @p118='9ae90cfe-3fea-4307-b024-3083c2728148', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='999e322b-a0ec-4dfe-bd45-1fd93dd794a4', @p121='2025-08-29T09:56:54.8806951Z' (DbType = DateTime), @p122='system', @p123='True', @p124='c819f1bd-422d-4609-916c-cc185fe44ab0', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p126='b2e41ae1-c21e-40af-8be3-d209c7008db3', @p127='2025-08-29T09:56:54.8801781Z' (DbType = DateTime), @p128='system', @p129='True', @p130='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p131='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p132='d0e73b3d-c989-40f7-a821-207ee3f84e5f', @p133='2025-08-29T09:56:54.8806237Z' (DbType = DateTime), @p134='system', @p135='True', @p136='30000000-0000-0000-0000-000000000003', @p137='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p138='d12c79d5-043f-4989-b8ad-d20b3a9a7f15', @p139='2025-08-29T09:56:54.8806762Z' (DbType = DateTime), @p140='system', @p141='True', @p142='974af1f9-3caa-4857-a1a7-48462c389332', @p143='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p144='e8283e74-beee-49e8-9f11-97302cd8d9e3', @p145='2025-08-29T09:56:54.8801597Z' (DbType = DateTime), @p146='system', @p147='True', @p148='821480c6-1464-415e-bba8-066fcb4e7e63', @p149='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p150='f088b31e-33cf-416d-90dc-b005ec33e129', @p151='2025-08-29T09:56:54.8806688Z' (DbType = DateTime), @p152='system', @p153='True', @p154='0485154c-dde5-4732-a7aa-a379c77a5b27', @p155='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p156='f0ad77b7-e105-4fbe-bdd5-a376f03abc0d', @p157='2025-08-29T09:56:54.8806422Z' (DbType = DateTime), @p158='system', @p159='True', @p160='30000000-0000-0000-0000-000000000007', @p161='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p162='f2e9fc8e-fb0d-459e-a762-458bcc387f3b', @p163='2025-08-29T09:56:54.8805953Z' (DbType = DateTime), @p164='system', @p165='True', @p166='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p167='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p168='f8d71608-9503-4ca6-8ca5-09a1a15395de', @p169='2025-08-29T09:56:54.8806976Z' (DbType = DateTime), @p170='system', @p171='True', @p172='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p173='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p144, @p145, @p146, @p147, @p148, @p149);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p150, @p151, @p152, @p153, @p154, @p155);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p156, @p157, @p158, @p159, @p160, @p161);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p162, @p163, @p164, @p165, @p166, @p167);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p168, @p169, @p170, @p171, @p172, @p173);
2025-08-29 15:26:54.894 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:26:54.895 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 21.1287ms
2025-08-29 15:26:54.896 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:26:54.897 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 27.9183ms
2025-08-29 15:26:54.899 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:26:54.901 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:54.902 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:54.902 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:54.906 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 15:26:54.909 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:26:54.910 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.1596ms
2025-08-29 15:26:54.911 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:54.912 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.5277ms
2025-08-29 15:26:55.442 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 976
2025-08-29 15:26:55.444 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:55.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:26:55.446 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:55.449 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 15:26:55.462 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='00aa7564-956c-421b-99b9-6b3164b6d75a', @p1='21734edf-5b68-46e1-a13c-3ae18c153ee1', @p2='23e3f0ac-76d1-4340-86e8-824aa56c3c2f', @p3='25873899-3cf0-4a01-bff4-0d3001b29efd', @p4='2a30ed94-9add-4bd7-9add-bd3977048a62', @p5='2add8b84-07a8-4a25-887e-364a797808b3', @p6='331772a2-b820-4320-a6da-b748e7c83225', @p7='337d21a4-22b5-454a-b850-689a4b9c376f', @p8='51ba26c0-f588-4bf0-a7cb-2a7eaad33633', @p9='54c84786-c309-49ff-928d-b33700780298', @p10='5a62b09f-0799-40dd-9e71-d4b74fba9434', @p11='61086ef6-bcfc-47f4-8b74-a16cae131a0b', @p12='6f05d097-e4d3-49d6-b849-13af1da4d941', @p13='70f2470f-fc0e-443c-a71f-1d345791b947', @p14='73b750a1-4659-4fbb-8dcb-3d8f01f500c0', @p15='7c903536-f440-42af-a6ee-7385741e5b8c', @p16='999e322b-a0ec-4dfe-bd45-1fd93dd794a4', @p17='b2e41ae1-c21e-40af-8be3-d209c7008db3', @p18='d0e73b3d-c989-40f7-a821-207ee3f84e5f', @p19='d12c79d5-043f-4989-b8ad-d20b3a9a7f15', @p20='e8283e74-beee-49e8-9f11-97302cd8d9e3', @p21='f088b31e-33cf-416d-90dc-b005ec33e129', @p22='f0ad77b7-e105-4fbe-bdd5-a376f03abc0d', @p23='f2e9fc8e-fb0d-459e-a762-458bcc387f3b', @p24='f8d71608-9503-4ca6-8ca5-09a1a15395de', @p25='0988b11b-d2ad-4a0c-a637-88bb81fd2617', @p26='2025-08-29T09:56:55.4518504Z' (DbType = DateTime), @p27='system', @p28='True', @p29='821480c6-1464-415e-bba8-066fcb4e7e63', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='2b1c3fdc-269e-4d9e-abd7-81a5805e3c67', @p32='2025-08-29T09:56:55.4518601Z' (DbType = DateTime), @p33='system', @p34='True', @p35='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='395b9091-19f0-462f-b660-59f5e418eeb3', @p38='2025-08-29T09:56:55.4519383Z' (DbType = DateTime), @p39='system', @p40='True', @p41='30000000-0000-0000-0000-000000000003', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='420fba11-aebe-4032-84eb-249e285f77cf', @p44='2025-08-29T09:56:55.4519507Z' (DbType = DateTime), @p45='system', @p46='True', @p47='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='49c69938-0bd7-4144-97e3-c0e996e1f744', @p50='2025-08-29T09:56:55.4519328Z' (DbType = DateTime), @p51='system', @p52='True', @p53='30000000-0000-0000-0000-000000000004', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='60d614d9-2e97-4665-9794-c79350a6e880', @p56='2025-08-29T09:56:55.4519582Z' (DbType = DateTime), @p57='system', @p58='True', @p59='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='6179776b-4318-4271-8fc3-1cc1f1e6a5c9', @p62='2025-08-29T09:56:55.4519701Z' (DbType = DateTime), @p63='system', @p64='True', @p65='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='691d0b12-890d-4f14-af90-ebf643d01c40', @p68='2025-08-29T09:56:55.4519458Z' (DbType = DateTime), @p69='system', @p70='True', @p71='30000000-0000-0000-0000-000000000000', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='6b4781e4-fdce-400d-ba69-651686ed380f', @p74='2025-08-29T09:56:55.4519434Z' (DbType = DateTime), @p75='system', @p76='True', @p77='30000000-0000-0000-0000-000000000007', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='6dbcce10-6615-4d5f-9718-dfd9b626b75a', @p80='2025-08-29T09:56:55.4519245Z' (DbType = DateTime), @p81='system', @p82='True', @p83='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='808db3f2-1920-49e0-afa3-c7fe693a0ec4', @p86='2025-08-29T09:56:55.4519678Z' (DbType = DateTime), @p87='system', @p88='True', @p89='29461562-ef9c-48c0-a606-482ff57b8f95', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p91='840a08dc-3dc7-463b-ae96-2e4fc3acfd8b', @p92='2025-08-29T09:56:55.4519652Z' (DbType = DateTime), @p93='system', @p94='True', @p95='974af1f9-3caa-4857-a1a7-48462c389332', @p96='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p97='93cd2cc3-5f03-450b-a76b-171669e8ca33', @p98='2025-08-29T09:56:55.4519606Z' (DbType = DateTime), @p99='system', @p100='True', @p101='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p102='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p103='97d5d187-fec1-47c7-9d73-db43b6178e2b', @p104='2025-08-29T09:56:55.4519749Z' (DbType = DateTime), @p105='system', @p106='True', @p107='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p108='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p109='98f9591b-7849-46d3-bf02-813222708c5c', @p110='2025-08-29T09:56:55.4519407Z' (DbType = DateTime), @p111='system', @p112='True', @p113='30000000-0000-0000-0000-000000000008', @p114='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p115='a30747b9-39ef-423a-b5ed-00908abc94f8', @p116='2025-08-29T09:56:55.4518116Z' (DbType = DateTime), @p117='system', @p118='True', @p119='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p120='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p121='b2339446-19bf-45e2-9fd8-c28eb5944246', @p122='2025-08-29T09:56:55.4519533Z' (DbType = DateTime), @p123='system', @p124='True', @p125='74828fc0-e358-4cfc-b924-13719a0d9f50', @p126='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p127='bc1c0965-da32-4792-9505-b22eea28d522', @p128='2025-08-29T09:56:55.4519724Z' (DbType = DateTime), @p129='system', @p130='True', @p131='c819f1bd-422d-4609-916c-cc185fe44ab0', @p132='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p133='c05baf0b-2b7b-41b6-a125-6364d7947ad7', @p134='2025-08-29T09:56:55.4519305Z' (DbType = DateTime), @p135='system', @p136='True', @p137='30000000-0000-0000-0000-000000000001', @p138='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p139='c94cd405-2380-4f2d-92e9-0c514f4e7b58', @p140='2025-08-29T09:56:55.4519218Z' (DbType = DateTime), @p141='system', @p142='True', @p143='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p144='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p145='ccbe3958-888b-40d0-af98-ecc22a41373a', @p146='2025-08-29T09:56:55.4519149Z' (DbType = DateTime), @p147='system', @p148='True', @p149='7d7cbceb-4ce7-4835-85cd-59562487298d', @p150='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p151='e0e27519-d8d9-4b26-bdb8-697d3833445f', @p152='2025-08-29T09:56:55.4518576Z' (DbType = DateTime), @p153='system', @p154='True', @p155='9ae90cfe-3fea-4307-b024-3083c2728148', @p156='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p157='ec16d289-ce22-40df-969f-1440739bca9b', @p158='2025-08-29T09:56:55.4519556Z' (DbType = DateTime), @p159='system', @p160='True', @p161='0485154c-dde5-4732-a7aa-a379c77a5b27', @p162='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p163='f5d962c2-6fd6-432f-a061-522d7b534610', @p164='2025-08-29T09:56:55.4518546Z' (DbType = DateTime), @p165='system', @p166='True', @p167='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p168='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p169='fbcf1911-241f-4538-8f2a-2e586ef81c62', @p170='2025-08-29T09:56:55.4519281Z' (DbType = DateTime), @p171='system', @p172='True', @p173='30000000-0000-0000-0000-000000000002', @p174='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p24;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p91, @p92, @p93, @p94, @p95, @p96);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p97, @p98, @p99, @p100, @p101, @p102);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p109, @p110, @p111, @p112, @p113, @p114);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p115, @p116, @p117, @p118, @p119, @p120);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p121, @p122, @p123, @p124, @p125, @p126);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p127, @p128, @p129, @p130, @p131, @p132);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p133, @p134, @p135, @p136, @p137, @p138);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p139, @p140, @p141, @p142, @p143, @p144);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p145, @p146, @p147, @p148, @p149, @p150);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p151, @p152, @p153, @p154, @p155, @p156);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p157, @p158, @p159, @p160, @p161, @p162);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p163, @p164, @p165, @p166, @p167, @p168);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p169, @p170, @p171, @p172, @p173, @p174);
2025-08-29 15:26:55.466 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:26:55.467 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 19.206ms
2025-08-29 15:26:55.468 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 15:26:55.468 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 26.081ms
2025-08-29 15:26:55.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:26:55.473 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:26:55.474 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:55.475 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:26:55.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 15:26:55.480 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:26:55.481 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.1098ms
2025-08-29 15:26:55.482 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:26:55.483 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.2235ms
2025-08-29 15:27:00.675 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:00.678 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:00.679 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5366ms
2025-08-29 15:27:00.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:00.685 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:00.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:00.687 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:00.692 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:00.695 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:00.697 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6923ms
2025-08-29 15:27:00.698 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:00.699 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.8794ms
2025-08-29 15:27:00.781 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:00.785 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:00.787 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:00.789 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:00.794 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:00.799 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:00.801 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2553ms
2025-08-29 15:27:00.802 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:00.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.863ms
2025-08-29 15:27:00.877 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:00.880 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:00.882 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:00.883 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:00.888 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:00.892 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:00.893 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0207ms
2025-08-29 15:27:00.895 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:00.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.0352ms
2025-08-29 15:27:03.854 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:03.857 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:03.858 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:03.859 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:03.862 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:03.864 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:03.865 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5226ms
2025-08-29 15:27:03.867 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:03.868 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.5905ms
2025-08-29 15:27:03.899 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:03.902 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:03.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:03.904 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:03.909 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:03.913 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:03.916 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8145ms
2025-08-29 15:27:03.917 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:03.919 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.6208ms
2025-08-29 15:27:03.961 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:03.964 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:03.965 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:03.966 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:03.970 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:03.974 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:03.975 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.786ms
2025-08-29 15:27:03.977 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:03.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6841ms
2025-08-29 15:27:24.337 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 15:27:24.344 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.3706ms
2025-08-29 15:27:24.350 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 15:27:24.352 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.354 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:27:24.355 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 15:27:24.357 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 15:27:24.362 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 15:27:24.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 15:27:24.374 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 15:27:24.376 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 15:27:24.380 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 15:27:24.381 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 15:27:24.383 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:24.384 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 27.7493ms
2025-08-29 15:27:24.386 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:27:24.387 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 37.6229ms
2025-08-29 15:27:24.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:24.395 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1595ms
2025-08-29 15:27:24.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:24.403 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.405 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.406 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:24.411 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:24.415 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:24.418 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6198ms
2025-08-29 15:27:24.420 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.5976ms
2025-08-29 15:27:24.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:24.443 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.446 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:24.453 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:24.457 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:24.459 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1353ms
2025-08-29 15:27:24.461 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.461 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:24.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.5595ms
2025-08-29 15:27:24.474 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.479 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.480 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:24.486 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:24.491 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:24.493 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4367ms
2025-08-29 15:27:24.496 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.498 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.5124ms
2025-08-29 15:27:24.549 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:24.553 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.554 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.556 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:24.561 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:24.565 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:24.568 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.903ms
2025-08-29 15:27:24.570 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.571 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.3793ms
2025-08-29 15:27:24.599 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:27:24.603 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:27:24.603 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.605 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:27:24.610 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:27:24.614 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:27:24.615 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7984ms
2025-08-29 15:27:24.617 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:27:24.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2755ms
2025-08-29 15:29:58.959 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:29:58.963 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:29:58.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4787ms
2025-08-29 15:29:58.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:29:58.969 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:29:58.970 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:29:58.971 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:29:58.975 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:29:58.979 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:29:58.980 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0991ms
2025-08-29 15:29:58.982 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:29:58.984 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4835ms
2025-08-29 15:29:59.023 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:29:59.027 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:29:59.030 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:29:59.031 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:29:59.036 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:29:59.047 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:29:59.049 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.8497ms
2025-08-29 15:29:59.051 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:29:59.052 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.4465ms
2025-08-29 15:29:59.098 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:29:59.100 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:29:59.101 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:29:59.103 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:29:59.107 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:29:59.110 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:29:59.112 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1924ms
2025-08-29 15:29:59.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:29:59.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.6563ms
2025-08-29 15:30:48.185 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 15:30:48.188 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:30:48.189 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.5271ms
2025-08-29 15:30:48.195 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 15:30:48.197 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:30:48.198 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:30:48.198 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:30:48.201 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:30:48.203 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.8233ms
2025-08-29 15:30:48.204 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:30:48.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 9.4176ms
2025-08-29 15:30:48.861 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:30:48.863 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:30:48.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.8011ms
2025-08-29 15:30:48.866 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 15:30:48.868 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:30:48.868 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:30:48.869 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:30:48.872 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 15:30:48.873 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.6643ms
2025-08-29 15:30:48.874 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 15:30:48.875 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 8.6538ms
2025-08-29 15:31:02.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:31:02.266 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:31:02.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.5804ms
2025-08-29 15:31:02.271 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:31:02.273 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:31:02.275 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:31:02.275 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:31:02.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:31:02.283 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:31:02.284 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.9271ms
2025-08-29 15:31:02.285 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:31:02.286 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.2006ms
2025-08-29 15:31:02.344 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:31:02.347 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:31:02.348 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:31:02.349 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:31:02.353 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:31:02.357 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:31:02.359 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6751ms
2025-08-29 15:31:02.361 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:31:02.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.5599ms
2025-08-29 15:31:02.407 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:31:02.410 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:31:02.411 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:31:02.412 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:31:02.420 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:31:02.427 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:31:02.431 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.272ms
2025-08-29 15:31:02.434 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:31:02.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.9295ms
2025-08-29 15:32:27.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:32:27.184 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:32:27.185 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.2986ms
2025-08-29 15:32:27.191 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:32:27.194 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:32:27.195 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:32:27.197 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:32:27.372 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:32:27.375 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:32:27.376 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 177.1751ms
2025-08-29 15:32:27.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:32:27.378 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 187.6755ms
2025-08-29 15:32:27.385 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:32:27.387 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:32:27.388 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:32:27.389 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:32:27.393 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:32:27.396 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:32:27.397 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5568ms
2025-08-29 15:32:27.398 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:32:27.400 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.5815ms
2025-08-29 15:32:27.451 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:32:27.453 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:32:27.454 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:32:27.455 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:32:27.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:32:27.461 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:32:27.462 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0198ms
2025-08-29 15:32:27.463 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:32:27.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.4191ms
2025-08-29 15:33:56.175 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 15:33:56.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 15:33:56.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 15:33:56.215 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:33:56.216 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 15:33:56.222 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:33:56.223 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 47.7023ms
2025-08-29 15:33:56.221 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:33:56.228 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:33:56.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 13.0514ms
2025-08-29 15:33:56.232 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 50.8591ms
2025-08-29 15:33:56.232 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 15.7529ms
2025-08-29 15:33:56.237 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 15:33:56.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 15:33:56.241 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:33:56.243 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:33:56.243 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 15:33:56.244 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 15:33:56.246 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 15:33:56.246 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 15:33:56.382 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 132.9369ms
2025-08-29 15:33:56.382 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 134.2768ms
2025-08-29 15:33:56.383 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 15:33:56.384 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 15:33:56.428 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Inbox\Controllers\InboxController.cs:line 101
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 15:33:56.433 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 15:33:56.481 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 500 null application/json; charset=utf-8 244.1985ms
2025-08-29 15:33:56.481 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 500 null application/json; charset=utf-8 241.0946ms
2025-08-29 15:42:38.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:38.356 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:38.357 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.171ms
2025-08-29 15:42:38.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:38.368 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:38.370 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:38.372 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:38.376 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:38.378 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.5614ms
2025-08-29 15:42:38.380 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:38.381 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.0216ms
2025-08-29 15:42:38.421 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:38.425 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:38.426 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:38.427 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:38.429 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:38.431 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7084ms
2025-08-29 15:42:38.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:38.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.0221ms
2025-08-29 15:42:38.918 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:38.921 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:38.922 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1072ms
2025-08-29 15:42:38.925 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:38.928 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:38.929 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:38.931 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:39.098 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:39.100 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:39.102 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 169.3634ms
2025-08-29 15:42:39.104 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 180.2357ms
2025-08-29 15:42:39.106 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:39.115 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:39.116 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.117 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:39.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:39.125 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:39.127 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7292ms
2025-08-29 15:42:39.128 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.129 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:39.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.906ms
2025-08-29 15:42:39.132 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:39.137 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.138 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:39.142 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:39.145 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:39.147 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7072ms
2025-08-29 15:42:39.148 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:39.148 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.151 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:39.152 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4022ms
2025-08-29 15:42:39.153 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.157 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:39.162 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:39.165 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:39.167 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3051ms
2025-08-29 15:42:39.169 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.170 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.7309ms
2025-08-29 15:42:39.227 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:39.230 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:39.232 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.233 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:39.237 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:39.242 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:39.244 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8201ms
2025-08-29 15:42:39.245 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:39.246 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.248 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:39.250 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.5924ms
2025-08-29 15:42:39.251 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.255 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:39.260 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:39.263 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:39.265 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4232ms
2025-08-29 15:42:39.267 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:39.268 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.6357ms
2025-08-29 15:42:48.666 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:48.668 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:48.669 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3977ms
2025-08-29 15:42:48.673 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:48.675 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:48.676 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:48.676 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:48.681 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:48.684 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:48.685 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5084ms
2025-08-29 15:42:48.687 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:48.688 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0207ms
2025-08-29 15:42:48.726 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:48.731 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:48.732 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:48.734 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:48.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:48.744 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:48.745 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0108ms
2025-08-29 15:42:48.747 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:48.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.1314ms
2025-08-29 15:42:48.825 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:42:48.827 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:42:48.828 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:48.830 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:42:48.834 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:42:48.839 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:42:48.841 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0368ms
2025-08-29 15:42:48.842 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:42:48.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.5066ms
2025-08-29 15:44:53.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 15:44:53.525 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 15:44:53.525 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:44:53.532 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:44:53.535 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 18.371ms
2025-08-29 15:44:53.536 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 11.9763ms
2025-08-29 15:44:53.527 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 15:44:53.532 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 15:44:53.546 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 15:44:53.548 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:44:53.550 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:44:53.552 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:44:53.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 26.2652ms
2025-08-29 15:44:53.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 21.239ms
2025-08-29 15:44:53.556 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 15:44:53.562 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 15:44:53.563 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 15:44:53.566 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:44:53.605 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 15:44:53.606 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 15:44:53.607 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 39.93ms
2025-08-29 15:44:53.611 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 15:44:53.659 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 50.7274ms
2025-08-29 15:44:53.668 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 15:44:53.666 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 143
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 15:44:53.700 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Inbox\Controllers\InboxController.cs:line 101
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 15:44:53.708 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 500 null application/json; charset=utf-8 162.13ms
2025-08-29 15:44:53.713 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 500 null application/json; charset=utf-8 151.158ms
2025-08-29 15:46:35.142 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:46:35.148 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:46:35.149 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.6538ms
2025-08-29 15:46:35.158 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:46:35.161 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:46:35.162 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:46:35.164 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:46:35.172 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:46:35.176 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:46:35.178 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.1709ms
2025-08-29 15:46:35.181 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:46:35.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.2774ms
2025-08-29 15:46:35.194 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:46:35.197 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:46:35.198 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:46:35.199 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:46:35.205 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:46:35.208 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:46:35.209 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9262ms
2025-08-29 15:46:35.211 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:46:35.212 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.1722ms
2025-08-29 15:46:35.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:46:35.282 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:46:35.283 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:46:35.284 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:46:35.289 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:46:35.293 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:46:35.295 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3848ms
2025-08-29 15:46:35.297 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:46:35.298 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.675ms
2025-08-29 15:48:10.985 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:10.987 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:10.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4697ms
2025-08-29 15:48:10.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:11.000 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:11.001 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:11.002 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:11.181 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:11.182 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:11.184 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 179.749ms
2025-08-29 15:48:11.185 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:11.186 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 189.8494ms
2025-08-29 15:48:11.193 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:11.196 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:11.197 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:11.198 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:11.202 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:11.205 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:11.206 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6167ms
2025-08-29 15:48:11.208 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:11.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4376ms
2025-08-29 15:48:11.298 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:11.301 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:11.302 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:11.303 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:11.307 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:11.311 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:11.313 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.667ms
2025-08-29 15:48:11.315 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:11.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.9235ms
2025-08-29 15:48:21.560 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 15:48:21.562 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.563 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2697ms
2025-08-29 15:48:21.567 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 15:48:21.570 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.571 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:48:21.573 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 15:48:21.583 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 15:48:21.595 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 15:48:21.604 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 15:48:21.629 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 15:48:21.634 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 15:48:21.638 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 15:48:21.639 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 15:48:21.641 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:21.642 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 67.8518ms
2025-08-29 15:48:21.643 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:48:21.645 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 77.6609ms
2025-08-29 15:48:21.649 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:21.653 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.654 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6969ms
2025-08-29 15:48:21.660 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:21.663 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.665 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.666 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:21.671 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:21.674 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:21.675 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8762ms
2025-08-29 15:48:21.677 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8978ms
2025-08-29 15:48:21.691 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:21.694 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.695 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.696 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:21.700 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:21.704 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:21.706 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0433ms
2025-08-29 15:48:21.708 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.708 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:21.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.3626ms
2025-08-29 15:48:21.712 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.718 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.719 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:21.723 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:21.727 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:21.729 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.679ms
2025-08-29 15:48:21.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.732 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.0176ms
2025-08-29 15:48:21.781 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:21.784 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.785 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.787 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:21.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:21.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:21.797 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.759ms
2025-08-29 15:48:21.799 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:48:21.799 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.802 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:48:21.803 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.0838ms
2025-08-29 15:48:21.804 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.809 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:48:21.812 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:48:21.816 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:48:21.817 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7562ms
2025-08-29 15:48:21.818 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:48:21.819 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.8598ms
2025-08-29 15:51:29.114 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:29.117 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:29.118 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9544ms
2025-08-29 15:51:29.126 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:29.129 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:29.130 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:29.131 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:29.135 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:29.169 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:29.170 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 37.7003ms
2025-08-29 15:51:29.172 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:29.173 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 47.5165ms
2025-08-29 15:51:29.207 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:29.210 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:29.211 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:29.213 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:29.219 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:29.223 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:29.225 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3214ms
2025-08-29 15:51:29.227 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:29.228 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.8906ms
2025-08-29 15:51:29.286 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:29.289 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:29.290 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:29.291 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:29.295 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:29.298 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:29.299 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8216ms
2025-08-29 15:51:29.301 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:29.302 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.3381ms
2025-08-29 15:51:43.284 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 15:51:43.286 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.287 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.7913ms
2025-08-29 15:51:43.290 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 15:51:43.291 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.292 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:51:43.293 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 15:51:43.295 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 15:51:43.296 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 15:51:43.300 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 15:51:43.308 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 15:51:43.312 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 15:51:43.322 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 15:51:43.323 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 15:51:43.325 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:43.326 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 31.3853ms
2025-08-29 15:51:43.327 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 15:51:43.327 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 37.7481ms
2025-08-29 15:51:43.331 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:43.333 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7197ms
2025-08-29 15:51:43.336 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:43.338 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.339 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.340 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:43.342 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:43.345 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:43.346 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.7868ms
2025-08-29 15:51:43.347 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.783ms
2025-08-29 15:51:43.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:43.363 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.365 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:43.371 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:43.374 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:43.375 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.787ms
2025-08-29 15:51:43.376 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:43.376 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.379 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8167ms
2025-08-29 15:51:43.380 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.386 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:43.391 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:43.394 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:43.396 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.7533ms
2025-08-29 15:51:43.397 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.398 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.3464ms
2025-08-29 15:51:43.459 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:43.463 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.464 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.465 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:43.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:43.474 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:43.475 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8576ms
2025-08-29 15:51:43.477 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:51:43.477 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.479 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:51:43.481 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3602ms
2025-08-29 15:51:43.482 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.486 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:51:43.491 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:51:43.495 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:51:43.496 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0493ms
2025-08-29 15:51:43.497 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:51:43.499 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.2433ms
2025-08-29 15:52:37.139 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:52:37.147 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:52:37.148 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.7458ms
2025-08-29 15:52:37.183 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:52:37.186 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:52:37.187 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:52:37.189 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:52:37.195 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:52:37.208 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:52:37.210 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.9819ms
2025-08-29 15:52:37.212 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:52:37.213 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.8005ms
2025-08-29 15:52:37.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:52:37.226 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:52:37.228 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:52:37.229 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:52:37.234 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:52:37.242 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:52:37.245 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.7641ms
2025-08-29 15:52:37.247 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:52:37.248 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3278ms
2025-08-29 15:52:37.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 15:52:37.301 +05:30 [INF] CORS policy execution successful.
2025-08-29 15:52:37.302 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:52:37.303 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 15:52:37.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 15:52:37.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 15:52:37.309 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3101ms
2025-08-29 15:52:37.311 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 15:52:37.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.8681ms
2025-08-29 16:14:34.702 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:14:34.722 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:14:34.727 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 31.7379ms
2025-08-29 16:14:34.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:14:34.747 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:14:34.757 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:14:34.762 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:14:35.083 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:14:35.088 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:14:35.090 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 325.2132ms
2025-08-29 16:14:35.092 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:14:35.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 362.0543ms
2025-08-29 16:14:35.105 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:14:35.108 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:14:35.110 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:14:35.112 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:14:35.116 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:14:35.120 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:14:35.122 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.315ms
2025-08-29 16:14:35.123 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:14:35.125 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.9405ms
2025-08-29 16:14:35.227 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:14:35.231 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:14:35.232 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:14:35.233 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:14:35.242 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:14:35.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:14:35.249 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6863ms
2025-08-29 16:14:35.251 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:14:35.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.3885ms
2025-08-29 16:20:35.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:20:35.181 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:20:35.183 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0907ms
2025-08-29 16:20:35.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:20:35.197 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:20:35.200 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:20:35.202 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:20:35.445 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:20:35.452 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:20:35.455 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 250.2965ms
2025-08-29 16:20:35.458 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:20:35.459 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 267.0038ms
2025-08-29 16:20:35.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:20:35.484 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:20:35.486 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:20:35.487 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:20:35.492 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:20:35.496 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:20:35.498 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7723ms
2025-08-29 16:20:35.500 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:20:35.502 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.0847ms
2025-08-29 16:20:35.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:20:35.578 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:20:35.579 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:20:35.581 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:20:35.586 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:20:35.590 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:20:35.592 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5197ms
2025-08-29 16:20:35.594 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:20:35.595 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.7417ms
2025-08-29 16:21:58.871 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 16:21:58.876 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:21:58.877 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.7758ms
2025-08-29 16:21:58.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 16:21:58.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 16:21:58.933 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:21:58.921 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 16:21:58.944 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:21:58.945 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 26.0537ms
2025-08-29 16:21:58.951 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 18.6562ms
2025-08-29 16:21:58.949 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:21:58.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 16:21:58.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 45.4885ms
2025-08-29 16:21:58.971 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:21:58.975 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 16:21:58.976 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 16:21:58.979 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:21:58.981 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 16:21:58.982 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 16:21:58.985 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 16:21:58.993 +05:30 [INF] GetAllContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all
2025-08-29 16:21:59.006 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-29 16:21:59.026 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-29 16:21:59.046 +05:30 [INF] GetAllContactsAsync returned 3 contacts
2025-08-29 16:21:59.051 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:21:59.057 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 69.467ms
2025-08-29 16:21:59.059 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 16:21:59.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 85.3722ms
2025-08-29 16:21:59.337 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-29 16:21:59.349 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:21:59.353 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 370.4386ms
2025-08-29 16:21:59.356 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 16:21:59.358 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 392.7447ms
2025-08-29 16:22:30.313 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 16:22:30.323 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:22:30.324 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 10.7584ms
2025-08-29 16:22:30.329 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-29 16:22:30.333 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:22:30.335 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 16:22:30.337 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 16:22:30.343 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-29 16:22:30.353 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 16:22:30.364 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-29 16:22:30.369 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-29 16:22:30.383 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-29 16:22:30.385 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-29 16:22:30.387 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:22:30.389 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 49.5613ms
2025-08-29 16:22:30.391 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 16:22:30.392 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 63.4735ms
2025-08-29 16:22:30.397 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:22:30.401 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:22:30.402 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7519ms
2025-08-29 16:22:30.406 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:22:30.410 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:22:30.411 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:22:30.413 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:22:30.416 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:22:30.418 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.5789ms
2025-08-29 16:22:30.420 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:22:30.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7628ms
2025-08-29 16:22:30.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:22:30.484 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:22:30.486 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:22:30.488 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:22:30.491 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:22:30.494 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.0108ms
2025-08-29 16:22:30.496 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:22:30.498 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.6454ms
2025-08-29 16:24:43.566 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 16:24:43.585 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:24:43.586 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 20.1936ms
2025-08-29 16:24:43.598 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 16:24:43.602 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:24:43.603 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 16:24:43.605 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 16:24:43.670 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 16:24:43.681 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-29 16:24:43.697 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 89.2973ms
2025-08-29 16:24:43.699 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 16:24:43.701 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 103.4455ms
2025-08-29 16:24:47.438 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 16:24:47.442 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:24:47.444 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 16:24:47.462 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 16:24:47.531 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 16:24:47.537 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-29 16:24:47.539 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 73.9342ms
2025-08-29 16:24:47.541 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 16:24:47.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 104.7272ms
2025-08-29 16:25:06.517 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 16:25:06.528 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:06.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 16:25:06.536 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 18.8437ms
2025-08-29 16:25:06.551 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:06.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 16:25:06.557 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 28.3354ms
2025-08-29 16:25:06.560 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:06.564 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 16:25:06.565 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 16:25:06.568 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:06.570 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:25:06.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 16:25:06.577 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 16:25:06.579 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 16:25:06.582 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:25:06.585 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 11.5936ms
2025-08-29 16:25:06.587 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 16:25:06.589 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 33.3643ms
2025-08-29 16:25:06.594 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 16:25:06.599 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:06.599 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 16:25:06.600 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 6.8009ms
2025-08-29 16:25:06.608 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:25:06.609 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 16:25:06.614 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:06.615 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 32.1403ms
2025-08-29 16:25:06.616 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:25:06.617 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 16:25:06.618 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:25:06.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 56.034ms
2025-08-29 16:25:06.628 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 16:25:06.632 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:25:06.634 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 12.3157ms
2025-08-29 16:25:06.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:25:06.637 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 28.0638ms
2025-08-29 16:25:08.038 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 16:25:08.051 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:08.052 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 14.6605ms
2025-08-29 16:25:08.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 16:25:08.069 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:25:08.071 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:25:08.074 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:25:08.077 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:25:08.080 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 3.942ms
2025-08-29 16:25:08.084 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:25:08.087 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 20.4213ms
2025-08-29 16:35:36.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:35:36.745 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:35:36.747 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.5922ms
2025-08-29 16:35:36.752 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:35:36.760 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:35:36.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:35:36.763 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:35:36.984 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 16:35:36.991 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:35:36.994 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:35:36.997 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 232.4795ms
2025-08-29 16:35:36.999 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:35:37.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 249.3268ms
2025-08-29 16:35:37.017 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:35:37.021 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:35:37.023 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:35:37.024 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:35:37.028 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:35:37.033 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:35:37.035 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5233ms
2025-08-29 16:35:37.037 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:35:37.038 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.4027ms
2025-08-29 16:35:37.087 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:35:37.090 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:35:37.092 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:35:37.093 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:35:37.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:35:37.102 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:35:37.104 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.253ms
2025-08-29 16:35:37.106 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:35:37.108 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.5573ms
2025-08-29 16:36:55.287 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:36:55.292 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.295 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.611ms
2025-08-29 16:36:55.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:36:55.312 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:36:55.314 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:36:55.317 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:36:55.319 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.2696ms
2025-08-29 16:36:55.321 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:36:55.322 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.3487ms
2025-08-29 16:36:55.372 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:36:55.375 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 16:36:55.375 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 16:36:55.385 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.394 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.397 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.398 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:36:55.399 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 24.0485ms
2025-08-29 16:36:55.400 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 25.112ms
2025-08-29 16:36:55.402 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:36:55.405 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 16:36:55.409 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 16:36:55.412 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:36:55.414 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.417 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.419 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6556ms
2025-08-29 16:36:55.420 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 16:36:55.421 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 16:36:55.431 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:36:55.433 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 16:36:55.436 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:36:55.437 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 65.3772ms
2025-08-29 16:36:55.446 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 16:36:55.463 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:36:55.465 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 26.0782ms
2025-08-29 16:36:55.467 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 16:36:55.469 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 63.492ms
2025-08-29 16:36:55.660 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 16:36:55.663 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:36:55.664 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 216.2373ms
2025-08-29 16:36:55.666 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 16:36:55.668 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 258.3806ms
2025-08-29 16:36:55.672 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 16:36:55.675 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.676 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.8604ms
2025-08-29 16:36:55.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 16:36:55.685 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:55.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:36:55.688 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:36:55.691 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:36:55.694 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.9495ms
2025-08-29 16:36:55.696 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:36:55.697 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 16.6358ms
2025-08-29 16:36:57.604 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 16:36:57.608 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:57.609 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 4.843ms
2025-08-29 16:36:57.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 16:36:57.616 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:36:57.617 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:36:57.618 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:36:57.627 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:36:57.629 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 9.3349ms
2025-08-29 16:36:57.631 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:36:57.633 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 19.4604ms
2025-08-29 16:37:01.222 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 16:37:01.227 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:01.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 5.5977ms
2025-08-29 16:37:01.232 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 1015
2025-08-29 16:37:01.248 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:01.253 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 16:37:01.255 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:01.268 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 16:37:01.318 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='0988b11b-d2ad-4a0c-a637-88bb81fd2617', @p1='2b1c3fdc-269e-4d9e-abd7-81a5805e3c67', @p2='395b9091-19f0-462f-b660-59f5e418eeb3', @p3='420fba11-aebe-4032-84eb-249e285f77cf', @p4='49c69938-0bd7-4144-97e3-c0e996e1f744', @p5='60d614d9-2e97-4665-9794-c79350a6e880', @p6='6179776b-4318-4271-8fc3-1cc1f1e6a5c9', @p7='691d0b12-890d-4f14-af90-ebf643d01c40', @p8='6b4781e4-fdce-400d-ba69-651686ed380f', @p9='6dbcce10-6615-4d5f-9718-dfd9b626b75a', @p10='808db3f2-1920-49e0-afa3-c7fe693a0ec4', @p11='840a08dc-3dc7-463b-ae96-2e4fc3acfd8b', @p12='93cd2cc3-5f03-450b-a76b-171669e8ca33', @p13='97d5d187-fec1-47c7-9d73-db43b6178e2b', @p14='98f9591b-7849-46d3-bf02-813222708c5c', @p15='a30747b9-39ef-423a-b5ed-00908abc94f8', @p16='b2339446-19bf-45e2-9fd8-c28eb5944246', @p17='bc1c0965-da32-4792-9505-b22eea28d522', @p18='c05baf0b-2b7b-41b6-a125-6364d7947ad7', @p19='c94cd405-2380-4f2d-92e9-0c514f4e7b58', @p20='ccbe3958-888b-40d0-af98-ecc22a41373a', @p21='e0e27519-d8d9-4b26-bdb8-697d3833445f', @p22='ec16d289-ce22-40df-969f-1440739bca9b', @p23='f5d962c2-6fd6-432f-a061-522d7b534610', @p24='fbcf1911-241f-4538-8f2a-2e586ef81c62', @p25='031369a2-1e87-4243-8d10-9b87bdda5011', @p26='2025-08-29T11:07:01.2855377Z' (DbType = DateTime), @p27='system', @p28='True', @p29='74828fc0-e358-4cfc-b924-13719a0d9f50', @p30='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p31='134d1e05-e692-4867-9633-876191698a74', @p32='2025-08-29T11:07:01.2855779Z' (DbType = DateTime), @p33='system', @p34='True', @p35='98572fe7-d142-475a-b990-f248641809e2', @p36='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p37='1d3d2234-fdf9-4f78-a7b0-dce6d7db1946', @p38='2025-08-29T11:07:01.2855297Z' (DbType = DateTime), @p39='system', @p40='True', @p41='30000000-0000-0000-0000-000000000000', @p42='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p43='2417c6c1-6313-447b-8196-613a2a900e17', @p44='2025-08-29T11:07:01.2855063Z' (DbType = DateTime), @p45='system', @p46='True', @p47='30000000-0000-0000-0000-000000000001', @p48='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p49='2db75176-a9ba-47f3-931a-cc7557d083bf', @p50='2025-08-29T11:07:01.2855337Z' (DbType = DateTime), @p51='system', @p52='True', @p53='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p54='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p55='38525b81-308b-46b5-a9cb-68d6616e420e', @p56='2025-08-29T11:07:01.2854937Z' (DbType = DateTime), @p57='system', @p58='True', @p59='30000000-0000-0000-0000-000000000004', @p60='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p61='3adf16bd-b1df-4de7-8bfc-2dbe624dbd6d', @p62='2025-08-29T11:07:01.2854116Z' (DbType = DateTime), @p63='system', @p64='True', @p65='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p66='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p67='40d37cdf-1a99-412e-b515-dc7bb47475a0', @p68='2025-08-29T11:07:01.2855152Z' (DbType = DateTime), @p69='system', @p70='True', @p71='30000000-0000-0000-0000-000000000007', @p72='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p73='4306270e-9022-4322-aeda-4f2f4763119d', @p74='2025-08-29T11:07:01.2853953Z' (DbType = DateTime), @p75='system', @p76='True', @p77='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p78='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p79='4698b83a-2dd1-4964-b687-b63d6263d614', @p80='2025-08-29T11:07:01.2855738Z' (DbType = DateTime), @p81='system', @p82='True', @p83='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p84='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p85='51f78dcf-5c56-47f3-bbfc-1b969f7d261c', @p86='2025-08-29T11:07:01.2855418Z' (DbType = DateTime), @p87='system', @p88='True', @p89='0485154c-dde5-4732-a7aa-a379c77a5b27', @p90='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p91='60d65cf2-03be-4a2d-a2eb-5cdfc04ec2fd', @p92='2025-08-29T11:07:01.2855255Z' (DbType = DateTime), @p93='system', @p94='True', @p95='30000000-0000-0000-0000-000000000008', @p96='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p97='6ea03059-d0e1-4295-a767-e75042795149', @p98='2025-08-29T11:07:01.2853623Z' (DbType = DateTime), @p99='system', @p100='True', @p101='821480c6-1464-415e-bba8-066fcb4e7e63', @p102='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p103='6eb65c92-66c4-422b-9ede-425832326417', @p104='2025-08-29T11:07:01.2855104Z' (DbType = DateTime), @p105='system', @p106='True', @p107='30000000-0000-0000-0000-000000000002', @p108='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p109='776b963d-98a7-4c54-93b6-ba447adf34e7', @p110='2025-08-29T11:07:01.2855500Z' (DbType = DateTime), @p111='system', @p112='True', @p113='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p114='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p115='958b6f5a-0ecf-409e-ad6f-f3d1328dc3b2', @p116='2025-08-29T11:07:01.2854035Z' (DbType = DateTime), @p117='system', @p118='True', @p119='7d7cbceb-4ce7-4835-85cd-59562487298d', @p120='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p121='96414493-3876-4a8f-ae74-0fa365f67576', @p122='2025-08-29T11:07:01.2853872Z' (DbType = DateTime), @p123='system', @p124='True', @p125='9ae90cfe-3fea-4307-b024-3083c2728148', @p126='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p127='9893d938-d50c-4303-aa35-f9153377ed1d', @p128='2025-08-29T11:07:01.2853752Z' (DbType = DateTime), @p129='system', @p130='True', @p131='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p132='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p133='b780c0bc-cc93-4368-8975-e1736015957d', @p134='2025-08-29T11:07:01.2855659Z' (DbType = DateTime), @p135='system', @p136='True', @p137='29461562-ef9c-48c0-a606-482ff57b8f95', @p138='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p139='c28d7546-81c3-400d-a767-e34bb7e8aa24', @p140='2025-08-29T11:07:01.2855582Z' (DbType = DateTime), @p141='system', @p142='True', @p143='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p144='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p145='c306808f-ce9f-404b-9e78-7fc0ae22324f', @p146='2025-08-29T11:07:01.2855620Z' (DbType = DateTime), @p147='system', @p148='True', @p149='974af1f9-3caa-4857-a1a7-48462c389332', @p150='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p151='c4b7f854-75ed-4777-8e23-58e5e8e38289', @p152='2025-08-29T11:07:01.2852952Z' (DbType = DateTime), @p153='system', @p154='True', @p155='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p156='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p157='c659b25d-b914-44aa-9c1d-f5d3fcb15928', @p158='2025-08-29T11:07:01.2801990Z' (DbType = DateTime), @p159='system', @p160='True', @p161='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p162='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p163='f542e29b-4937-4651-8b6f-332378ba1151', @p164='2025-08-29T11:07:01.2855539Z' (DbType = DateTime), @p165='system', @p166='True', @p167='c819f1bd-422d-4609-916c-cc185fe44ab0', @p168='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p169='fceaab7c-679a-485f-94b2-3b7a9b564d7a', @p170='2025-08-29T11:07:01.2855818Z' (DbType = DateTime), @p171='system', @p172='True', @p173='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p174='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p175='fd0e1b70-4e6d-4984-a801-f7fc06959f49', @p176='2025-08-29T11:07:01.2855015Z' (DbType = DateTime), @p177='system', @p178='True', @p179='30000000-0000-0000-0000-000000000003', @p180='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p24;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p37, @p38, @p39, @p40, @p41, @p42);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p43, @p44, @p45, @p46, @p47, @p48);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p61, @p62, @p63, @p64, @p65, @p66);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p67, @p68, @p69, @p70, @p71, @p72);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p91, @p92, @p93, @p94, @p95, @p96);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p97, @p98, @p99, @p100, @p101, @p102);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p103, @p104, @p105, @p106, @p107, @p108);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p109, @p110, @p111, @p112, @p113, @p114);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p115, @p116, @p117, @p118, @p119, @p120);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p121, @p122, @p123, @p124, @p125, @p126);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p127, @p128, @p129, @p130, @p131, @p132);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p133, @p134, @p135, @p136, @p137, @p138);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p139, @p140, @p141, @p142, @p143, @p144);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p145, @p146, @p147, @p148, @p149, @p150);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p151, @p152, @p153, @p154, @p155, @p156);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p157, @p158, @p159, @p160, @p161, @p162);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p163, @p164, @p165, @p166, @p167, @p168);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p169, @p170, @p171, @p172, @p173, @p174);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p175, @p176, @p177, @p178, @p179, @p180);
2025-08-29 16:37:01.330 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:37:01.332 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 74.6478ms
2025-08-29 16:37:01.334 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 16:37:01.336 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 104.0973ms
2025-08-29 16:37:01.340 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 16:37:01.343 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:01.344 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:37:01.346 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:01.351 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 16:37:01.356 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:37:01.359 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 10.8642ms
2025-08-29 16:37:01.361 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:37:01.362 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 22.184ms
2025-08-29 16:37:02.499 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 1015
2025-08-29 16:37:02.502 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:02.504 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 16:37:02.505 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:02.511 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-29 16:37:02.527 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='031369a2-1e87-4243-8d10-9b87bdda5011', @p1='134d1e05-e692-4867-9633-876191698a74', @p2='1d3d2234-fdf9-4f78-a7b0-dce6d7db1946', @p3='2417c6c1-6313-447b-8196-613a2a900e17', @p4='2db75176-a9ba-47f3-931a-cc7557d083bf', @p5='38525b81-308b-46b5-a9cb-68d6616e420e', @p6='3adf16bd-b1df-4de7-8bfc-2dbe624dbd6d', @p7='40d37cdf-1a99-412e-b515-dc7bb47475a0', @p8='4306270e-9022-4322-aeda-4f2f4763119d', @p9='4698b83a-2dd1-4964-b687-b63d6263d614', @p10='51f78dcf-5c56-47f3-bbfc-1b969f7d261c', @p11='60d65cf2-03be-4a2d-a2eb-5cdfc04ec2fd', @p12='6ea03059-d0e1-4295-a767-e75042795149', @p13='6eb65c92-66c4-422b-9ede-425832326417', @p14='776b963d-98a7-4c54-93b6-ba447adf34e7', @p15='958b6f5a-0ecf-409e-ad6f-f3d1328dc3b2', @p16='96414493-3876-4a8f-ae74-0fa365f67576', @p17='9893d938-d50c-4303-aa35-f9153377ed1d', @p18='b780c0bc-cc93-4368-8975-e1736015957d', @p19='c28d7546-81c3-400d-a767-e34bb7e8aa24', @p20='c306808f-ce9f-404b-9e78-7fc0ae22324f', @p21='c4b7f854-75ed-4777-8e23-58e5e8e38289', @p22='c659b25d-b914-44aa-9c1d-f5d3fcb15928', @p23='f542e29b-4937-4651-8b6f-332378ba1151', @p24='fceaab7c-679a-485f-94b2-3b7a9b564d7a', @p25='fd0e1b70-4e6d-4984-a801-f7fc06959f49', @p26='0c8a326e-d19f-46ba-ba09-9c2710072037', @p27='2025-08-29T11:07:02.5160361Z' (DbType = DateTime), @p28='system', @p29='True', @p30='974af1f9-3caa-4857-a1a7-48462c389332', @p31='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p32='2de774bb-2dcd-4950-b136-ac8503c6f2dd', @p33='2025-08-29T11:07:02.5159943Z' (DbType = DateTime), @p34='system', @p35='True', @p36='0485154c-dde5-4732-a7aa-a379c77a5b27', @p37='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p38='47ead870-b018-43cc-87e5-14c1ab9a043c', @p39='2025-08-29T11:07:02.5157897Z' (DbType = DateTime), @p40='system', @p41='True', @p42='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p43='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p44='5818de59-2eed-44e5-95ae-94e94e29a0a3', @p45='2025-08-29T11:07:02.5159021Z' (DbType = DateTime), @p46='system', @p47='True', @p48='9ae90cfe-3fea-4307-b024-3083c2728148', @p49='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p50='76b54d83-58f6-4ddf-8c64-6ba730c53661', @p51='2025-08-29T11:07:02.5158670Z' (DbType = DateTime), @p52='system', @p53='True', @p54='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p55='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p56='76e44f71-53bd-4c83-8439-3876cb921bad', @p57='2025-08-29T11:07:02.5159670Z' (DbType = DateTime), @p58='system', @p59='True', @p60='30000000-0000-0000-0000-000000000007', @p61='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p62='771dcdf9-3671-426d-acbe-6816355888d2', @p63='2025-08-29T11:07:02.5165810Z' (DbType = DateTime), @p64='system', @p65='True', @p66='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p67='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p68='77ff9b81-3fbf-4d90-b4cc-8cc06f924a21', @p69='2025-08-29T11:07:02.5160400Z' (DbType = DateTime), @p70='system', @p71='True', @p72='29461562-ef9c-48c0-a606-482ff57b8f95', @p73='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p74='7c6d0c1a-98d8-4bd3-b0ab-9ae91bd3ce9b', @p75='2025-08-29T11:07:02.5159076Z' (DbType = DateTime), @p76='system', @p77='True', @p78='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p79='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p80='81c1a6e7-af6f-4ac4-868b-38bf60693717', @p81='2025-08-29T11:07:02.5159901Z' (DbType = DateTime), @p82='system', @p83='True', @p84='74828fc0-e358-4cfc-b924-13719a0d9f50', @p85='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p86='84d8adbf-761a-44ea-9d33-70cc927fa720', @p87='2025-08-29T11:07:02.5165735Z' (DbType = DateTime), @p88='system', @p89='True', @p90='98572fe7-d142-475a-b990-f248641809e2', @p91='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p92='923b55f6-cb77-4f15-9288-1c5e03269ed5', @p93='2025-08-29T11:07:02.5159160Z' (DbType = DateTime), @p94='system', @p95='True', @p96='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p97='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p98='92c18a55-9d48-45ed-a832-2a2d39de0058', @p99='2025-08-29T11:07:02.5160319Z' (DbType = DateTime), @p100='system', @p101='True', @p102='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p103='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p104='a05a9221-45e9-4a7d-a164-e31588040705', @p105='2025-08-29T11:07:02.5159753Z' (DbType = DateTime), @p106='system', @p107='True', @p108='30000000-0000-0000-0000-000000000008', @p109='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p110='cdf86f32-ece3-4bd7-a7eb-dae8fb006335', @p111='2025-08-29T11:07:02.5159372Z' (DbType = DateTime), @p112='system', @p113='True', @p114='30000000-0000-0000-0000-000000000002', @p115='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p116='de02a528-be55-42a3-ba40-13dac73fd193', @p117='2025-08-29T11:07:02.5159797Z' (DbType = DateTime), @p118='system', @p119='True', @p120='30000000-0000-0000-0000-000000000000', @p121='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p122='de3a9805-8877-4a21-b11e-7abc37bcd2e2', @p123='2025-08-29T11:07:02.5158797Z' (DbType = DateTime), @p124='system', @p125='True', @p126='821480c6-1464-415e-bba8-066fcb4e7e63', @p127='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p128='df28b81c-0448-451a-aa11-cc262a02c9f6', @p129='2025-08-29T11:07:02.5159293Z' (DbType = DateTime), @p130='system', @p131='True', @p132='30000000-0000-0000-0000-000000000003', @p133='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p134='e17e1a8e-2981-49e5-a975-ae0c76286a2d', @p135='2025-08-29T11:07:02.5159332Z' (DbType = DateTime), @p136='system', @p137='True', @p138='30000000-0000-0000-0000-000000000001', @p139='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p140='e46704b4-f072-477e-b71a-2b6dda9a67c7', @p141='2025-08-29T11:07:02.5159253Z' (DbType = DateTime), @p142='system', @p143='True', @p144='30000000-0000-0000-0000-000000000004', @p145='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p146='e72cfe61-26e9-49a5-b31e-d188be18ff1f', @p147='2025-08-29T11:07:02.5159856Z' (DbType = DateTime), @p148='system', @p149='True', @p150='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p151='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p152='e9e77bf0-8b82-45d8-8dc1-562464f3a37c', @p153='2025-08-29T11:07:02.5158975Z' (DbType = DateTime), @p154='system', @p155='True', @p156='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p157='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p158='eba10c36-f5b6-4f31-9da3-2801bc939e9c', @p159='2025-08-29T11:07:02.5159116Z' (DbType = DateTime), @p160='system', @p161='True', @p162='7d7cbceb-4ce7-4835-85cd-59562487298d', @p163='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p164='f1cd386c-44ea-4e11-a7c1-24dff7601f48', @p165='2025-08-29T11:07:02.5160235Z' (DbType = DateTime), @p166='system', @p167='True', @p168='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p169='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p170='fad72b61-ccc5-489c-b457-e998443c024e', @p171='2025-08-29T11:07:02.5160281Z' (DbType = DateTime), @p172='system', @p173='True', @p174='c819f1bd-422d-4609-916c-cc185fe44ab0', @p175='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p176='ffda5699-159e-4e0c-98d8-f5aadd6b9379', @p177='2025-08-29T11:07:02.5165588Z' (DbType = DateTime), @p178='system', @p179='True', @p180='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p181='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p20;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p21;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p22;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p23;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p24;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p25;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p44, @p45, @p46, @p47, @p48, @p49);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p50, @p51, @p52, @p53, @p54, @p55);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p56, @p57, @p58, @p59, @p60, @p61);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p74, @p75, @p76, @p77, @p78, @p79);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p80, @p81, @p82, @p83, @p84, @p85);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p86, @p87, @p88, @p89, @p90, @p91);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p92, @p93, @p94, @p95, @p96, @p97);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p98, @p99, @p100, @p101, @p102, @p103);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p104, @p105, @p106, @p107, @p108, @p109);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p110, @p111, @p112, @p113, @p114, @p115);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p116, @p117, @p118, @p119, @p120, @p121);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p122, @p123, @p124, @p125, @p126, @p127);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p128, @p129, @p130, @p131, @p132, @p133);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p134, @p135, @p136, @p137, @p138, @p139);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p140, @p141, @p142, @p143, @p144, @p145);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p146, @p147, @p148, @p149, @p150, @p151);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p152, @p153, @p154, @p155, @p156, @p157);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p158, @p159, @p160, @p161, @p162, @p163);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p164, @p165, @p166, @p167, @p168, @p169);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p170, @p171, @p172, @p173, @p174, @p175);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p176, @p177, @p178, @p179, @p180, @p181);
2025-08-29 16:37:02.533 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:37:02.535 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 28.0014ms
2025-08-29 16:37:02.537 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-29 16:37:02.539 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 39.8327ms
2025-08-29 16:37:02.543 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-29 16:37:02.546 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:02.547 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:37:02.548 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:02.555 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 16:37:02.559 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:37:02.560 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 10.023ms
2025-08-29 16:37:02.563 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:37:02.564 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 21.2272ms
2025-08-29 16:37:07.256 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:37:07.260 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:07.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7764ms
2025-08-29 16:37:07.268 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:37:07.272 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:07.273 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:07.275 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:07.282 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:37:07.287 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:37:07.289 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3083ms
2025-08-29 16:37:07.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:07.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4867ms
2025-08-29 16:37:07.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:37:07.325 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:07.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:07.330 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:07.337 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:37:07.343 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:37:07.345 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.4421ms
2025-08-29 16:37:07.347 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:07.349 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.2233ms
2025-08-29 16:37:07.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:37:07.393 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:07.395 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:07.397 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:07.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:37:07.407 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:37:07.408 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8193ms
2025-08-29 16:37:07.410 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:07.412 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.4872ms
2025-08-29 16:37:31.883 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 16:37:31.891 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:31.893 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 10.4985ms
2025-08-29 16:37:31.934 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 16:37:31.938 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:31.939 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 16:37:31.940 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 16:37:32.082 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 138.2802ms
2025-08-29 16:37:32.085 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 16:37:32.130 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 16:37:32.181 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 247.1912ms
2025-08-29 16:37:32.676 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/users/by-business - null null
2025-08-29 16:37:32.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/users/by-business - 404 0 null 16.0308ms
2025-08-29 16:37:32.700 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/users/by-business, Response status code: 404
2025-08-29 16:37:32.955 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/permissions - null null
2025-08-29 16:37:32.960 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/permissions - 404 0 null 4.766ms
2025-08-29 16:37:32.970 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/permissions, Response status code: 404
2025-08-29 16:37:34.209 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:37:34.214 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:34.215 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7268ms
2025-08-29 16:37:34.220 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:37:34.224 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:34.225 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:34.229 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:34.233 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:37:34.235 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.0555ms
2025-08-29 16:37:34.237 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:37:34.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.3706ms
2025-08-29 16:37:44.747 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 16:37:44.760 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:44.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 15.0828ms
2025-08-29 16:37:44.767 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-29 16:37:44.772 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:44.774 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 16:37:44.779 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-29 16:37:44.811 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-29 16:37:44.814 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:37:44.817 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 33.8057ms
2025-08-29 16:37:44.819 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-29 16:37:44.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 53.1074ms
2025-08-29 16:37:45.946 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - null null
2025-08-29 16:37:45.951 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:45.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - 204 null null 6.7557ms
2025-08-29 16:37:45.958 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - null null
2025-08-29 16:37:45.965 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:45.969 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-29 16:37:46.132 +05:30 [INF] Route matched with {action = "GetAll", controller = "FailedWebhookLogs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync() on controller xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController (xbytechat.api).
2025-08-29 16:37:46.383 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='100'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
ORDER BY f."CreatedAt" DESC
LIMIT @__p_0
2025-08-29 16:37:46.392 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Webhooks.Models.FailedWebhookLog, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:37:46.450 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api) in 313.9267ms
2025-08-29 16:37:46.454 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-29 16:37:46.456 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - 200 null application/json; charset=utf-8 497.6196ms
2025-08-29 16:37:47.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - null null
2025-08-29 16:37:47.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - null null
2025-08-29 16:37:47.225 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:47.225 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:47.226 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - 204 null null 49.9057ms
2025-08-29 16:37:47.230 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - 204 null null 53.9146ms
2025-08-29 16:37:47.241 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - null null
2025-08-29 16:37:47.246 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - null null
2025-08-29 16:37:47.252 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:47.252 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:47.255 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-29 16:37:47.255 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-29 16:37:47.261 +05:30 [INF] Route matched with {action = "GetFailedCount", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFailedCount() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-29 16:37:47.262 +05:30 [INF] Route matched with {action = "GetCleanupStatus", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCleanupStatus() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-29 16:37:47.290 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-29 16:37:47.303 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "FailedWebhookLogs" AS f
2025-08-29 16:37:47.345 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2025-08-29 16:37:47.420 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api) in 156.5806ms
2025-08-29 16:37:47.422 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-29 16:37:47.424 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - 200 null application/json; charset=utf-8 182.361ms
2025-08-29 16:37:47.430 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-29 16:37:47.562 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-29 16:37:47.657 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType87`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:37:47.684 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api) in 417.5294ms
2025-08-29 16:37:47.686 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-29 16:37:47.688 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - 200 null application/json; charset=utf-8 441.8511ms
2025-08-29 16:37:48.004 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-29 16:37:48.007 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-29 16:37:48.009 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:48.014 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:48.015 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 10.8134ms
2025-08-29 16:37:48.017 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 9.0886ms
2025-08-29 16:37:48.023 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-29 16:37:48.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-29 16:37:48.030 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:48.033 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:48.035 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 16:37:48.036 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 16:37:48.037 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-29 16:37:48.038 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:48.046 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-29 16:37:48.050 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-29 16:37:48.054 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:37:48.056 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:37:48.057 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 16.677ms
2025-08-29 16:37:48.059 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 15.4109ms
2025-08-29 16:37:48.061 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-29 16:37:48.063 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-29 16:37:48.065 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 42.1221ms
2025-08-29 16:37:48.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 40.2524ms
2025-08-29 16:37:48.081 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 16:37:48.086 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:48.087 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 6.4661ms
2025-08-29 16:37:48.092 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-29 16:37:48.097 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:37:48.103 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:37:48.104 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:37:48.107 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:37:48.109 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.9225ms
2025-08-29 16:37:48.111 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-29 16:37:48.112 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 19.829ms
2025-08-29 16:38:00.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/businesses/approved - null null
2025-08-29 16:38:00.891 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:38:00.892 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/businesses/approved - 204 null null 69.4434ms
2025-08-29 16:38:00.925 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/businesses/approved - null null
2025-08-29 16:38:01.029 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:38:01.597 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (SuperAdmin)
2025-08-29 16:38:01.629 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-29 16:38:01.631 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/businesses/approved - 403 0 null 706.0544ms
2025-08-29 16:38:21.187 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - null null
2025-08-29 16:38:21.191 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:38:21.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&search= - 204 null null 6.9145ms
2025-08-29 16:38:21.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-08-29 16:38:21.202 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:38:21.203 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 16:38:21.207 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 16:38:21.309 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-29 16:38:21.321 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 16:38:21.340 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 16:38:21.374 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 16:38:21.378 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 16:38:21.404 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 16:38:21.442 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:38:21.827 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 617.6922ms
2025-08-29 16:38:21.829 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 16:38:21.830 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 448.6541ms
2025-08-29 16:38:21.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 633.2938ms
2025-08-29 16:38:21.833 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 16:38:22.020 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 16:38:22.083 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 743.0204ms
2025-08-29 16:38:24.516 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 16:38:24.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - null null
2025-08-29 16:38:24.528 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 16:38:24.531 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:38:24.533 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 16:38:24.534 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 16:38:24.685 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 16:38:24.830 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 292.7803ms
2025-08-29 16:38:24.832 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-29 16:38:24.833 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 16:38:24.941 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 16:38:24.901 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.TagsController.GetAllTags() in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\TagsController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 16:38:24.947 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 16:38:24.958 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 500 null application/json; charset=utf-8 441.6919ms
2025-08-29 16:38:24.958 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:38:24.967 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 136.1876ms
2025-08-29 16:38:24.969 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 16:38:24.971 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&search= - 200 null application/json; charset=utf-8 450.6197ms
2025-08-29 16:43:56.120 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-29 16:43:56.145 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 25.1671ms
2025-08-29 16:43:56.488 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-29 16:43:56.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 253.7724ms
2025-08-29 16:45:57.790 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 16:45:57.809 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 16:45:57.825 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:45:57.822 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 16:45:57.839 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 50.5433ms
2025-08-29 16:45:57.837 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:45:57.822 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 16:45:57.853 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:45:57.858 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 50.6508ms
2025-08-29 16:45:57.863 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:45:57.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 41.8321ms
2025-08-29 16:45:57.870 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 47.9868ms
2025-08-29 16:45:57.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 16:45:57.880 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 16:45:57.884 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:45:57.888 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:45:57.888 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 16:45:57.890 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 16:45:57.890 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 16:45:57.891 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 16:45:57.896 +05:30 [INF] GetAllContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all
2025-08-29 16:45:58.096 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-29 16:45:58.105 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-29 16:45:58.108 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:45:58.110 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 213.442ms
2025-08-29 16:45:58.112 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 16:45:58.114 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 233.0679ms
2025-08-29 16:45:58.203 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-29 16:45:58.207 +05:30 [INF] GetAllContactsAsync returned 3 contacts
2025-08-29 16:45:58.209 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:45:58.211 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 316.9302ms
2025-08-29 16:45:58.213 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 16:45:58.214 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 338.8788ms
2025-08-29 16:51:27.409 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:27.420 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:27.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.0393ms
2025-08-29 16:51:27.435 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:27.438 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:27.440 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:27.442 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:27.921 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:27.925 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:27.930 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 485.7669ms
2025-08-29 16:51:27.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:27.934 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 498.3675ms
2025-08-29 16:51:29.703 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:29.707 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:29.712 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:29.714 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:29.729 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:29.746 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:29.749 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 29.7879ms
2025-08-29 16:51:29.753 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:29.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 52.9641ms
2025-08-29 16:51:29.850 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 16:51:29.959 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:29.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 16:51:29.878 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-29 16:51:29.965 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 115.4156ms
2025-08-29 16:51:29.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-29 16:51:29.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:30.078 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:30.101 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:30.124 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:30.130 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:30.143 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:30.135 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 256.9462ms
2025-08-29 16:51:30.140 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 251.3027ms
2025-08-29 16:51:30.134 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 222.2982ms
2025-08-29 16:51:30.145 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:30.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-29 16:51:30.165 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-29 16:51:30.178 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:30.181 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:30.188 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:30.190 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 16:51:30.192 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:30.194 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 16:51:30.196 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 16:51:30.200 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 26.318ms
2025-08-29 16:51:30.204 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-29 16:51:30.207 +05:30 [INF] GetAllContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all
2025-08-29 16:51:30.209 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:30.224 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-29 16:51:30.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 319.1773ms
2025-08-29 16:51:30.324 +05:30 [INF] GetAllContactsAsync returned 3 contacts
2025-08-29 16:51:30.336 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:51:30.355 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 148.6552ms
2025-08-29 16:51:30.386 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-29 16:51:30.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 258.0506ms
2025-08-29 16:51:30.612 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-29 16:51:30.621 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-29 16:51:30.624 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:30.628 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 415.0642ms
2025-08-29 16:51:30.631 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-29 16:51:30.632 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 467.6928ms
2025-08-29 16:51:42.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-29 16:51:42.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 16:51:42.396 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:42.402 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 10.6776ms
2025-08-29 16:51:42.403 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:42.407 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-29 16:51:42.408 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 15.7794ms
2025-08-29 16:51:42.412 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:42.417 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 16:51:42.418 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 16:51:42.422 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:42.423 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 16:51:42.426 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 16:51:42.427 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-29 16:51:42.429 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 16:51:42.436 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 16:51:42.444 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 16:51:42.447 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-29 16:51:42.449 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:51:42.452 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:42.454 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 27.4786ms
2025-08-29 16:51:42.457 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 20.4713ms
2025-08-29 16:51:42.458 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 16:51:42.460 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 16:51:42.461 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 53.9734ms
2025-08-29 16:51:42.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 45.8626ms
2025-08-29 16:51:46.996 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 16:51:47.002 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:47.004 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.4546ms
2025-08-29 16:51:47.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 16:51:47.015 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:47.029 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29-08-2025 11:21:43 AM', Current time (UTC): '29-08-2025 11:21:47 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-29 16:51:47.047 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29-08-2025 11:21:43 AM', Current time (UTC): '29-08-2025 11:21:47 AM'.
2025-08-29 16:51:47.050 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 16:51:47.051 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 16:51:47.064 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:47.074 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 19.973ms
2025-08-29 16:51:47.077 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 16:51:47.137 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 16:51:47.202 +05:30 [ERR] Response has already started, unable to write error response for path: /api/campaign/get-image-campaign
2025-08-29 16:51:47.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 401 null application/json 195.7486ms
2025-08-29 16:51:53.362 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 16:51:53.366 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.368 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.9251ms
2025-08-29 16:51:53.373 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 16:51:53.378 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.380 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 16:51:53.381 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 16:51:53.385 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-29 16:51:53.394 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 16:51:53.409 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 16:51:53.441 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 16:51:53.446 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-29 16:51:53.451 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 16:51:53.454 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 16:51:53.456 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:53.458 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 74.6982ms
2025-08-29 16:51:53.460 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 16:51:53.462 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 88.8347ms
2025-08-29 16:51:53.466 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:53.469 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1017ms
2025-08-29 16:51:53.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:53.485 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.487 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.488 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:53.497 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:53.502 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:53.504 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.8279ms
2025-08-29 16:51:53.506 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.508 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.8199ms
2025-08-29 16:51:53.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:53.541 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.542 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.545 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:53.551 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:53.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:53.559 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1539ms
2025-08-29 16:51:53.561 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:53.561 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.565 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.566 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.8159ms
2025-08-29 16:51:53.568 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.573 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:53.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:53.585 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:53.587 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4443ms
2025-08-29 16:51:53.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.591 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.6531ms
2025-08-29 16:51:53.664 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:53.668 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.670 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.671 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:53.678 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:53.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:53.685 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.799ms
2025-08-29 16:51:53.686 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:51:53.687 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.690 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:53.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.4583ms
2025-08-29 16:51:53.694 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.699 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:51:53.705 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:51:53.710 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:51:53.712 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.9463ms
2025-08-29 16:51:53.714 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:51:53.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.6074ms
2025-08-29 16:51:58.320 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 16:51:58.327 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:58.329 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.9118ms
2025-08-29 16:51:58.335 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 16:51:58.340 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:51:58.342 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 16:51:58.343 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 16:51:58.361 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 16:51:58.364 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:51:58.366 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 20.45ms
2025-08-29 16:51:58.368 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 16:51:58.370 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 34.1691ms
2025-08-29 16:52:02.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null null
2025-08-29 16:52:02.616 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:52:02.617 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 204 null null 5.8118ms
2025-08-29 16:52:02.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null null
2025-08-29 16:52:02.628 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:52:02.629 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-29 16:52:02.631 +05:30 [INF] Route matched with {action = "GetCampaignRecipients", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignRecipients(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 16:52:02.644 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__businessId_1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Name", c0."PhoneNumber", c0."Email", c0."LeadSource", c0."CreatedAt"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c0."BusinessId" = @__businessId_1
2025-08-29 16:52:02.649 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:52:02.651 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api) in 18.085ms
2025-08-29 16:52:02.653 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-29 16:52:02.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 200 null application/json; charset=utf-8 30.9527ms
2025-08-29 16:52:15.036 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 16:52:15.040 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:52:15.042 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.6987ms
2025-08-29 16:52:15.048 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 16:52:15.051 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:52:15.052 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 16:52:15.054 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 16:52:15.061 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 16:52:15.065 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:52:15.067 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.3629ms
2025-08-29 16:52:15.069 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 16:52:15.070 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 22.3625ms
2025-08-29 16:52:18.212 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null null
2025-08-29 16:52:18.247 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:52:18.250 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 204 null null 37.4796ms
2025-08-29 16:52:18.260 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - null 0
2025-08-29 16:52:18.270 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:52:18.279 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 16:52:18.291 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 16:52:21.489 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 16:52:21.510 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 16:52:21.521 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 16:52:21.540 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 16:52:21.543 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=200&apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 16:52:24.609 +05:30 [INF] Received HTTP response headers after 3063.0874ms - 200
2025-08-29 16:52:24.611 +05:30 [INF] End processing HTTP request after 3072.1947ms - 200
2025-08-29 16:52:24.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 16:52:24.670 +05:30 [INF] Pinnacle POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd | Headers => apikey:433e... | x-api-key:433e... | Authorization:Apik... | Accept:appl...
2025-08-29 16:52:24.671 +05:30 [INF] Start processing HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 16:52:24.673 +05:30 [INF] Sending HTTP request POST https://partnersv1.pinbot.ai/v3/337117692828294/messages?apikey=433e607d-5965-11ef-b1d4-02c8a5e042bd
2025-08-29 16:52:27.506 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI1MjExNDliZC04N2ZhLTRkODItYjQxMy0yNjE4NWJlMTdmMGQiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2Fib3V0LXVzIiwiaWF0IjoxNzU2NDY2NTQ0LCJleHAiOjE3NTkwNTg1NDR9.MowfwfRGzW_v9O9Vu8m9iq3E1-3579xHpatU2jnxju4 - null null
2025-08-29 16:52:27.510 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 16:52:27.512 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 16:52:27.531 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__p_cid_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 16:52:27.534 +05:30 [WRN] SendLog not found for click cid="521149bd-87fa-4d82-b413-26185be17f0d"
2025-08-29 16:52:27.550 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='94543ff9-8f88-46d0-90be-1e705800ab94', @p1='0', @p2='Try Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='521149bd-87fa-4d82-b413-26185be17f0d', @p5='web' (Nullable = false), @p6='2025-08-29T11:22:27.5217710Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/about-us' (Nullable = false), @p9='::1' (Nullable = false), @p10='facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 16:52:27.554 +05:30 [INF] CLICK WRITE-THROUGH cid="521149bd-87fa-4d82-b413-26185be17f0d" idx=0 type=web dest=https://www.mindsmiratus.com/about-us
2025-08-29 16:52:27.559 +05:30 [INF] CLICK ENQUEUE cid="521149bd-87fa-4d82-b413-26185be17f0d" idx=0 enqueued=true
2025-08-29 16:52:27.570 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 16:52:27.575 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/about-us.
2025-08-29 16:52:27.578 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 63.6112ms
2025-08-29 16:52:27.579 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 16:52:27.581 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI1MjExNDliZC04N2ZhLTRkODItYjQxMy0yNjE4NWJlMTdmMGQiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2Fib3V0LXVzIiwiaWF0IjoxNzU2NDY2NTQ0LCJleHAiOjE3NTkwNTg1NDR9.MowfwfRGzW_v9O9Vu8m9iq3E1-3579xHpatU2jnxju4 - 302 0 null 74.9805ms
2025-08-29 16:52:28.601 +05:30 [INF] Received HTTP response headers after 3927.2417ms - 200
2025-08-29 16:52:28.603 +05:30 [INF] End processing HTTP request after 3931.791ms - 200
2025-08-29 16:52:28.655 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='66db345e-ed5a-466a-91d5-63930a0a5979', @p1='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793' (Nullable = true), @p5='003017dc-a7be-4baa-a158-3c88f3f9f819' (Nullable = true), @p6='2025-08-29T11:22:28.6087170Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='busiorbit_live_baseurl' (Nullable = false), @p11='wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSMzU4QzA0QTZBM0UwMjM2RjAwAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+919990033746","wa_id":"919990033746"}],"messages":[{"id":"wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSMzU4QzA0QTZBM0UwMjM2RjAwAA==","message_status":"accepted"}]}', @p13='+919990033746' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T11:22:28.6087171Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='521149bd-87fa-4d82-b413-26185be17f0d', @p20='True', @p21=NULL, @p22='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p23='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='003017dc-a7be-4baa-a158-3c88f3f9f819', @p28=NULL, @p29='2025-08-29T11:22:28.6138384Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Your business growth is about to accelerate. 📈 BusiOrbit is officially live and ready to help you achieve 80-90% growth in one month. 🚀

Claim your free 14-day trial (no credit card required). ✨💳

Limited Time Offer: Subscribe by [Insert Date, e.g., Sept 4th] to get a 20% extra discount 💰 and 1000 free messages! 🎉' (Nullable = false), @p41='wamid.HBgMOTE5OTkwMDMzNzQ2FQIAERgSMzU4QzA0QTZBM0UwMjM2RjAwAA==', @p42='66db345e-ed5a-466a-91d5-63930a0a5979' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='2cac0548-5888-48e1-a4b4-8aea6adfb022', @p45='0', @p46='Sent', @p47='2025-08-29T11:22:28.6138385Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='busiorbit_live_baseurl', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 16:52:31.073 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 16:52:31.076 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 12780.3865ms
2025-08-29 16:52:31.078 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 16:52:31.080 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793 - 200 null application/json; charset=utf-8 12820.1754ms
2025-08-29 16:53:00.161 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:53:00.176 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:00.178 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 16.3873ms
2025-08-29 16:53:00.184 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:53:00.195 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:00.197 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:53:00.199 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:53:00.326 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 16:53:00.331 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 16:53:00.334 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 131.4214ms
2025-08-29 16:53:00.337 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:53:00.339 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 154.6622ms
2025-08-29 16:53:00.592 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:53:00.597 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:00.598 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 6.2044ms
2025-08-29 16:53:00.604 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:53:00.608 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:00.609 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:53:00.611 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:53:00.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 16:53:00.633 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 16:53:00.638 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:00.642 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 27.0531ms
2025-08-29 16:53:00.644 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:53:00.645 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 41.8476ms
2025-08-29 16:53:03.195 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:03.199 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:03.201 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 6.0484ms
2025-08-29 16:53:03.207 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:03.216 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:03.218 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:03.220 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:03.229 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:03.238 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:03.243 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:03.246 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 23.3413ms
2025-08-29 16:53:03.248 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:03.249 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 42.1364ms
2025-08-29 16:53:07.514 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:07.519 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:07.520 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:07.522 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:07.529 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:07.537 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:07.540 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:07.543 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 17.6296ms
2025-08-29 16:53:07.545 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:07.546 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 32.4788ms
2025-08-29 16:53:11.401 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:11.405 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:11.407 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 5.8408ms
2025-08-29 16:53:11.412 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:11.416 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:11.418 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:11.420 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:11.425 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:11.432 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:11.435 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:11.437 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 14.6858ms
2025-08-29 16:53:11.438 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:11.440 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 27.5139ms
2025-08-29 16:53:21.784 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:21.789 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:21.790 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 6.7198ms
2025-08-29 16:53:21.802 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:21.806 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:21.807 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:21.809 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:21.819 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:21.830 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:21.833 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:21.834 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 21.1577ms
2025-08-29 16:53:21.836 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:21.838 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 36.3581ms
2025-08-29 16:53:37.078 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:37.083 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:37.084 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 6.9501ms
2025-08-29 16:53:37.090 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:37.094 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:37.096 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:37.098 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:37.102 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:37.110 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:37.113 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:37.115 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 15.215ms
2025-08-29 16:53:37.117 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:37.119 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 29.0593ms
2025-08-29 16:53:39.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:39.738 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:39.741 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:39.743 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:39.748 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:39.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:39.767 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:39.773 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 27.2686ms
2025-08-29 16:53:39.775 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:39.777 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 45.3035ms
2025-08-29 16:53:46.324 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:46.328 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:46.330 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 5.5884ms
2025-08-29 16:53:46.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:46.342 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:46.344 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:46.346 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:46.354 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:46.360 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:46.364 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:46.366 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 16.5373ms
2025-08-29 16:53:46.368 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:46.369 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 30.946ms
2025-08-29 16:53:58.647 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:58.651 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:58.652 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 4.8073ms
2025-08-29 16:53:58.657 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:53:58.661 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:53:58.663 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:58.665 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:53:58.669 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:53:58.677 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:53:58.680 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:53:58.682 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 15.8015ms
2025-08-29 16:53:58.685 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:53:58.686 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 29.3612ms
2025-08-29 16:54:04.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:04.239 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:04.240 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 4.9966ms
2025-08-29 16:54:04.245 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:04.249 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:04.252 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:04.253 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:04.260 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:04.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:04.269 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:04.272 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 15.5312ms
2025-08-29 16:54:04.274 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:04.276 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 30.4516ms
2025-08-29 16:54:21.585 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:21.595 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:21.597 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 11.5388ms
2025-08-29 16:54:21.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:21.619 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:21.621 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:21.622 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:21.629 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:21.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:21.640 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:21.643 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 18.3352ms
2025-08-29 16:54:21.645 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:21.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 31.6452ms
2025-08-29 16:54:24.496 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:24.499 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:24.501 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:24.502 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:24.509 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:24.516 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:24.520 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:24.521 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 16.0825ms
2025-08-29 16:54:24.524 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:24.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 30.7184ms
2025-08-29 16:54:26.645 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:26.649 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:26.650 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 5.6369ms
2025-08-29 16:54:26.667 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:26.671 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:26.672 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:26.674 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:26.680 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:26.688 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:26.692 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:26.694 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 16.5913ms
2025-08-29 16:54:26.696 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:26.698 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 30.3863ms
2025-08-29 16:54:34.000 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:34.005 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:34.007 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 6.9146ms
2025-08-29 16:54:34.016 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:34.020 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:34.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:34.024 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:34.030 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:34.041 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:34.044 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:34.046 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 19.7486ms
2025-08-29 16:54:34.049 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:34.051 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 34.5368ms
2025-08-29 16:54:44.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:44.913 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:44.915 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 12.3846ms
2025-08-29 16:54:44.923 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:44.929 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:44.930 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:44.932 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:44.938 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:44.946 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:44.949 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:44.950 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 15.7573ms
2025-08-29 16:54:44.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:44.954 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 31.0171ms
2025-08-29 16:54:47.773 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:47.778 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:47.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:47.781 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:47.788 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:47.795 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:47.798 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:47.801 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 16.7645ms
2025-08-29 16:54:47.805 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:47.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 33.9861ms
2025-08-29 16:54:51.007 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:54:51.012 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.1349ms
2025-08-29 16:54:51.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:54:51.022 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.024 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:54:51.027 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:54:51.033 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:54:51.038 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:54:51.041 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8471ms
2025-08-29 16:54:51.043 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:54:51.045 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.6916ms
2025-08-29 16:54:51.134 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:54:51.138 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.141 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:54:51.143 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:54:51.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:54:51.156 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:54:51.159 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8143ms
2025-08-29 16:54:51.161 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:54:51.162 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.1137ms
2025-08-29 16:54:51.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:54:51.206 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:54:51.210 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.213 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.214 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 7.6061ms
2025-08-29 16:54:51.215 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:54:51.219 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:54:51.220 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:54:51.223 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.227 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:54:51.229 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:54:51.232 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:54:51.237 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:54:51.242 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6669ms
2025-08-29 16:54:51.245 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 16:54:51.249 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:54:51.253 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 16:54:51.255 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 48.9945ms
2025-08-29 16:54:51.257 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 17.344ms
2025-08-29 16:54:51.264 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:54:51.266 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 47.332ms
2025-08-29 16:54:51.704 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:54:51.708 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.709 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 5.0098ms
2025-08-29 16:54:51.714 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:54:51.718 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:51.719 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:54:51.721 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:54:51.726 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 16:54:51.735 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 16:54:51.739 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:51.741 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 17.1707ms
2025-08-29 16:54:51.742 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:54:51.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 30.232ms
2025-08-29 16:54:53.285 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:53.289 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:53.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 5.2482ms
2025-08-29 16:54:53.309 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:53.313 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:53.315 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:53.318 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:53.326 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:53.335 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:53.340 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:53.342 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 20.2122ms
2025-08-29 16:54:53.344 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:53.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 37.4819ms
2025-08-29 16:54:56.405 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:54:56.411 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:56.413 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:56.416 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:56.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:56.448 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:56.452 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:56.454 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 35.0978ms
2025-08-29 16:54:56.456 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:56.458 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 52.4581ms
2025-08-29 16:54:58.667 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 16:54:58.671 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:58.673 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 5.816ms
2025-08-29 16:54:58.679 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 16:54:58.683 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:54:58.684 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:58.686 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:54:58.691 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:54:58.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:54:58.703 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:54:58.705 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 16.8912ms
2025-08-29 16:54:58.707 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:54:58.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 30.3294ms
2025-08-29 16:55:01.584 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 16:55:01.588 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:01.591 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:55:01.595 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:55:01.601 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:55:01.608 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:55:01.611 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:55:01.613 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 15.0947ms
2025-08-29 16:55:01.616 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:55:01.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 33.8959ms
2025-08-29 16:55:04.384 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:55:04.391 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:04.393 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.2097ms
2025-08-29 16:55:04.397 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:55:04.401 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:04.402 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:55:04.404 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:55:04.411 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:55:04.416 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:55:04.418 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6347ms
2025-08-29 16:55:04.420 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:55:04.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.9118ms
2025-08-29 16:55:04.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:55:04.452 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:04.454 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:55:04.456 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:55:04.462 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:55:04.468 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:55:04.470 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4833ms
2025-08-29 16:55:04.471 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:55:04.473 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.4001ms
2025-08-29 16:55:04.514 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:55:04.514 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:55:04.518 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:04.521 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:04.523 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:55:04.524 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 10.5784ms
2025-08-29 16:55:04.526 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:55:04.530 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:55:04.536 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:55:04.540 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:04.543 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:55:04.544 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:55:04.545 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3998ms
2025-08-29 16:55:04.547 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:55:04.548 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:55:04.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.5358ms
2025-08-29 16:55:04.555 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 16:55:04.565 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 16:55:04.566 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 15.2372ms
2025-08-29 16:55:04.569 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:55:04.570 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 39.5749ms
2025-08-29 16:55:05.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:55:05.025 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:05.026 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 4.9762ms
2025-08-29 16:55:05.030 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:55:05.033 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:05.035 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:55:05.037 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:55:05.043 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 16:55:05.050 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 16:55:05.054 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:55:05.056 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 17.6004ms
2025-08-29 16:55:05.059 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:55:05.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 29.6848ms
2025-08-29 16:55:06.559 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:55:06.564 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:06.565 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 5.8899ms
2025-08-29 16:55:06.571 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:55:06.576 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:55:06.578 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:55:06.580 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:55:06.585 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:55:06.595 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:55:06.599 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:55:06.601 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 18.2107ms
2025-08-29 16:55:06.603 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:55:06.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 32.9445ms
2025-08-29 16:56:41.434 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:56:41.444 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:56:41.445 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 11.4147ms
2025-08-29 16:56:41.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:56:41.459 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:56:41.460 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:41.462 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:56:41.676 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:56:41.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:56:41.686 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:56:41.688 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 222.656ms
2025-08-29 16:56:41.689 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:41.691 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 237.2183ms
2025-08-29 16:56:44.885 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:56:44.890 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:56:44.892 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:44.893 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:56:44.899 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:56:44.926 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:56:44.930 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:56:44.932 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 35.468ms
2025-08-29 16:56:44.933 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:44.935 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 49.9962ms
2025-08-29 16:56:47.937 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 16:56:47.940 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:56:47.941 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 4.3553ms
2025-08-29 16:56:47.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 16:56:47.947 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:56:47.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:47.950 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:56:47.953 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:56:47.960 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:56:47.963 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:56:47.964 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 12.8827ms
2025-08-29 16:56:47.965 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:47.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 21.6831ms
2025-08-29 16:56:50.100 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:56:50.103 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:56:50.104 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 4.4044ms
2025-08-29 16:56:50.108 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:56:50.111 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:56:50.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:50.113 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:56:50.136 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:56:50.142 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:56:50.144 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:56:50.146 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 30.5882ms
2025-08-29 16:56:50.147 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:56:50.148 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 40.2904ms
2025-08-29 16:57:02.908 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:57:02.913 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:02.915 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0909ms
2025-08-29 16:57:02.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:57:02.924 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:02.926 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:57:02.928 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:57:02.936 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:57:02.941 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:57:02.944 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.9446ms
2025-08-29 16:57:02.946 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:57:02.948 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.8711ms
2025-08-29 16:57:02.970 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:57:02.974 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:02.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:57:02.979 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:57:02.988 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:57:02.995 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:57:02.998 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.4457ms
2025-08-29 16:57:03.001 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:57:03.003 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.9982ms
2025-08-29 16:57:03.054 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:57:03.054 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 16:57:03.062 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:03.058 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:03.066 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 204 null null 12.0093ms
2025-08-29 16:57:03.066 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:57:03.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - null null
2025-08-29 16:57:03.073 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 16:57:03.076 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:03.080 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:57:03.082 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 16:57:03.085 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:57:03.099 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 16:57:03.120 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 41.8386ms
2025-08-29 16:57:03.123 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 16:57:03.126 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 16:57:03.128 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 73.9682ms
2025-08-29 16:57:03.132 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 16:57:03.137 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 18.0563ms
2025-08-29 16:57:03.139 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 16:57:03.141 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793/summary - 200 null application/json; charset=utf-8 69.8003ms
2025-08-29 16:57:03.553 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:57:03.558 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:03.560 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 204 null null 6.9341ms
2025-08-29 16:57:03.565 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - null null
2025-08-29 16:57:03.569 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:03.571 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:57:03.573 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 16:57:03.579 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 16:57:03.588 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 16:57:03.591 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:57:03.593 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.1934ms
2025-08-29 16:57:03.595 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 16:57:03.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 32.3206ms
2025-08-29 16:57:04.836 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:57:04.841 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:04.843 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 7.6636ms
2025-08-29 16:57:04.851 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:57:04.856 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:04.858 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:57:04.861 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:57:04.868 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:57:04.877 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:57:04.881 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:57:04.883 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 19.0768ms
2025-08-29 16:57:04.885 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:57:04.887 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 36.1243ms
2025-08-29 16:57:08.056 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 16:57:08.063 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:08.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 204 null null 10.0428ms
2025-08-29 16:57:08.070 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - null null
2025-08-29 16:57:08.075 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:08.076 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:57:08.095 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:57:08.101 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:57:08.108 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:57:08.112 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:57:08.114 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 15.587ms
2025-08-29 16:57:08.116 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:57:08.117 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/6f1572a7-ce3e-4528-b1d2-ffd26a0ebe92 - 200 null application/json; charset=utf-8 47.0019ms
2025-08-29 16:57:11.007 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:57:11.011 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:11.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 204 null null 5.8179ms
2025-08-29 16:57:11.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - null null
2025-08-29 16:57:11.021 +05:30 [INF] CORS policy execution successful.
2025-08-29 16:57:11.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:57:11.024 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 16:57:11.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 16:57:11.037 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 16:57:11.040 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 16:57:11.042 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 15.4827ms
2025-08-29 16:57:11.044 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 16:57:11.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/521149bd-87fa-4d82-b413-26185be17f0d - 200 null application/json; charset=utf-8 28.5308ms
2025-08-29 16:57:19.017 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI1MjExNDliZC04N2ZhLTRkODItYjQxMy0yNjE4NWJlMTdmMGQiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2Fib3V0LXVzIiwiaWF0IjoxNzU2NDY2NTQ0LCJleHAiOjE3NTkwNTg1NDR9.MowfwfRGzW_v9O9Vu8m9iq3E1-3579xHpatU2jnxju4 - null null
2025-08-29 16:57:19.048 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 16:57:19.050 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 16:57:19.056 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_cid_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 16:57:19.064 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='103a3eb6-f0e5-48b7-b88d-62659884a02d', @p1='0', @p2='Try Now' (Nullable = false), @p3='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p4='521149bd-87fa-4d82-b413-26185be17f0d', @p5='web' (Nullable = false), @p6='2025-08-29T11:27:19.0535920Z' (DbType = DateTime), @p7='003017dc-a7be-4baa-a158-3c88f3f9f819' (Nullable = true), @p8='https://www.mindsmiratus.com/about-us' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/28.0 Chrome/130.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 16:57:19.067 +05:30 [INF] CLICK WRITE-THROUGH cid="521149bd-87fa-4d82-b413-26185be17f0d" idx=0 type=web dest=https://www.mindsmiratus.com/about-us
2025-08-29 16:57:19.070 +05:30 [INF] CLICK ENQUEUE cid="521149bd-87fa-4d82-b413-26185be17f0d" idx=0 enqueued=true
2025-08-29 16:57:19.074 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 16:57:19.077 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/about-us.
2025-08-29 16:57:19.079 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 26.6517ms
2025-08-29 16:57:19.081 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 16:57:19.084 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI1MjExNDliZC04N2ZhLTRkODItYjQxMy0yNjE4NWJlMTdmMGQiLCJiaSI6MCwiYnQiOiJUcnkgTm93IiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL2Fib3V0LXVzIiwiaWF0IjoxNzU2NDY2NTQ0LCJleHAiOjE3NTkwNTg1NDR9.MowfwfRGzW_v9O9Vu8m9iq3E1-3579xHpatU2jnxju4 - 302 0 null 66.8376ms
2025-08-29 16:57:27.415 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI1MjExNDliZC04N2ZhLTRkODItYjQxMy0yNjE4NWJlMTdmMGQiLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3Lm1pbmRzbWlyYXR1cy5jb20vc29mdHdhcmUtZGV2ZWxvcG1lbnQiLCJpYXQiOjE3NTY0NjY1NDQsImV4cCI6MTc1OTA1ODU0NH0.--GCYnCftRAyRP1k2gGBX5lrBUnAfsAV1NDjcDvt2L4 - null null
2025-08-29 16:57:27.425 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 16:57:27.427 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 16:57:27.433 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_cid_0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 16:57:27.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='70b31f57-119e-4bdf-b783-c6d848549454', @p1='1', @p2='Subscribe' (Nullable = false), @p3='e5ed1f5d-94bf-40fe-8d84-c7dcbd6a6793', @p4='521149bd-87fa-4d82-b413-26185be17f0d', @p5='web' (Nullable = false), @p6='2025-08-29T11:27:27.4302339Z' (DbType = DateTime), @p7='003017dc-a7be-4baa-a158-3c88f3f9f819' (Nullable = true), @p8='https://www.mindsmiratus.com/software-development' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/28.0 Chrome/130.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 16:57:27.445 +05:30 [INF] CLICK WRITE-THROUGH cid="521149bd-87fa-4d82-b413-26185be17f0d" idx=1 type=web dest=https://www.mindsmiratus.com/software-development
2025-08-29 16:57:27.447 +05:30 [INF] CLICK ENQUEUE cid="521149bd-87fa-4d82-b413-26185be17f0d" idx=1 enqueued=true
2025-08-29 16:57:27.451 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='521149bd-87fa-4d82-b413-26185be17f0d'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 16:57:27.453 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/software-development.
2025-08-29 16:57:27.455 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 25.2802ms
2025-08-29 16:57:27.456 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 16:57:27.457 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI1MjExNDliZC04N2ZhLTRkODItYjQxMy0yNjE4NWJlMTdmMGQiLCJiaSI6MSwiYnQiOiJTdWJzY3JpYmUiLCJ0byI6Imh0dHBzOi8vd3d3Lm1pbmRzbWlyYXR1cy5jb20vc29mdHdhcmUtZGV2ZWxvcG1lbnQiLCJpYXQiOjE3NTY0NjY1NDQsImV4cCI6MTc1OTA1ODU0NH0.--GCYnCftRAyRP1k2gGBX5lrBUnAfsAV1NDjcDvt2L4 - 302 0 null 42.4096ms
2025-08-29 17:00:32.898 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 17:00:32.902 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:32.903 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.2254ms
2025-08-29 17:00:32.931 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 17:00:32.943 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:32.945 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 17:00:32.946 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 17:00:32.951 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 17:00:32.957 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 17:00:32.966 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 17:00:32.990 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 17:00:32.993 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 17:00:32.997 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 17:00:32.999 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 17:00:33.002 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:00:33.004 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 55.5168ms
2025-08-29 17:00:33.006 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 17:00:33.008 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 76.7533ms
2025-08-29 17:00:33.014 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:00:33.019 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:33.020 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.9553ms
2025-08-29 17:00:33.025 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:00:33.031 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:33.032 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.034 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:00:33.041 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:00:33.046 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:00:33.049 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3017ms
2025-08-29 17:00:33.052 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.054 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.2515ms
2025-08-29 17:00:33.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:00:33.081 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:33.083 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.085 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:00:33.092 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:00:33.097 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:00:33.100 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.759ms
2025-08-29 17:00:33.102 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:00:33.104 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.4071ms
2025-08-29 17:00:33.108 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:33.115 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.116 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:00:33.123 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:00:33.129 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:00:33.131 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3773ms
2025-08-29 17:00:33.134 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.135 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.954ms
2025-08-29 17:00:33.244 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:00:33.248 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:33.250 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.252 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:00:33.270 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:00:33.274 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:00:33.278 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.2686ms
2025-08-29 17:00:33.281 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.283 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.6528ms
2025-08-29 17:00:33.304 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:00:33.308 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:33.309 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.312 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:00:33.318 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:00:33.323 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:00:33.325 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0003ms
2025-08-29 17:00:33.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:00:33.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.2066ms
2025-08-29 17:00:44.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-29 17:00:44.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 17:00:44.968 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:44.972 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:44.973 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 8.7031ms
2025-08-29 17:00:44.975 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 8.5325ms
2025-08-29 17:00:44.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 17:00:44.986 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-29 17:00:44.991 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:44.996 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:44.997 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 17:00:44.998 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 17:00:44.999 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 17:00:45.000 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 17:00:45.010 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-29 17:00:45.013 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-29 17:00:45.024 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:00:45.027 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 21.5604ms
2025-08-29 17:00:45.029 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 17:00:45.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 51.3152ms
2025-08-29 17:00:45.349 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 17:00:45.371 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 17:00:45.463 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 17:00:45.468 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 459.2797ms
2025-08-29 17:00:45.471 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 17:00:45.473 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 486.6953ms
2025-08-29 17:00:53.559 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-29 17:00:53.569 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:53.571 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 12.3101ms
2025-08-29 17:00:53.577 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 54
2025-08-29 17:00:53.582 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:00:53.584 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-29 17:00:53.586 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-29 17:00:53.610 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+919990033746
2025-08-29 17:00:53.618 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+919990033746'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-29 17:00:53.628 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='56c274a5-365e-436d-a078-77d72139367f', @p1=NULL (DbType = Guid), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='2025-08-29T11:30:53.6228786Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='True', @p7='False', @p8='False', @p9='False', @p10=NULL (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Guid), @p13=NULL (DbType = DateTime), @p14=NULL, @p15='WhatsApp User' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL, @p18='+919990033746' (Nullable = false), @p19=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Contacts" ("Id", "AssignedAgentId", "BusinessId", "CreatedAt", "Email", "Group", "IsActive", "IsArchived", "IsAutomationPaused", "IsFavorite", "LastCTAInteraction", "LastCTAType", "LastClickedProductId", "LastContactedAt", "LeadSource", "Name", "NextFollowUpAt", "Notes", "PhoneNumber", "Tags")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-08-29 17:00:53.632 +05:30 [INF] Contact created: "56c274a5-365e-436d-a078-77d72139367f"
2025-08-29 17:00:53.636 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 17:00:53.671 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 17:00:53.672 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 17:01:05.999 +05:30 [INF] Received HTTP response headers after 12324.8587ms - 401
2025-08-29 17:01:06.001 +05:30 [INF] End processing HTTP request after 12330.5698ms - 401
2025-08-29 17:01:06.006 +05:30 [WRN] MetaCloud send failed (HTTP 401): {"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 22:00:00 PDT. The current time is Friday, 29-Aug-25 04:31:04 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AeTY97J9WNsfkgzkMq6P1_8"}}
2025-08-29 17:01:06.013 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='ec4952e5-9982-4b64-b657-09e86be386f7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='56c274a5-365e-436d-a078-77d72139367f' (Nullable = true), @p6='2025-08-29T11:31:06.0100520Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='Hi' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 22:00:00 PDT. The current time is Friday, 29-Aug-25 04:31:04 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AeTY97J9WNsfkgzkMq6P1_8"}}', @p13='+919990033746' (Nullable = false), @p14=NULL (DbType = Guid), @p15='Hi', @p16='2025-08-29T11:31:06.0100521Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 17:01:06.017 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 17:01:06.022 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 12433.1932ms
2025-08-29 17:01:06.024 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-29 17:01:06.026 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 12449.4335ms
2025-08-29 17:09:18.865 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-29 17:09:18.929 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-29 17:09:18.955 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-29 17:09:20.200 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-29 17:09:21.027 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-29 17:09:21.050 +05:30 [INF] ClickLogWorker started
2025-08-29 17:09:21.308 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-29 17:09:21.310 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-29 17:09:21.311 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-29 17:09:21.312 +05:30 [INF] Hosting environment: Development
2025-08-29 17:09:21.313 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-29 17:09:21.339 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-29 17:09:21.361 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__cutoff_0='2025-08-22T11:39:19.1299221Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-29 17:09:22.124 +05:30 [INF] ClickLogWorker stopped
2025-08-29 17:09:23.441 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 17:09:23.475 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-29 17:09:23.532 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:23.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 108.9701ms
2025-08-29 17:09:23.549 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 17:09:23.566 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:23.766 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 17:09:23.792 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 17:09:23.919 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 17:09:24.035 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 17:09:24.189 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 17:09:24.394 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 17:09:24.409 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 17:09:24.427 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 17:09:24.429 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 17:09:24.443 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:09:24.462 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 663.1335ms
2025-08-29 17:09:24.464 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 17:09:24.476 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 927.0962ms
2025-08-29 17:09:24.482 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:09:24.495 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.497 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 15.0998ms
2025-08-29 17:09:24.503 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:09:24.514 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.526 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.535 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:09:24.558 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 17:09:24.608 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:09:24.613 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:09:24.632 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 93.7495ms
2025-08-29 17:09:24.634 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.636 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 132.9571ms
2025-08-29 17:09:24.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:09:24.671 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.681 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.683 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:09:24.701 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:09:24.708 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:09:24.710 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.9749ms
2025-08-29 17:09:24.713 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.713 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:09:24.714 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 51.1725ms
2025-08-29 17:09:24.718 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.726 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.727 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:09:24.738 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:09:24.742 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:09:24.744 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.5508ms
2025-08-29 17:09:24.747 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.6519ms
2025-08-29 17:09:24.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:09:24.814 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-29 17:09:24.816 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 17:09:24.827 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.830 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.834 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.836 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.837 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 22.1913ms
2025-08-29 17:09:24.842 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 25.4477ms
2025-08-29 17:09:24.843 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:09:24.849 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-29 17:09:24.854 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-29 17:09:24.861 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:09:24.864 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.866 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.870 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:09:24.871 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 17:09:24.872 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 17:09:24.877 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 17:09:24.874 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.3412ms
2025-08-29 17:09:24.890 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-29 17:09:24.891 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:24.892 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 17:09:24.892 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.896 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.900 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 86.5835ms
2025-08-29 17:09:24.902 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 17:09:24.908 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-29 17:09:24.914 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 17:09:24.920 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:09:24.923 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.8497ms
2025-08-29 17:09:24.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 17:09:24.928 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 50.6913ms
2025-08-29 17:09:24.932 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-29 17:09:24.942 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType67`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 17:09:24.955 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 17:09:24.973 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 78.7466ms
2025-08-29 17:09:24.976 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-29 17:09:24.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 128.9365ms
2025-08-29 17:09:25.015 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 17:09:25.119 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 17:09:25.139 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 240.7077ms
2025-08-29 17:09:25.151 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 17:09:25.154 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 299.7763ms
2025-08-29 17:09:27.660 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-29 17:09:27.867 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 207.7818ms
2025-08-29 17:09:27.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-29 17:09:27.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7441ms
2025-08-29 17:09:27.999 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-29 17:09:28.041 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.7725ms
2025-08-29 17:09:28.290 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-29 17:09:28.662 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 372.3ms
2025-08-29 17:09:36.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 17:09:36.693 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:36.703 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 14.7737ms
2025-08-29 17:09:36.715 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 17:09:36.723 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:36.725 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 17:09:36.734 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 17:09:36.803 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 17:09:36.809 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:09:36.816 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 78.9368ms
2025-08-29 17:09:36.819 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 17:09:36.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 106.4627ms
2025-08-29 17:09:50.699 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-29 17:09:50.704 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:50.706 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 204 null null 7.4394ms
2025-08-29 17:09:50.720 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-29 17:09:50.730 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:50.732 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 17:09:50.740 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 17:09:50.785 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-29 17:09:50.798 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 17:09:50.804 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 17:09:50.808 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 64.8441ms
2025-08-29 17:09:50.810 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 17:09:50.812 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 200 null application/json; charset=utf-8 92.0885ms
2025-08-29 17:09:51.154 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-29 17:09:51.158 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:51.160 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 204 null null 6.0257ms
2025-08-29 17:09:51.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-29 17:09:51.170 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:51.172 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 17:09:51.177 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 17:09:51.192 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 17:09:51.217 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 17:09:51.223 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:09:51.237 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 56.2451ms
2025-08-29 17:09:51.238 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 17:09:51.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 73.7984ms
2025-08-29 17:09:52.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/f9599ebc-efbb-49f5-a2d8-79b96889d453 - null null
2025-08-29 17:09:52.914 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:52.915 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/f9599ebc-efbb-49f5-a2d8-79b96889d453 - 204 null null 6.733ms
2025-08-29 17:09:52.923 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/f9599ebc-efbb-49f5-a2d8-79b96889d453 - null null
2025-08-29 17:09:52.929 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:52.933 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:09:52.939 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 17:09:53.149 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='f9599ebc-efbb-49f5-a2d8-79b96889d453'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 17:09:53.165 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='f9599ebc-efbb-49f5-a2d8-79b96889d453'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 17:09:53.172 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:09:53.176 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 233.3774ms
2025-08-29 17:09:53.178 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:09:53.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/f9599ebc-efbb-49f5-a2d8-79b96889d453 - 200 null application/json; charset=utf-8 257.731ms
2025-08-29 17:09:55.956 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - null null
2025-08-29 17:09:55.961 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:55.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - 204 null null 7.4086ms
2025-08-29 17:09:55.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - null null
2025-08-29 17:09:55.984 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:55.987 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:09:55.988 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 17:09:55.996 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='c413a6b2-fcf0-4985-8f22-1cf5f588af4c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 17:09:56.004 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='c413a6b2-fcf0-4985-8f22-1cf5f588af4c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 17:09:56.007 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:09:56.009 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 18.0769ms
2025-08-29 17:09:56.011 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:09:56.014 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - 200 null application/json; charset=utf-8 33.9385ms
2025-08-29 17:09:58.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 17:09:58.412 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:58.413 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.0746ms
2025-08-29 17:09:58.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 17:09:58.432 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:09:58.433 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 17:09:58.435 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 17:09:58.451 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 17:09:58.457 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:09:58.459 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 21.2804ms
2025-08-29 17:09:58.462 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 17:09:58.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 38.0069ms
2025-08-29 17:10:13.633 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/summary - null null
2025-08-29 17:10:13.636 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:13.638 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/summary - 204 null null 4.7575ms
2025-08-29 17:10:13.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/summary - null null
2025-08-29 17:10:13.651 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:13.652 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 17:10:13.654 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 17:10:13.667 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 17:10:13.676 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 17:10:13.683 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 25.2808ms
2025-08-29 17:10:13.690 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 17:10:13.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/summary - 200 null application/json; charset=utf-8 44.5632ms
2025-08-29 17:10:14.046 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b?page=1&pageSize=10&status=&search= - null null
2025-08-29 17:10:14.050 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:14.052 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b?page=1&pageSize=10&status=&search= - 204 null null 5.6359ms
2025-08-29 17:10:14.057 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b?page=1&pageSize=10&status=&search= - null null
2025-08-29 17:10:14.062 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:14.064 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 17:10:14.066 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 17:10:14.072 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 17:10:14.081 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 17:10:14.085 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:10:14.087 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.2949ms
2025-08-29 17:10:14.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 17:10:14.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 34.2125ms
2025-08-29 17:10:16.577 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/db95f18a-9464-43e6-966d-466ac9e971e9 - null null
2025-08-29 17:10:16.584 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:16.586 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/db95f18a-9464-43e6-966d-466ac9e971e9 - 204 null null 8.3518ms
2025-08-29 17:10:16.591 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/db95f18a-9464-43e6-966d-466ac9e971e9 - null null
2025-08-29 17:10:16.595 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:16.596 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:10:16.598 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 17:10:16.616 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='db95f18a-9464-43e6-966d-466ac9e971e9'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 17:10:16.626 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='db95f18a-9464-43e6-966d-466ac9e971e9'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 17:10:16.630 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:10:16.632 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 22.2982ms
2025-08-29 17:10:16.634 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:10:16.636 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/db95f18a-9464-43e6-966d-466ac9e971e9 - 200 null application/json; charset=utf-8 44.6315ms
2025-08-29 17:10:19.458 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 17:10:19.462 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:19.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.387ms
2025-08-29 17:10:19.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 17:10:19.488 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:19.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 17:10:19.492 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 17:10:19.513 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 17:10:19.519 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:10:19.521 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 26.1677ms
2025-08-29 17:10:19.523 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 17:10:19.525 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 41.0387ms
2025-08-29 17:10:24.134 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-29 17:10:24.138 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:24.140 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 204 null null 5.677ms
2025-08-29 17:10:24.150 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-29 17:10:24.157 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:24.159 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 17:10:24.161 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 17:10:24.169 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-29 17:10:24.179 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-29 17:10:24.182 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 16.3592ms
2025-08-29 17:10:24.185 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-29 17:10:24.187 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 200 null application/json; charset=utf-8 36.7784ms
2025-08-29 17:10:24.610 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-29 17:10:24.613 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:24.615 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 204 null null 5.2753ms
2025-08-29 17:10:24.637 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-29 17:10:24.642 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:24.645 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 17:10:24.647 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-29 17:10:24.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-29 17:10:24.664 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-29 17:10:24.667 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:10:24.669 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 19.07ms
2025-08-29 17:10:24.671 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-29 17:10:24.673 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 36.7331ms
2025-08-29 17:10:25.796 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - null null
2025-08-29 17:10:25.801 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:25.803 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - 204 null null 7.0097ms
2025-08-29 17:10:25.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - null null
2025-08-29 17:10:25.814 +05:30 [INF] CORS policy execution successful.
2025-08-29 17:10:25.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:10:25.817 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-29 17:10:25.823 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-29 17:10:25.831 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-29 17:10:25.836 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 17:10:25.838 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 18.2426ms
2025-08-29 17:10:25.841 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-29 17:10:25.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c8fe4bc8-e681-460d-a641-32849d644d8d - 200 null application/json; charset=utf-8 33.6387ms
2025-08-29 17:59:57.193 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - null null
2025-08-29 17:59:57.233 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - 404 0 null 41.7174ms
2025-08-29 17:59:57.246 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/robots.txt, Response status code: 404
2025-08-29 19:11:47.078 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/index.html - null null
2025-08-29 19:11:47.198 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 120.9555ms
2025-08-29 19:11:49.277 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui.css - null null
2025-08-29 19:11:49.339 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-08-29 19:11:49.340 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/swagger/swagger-ui.css - 200 152034 text/css 63.682ms
2025-08-29 19:26:36.499 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 19:26:36.514 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:36.519 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 49.8877ms
2025-08-29 19:26:36.525 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 19:26:36.529 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:36.535 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 19:26:36.547 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 19:26:36.603 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 19:26:36.774 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 19:26:36.794 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 19:26:36.811 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 19:26:36.816 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 19:26:36.827 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 19:26:36.828 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 19:26:36.830 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:26:36.832 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 284.0196ms
2025-08-29 19:26:36.834 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 19:26:36.835 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 309.8206ms
2025-08-29 19:26:36.838 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 19:26:36.840 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:36.841 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.551ms
2025-08-29 19:26:36.844 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 19:26:36.846 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:36.850 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 19:26:36.852 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 19:26:36.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 19:26:36.862 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 19:26:36.865 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:26:36.866 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.9821ms
2025-08-29 19:26:36.867 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 19:26:36.868 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.0547ms
2025-08-29 19:26:36.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 19:26:36.882 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:36.883 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 19:26:36.885 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 19:26:36.889 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 19:26:36.892 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:26:36.893 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2121ms
2025-08-29 19:26:36.895 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 19:26:36.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.9872ms
2025-08-29 19:26:36.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 19:26:36.990 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:36.991 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 19:26:36.993 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 19:26:36.997 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 19:26:37.001 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:26:37.003 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1766ms
2025-08-29 19:26:37.004 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 19:26:37.006 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.6079ms
2025-08-29 19:26:51.631 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:26:51.663 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:51.664 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 32.4684ms
2025-08-29 19:26:51.671 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:26:51.697 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:26:51.698 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:26:51.749 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 19:26:51.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 19:26:52.016 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:26:52.022 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:26:53.051 +05:30 [INF] Received HTTP response headers after 1025.6022ms - 401
2025-08-29 19:26:53.053 +05:30 [INF] End processing HTTP request after 1040.161ms - 401
2025-08-29 19:26:53.055 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:26:53.056 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:26:53.058 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:26:53.059 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:26:53.775 +05:30 [INF] Received HTTP response headers after 715.0441ms - 401
2025-08-29 19:26:53.777 +05:30 [INF] End processing HTTP request after 718.254ms - 401
2025-08-29 19:26:53.778 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 22:00:00 PDT. The current time is Friday, 29-Aug-25 06:56:52 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A8gWsxUkzm9T2yLWDZnRDFM"}}
2025-08-29 19:26:53.779 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": {"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 22:00:00 PDT. The current time is Friday, 29-Aug-25 06:56:52 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A8gWsxUkzm9T2yLWDZnRDFM"}}
2025-08-29 19:26:53.782 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:26:53.790 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 2039.145ms
2025-08-29 19:26:53.791 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:26:53.792 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 2121.2221ms
2025-08-29 19:27:11.316 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:27:11.320 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:27:11.321 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 4.7615ms
2025-08-29 19:27:11.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:27:11.326 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:27:11.327 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:27:11.328 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 19:27:11.332 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 19:27:11.335 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:27:11.336 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:27:11.429 +05:30 [INF] Received HTTP response headers after 92.0568ms - 401
2025-08-29 19:27:11.430 +05:30 [INF] End processing HTTP request after 95.4022ms - 401
2025-08-29 19:27:11.431 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:27:11.432 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:27:11.433 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:27:11.434 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:27:11.776 +05:30 [INF] Received HTTP response headers after 341.427ms - 401
2025-08-29 19:27:11.778 +05:30 [INF] End processing HTTP request after 344.5433ms - 401
2025-08-29 19:27:11.779 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 22:00:00 PDT. The current time is Friday, 29-Aug-25 06:57:10 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A51HE7CrVABn4k-ThU8UFOZ"}}
2025-08-29 19:27:11.780 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": {"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 22:00:00 PDT. The current time is Friday, 29-Aug-25 06:57:10 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A51HE7CrVABn4k-ThU8UFOZ"}}
2025-08-29 19:27:11.781 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:27:11.782 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 452.2592ms
2025-08-29 19:27:11.783 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:27:11.784 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 460.4313ms
2025-08-29 19:27:18.734 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 19:27:18.737 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:27:18.738 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.0183ms
2025-08-29 19:27:18.741 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 19:27:18.745 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:27:18.746 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 19:27:18.750 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 19:27:18.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:27:18.769 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-29 19:27:18.775 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 22.9454ms
2025-08-29 19:27:18.776 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 19:27:18.777 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 35.3633ms
2025-08-29 19:28:43.865 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-29 19:28:43.867 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:28:43.869 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 4.4151ms
2025-08-29 19:28:43.871 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 555
2025-08-29 19:28:43.874 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:28:43.875 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-29 19:28:43.882 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 19:28:43.912 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-29 19:28:43.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-29 19:28:44.042 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPRi3fAVZAu6tzWAZAupVUEXoZByIDBnRwJZBwpkr127kwuMzd03RauB3OLLuFVFTfQU5NrzY6QqptOC6F5zCzLsB77eZBuVxeQFlIC5arn7XA8bnJp7oYxB4f5cGpxG92RUdKcptg6uzYpHCZAYE2GkJZC6rFjpjvFXe4vHZCoZBuEZCMqmraLIntM5BE60AJlaFq9w3mZBjZAcen4hohcBzt5eoEcu6o6QZAYsy15rvsiBFsZAfaWCfeZCFcoZD' (Nullable = false), @p1='2025-08-29T13:58:43.9251718Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-29 19:28:44.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:28:44.060 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 176.3543ms
2025-08-29 19:28:44.061 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-29 19:28:44.062 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 190.4719ms
2025-08-29 19:28:45.138 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-29 19:28:45.141 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:28:45.142 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.2505ms
2025-08-29 19:28:45.144 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 387
2025-08-29 19:28:45.146 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:28:45.147 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-29 19:28:45.151 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 19:28:45.159 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-29 19:28:45.160 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-29 19:28:46.421 +05:30 [INF] Received HTTP response headers after 1260.355ms - 200
2025-08-29 19:28:46.423 +05:30 [INF] End processing HTTP request after 1263.8336ms - 200
2025-08-29 19:28:46.433 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:28:46.434 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1281.3119ms
2025-08-29 19:28:46.436 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-29 19:28:46.437 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1292.7137ms
2025-08-29 19:28:51.653 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:28:51.656 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:28:51.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.5575ms
2025-08-29 19:28:51.660 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:28:51.662 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:28:51.663 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:28:51.664 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 19:28:51.668 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 19:28:51.672 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:28:51.674 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:28:51.995 +05:30 [INF] Received HTTP response headers after 320.1945ms - 401
2025-08-29 19:28:51.996 +05:30 [INF] End processing HTTP request after 323.5716ms - 401
2025-08-29 19:28:51.997 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:28:51.998 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:28:51.999 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:28:52.000 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:28:53.260 +05:30 [INF] Received HTTP response headers after 1259.898ms - 200
2025-08-29 19:28:53.262 +05:30 [INF] End processing HTTP request after 1263.3178ms - 200
2025-08-29 19:28:53.263 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=yskLodTtnaOhjg7EHqN9fg&oh=01_Q5Aa2QGJKfEn8x3zzH5rvB951omq8ZWDDhxPTpEFZxPCevnEhQ&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 19:28:53.468 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:28:53.472 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1806.9487ms
2025-08-29 19:28:53.474 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:28:53.475 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1814.7814ms
2025-08-29 19:29:09.712 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:29:09.717 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:29:09.719 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 6.7063ms
2025-08-29 19:29:09.726 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:29:09.731 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:29:09.734 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:29:09.736 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 19:29:09.743 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 19:29:09.749 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:29:09.751 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:29:10.128 +05:30 [INF] Received HTTP response headers after 374.3465ms - 401
2025-08-29 19:29:10.129 +05:30 [INF] End processing HTTP request after 380.0269ms - 401
2025-08-29 19:29:10.130 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:29:10.131 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:29:10.133 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:29:10.134 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:29:11.882 +05:30 [INF] Received HTTP response headers after 1746.4482ms - 200
2025-08-29 19:29:11.890 +05:30 [INF] End processing HTTP request after 1757.2391ms - 200
2025-08-29 19:29:11.898 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=HxfGiA72ldh9Z7puak0-iA&oh=01_Q5Aa2QHB7McbNtlFIRK4nfJwzGekqfHiJOSsyjVYPlRkOg9JDA&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 19:29:11.916 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:29:11.935 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 2195.6031ms
2025-08-29 19:29:11.942 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:29:11.946 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 2220.1723ms
2025-08-29 19:29:37.494 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:29:37.503 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:29:37.504 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 10.0737ms
2025-08-29 19:29:37.516 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:29:37.518 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:29:37.520 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:29:37.521 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 19:29:37.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 19:29:37.530 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:29:37.531 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:29:37.611 +05:30 [INF] Received HTTP response headers after 78.1015ms - 401
2025-08-29 19:29:37.612 +05:30 [INF] End processing HTTP request after 82.5361ms - 401
2025-08-29 19:29:37.614 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:29:37.615 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:29:37.616 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:29:37.617 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:29:38.445 +05:30 [INF] Received HTTP response headers after 826.9918ms - 200
2025-08-29 19:29:38.446 +05:30 [INF] End processing HTTP request after 830.4413ms - 200
2025-08-29 19:29:38.457 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=Bdi3hnVEA0WG9F544MJvYA&oh=01_Q5Aa2QEgbEqeC7Ya-_RaseO2dnitJf8scHI1nOKOyS-trj_aGw&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 19:29:38.460 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:29:38.462 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 938.8612ms
2025-08-29 19:29:38.463 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:29:38.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 948.4531ms
2025-08-29 19:29:54.531 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:29:54.534 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:29:54.535 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 4.3624ms
2025-08-29 19:29:54.539 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:29:54.542 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:29:54.544 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:29:54.545 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 19:29:54.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 19:29:54.553 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:29:54.555 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:29:54.630 +05:30 [INF] Received HTTP response headers after 74.1736ms - 401
2025-08-29 19:29:54.632 +05:30 [INF] End processing HTTP request after 78.2937ms - 401
2025-08-29 19:29:54.633 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:29:54.634 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:29:54.636 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:29:54.637 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:29:55.717 +05:30 [INF] Received HTTP response headers after 1079.2798ms - 200
2025-08-29 19:29:55.718 +05:30 [INF] End processing HTTP request after 1082.8465ms - 200
2025-08-29 19:29:55.720 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=PRJaxBz5Emwq-h3vwLpEIw&oh=01_Q5Aa2QHbhZDN1v2iCM3zPy88klbz8V0mlWXqMk0_w0zlDGeiDw&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 19:29:55.722 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:29:55.724 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1177.1206ms
2025-08-29 19:29:55.726 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:29:55.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1204.533ms
2025-08-29 19:30:35.204 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:30:35.206 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:30:35.207 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.6564ms
2025-08-29 19:30:35.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 19:30:35.218 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:30:35.220 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:30:35.221 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 19:30:35.224 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 19:30:35.228 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:30:35.230 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 19:30:35.320 +05:30 [INF] Received HTTP response headers after 88.5899ms - 401
2025-08-29 19:30:35.321 +05:30 [INF] End processing HTTP request after 92.864ms - 401
2025-08-29 19:30:35.322 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:30:35.324 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 19:30:35.325 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:30:35.326 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 19:30:36.038 +05:30 [INF] Received HTTP response headers after 711.0152ms - 200
2025-08-29 19:30:36.040 +05:30 [INF] End processing HTTP request after 715.0773ms - 200
2025-08-29 19:30:36.043 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=z28ApZepVjQiekPe2p0_gg&oh=01_Q5Aa2QGxa3QVwOimn8kZoA7kLGgltj_kBnbxa6PPSIl8xiPBmQ&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 19:30:36.064 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:30:36.065 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 843.0915ms
2025-08-29 19:30:36.067 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 19:30:36.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 851.9424ms
2025-08-29 19:31:17.972 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-08-29 19:31:17.988 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:31:17.991 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 18.6378ms
2025-08-29 19:31:18.003 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 3747
2025-08-29 19:31:18.012 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:31:18.014 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-08-29 19:31:18.020 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 19:31:23.952 +05:30 [INF] 📦 Saving CTA Flow: Templte_flow_test by Tata Consultancy Services
2025-08-29 19:31:23.963 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: Templte_flow_test | BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 19:31:23.979 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_FlowName_0='Templte_flow_test', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-08-29 19:31:24.009 +05:30 [INF] ✅ New FlowConfig created with ID: "054cbf97-5a56-45e7-b027-7d1ddadf1a2d"
2025-08-29 19:31:24.158 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@p0='054cbf97-5a56-45e7-b027-7d1ddadf1a2d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='2025-08-29T14:01:23.9837796Z' (DbType = DateTime), @p3='Tata Consultancy Services', @p4='Templte_flow_test' (Nullable = false), @p5='True', @p6='True', @p7='2025-08-29T14:01:23.9838432Z' (Nullable = true) (DbType = DateTime), @p8='05028329-41e8-40ef-aaad-31a63370040b', @p9='054cbf97-5a56-45e7-b027-7d1ddadf1a2d', @p10='624.0284' (Nullable = true), @p11='-63.99807' (Nullable = true), @p12=NULL, @p13=NULL, @p14='2', @p15='build_urltracking' (Nullable = false), @p16='text_template', @p17='Visit website' (Nullable = false), @p18='URL' (Nullable = false), @p19='5b7d2c0b-5063-47d1-961e-4794ab69680e', @p20='054cbf97-5a56-45e7-b027-7d1ddadf1a2d', @p21='221.43214' (Nullable = true), @p22='-73.70871' (Nullable = true), @p23=NULL, @p24=NULL, @p25='1', @p26='url_tracking' (Nullable = false), @p27='text_template', @p28='Explore' (Nullable = false), @p29='URL' (Nullable = false), @p30='5f6e9886-a8dc-4130-bc6a-f88bee8a1a55', @p31='054cbf97-5a56-45e7-b027-7d1ddadf1a2d', @p32='1060.5264' (Nullable = true), @p33='9.840104' (Nullable = true), @p34=NULL, @p35=NULL, @p36='3', @p37='offer_aiboat' (Nullable = false), @p38='text_template', @p39='Shop Now' (Nullable = false), @p40='URL' (Nullable = false), @p41='60fa31be-0d9f-4bcf-a7d8-2f3524349f51', @p42='054cbf97-5a56-45e7-b027-7d1ddadf1a2d', @p43='191.82939' (Nullable = true), @p44='348.61743' (Nullable = true), @p45=NULL, @p46=NULL, @p47='4', @p48='offer_aiboat' (Nullable = false), @p49='text_template', @p50='Explore More' (Nullable = false), @p51='URL' (Nullable = false), @p52='ffab3946-a797-49c5-95f8-54af841b0518', @p53='054cbf97-5a56-45e7-b027-7d1ddadf1a2d', @p54='-111.507034' (Nullable = true), @p55='-70.942314' (Nullable = true), @p56=NULL, @p57=NULL, @p58='0', @p59='call_log' (Nullable = false), @p60='text_template', @p61='Explore' (Nullable = false), @p62='cta' (Nullable = false), @p63='2076c500-52f6-4967-bf9b-0797c2e461ce', @p64='url' (Nullable = false), @p65='Explore' (Nullable = false), @p66='URL' (Nullable = false), @p67='https://077903ad22d3.ngrok-free.app/r/{{1}}' (Nullable = false), @p68='ffab3946-a797-49c5-95f8-54af841b0518', @p69='5b7d2c0b-5063-47d1-961e-4794ab69680e' (Nullable = true), @p70='38d4b962-1036-482d-921f-8f65ff57089f', @p71='url' (Nullable = false), @p72='Explore More' (Nullable = false), @p73='URL' (Nullable = false), @p74='https://077903ad22d3.ngrok-free.app/r/{{1}}' (Nullable = false), @p75='05028329-41e8-40ef-aaad-31a63370040b', @p76='60fa31be-0d9f-4bcf-a7d8-2f3524349f51' (Nullable = true), @p77='b6d08e4e-6ef4-4694-b710-ca3914865dfc', @p78='url' (Nullable = false), @p79='Visit website' (Nullable = false), @p80='URL' (Nullable = false), @p81='https://077903ad22d3.ngrok-free.app/{{1}}' (Nullable = false), @p82='5b7d2c0b-5063-47d1-961e-4794ab69680e', @p83='05028329-41e8-40ef-aaad-31a63370040b' (Nullable = true), @p84='bff36c8e-bc4c-46e0-9e2f-95d4fb9d05e3', @p85='url' (Nullable = false), @p86='Shop Now' (Nullable = false), @p87='URL' (Nullable = false), @p88='https://077903ad22d3.ngrok-free.app/r/{{1}}' (Nullable = false), @p89='05028329-41e8-40ef-aaad-31a63370040b', @p90='5f6e9886-a8dc-4130-bc6a-f88bee8a1a55' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CTAFlowConfigs" ("Id", "BusinessId", "CreatedAt", "CreatedBy", "FlowName", "IsActive", "IsPublished", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89, @p90);
2025-08-29 19:31:24.181 +05:30 [INF] ✅ Flow 'Templte_flow_test' saved | Steps: 5 | Links: 8
2025-08-29 19:31:24.183 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:31:24.185 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 6163.2202ms
2025-08-29 19:31:24.186 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-08-29 19:31:24.187 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 6184.2652ms
2025-08-29 19:31:42.165 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 19:31:42.168 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:31:42.169 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.8972ms
2025-08-29 19:31:42.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 19:31:42.176 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:31:42.178 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 19:31:42.180 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:31:42.330 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 19:31:42.332 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 19:31:42.333 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 151.7711ms
2025-08-29 19:31:42.335 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 19:31:42.336 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 162.6915ms
2025-08-29 19:31:56.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 19:31:56.355 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:31:56.355 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 4.6455ms
2025-08-29 19:31:56.370 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 19:31:56.375 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:31:56.376 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 19:31:56.384 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 19:31:56.407 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 19:31:56.409 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:31:56.415 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 28.5047ms
2025-08-29 19:31:56.416 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 19:31:56.418 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 48.1338ms
2025-08-29 19:32:00.334 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - null null
2025-08-29 19:32:00.337 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:32:00.338 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - 204 null null 4.3381ms
2025-08-29 19:32:00.341 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - null null
2025-08-29 19:32:00.344 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:32:00.345 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 19:32:00.349 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 19:32:00.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='call_log'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-29 19:32:00.373 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType154`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:32:00.376 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 25.2593ms
2025-08-29 19:32:00.377 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 19:32:00.378 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - 200 null application/json; charset=utf-8 37.022ms
2025-08-29 19:33:21.897 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-29 19:33:21.899 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:21.899 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 2.9439ms
2025-08-29 19:33:21.906 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 449
2025-08-29 19:33:21.908 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:21.909 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 19:33:21.914 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:33:25.889 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 19:33:25.892 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:33:25.894 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:33:27.247 +05:30 [INF] Received HTTP response headers after 1352.8729ms - 200
2025-08-29 19:33:27.249 +05:30 [INF] End processing HTTP request after 1357.149ms - 200
2025-08-29 19:33:27.343 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='78160695-874f-40c6-b07d-5df309cbf562', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-29T14:03:27.2588096Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hello

This is the checking for call log event.', @p14='call_log' (Nullable = false), @p15='template_flow' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='call_log', @p20='[]', @p21='2025-08-29T14:03:27.2588568Z' (DbType = DateTime), @p22='0f583983-85f0-4dd8-8c5a-67e0059e3a9b', @p23='78160695-874f-40c6-b07d-5df309cbf562', @p24='True', @p25='2', @p26='Call Us' (Nullable = false), @p27='URL' (Nullable = false), @p28='tel:7082156227' (Nullable = false), @p29='ce0629cc-88d4-4f20-9dd5-1d8105476961', @p30='78160695-874f-40c6-b07d-5df309cbf562', @p31='True', @p32='1', @p33='Explore' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.accuweather.com/en/in/bawani-khera/3044287/weather-forecast/3044287' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-29 19:33:27.348 +05:30 [INF] ✅ Campaign 'template_flow' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-29 19:33:27.351 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:33:27.353 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 5437.7115ms
2025-08-29 19:33:27.354 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 19:33:27.355 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 5449.1719ms
2025-08-29 19:33:27.393 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 19:33:27.397 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 19:33:27.397 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 19:33:27.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562 - null null
2025-08-29 19:33:27.407 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.411 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.413 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.415 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.416 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 23.2481ms
2025-08-29 19:33:27.417 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 20.1941ms
2025-08-29 19:33:27.418 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 20.9803ms
2025-08-29 19:33:27.418 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562 - 204 null null 22.0372ms
2025-08-29 19:33:27.424 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 19:33:27.427 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 19:33:27.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562 - null null
2025-08-29 19:33:27.432 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.435 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.437 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.438 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 19:33:27.438 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 19:33:27.439 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 19:33:27.441 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 19:33:27.446 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 19:33:27.446 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-29 19:33:27.447 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:33:27.453 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 19:33:27.462 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 19:33:27.469 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 19:33:27.472 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 27.2465ms
2025-08-29 19:33:27.474 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 19:33:27.475 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 51.0038ms
2025-08-29 19:33:27.491 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='78160695-874f-40c6-b07d-5df309cbf562', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-29 19:33:27.503 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-29 19:33:27.510 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 57.51ms
2025-08-29 19:33:27.511 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 19:33:27.512 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562 - 200 null application/json; charset=utf-8 82.5399ms
2025-08-29 19:33:27.614 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 19:33:27.618 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 19:33:27.625 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 177.525ms
2025-08-29 19:33:27.627 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 19:33:27.627 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 19:33:27.628 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 200.5874ms
2025-08-29 19:33:27.630 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:27.634 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 19:33:27.635 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 19:33:27.639 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 19:33:27.643 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 19:33:27.645 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 8.4106ms
2025-08-29 19:33:27.646 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 19:33:27.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 20.3198ms
2025-08-29 19:33:36.601 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562/assign-contacts - null null
2025-08-29 19:33:36.604 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:36.604 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562/assign-contacts - 204 null null 3.2459ms
2025-08-29 19:33:36.607 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562/assign-contacts - application/json 55
2025-08-29 19:33:36.609 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:36.610 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 19:33:36.614 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:33:36.639 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='78160695-874f-40c6-b07d-5df309cbf562', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-29 19:33:36.678 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d992f6e5-52ab-4211-af6f-a74aaa74fc60', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='78160695-874f-40c6-b07d-5df309cbf562', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-29T14:03:36.6443703Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-29T14:03:36.6444155Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-29 19:33:36.680 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:33:36.681 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 65.8494ms
2025-08-29 19:33:36.682 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 19:33:36.683 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/78160695-874f-40c6-b07d-5df309cbf562/assign-contacts - 200 null application/json; charset=utf-8 76.3912ms
2025-08-29 19:33:48.799 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 19:33:48.801 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:48.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.1902ms
2025-08-29 19:33:48.811 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 19:33:48.814 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:48.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 19:33:48.816 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:33:48.822 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 19:33:48.824 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 19:33:48.825 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.3454ms
2025-08-29 19:33:48.827 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 19:33:48.828 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.9705ms
2025-08-29 19:33:52.460 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/78160695-874f-40c6-b07d-5df309cbf562 - null null
2025-08-29 19:33:52.463 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:52.464 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/78160695-874f-40c6-b07d-5df309cbf562 - 204 null null 3.0938ms
2025-08-29 19:33:52.466 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/78160695-874f-40c6-b07d-5df309cbf562 - null 0
2025-08-29 19:33:52.470 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:33:52.471 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:33:52.475 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:33:56.027 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-29 19:33:56.037 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='78160695-874f-40c6-b07d-5df309cbf562'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 19:33:56.047 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:33:56.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 19:33:56.053 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:33:56.054 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:33:56.804 +05:30 [INF] Received HTTP response headers after 748.6562ms - 200
2025-08-29 19:33:56.806 +05:30 [INF] End processing HTTP request after 752.3853ms - 200
2025-08-29 19:33:59.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:33:59.621 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:33:59.622 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:34:00.809 +05:30 [INF] Received HTTP response headers after 1186.2821ms - 200
2025-08-29 19:34:00.810 +05:30 [INF] End processing HTTP request after 1189.277ms - 200
2025-08-29 19:34:00.916 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='3e74ffc3-ef58-48c1-bc7f-fbf202be11a4', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='78160695-874f-40c6-b07d-5df309cbf562' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-29T14:04:00.8158550Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='call_log' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T14:04:00.8158939Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='92a15aac-763c-44c8-8149-9720184f2c6d', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='78160695-874f-40c6-b07d-5df309cbf562', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-29T14:04:00.8471329Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is the checking for call log event.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA==', @p42='3e74ffc3-ef58-48c1-bc7f-fbf202be11a4' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='d992f6e5-52ab-4211-af6f-a74aaa74fc60', @p45='0', @p46='Sent', @p47='2025-08-29T14:04:00.8471786Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='call_log', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 19:34:04.970 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 19:34:04.971 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 12494.2069ms
2025-08-29 19:34:04.972 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:34:04.973 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/78160695-874f-40c6-b07d-5df309cbf562 - 200 null application/json; charset=utf-8 12507.0495ms
2025-08-29 19:34:09.872 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 796
2025-08-29 19:34:09.875 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:34:09.877 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:34:09.885 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA==","status":"failed","timestamp":"1756476248","recipient_id":"918974005240","errors":[{"code":131049,"title":"This message was not delivered to maintain healthy ecosystem engagement.","message":"This message was not delivered to maintain healthy ecosystem engagement.","error_data":{"details":"In order to maintain a healthy ecosystem engagement, the message failed to be delivered."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-29 19:34:09.888 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:34:09.890 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:34:09.891 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 12.6062ms
2025-08-29 19:34:09.893 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:34:09.893 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.5793ms
2025-08-29 19:34:09.894 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA==","status":"failed","timestamp":"1756476248","recipient_id":"918974005240","errors":[{"code":131049,"title":"This message was not delivered to maintain healthy ecosystem engagement.","message":"This message was not delivered to maintain healthy ecosystem engagement.","error_data":{"details":"In order to maintain a healthy ecosystem engagement, the message failed to be delivered."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-29 19:34:09.897 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 19:34:09.898 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA==","status":"failed","timestamp":"1756476248","recipient_id":"918974005240","errors":[{"code":131049,"title":"This message was not delivered to maintain healthy ecosystem engagement.","message":"This message was not delivered to maintain healthy ecosystem engagement.","error_data":{"details":"In order to maintain a healthy ecosystem engagement, the message failed to be delivered."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-29 19:34:09.908 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 19:34:09.914 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='92a15aac-763c-44c8-8149-9720184f2c6d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 19:34:09.916 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTVGMTlGNkIxMTE4QTI1MjZCAA== → failed
2025-08-29 19:34:30.886 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.MidsSdXHtmC1iKkvoug-qfoY_htKdackyzTW5Rgg3aE - null null
2025-08-29 19:34:30.894 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 19:34:30.898 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 19:34:30.915 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__p_cid_0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 19:34:30.941 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='0cb36a56-0a16-42d1-8d6b-0e64f1708c9a', @p1='0', @p2='Explore' (Nullable = false), @p3='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p4='c8fe4bc8-e681-460d-a641-32849d644d8d', @p5='web' (Nullable = false), @p6='2025-08-29T14:04:30.9108706Z' (DbType = DateTime), @p7='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 19:34:30.947 +05:30 [INF] CLICK WRITE-THROUGH cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-29 19:34:30.949 +05:30 [INF] CLICK ENQUEUE cid="c8fe4bc8-e681-460d-a641-32849d644d8d" idx=0 enqueued=true
2025-08-29 19:34:30.964 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='c8fe4bc8-e681-460d-a641-32849d644d8d'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 19:34:30.970 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-29 19:34:30.972 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 72.175ms
2025-08-29 19:34:30.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 19:34:30.974 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJjOGZlNGJjOC1lNjgxLTQ2MGQtYTY0MS0zMjg0OWQ2NDRkOGQiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2NDM5OTU2LCJleHAiOjE3NTkwMzE5NTZ9.MidsSdXHtmC1iKkvoug-qfoY_htKdackyzTW5Rgg3aE - 302 0 null 88.0959ms
2025-08-29 19:35:05.783 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-29 19:35:05.785 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:05.785 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 2.7846ms
2025-08-29 19:35:05.793 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-29 19:35:05.795 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:05.796 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:35:05.797 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:35:07.728 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 19:35:07.735 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:35:07.738 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 19:35:07.739 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:35:07.740 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:35:08.752 +05:30 [INF] Received HTTP response headers after 1010.2768ms - 200
2025-08-29 19:35:08.753 +05:30 [INF] End processing HTTP request after 1013.8092ms - 200
2025-08-29 19:35:14.085 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:35:14.087 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:35:14.088 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:35:15.095 +05:30 [INF] Received HTTP response headers after 1006.0235ms - 200
2025-08-29 19:35:15.096 +05:30 [INF] End processing HTTP request after 1009.0697ms - 200
2025-08-29 19:35:15.102 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='40841091-fe0e-452a-86e0-56030f70d282', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='80efee8d-0421-467a-86ac-1d5b2259bf1a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-29T14:05:15.0983122Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='call_log' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T14:05:15.0983123Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='07d50c0d-b39b-42fa-9df4-aaa314147673', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-29T14:05:15.0985661Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is the checking for call log event.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA==', @p42='40841091-fe0e-452a-86e0-56030f70d282' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='de87fab2-1941-44ce-9897-418353d10d95', @p45='0', @p46='Sent', @p47='2025-08-29T14:05:15.0985663Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='call_log', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 19:35:19.517 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 19:35:19.518 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 13719.8137ms
2025-08-29 19:35:19.519 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:35:19.520 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 200 null application/json; charset=utf-8 13727.0582ms
2025-08-29 19:35:23.592 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 796
2025-08-29 19:35:23.595 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:35:23.596 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:35:23.598 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA==","status":"failed","timestamp":"1756476321","recipient_id":"918974005240","errors":[{"code":131049,"title":"This message was not delivered to maintain healthy ecosystem engagement.","message":"This message was not delivered to maintain healthy ecosystem engagement.","error_data":{"details":"In order to maintain a healthy ecosystem engagement, the message failed to be delivered."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-29 19:35:23.600 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:35:23.601 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:35:23.602 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.165ms
2025-08-29 19:35:23.602 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA==","status":"failed","timestamp":"1756476321","recipient_id":"918974005240","errors":[{"code":131049,"title":"This message was not delivered to maintain healthy ecosystem engagement.","message":"This message was not delivered to maintain healthy ecosystem engagement.","error_data":{"details":"In order to maintain a healthy ecosystem engagement, the message failed to be delivered."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-29 19:35:23.607 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:35:23.608 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 19:35:23.609 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.2319ms
2025-08-29 19:35:23.609 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA==","status":"failed","timestamp":"1756476321","recipient_id":"918974005240","errors":[{"code":131049,"title":"This message was not delivered to maintain healthy ecosystem engagement.","message":"This message was not delivered to maintain healthy ecosystem engagement.","error_data":{"details":"In order to maintain a healthy ecosystem engagement, the message failed to be delivered."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-29 19:35:23.615 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 19:35:23.618 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='07d50c0d-b39b-42fa-9df4-aaa314147673'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 19:35:23.619 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEFFQ0U2ODBFRTk5OEEyNDIxAA== → failed
2025-08-29 19:35:29.771 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-29 19:35:29.773 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:29.774 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/recipients/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 3.501ms
2025-08-29 19:35:29.786 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-29 19:35:29.789 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:29.791 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-29 19:35:29.796 +05:30 [INF] Route matched with {action = "GetCampaignRecipients", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignRecipients(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:35:29.811 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."Name", c0."PhoneNumber", c0."Email", c0."LeadSource", c0."CreatedAt"
FROM "CampaignRecipients" AS c
INNER JOIN "Contacts" AS c0 ON c."ContactId" = c0."Id"
WHERE c."CampaignId" = @__campaignId_0 AND c0."BusinessId" = @__businessId_1
2025-08-29 19:35:29.814 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 19:35:29.816 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api) in 17.7775ms
2025-08-29 19:35:29.817 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignRecipients (xbytechat.api)'
2025-08-29 19:35:29.818 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/recipients/80efee8d-0421-467a-86ac-1d5b2259bf1a - 200 null application/json; charset=utf-8 32.537ms
2025-08-29 19:35:32.775 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 19:35:32.778 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:32.779 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.347ms
2025-08-29 19:35:32.790 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 19:35:32.792 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:32.794 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 19:35:32.794 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:35:32.800 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 19:35:32.803 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 19:35:32.804 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.3782ms
2025-08-29 19:35:32.806 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 19:35:32.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 17.3139ms
2025-08-29 19:35:45.282 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-08-29 19:35:45.285 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:35:45.286 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:35:45.289 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMkY3OEM0MDRFM0YwMUIwOThFRDNCNjc5NjJBNDE5OUIA","timestamp":"1756476343","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-08-29 19:35:45.290 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:35:45.291 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:35:45.292 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.772ms
2025-08-29 19:35:45.293 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:35:45.294 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.1696ms
2025-08-29 19:35:45.295 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMkY3OEM0MDRFM0YwMUIwOThFRDNCNjc5NjJBNDE5OUIA","timestamp":"1756476343","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-08-29 19:35:45.299 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-08-29 19:35:45.312 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-08-29 19:35:45.314 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-08-29 19:35:46.955 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-29 19:35:46.957 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:46.958 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 2.7142ms
2025-08-29 19:35:46.960 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-29 19:35:46.962 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:35:46.963 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:35:46.964 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:35:48.391 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 19:35:48.396 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:35:48.399 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 19:35:48.401 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:35:48.401 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:35:49.892 +05:30 [INF] Received HTTP response headers after 1489.6556ms - 200
2025-08-29 19:35:49.893 +05:30 [INF] End processing HTTP request after 1492.7524ms - 200
2025-08-29 19:35:56.448 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:35:56.451 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:35:56.451 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:35:57.356 +05:30 [INF] Received HTTP response headers after 904.2515ms - 200
2025-08-29 19:35:57.358 +05:30 [INF] End processing HTTP request after 907.4622ms - 200
2025-08-29 19:35:57.362 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='2eaf52e5-2d6b-4ef2-8755-07173ef07d3f', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='80efee8d-0421-467a-86ac-1d5b2259bf1a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-29T14:05:57.3596818Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='call_log' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T14:05:57.3596819Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='94a1f932-9135-47d5-8938-81c83de235ad', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-29T14:05:57.3601588Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is the checking for call log event.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==', @p42='2eaf52e5-2d6b-4ef2-8755-07173ef07d3f' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='de87fab2-1941-44ce-9897-418353d10d95', @p45='0', @p46='Sent', @p47='2025-08-29T14:05:57.3601589Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='call_log', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 19:36:02.071 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 19:36:02.073 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 15107.4843ms
2025-08-29 19:36:02.074 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:36:02.075 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 200 null application/json; charset=utf-8 15114.7228ms
2025-08-29 19:36:05.616 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 19:36:05.618 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:05.619 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:36:05.621 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==","status":"sent","timestamp":"1756476363","recipient_id":"918974005240","conversation":{"id":"e4f2371880fb64dc908c5cba30459006","expiration_timestamp":"1756476363","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:05.622 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:36:05.623 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==","status":"sent","timestamp":"1756476363","recipient_id":"918974005240","conversation":{"id":"e4f2371880fb64dc908c5cba30459006","expiration_timestamp":"1756476363","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:05.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:36:05.624 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 19:36:05.625 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.4364ms
2025-08-29 19:36:05.626 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==","status":"sent","timestamp":"1756476363","recipient_id":"918974005240","conversation":{"id":"e4f2371880fb64dc908c5cba30459006","expiration_timestamp":"1756476363","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:05.627 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:05.629 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.1538ms
2025-08-29 19:36:05.630 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 19:36:05.635 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='94a1f932-9135-47d5-8938-81c83de235ad'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 19:36:05.637 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA== → sent
2025-08-29 19:36:06.115 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 19:36:06.117 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:06.118 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:36:06.120 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==","status":"read","timestamp":"1756476364","recipient_id":"918974005240","conversation":{"id":"e4f2371880fb64dc908c5cba30459006","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:06.121 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:36:06.121 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==","status":"read","timestamp":"1756476364","recipient_id":"918974005240","conversation":{"id":"e4f2371880fb64dc908c5cba30459006","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:06.122 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:36:06.123 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 19:36:06.124 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.2686ms
2025-08-29 19:36:06.124 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA==","status":"read","timestamp":"1756476364","recipient_id":"918974005240","conversation":{"id":"e4f2371880fb64dc908c5cba30459006","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:06.125 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:06.127 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 19:36:06.127 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.5998ms
2025-08-29 19:36:06.130 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='94a1f932-9135-47d5-8938-81c83de235ad'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 19:36:06.135 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='94a1f932-9135-47d5-8938-81c83de235ad', @p0='2025-08-29T14:06:04.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-29 19:36:06.137 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDRGQTgwNzhBRDJBMzFFOUY2AA== → read
2025-08-29 19:36:07.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-29 19:36:07.737 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:36:07.737 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 2.7354ms
2025-08-29 19:36:07.740 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-29 19:36:07.742 +05:30 [INF] CORS policy execution successful.
2025-08-29 19:36:07.743 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:36:07.744 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 19:36:09.253 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 19:36:09.257 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:36:09.260 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 19:36:09.261 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:36:09.262 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 19:36:10.222 +05:30 [INF] Received HTTP response headers after 959.3526ms - 200
2025-08-29 19:36:10.224 +05:30 [INF] End processing HTTP request after 962.1114ms - 200
2025-08-29 19:36:10.227 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 19:36:10.229 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:36:10.229 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 19:36:11.494 +05:30 [INF] Received HTTP response headers after 1263.9467ms - 200
2025-08-29 19:36:11.495 +05:30 [INF] End processing HTTP request after 1266.6621ms - 200
2025-08-29 19:36:11.499 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='c061c306-b664-4781-97da-282a759a14f2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-29T14:06:11.4967736Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T14:06:11.4967737Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='ffc08fb4-aa67-4ac5-ae5c-fbee655c2e4d', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-29T14:06:11.4970109Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==', @p42='c061c306-b664-4781-97da-282a759a14f2' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Sent', @p47='2025-08-29T14:06:11.4970110Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 19:36:12.966 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 19:36:12.968 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5222.4433ms
2025-08-29 19:36:12.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 19:36:12.970 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 5229.3495ms
2025-08-29 19:36:19.961 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 19:36:19.963 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:19.964 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:36:19.966 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"sent","timestamp":"1756476377","recipient_id":"918974005240","conversation":{"id":"6947198480974ec14dee7df9891e6f91","expiration_timestamp":"1756476377","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:19.967 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:36:19.967 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"sent","timestamp":"1756476377","recipient_id":"918974005240","conversation":{"id":"6947198480974ec14dee7df9891e6f91","expiration_timestamp":"1756476377","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:19.968 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:36:19.969 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 19:36:19.970 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5927ms
2025-08-29 19:36:19.970 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"sent","timestamp":"1756476377","recipient_id":"918974005240","conversation":{"id":"6947198480974ec14dee7df9891e6f91","expiration_timestamp":"1756476377","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:19.971 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:19.973 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.4786ms
2025-08-29 19:36:19.973 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 19:36:19.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='ffc08fb4-aa67-4ac5-ae5c-fbee655c2e4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 19:36:19.980 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA== → sent
2025-08-29 19:36:20.425 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-29 19:36:20.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:20.428 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:36:20.430 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"delivered","timestamp":"1756476378","recipient_id":"918974005240","conversation":{"id":"6947198480974ec14dee7df9891e6f91","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:20.431 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:36:20.431 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"delivered","timestamp":"1756476378","recipient_id":"918974005240","conversation":{"id":"6947198480974ec14dee7df9891e6f91","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:20.432 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:36:20.433 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 19:36:20.434 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3961ms
2025-08-29 19:36:20.435 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"delivered","timestamp":"1756476378","recipient_id":"918974005240","conversation":{"id":"6947198480974ec14dee7df9891e6f91","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 19:36:20.436 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:20.438 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 19:36:20.438 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.0663ms
2025-08-29 19:36:20.441 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='ffc08fb4-aa67-4ac5-ae5c-fbee655c2e4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 19:36:20.446 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='ffc08fb4-aa67-4ac5-ae5c-fbee655c2e4d', @p0='2025-08-29T14:06:18.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-29 19:36:20.448 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA== → delivered
2025-08-29 19:36:21.596 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-29 19:36:21.598 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:21.599 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 19:36:21.600 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"read","timestamp":"1756476380","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 19:36:21.601 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 19:36:21.602 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 19:36:21.602 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"read","timestamp":"1756476380","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 19:36:21.603 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 2.6338ms
2025-08-29 19:36:21.603 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 19:36:21.604 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 19:36:21.605 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA==","status":"read","timestamp":"1756476380","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 19:36:21.605 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 9.7743ms
2025-08-29 19:36:21.608 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 19:36:21.612 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='ffc08fb4-aa67-4ac5-ae5c-fbee655c2e4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 19:36:21.615 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='ffc08fb4-aa67-4ac5-ae5c-fbee655c2e4d', @p0='2025-08-29T14:06:20.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-29 19:36:21.617 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkYwNzU2N0JCMEU0QzI0MjlDAA== → read
2025-08-29 19:36:37.907 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI5NGExZjkzMi05MTM1LTQ3ZDUtODkzOC04MWM4M2RlMjM1YWQiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2NDc2MzU2LCJleHAiOjE3NTkwNjgzNTZ9.waqjOmV0QVjb3WRymfEYgnKfBOsyxWMT9xUYZBLwADM - null null
2025-08-29 19:36:37.915 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 19:36:37.916 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 19:36:37.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__p_cid_0='94a1f932-9135-47d5-8938-81c83de235ad'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 19:36:37.925 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='40a08b03-3751-4423-83c8-9afae0187849', @p1='0', @p2='Explore' (Nullable = false), @p3='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p4='94a1f932-9135-47d5-8938-81c83de235ad', @p5='web' (Nullable = false), @p6='2025-08-29T14:06:37.9184489Z' (DbType = DateTime), @p7='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 19:36:37.927 +05:30 [INF] CLICK WRITE-THROUGH cid="94a1f932-9135-47d5-8938-81c83de235ad" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-29 19:36:37.928 +05:30 [INF] CLICK ENQUEUE cid="94a1f932-9135-47d5-8938-81c83de235ad" idx=0 enqueued=true
2025-08-29 19:36:37.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='94a1f932-9135-47d5-8938-81c83de235ad'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 19:36:37.934 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-29 19:36:37.935 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 17.2303ms
2025-08-29 19:36:37.936 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 19:36:37.937 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI5NGExZjkzMi05MTM1LTQ3ZDUtODkzOC04MWM4M2RlMjM1YWQiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2NDc2MzU2LCJleHAiOjE3NTkwNjgzNTZ9.waqjOmV0QVjb3WRymfEYgnKfBOsyxWMT9xUYZBLwADM - 302 0 null 30.5122ms
2025-08-29 19:36:41.852 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI5NGExZjkzMi05MTM1LTQ3ZDUtODkzOC04MWM4M2RlMjM1YWQiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2NDc2MzU2LCJleHAiOjE3NTkwNjgzNTZ9.1kckTzS_o9NIK14wqGoDatis4zFrK4bjPTArOlsybGg - null null
2025-08-29 19:36:41.871 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 19:36:41.872 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-29 19:36:41.876 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__p_cid_0='94a1f932-9135-47d5-8938-81c83de235ad'], CommandType='"Text"', CommandTimeout='30']
SELECT c."ContactId", c."CampaignId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__p_cid_0
LIMIT 1
2025-08-29 19:36:41.880 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='898f359c-1e02-49b6-82e7-687e849d0e2b', @p1='1', @p2='Call Us' (Nullable = false), @p3='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p4='94a1f932-9135-47d5-8938-81c83de235ad', @p5='call' (Nullable = false), @p6='2025-08-29T14:06:41.8746638Z' (DbType = DateTime), @p7='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p8='tel:+917082156227' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-29 19:36:41.881 +05:30 [INF] CLICK WRITE-THROUGH cid="94a1f932-9135-47d5-8938-81c83de235ad" idx=1 type=call dest=tel:+917082156227
2025-08-29 19:36:41.882 +05:30 [INF] CLICK ENQUEUE cid="94a1f932-9135-47d5-8938-81c83de235ad" idx=1 enqueued=true
2025-08-29 19:36:41.889 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='94a1f932-9135-47d5-8938-81c83de235ad'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-29 19:36:41.895 +05:30 [INF] Executing ContentResult with HTTP Response ContentType of text/html; charset=utf-8
2025-08-29 19:36:41.897 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 23.6135ms
2025-08-29 19:36:41.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-29 19:36:41.899 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI5NGExZjkzMi05MTM1LTQ3ZDUtODkzOC04MWM4M2RlMjM1YWQiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2NDc2MzU2LCJleHAiOjE3NTkwNjgzNTZ9.1kckTzS_o9NIK14wqGoDatis4zFrK4bjPTArOlsybGg - 200 null text/html; charset=utf-8 46.6658ms
2025-08-29 21:11:45.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 21:11:45.241 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:45.243 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 12.0712ms
2025-08-29 21:11:45.247 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 21:11:45.254 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:45.270 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29-08-2025 02:56:36 PM', Current time (UTC): '29-08-2025 03:41:45 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-29 21:11:45.344 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '29-08-2025 02:56:36 PM', Current time (UTC): '29-08-2025 03:41:45 PM'.
2025-08-29 21:11:45.348 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-29 21:11:45.406 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-29 21:11:45.425 +05:30 [ERR] Response has already started, unable to write error response for path: /api/whatsappsettings/me
2025-08-29 21:11:45.426 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 401 null application/json 179.1651ms
2025-08-29 21:11:52.389 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-29 21:11:52.391 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:52.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.3409ms
2025-08-29 21:11:52.395 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-29 21:11:52.397 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:52.398 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 21:11:52.399 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-29 21:11:52.425 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-29 21:11:52.670 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-29 21:11:52.676 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-29 21:11:52.684 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-29 21:11:52.686 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-29 21:11:52.687 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-29 21:11:52.688 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-29 21:11:52.689 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:11:52.690 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 289.4497ms
2025-08-29 21:11:52.692 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-29 21:11:52.692 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 297.5718ms
2025-08-29 21:11:52.696 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 21:11:52.697 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:52.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.707ms
2025-08-29 21:11:52.701 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 21:11:52.703 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:52.704 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 21:11:52.705 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 21:11:52.708 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-29 21:11:52.713 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 21:11:52.714 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:11:52.716 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7438ms
2025-08-29 21:11:52.717 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 21:11:52.718 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.5812ms
2025-08-29 21:11:52.731 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 21:11:52.734 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:52.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 21:11:52.736 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 21:11:52.740 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 21:11:52.744 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:11:52.745 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4071ms
2025-08-29 21:11:52.747 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 21:11:52.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.9723ms
2025-08-29 21:11:52.826 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-29 21:11:52.829 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:52.830 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 21:11:52.832 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-29 21:11:52.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-29 21:11:52.840 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:11:52.842 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6751ms
2025-08-29 21:11:52.843 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-29 21:11:52.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7273ms
2025-08-29 21:11:56.194 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 21:11:56.196 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:56.197 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.6001ms
2025-08-29 21:11:56.202 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-29 21:11:56.204 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:56.205 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 21:11:56.206 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 21:11:56.212 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:11:56.215 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-29 21:11:56.217 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 8.1554ms
2025-08-29 21:11:56.218 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-29 21:11:56.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 17.4789ms
2025-08-29 21:11:59.464 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-29 21:11:59.466 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:59.467 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 2.9128ms
2025-08-29 21:11:59.469 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 552
2025-08-29 21:11:59.471 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:11:59.472 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-29 21:11:59.473 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 21:11:59.475 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-29 21:11:59.477 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-29 21:11:59.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPSXZBql8DZBLDP1yXGui7ZCmQkbDmxn6PczAfOE31iv2P8FATb5Cl4StBoTZAqIVWdjLKg1I52k2mshvM7GXYfamzz2PPiv2gGmuFpQZCoZAcitPEWsfhf7XVOqOb11InCGtuLbWMnqM3k9Iyl3fuXnqhj44GyZASPyCDO3UZAs6hbmlnY9AmyYlOWqRyJjVgPj9uzLv3dr9jrkpgUbZCcz3EzDuacyiv8OPsbZBAZBynHwznarnOsR3gZDZD' (Nullable = false), @p1='2025-08-29T15:41:59.4807388Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-29 21:11:59.485 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:11:59.486 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 11.4208ms
2025-08-29 21:11:59.487 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-29 21:11:59.488 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 18.601ms
2025-08-29 21:12:00.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-29 21:12:00.186 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:00.187 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 2.7164ms
2025-08-29 21:12:00.189 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 384
2025-08-29 21:12:00.191 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:00.192 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-29 21:12:00.193 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-29 21:12:00.195 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-29 21:12:00.197 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-29 21:12:01.917 +05:30 [INF] Received HTTP response headers after 1719.5386ms - 200
2025-08-29 21:12:01.919 +05:30 [INF] End processing HTTP request after 1723.1558ms - 200
2025-08-29 21:12:01.920 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:12:01.921 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1726.5454ms
2025-08-29 21:12:01.922 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-29 21:12:01.923 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1734.3364ms
2025-08-29 21:12:09.573 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:12:09.576 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:09.576 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.2888ms
2025-08-29 21:12:09.579 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:12:09.582 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:09.583 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:12:09.584 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 21:12:09.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 21:12:09.595 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:12:09.596 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:12:11.112 +05:30 [INF] Received HTTP response headers after 1514.6182ms - 401
2025-08-29 21:12:11.114 +05:30 [INF] End processing HTTP request after 1518.2942ms - 401
2025-08-29 21:12:11.115 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:12:11.116 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:12:11.117 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:12:11.118 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:12:11.900 +05:30 [INF] Received HTTP response headers after 780.3507ms - 200
2025-08-29 21:12:11.901 +05:30 [INF] End processing HTTP request after 784.0167ms - 200
2025-08-29 21:12:11.902 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=Jxue_ccueRORSZ5ONRUl4A&oh=01_Q5Aa2QHWHUAqcwW3tasIJELKW-nqCKXflYhIwUWd34nti_1QxQ&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 21:12:11.905 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:12:11.907 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 2321.9599ms
2025-08-29 21:12:11.908 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:12:11.910 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 2330.2543ms
2025-08-29 21:12:24.393 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:12:24.397 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:24.398 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 4.9265ms
2025-08-29 21:12:24.401 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:12:24.403 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:24.404 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:12:24.406 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:12:24.416 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 21:12:24.417 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:12:24.419 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.0217ms
2025-08-29 21:12:24.420 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:12:24.421 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 20.2513ms
2025-08-29 21:12:26.115 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-29 21:12:26.117 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:26.118 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.2824ms
2025-08-29 21:12:26.121 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-29 21:12:26.123 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:26.124 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:12:26.129 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:12:26.137 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:12:26.152 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-29 21:12:26.167 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:12:26.168 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:12:26.944 +05:30 [INF] Received HTTP response headers after 774.753ms - 200
2025-08-29 21:12:26.945 +05:30 [INF] End processing HTTP request after 777.7995ms - 200
2025-08-29 21:12:27.023 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='build_urltracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.060 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='call_log', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.063 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='url_tracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.068 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.071 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.074 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:27.090 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='053cd292-5b35-40ea-8879-2a90092c789d', @p0='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p1='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p5='6023cfcb-8bad-4261-a4ba-3d3d8456f507', @p3='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p4='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p8='77340eb4-5f95-4c66-a225-6ffddd3a489a', @p6='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p7='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p12='82548fba-b831-417b-8b86-35562734bbbc', @p9='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p10='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=L6QkbB8p0DbImLbAscE0Cw&oh=01_Q5Aa2QGcTQ8En3_x3squA-VF8WepyiVGPGovDE1R9_F0eY0e4Q&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p11='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p15='891f7536-51a1-4221-9720-551eb3c805af', @p13='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p14='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p18='a08ea647-284c-4bf9-b6b0-1dc687c7b773', @p16='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p17='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p21='a54dccc0-008a-43d2-bffb-a65493080e88', @p19='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p20='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p24='dd4c715d-b8b8-4774-abf6-df5578476dcb', @p22='2025-08-29T15:42:26.1408774Z' (DbType = DateTime), @p23='2025-08-29T15:42:26.1408774Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p3, "UpdatedAt" = @p4
WHERE "Id" = @p5;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p6, "UpdatedAt" = @p7
WHERE "Id" = @p8;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p9, "RawJson" = @p10, "UpdatedAt" = @p11
WHERE "Id" = @p12;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p13, "UpdatedAt" = @p14
WHERE "Id" = @p15;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p16, "UpdatedAt" = @p17
WHERE "Id" = @p18;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p19, "UpdatedAt" = @p20
WHERE "Id" = @p21;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p22, "UpdatedAt" = @p23
WHERE "Id" = @p24;
2025-08-29 21:12:27.094 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType152`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 21:12:27.098 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 967.1108ms
2025-08-29 21:12:27.099 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:12:27.100 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 979.1733ms
2025-08-29 21:12:27.113 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:12:27.116 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:27.117 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:12:27.117 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:12:27.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 21:12:27.123 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:12:27.124 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 5.6097ms
2025-08-29 21:12:27.125 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:12:27.126 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 12.7624ms
2025-08-29 21:12:54.397 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-29 21:12:54.405 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:54.406 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 9.0745ms
2025-08-29 21:12:54.414 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-29 21:12:54.416 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:54.417 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:12:54.418 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:12:54.421 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:12:54.426 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-29 21:12:54.433 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:12:54.434 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:12:55.166 +05:30 [INF] Received HTTP response headers after 730.208ms - 200
2025-08-29 21:12:55.167 +05:30 [INF] End processing HTTP request after 733.7337ms - 200
2025-08-29 21:12:55.188 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='build_urltracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.193 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='call_log', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.197 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='url_tracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.200 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.204 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.210 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.212 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:12:55.220 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='10e478da-e7c4-483b-ae2b-ef5ba932896b', @p1='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p4='MARKETING', @p5='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p6='1100798472016654', @p7='True', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p11='shoe_launch_offer' (Nullable = false), @p12='1', @p13='meta_cloud' (Nullable = false), @p14='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=nruixyRPNJEwWl-K4I29Fw&oh=01_Q5Aa2QE7hGFSAcxC0OWXnkOwBYQL-xk5SjLzBVXrbje5t3XvBw&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p17='5d4c01e0-c8c2-4f33-a4e2-9bb422079526', @p18='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"},{"Type":"URL","Text":"View Demo","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p23='1322949819198164', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p28='url_tracking' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/tutrials"]},{"type":"URL","text":"View Demo","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p34='613a7e0c-076b-4f4c-87db-94533918f637', @p35='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p38='MARKETING', @p39='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p40='663456696777015', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p45='offer_aiboat' (Nullable = false), @p46='0', @p47='meta_cloud' (Nullable = false), @p48='{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p51='6e351713-960a-41e2-85b2-06d8364e0b01', @p52='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"URL","Text":"Shop Now","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Explore More","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p55='MARKETING', @p56='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p57='788214393726841', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p62='build_urltracking' (Nullable = false), @p63='0', @p64='meta_cloud' (Nullable = false), @p65='{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/softwaredev"]},{"type":"URL","text":"Explore More","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p68='7a867817-5d4f-44a4-a092-444cb67064df', @p69='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p70='c13be597-6ae2-42bb-9d43-925815f24ff8', @p71='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p72='UTILITY', @p73='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p74='817241660991962', @p75='False', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p79='account_creation_confirmation_3' (Nullable = false), @p80='2', @p81='meta_cloud' (Nullable = false), @p82='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p85='8733308e-df82-4528-8e38-96043e19644b', @p86='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p87='c13be597-6ae2-42bb-9d43-925815f24ff8', @p88='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p89='MARKETING', @p90='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p91='3255438291278546', @p92='False', @p93='True', @p94='en_US' (Nullable = false), @p95='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p96='bot_launch' (Nullable = false), @p97='0', @p98='meta_cloud' (Nullable = false), @p99='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p102='a94708a4-2710-4e2c-a7d7-5a26a248d4f7', @p103='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p104='c13be597-6ae2-42bb-9d43-925815f24ff8', @p105='[]' (Nullable = false), @p106='UTILITY', @p107='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p108='617143187619824', @p109='False', @p110='True', @p111='en_US' (Nullable = false), @p112='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p113='hello_world' (Nullable = false), @p114='0', @p115='meta_cloud' (Nullable = false), @p116='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p117='APPROVED' (Nullable = false), @p118='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p119='aea2b679-a921-46ae-927d-d41a02f90379', @p120='Hello

This is the checking for call log event.' (Nullable = false), @p121='c13be597-6ae2-42bb-9d43-925815f24ff8', @p122='[{"Type":"URL","Text":"Explore","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Call Us","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"}]' (Nullable = false), @p123='MARKETING', @p124='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p125='1286058192539680', @p126='False', @p127='True', @p128='en_US' (Nullable = false), @p129='2025-08-29T15:42:54.4249199Z' (DbType = DateTime), @p130='call_log' (Nullable = false), @p131='0', @p132='meta_cloud' (Nullable = false), @p133='{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/seeme"]},{"type":"URL","text":"Call Us","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"}' (Nullable = false), @p134='APPROVED' (Nullable = false), @p135='2025-08-29T15:42:54.4249199Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135);
2025-08-29 21:12:55.225 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType152`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 21:12:55.226 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 806.0053ms
2025-08-29 21:12:55.227 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:12:55.228 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 813.7838ms
2025-08-29 21:12:55.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:12:55.243 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:55.244 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 2.8767ms
2025-08-29 21:12:55.246 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:12:55.248 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:12:55.249 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:12:55.250 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:12:55.253 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 21:12:55.256 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:12:55.257 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 5.6725ms
2025-08-29 21:12:55.258 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:12:55.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 12.8651ms
2025-08-29 21:13:02.082 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-29 21:13:02.084 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:13:02.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 2.8834ms
2025-08-29 21:13:02.087 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-29 21:13:02.089 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:13:02.090 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:13:02.090 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:13:02.094 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:13:02.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-29 21:13:02.100 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-29 21:13:02.101 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType152`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 21:13:02.102 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 10.3617ms
2025-08-29 21:13:02.103 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:13:02.104 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 17.073ms
2025-08-29 21:13:02.120 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:13:02.123 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:13:02.124 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.3445ms
2025-08-29 21:13:02.126 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:13:02.129 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:13:02.130 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:13:02.130 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:13:02.133 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 21:13:02.136 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:13:02.138 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 5.7191ms
2025-08-29 21:13:02.139 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:13:02.140 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 13.2588ms
2025-08-29 21:15:50.862 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 323
2025-08-29 21:15:50.865 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:15:50.866 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:15:50.868 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756482349, "changes": [{"value": {"event": "APPROVED", "message_template_id": 2381212765606675, "message_template_name": "template_1", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-29 21:15:50.869 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:15:50.870 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:15:50.870 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756482349, "changes": [{"value": {"event": "APPROVED", "message_template_id": 2381212765606675, "message_template_name": "template_1", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-29 21:15:50.871 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.581ms
2025-08-29 21:15:50.876 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-29 21:15:50.877 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:15:50.879 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.5472ms
2025-08-29 21:16:39.731 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 323
2025-08-29 21:16:39.737 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:16:39.737 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:16:39.739 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756482398, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1222093123248950, "message_template_name": "template_2", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-29 21:16:39.740 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:16:39.741 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756482398, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1222093123248950, "message_template_name": "template_2", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-29 21:16:39.741 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:16:39.742 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-29 21:16:39.743 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.1959ms
2025-08-29 21:16:39.749 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:16:39.750 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 19.672ms
2025-08-29 21:18:55.844 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-29 21:18:55.851 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:18:55.852 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 7.9293ms
2025-08-29 21:18:55.855 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-29 21:18:55.857 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:18:55.858 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:18:55.858 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:18:55.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:18:55.982 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-29 21:18:55.984 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:18:55.985 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:18:58.532 +05:30 [INF] Received HTTP response headers after 2546.4165ms - 200
2025-08-29 21:18:58.534 +05:30 [INF] End processing HTTP request after 2549.4691ms - 200
2025-08-29 21:18:58.539 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='template_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.548 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='template_2', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.551 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='template_1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.554 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='build_urltracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.557 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='call_log', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.561 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='url_tracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.564 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.571 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.576 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-29 21:18:58.587 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='00175cd7-73ad-4b7b-b29d-9c9bb9cdd286', @p1='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p4='MARKETING', @p5='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p6='663456696777015', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p11='offer_aiboat' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p17='1a37643d-f679-447f-bdb8-caf06f33b039', @p18='This is the Template : 1' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"QUICK_REPLY","Text":"Show Me Template 2","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Show Me Template 3","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p23='2381212765606675', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p28='template_1' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p34='27f4051d-3897-4a44-9eac-4209703650da', @p35='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p38='UTILITY', @p39='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p40='817241660991962', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p45='account_creation_confirmation_3' (Nullable = false), @p46='2', @p47='meta_cloud' (Nullable = false), @p48='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p51='393a9452-fc1d-4f33-bfd8-cf288671693d', @p52='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"URL","Text":"Shop Now","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Explore More","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p55='MARKETING', @p56='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p57='788214393726841', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p62='build_urltracking' (Nullable = false), @p63='0', @p64='meta_cloud' (Nullable = false), @p65='{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/softwaredev"]},{"type":"URL","text":"Explore More","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p68='44b2d843-f0dc-409e-ad1c-29c575b2199c', @p69='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p70='c13be597-6ae2-42bb-9d43-925815f24ff8', @p71='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"},{"Type":"URL","Text":"View Demo","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"}]' (Nullable = false), @p72='MARKETING', @p73='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p74='1322949819198164', @p75='False', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p79='url_tracking' (Nullable = false), @p80='0', @p81='meta_cloud' (Nullable = false), @p82='{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/tutrials"]},{"type":"URL","text":"View Demo","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p85='64c4606e-4717-40dd-82b6-b462c14e4f4c', @p86='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p87='c13be597-6ae2-42bb-9d43-925815f24ff8', @p88='[]' (Nullable = false), @p89='UTILITY', @p90='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p91='617143187619824', @p92='False', @p93='True', @p94='en_US' (Nullable = false), @p95='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p96='hello_world' (Nullable = false), @p97='0', @p98='meta_cloud' (Nullable = false), @p99='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p102='69d84492-a454-4c69-b6e0-bf290f721006', @p103='This is themplate : 3' (Nullable = false), @p104='c13be597-6ae2-42bb-9d43-925815f24ff8', @p105='[{"Type":"QUICK_REPLY","Text":"Show Me Template 1","SubType":"quick_reply","Index":0,"ParameterValue":""}]' (Nullable = false), @p106='MARKETING', @p107='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p108='1760623375330098', @p109='False', @p110='True', @p111='en_US' (Nullable = false), @p112='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p113='template_3' (Nullable = false), @p114='0', @p115='meta_cloud' (Nullable = false), @p116='{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"}' (Nullable = false), @p117='APPROVED' (Nullable = false), @p118='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p119='90260fbd-26df-48ab-9bc6-d94d683f9253', @p120='Hello

This is the checking for call log event.' (Nullable = false), @p121='c13be597-6ae2-42bb-9d43-925815f24ff8', @p122='[{"Type":"URL","Text":"Explore","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Call Us","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"}]' (Nullable = false), @p123='MARKETING', @p124='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p125='1286058192539680', @p126='False', @p127='True', @p128='en_US' (Nullable = false), @p129='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p130='call_log' (Nullable = false), @p131='0', @p132='meta_cloud' (Nullable = false), @p133='{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/seeme"]},{"type":"URL","text":"Call Us","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"}' (Nullable = false), @p134='APPROVED' (Nullable = false), @p135='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p136='af9bd11c-2541-49cd-8b4c-1117bbc20267', @p137='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p138='c13be597-6ae2-42bb-9d43-925815f24ff8', @p139='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p140='MARKETING', @p141='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p142='3255438291278546', @p143='False', @p144='True', @p145='en_US' (Nullable = false), @p146='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p147='bot_launch' (Nullable = false), @p148='0', @p149='meta_cloud' (Nullable = false), @p150='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p151='APPROVED' (Nullable = false), @p152='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p153='bdf5b6a4-9317-48b7-a750-d81c64d3ef13', @p154='This is teh template 2' (Nullable = false), @p155='c13be597-6ae2-42bb-9d43-925815f24ff8', @p156='[{"Type":"QUICK_REPLY","Text":"Show Me Template 1","SubType":"quick_reply","Index":0,"ParameterValue":""}]' (Nullable = false), @p157='MARKETING', @p158='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p159='1222093123248950', @p160='False', @p161='True', @p162='en_US' (Nullable = false), @p163='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p164='template_2' (Nullable = false), @p165='0', @p166='meta_cloud' (Nullable = false), @p167='{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"}' (Nullable = false), @p168='APPROVED' (Nullable = false), @p169='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p170='e5448b69-03c6-4609-961f-037b216d662b', @p171='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p172='c13be597-6ae2-42bb-9d43-925815f24ff8', @p173='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p174='MARKETING', @p175='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p176='1100798472016654', @p177='True', @p178='True', @p179='en_US' (Nullable = false), @p180='2025-08-29T15:48:55.9808088Z' (DbType = DateTime), @p181='shoe_launch_offer' (Nullable = false), @p182='1', @p183='meta_cloud' (Nullable = false), @p184='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=2HVyu_f6wkiDrWjmZ87nkg&oh=01_Q5Aa2QGZVlncR3k-JGtw4iC9FgWksCMhMXH6R94xHBJlkmyDoA&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p185='APPROVED' (Nullable = false), @p186='2025-08-29T15:48:55.9808088Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186);
2025-08-29 21:18:58.592 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType152`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 21:18:58.594 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 2733.8008ms
2025-08-29 21:18:58.595 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-29 21:18:58.596 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 2740.9795ms
2025-08-29 21:18:58.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:18:58.617 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:18:58.618 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.4396ms
2025-08-29 21:18:58.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-29 21:18:58.631 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:18:58.632 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:18:58.633 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:18:58.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-29 21:18:58.640 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType153`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:18:58.641 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 7.2363ms
2025-08-29 21:18:58.643 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-29 21:18:58.644 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 16.4946ms
2025-08-29 21:19:01.260 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 323
2025-08-29 21:19:01.263 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:19:01.264 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:19:01.266 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756482539, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1760623375330098, "message_template_name": "template_3", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-29 21:19:01.267 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:19:01.267 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756482539, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1760623375330098, "message_template_name": "template_3", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-29 21:19:01.268 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:19:01.268 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-29 21:19:01.269 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8192ms
2025-08-29 21:19:01.271 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:19:01.272 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.7255ms
2025-08-29 21:19:01.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/template_1 - null null
2025-08-29 21:19:01.532 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:01.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/template_1 - 204 null null 3.424ms
2025-08-29 21:19:01.535 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/template_1 - null null
2025-08-29 21:19:01.537 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:01.539 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 21:19:01.539 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-29 21:19:01.543 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='template_1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-29 21:19:01.545 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType154`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:19:01.547 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 6.0628ms
2025-08-29 21:19:01.549 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-29 21:19:01.549 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/template_1 - 200 null application/json; charset=utf-8 14.0796ms
2025-08-29 21:19:25.277 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-29 21:19:25.280 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:25.280 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.1661ms
2025-08-29 21:19:25.283 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 394
2025-08-29 21:19:25.285 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:25.285 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 21:19:25.287 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 21:19:28.211 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 21:19:28.214 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 21:19:28.215 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 21:19:29.058 +05:30 [INF] Received HTTP response headers after 841.734ms - 200
2025-08-29 21:19:29.059 +05:30 [INF] End processing HTTP request after 844.7753ms - 200
2025-08-29 21:19:29.076 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='fcae87c7-30fb-4b7c-9708-48a5b22a5553', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-29T15:49:29.0717078Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='This is the Template : 1', @p14='template_1' (Nullable = false), @p15='Flow_test' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='template_1', @p20='[]', @p21='2025-08-29T15:49:29.0717079Z' (DbType = DateTime), @p22='2ae28ad6-4d74-4c58-8e0e-cdacfe90ef01', @p23='fcae87c7-30fb-4b7c-9708-48a5b22a5553', @p24='True', @p25='1', @p26='Show Me Template 2' (Nullable = false), @p27='QUICK_REPLY' (Nullable = false), @p28='' (Nullable = false), @p29='61b5783f-ab11-49e3-87af-95d747d60f71', @p30='fcae87c7-30fb-4b7c-9708-48a5b22a5553', @p31='True', @p32='2', @p33='Show Me Template 3' (Nullable = false), @p34='QUICK_REPLY' (Nullable = false), @p35='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-29 21:19:29.079 +05:30 [INF] ✅ Campaign 'Flow_test' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-29 21:19:29.081 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:19:29.082 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3794.1144ms
2025-08-29 21:19:29.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-29 21:19:29.084 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3801.4394ms
2025-08-29 21:19:29.170 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 21:19:29.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 21:19:29.173 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - null null
2025-08-29 21:19:29.173 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-29 21:19:29.182 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.185 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.187 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.189 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 19.3762ms
2025-08-29 21:19:29.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 16.9234ms
2025-08-29 21:19:29.191 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - 204 null null 18.8107ms
2025-08-29 21:19:29.192 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 19.0559ms
2025-08-29 21:19:29.200 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - null null
2025-08-29 21:19:29.204 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 21:19:29.207 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-29 21:19:29.214 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.217 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.220 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.221 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 21:19:29.222 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 21:19:29.223 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 21:19:29.224 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 21:19:29.226 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 21:19:29.227 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-29 21:19:29.237 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='fcae87c7-30fb-4b7c-9708-48a5b22a5553', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-29 21:19:29.239 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-29 21:19:29.247 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-29 21:19:29.252 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-29 21:19:29.252 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 21.7031ms
2025-08-29 21:19:29.258 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-29 21:19:29.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - 200 null application/json; charset=utf-8 58.7629ms
2025-08-29 21:19:29.261 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-29 21:19:29.267 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 21:19:29.271 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 32.4801ms
2025-08-29 21:19:29.273 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-29 21:19:29.274 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 66.8111ms
2025-08-29 21:19:29.450 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 21:19:29.452 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 21:19:29.454 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 220.4647ms
2025-08-29 21:19:29.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-29 21:19:29.455 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 21:19:29.458 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:29.459 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 255.1123ms
2025-08-29 21:19:29.460 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 21:19:29.464 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-29 21:19:29.467 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-29 21:19:29.472 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 21:19:29.473 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 7.3341ms
2025-08-29 21:19:29.474 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-29 21:19:29.476 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 20.9519ms
2025-08-29 21:19:36.243 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553/assign-contacts - null null
2025-08-29 21:19:36.245 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:36.246 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553/assign-contacts - 204 null null 2.9272ms
2025-08-29 21:19:36.248 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553/assign-contacts - application/json 55
2025-08-29 21:19:36.251 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:36.251 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 21:19:36.252 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 21:19:36.257 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='fcae87c7-30fb-4b7c-9708-48a5b22a5553', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-29 21:19:36.262 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='bca7213f-d829-42c4-887d-2a6048ebc645', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='fcae87c7-30fb-4b7c-9708-48a5b22a5553', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-29T15:49:36.2602330Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-29T15:49:36.2602332Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-29 21:19:36.264 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:19:36.265 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 12.0341ms
2025-08-29 21:19:36.266 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-29 21:19:36.267 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553/assign-contacts - 200 null application/json; charset=utf-8 18.9403ms
2025-08-29 21:19:42.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:19:42.952 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:42.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.0728ms
2025-08-29 21:19:42.955 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:19:42.957 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:42.957 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:19:42.958 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 21:19:42.961 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 21:19:42.963 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:19:42.964 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:19:44.465 +05:30 [INF] Received HTTP response headers after 1499.9397ms - 401
2025-08-29 21:19:44.466 +05:30 [INF] End processing HTTP request after 1503.0067ms - 401
2025-08-29 21:19:44.467 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:19:44.469 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:19:44.470 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:19:44.471 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:19:45.421 +05:30 [INF] Received HTTP response headers after 949.8483ms - 200
2025-08-29 21:19:45.423 +05:30 [INF] End processing HTTP request after 952.9956ms - 200
2025-08-29 21:19:45.444 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=4gB9OLSI24ChMmjj7Un35Q&oh=01_Q5Aa2QFNcthE3LR1iMztbpZie91jC-xrViIlq0Zn2Ugdneds0g&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 21:19:45.447 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:19:45.448 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 2488.8984ms
2025-08-29 21:19:45.449 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:19:45.450 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 2495.3776ms
2025-08-29 21:19:55.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:19:55.954 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:55.955 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 4.3135ms
2025-08-29 21:19:55.958 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:19:55.961 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:19:55.962 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:19:55.964 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 21:19:55.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 21:19:55.972 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:19:55.973 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:19:57.293 +05:30 [INF] Received HTTP response headers after 1318.4438ms - 401
2025-08-29 21:19:57.294 +05:30 [INF] End processing HTTP request after 1322.4455ms - 401
2025-08-29 21:19:57.295 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:19:57.296 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:19:57.297 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:19:57.298 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:19:58.980 +05:30 [INF] Received HTTP response headers after 1680.8792ms - 200
2025-08-29 21:19:58.981 +05:30 [INF] End processing HTTP request after 1683.9941ms - 200
2025-08-29 21:19:58.989 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=rOIxJuwFslv0-CyqdDENYA&oh=01_Q5Aa2QF93txPsbQ3hSiFI8fm5OzpNprY7hvx3cfIIYkMe8GwMQ&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 21:19:58.991 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:19:58.993 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 3027.1888ms
2025-08-29 21:19:58.994 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:19:58.995 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 3036.7169ms
2025-08-29 21:20:09.343 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:20:09.346 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:20:09.347 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 4.0337ms
2025-08-29 21:20:09.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-29 21:20:09.353 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:20:09.354 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:20:09.355 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-29 21:20:09.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-29 21:20:09.362 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:20:09.363 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-29 21:20:09.470 +05:30 [INF] Received HTTP response headers after 105.4677ms - 401
2025-08-29 21:20:09.471 +05:30 [INF] End processing HTTP request after 109.1081ms - 401
2025-08-29 21:20:09.472 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:20:09.473 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"code":100,"status":"failed","error":"API key is required"}
2025-08-29 21:20:09.474 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:20:09.475 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-29 21:20:10.313 +05:30 [INF] Received HTTP response headers after 836.5199ms - 200
2025-08-29 21:20:10.314 +05:30 [INF] End processing HTTP request after 839.7867ms - 200
2025-08-29 21:20:10.350 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=5YqeSjGq9rgQ7kNvwFtLp11&_nc_oc=Adm43mxpp2CQ-p51arZrc7YzDJFCIlfzC1LugDrB4N0YxlADEvQGrlxqDzwN6CklQ4gVpJaW4P0vWPKkepyytIwf&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=6B3rsT7Zp4FQtatCiNIcJg&oh=01_Q5Aa2QHZJV8GBxJAFA2ZFeok5v_hxL2RfMK_JPuZ2e3tb-6fPQ&oe=68D9220F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-08-29 21:20:10.354 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType84`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:20:10.355 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 998.9966ms
2025-08-29 21:20:10.357 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-29 21:20:10.358 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1008.0345ms
2025-08-29 21:21:20.154 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-08-29 21:21:20.157 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:21:20.158 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 3.5041ms
2025-08-29 21:21:20.161 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 2038
2025-08-29 21:21:20.164 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:21:20.165 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-08-29 21:21:20.167 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 21:21:24.670 +05:30 [INF] 📦 Saving CTA Flow: Flow_test_v1 by Tata Consultancy Services
2025-08-29 21:21:24.671 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: Flow_test_v1 | BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:21:24.677 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_FlowName_0='Flow_test_v1', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-08-29 21:21:24.680 +05:30 [INF] ✅ New FlowConfig created with ID: "4d706a0a-467c-4fca-a8e2-da978fd28504"
2025-08-29 21:21:24.688 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='4d706a0a-467c-4fca-a8e2-da978fd28504', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='2025-08-29T15:51:24.6796990Z' (DbType = DateTime), @p3='Tata Consultancy Services', @p4='Flow_test_v1' (Nullable = false), @p5='True', @p6='True', @p7='2025-08-29T15:51:24.6796991Z' (Nullable = true) (DbType = DateTime), @p8='8639fb2e-ec58-40c6-a7d5-12da1af869d2', @p9='4d706a0a-467c-4fca-a8e2-da978fd28504', @p10='454.76538' (Nullable = true), @p11='153.98543' (Nullable = true), @p12=NULL, @p13=NULL, @p14='2', @p15='template_3' (Nullable = false), @p16='text_template', @p17='Show Me Template 3' (Nullable = false), @p18='QUICK_REPLY' (Nullable = false), @p19='9469559a-99a6-4112-b552-3ab3fb138062', @p20='4d706a0a-467c-4fca-a8e2-da978fd28504', @p21='174.63074' (Nullable = true), @p22='-102.92691' (Nullable = true), @p23=NULL, @p24=NULL, @p25='0', @p26='template_1' (Nullable = false), @p27='text_template', @p28='Show Me Template 1' (Nullable = false), @p29='QUICK_REPLY' (Nullable = false), @p30='b3026233-a679-44dd-9732-c4b0f8f80573', @p31='4d706a0a-467c-4fca-a8e2-da978fd28504', @p32='633.92566' (Nullable = true), @p33='-61.867615' (Nullable = true), @p34=NULL, @p35=NULL, @p36='1', @p37='template_2' (Nullable = false), @p38='text_template', @p39='Show Me Template 2' (Nullable = false), @p40='QUICK_REPLY' (Nullable = false), @p41='1c4feae0-3e07-4021-a73a-80c8c1251b5e', @p42='quick_reply' (Nullable = false), @p43='Show Me Template 3' (Nullable = false), @p44='QUICK_REPLY' (Nullable = false), @p45='' (Nullable = false), @p46='9469559a-99a6-4112-b552-3ab3fb138062', @p47='8639fb2e-ec58-40c6-a7d5-12da1af869d2' (Nullable = true), @p48='530617ed-552a-4c3b-8bbe-f97ff9764439', @p49='quick_reply' (Nullable = false), @p50='Show Me Template 1' (Nullable = false), @p51='QUICK_REPLY' (Nullable = false), @p52='' (Nullable = false), @p53='8639fb2e-ec58-40c6-a7d5-12da1af869d2', @p54='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true), @p55='b519e0dd-6cd0-4d66-8218-50b961c0cdf8', @p56='quick_reply' (Nullable = false), @p57='Show Me Template 2' (Nullable = false), @p58='QUICK_REPLY' (Nullable = false), @p59='' (Nullable = false), @p60='9469559a-99a6-4112-b552-3ab3fb138062', @p61='b3026233-a679-44dd-9732-c4b0f8f80573' (Nullable = true), @p62='bec64d80-2aca-4915-9b7d-924ec6ad6eec', @p63='quick_reply' (Nullable = false), @p64='Show Me Template 1' (Nullable = false), @p65='QUICK_REPLY' (Nullable = false), @p66='' (Nullable = false), @p67='b3026233-a679-44dd-9732-c4b0f8f80573', @p68='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CTAFlowConfigs" ("Id", "BusinessId", "CreatedAt", "CreatedBy", "FlowName", "IsActive", "IsPublished", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53, @p54);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p55, @p56, @p57, @p58, @p59, @p60, @p61);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p62, @p63, @p64, @p65, @p66, @p67, @p68);
2025-08-29 21:21:24.691 +05:30 [INF] ✅ Flow 'Flow_test_v1' saved | Steps: 3 | Links: 8
2025-08-29 21:21:24.693 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:21:24.694 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 4525.285ms
2025-08-29 21:21:24.695 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-08-29 21:21:24.697 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 4535.2249ms
2025-08-29 21:21:37.289 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 21:21:37.293 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:21:37.294 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 5.0062ms
2025-08-29 21:21:37.301 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-08-29 21:21:37.306 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:21:37.308 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 21:21:37.314 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 21:21:37.338 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."CreatedAt", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND NOT (c."IsPublished") AND c."IsActive"
ORDER BY c."CreatedAt" DESC
2025-08-29 21:21:37.346 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 21:21:37.349 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 31.8689ms
2025-08-29 21:21:37.352 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-08-29 21:21:37.354 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 200 null application/json; charset=utf-8 53.0997ms
2025-08-29 21:21:38.410 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - null null
2025-08-29 21:21:38.412 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:21:38.413 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - 204 null null 3.0403ms
2025-08-29 21:21:38.416 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - null null
2025-08-29 21:21:38.418 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:21:38.419 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 21:21:38.422 +05:30 [INF] Route matched with {action = "GetPublishedFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublishedFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-08-29 21:21:38.429 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished", c."CreatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsPublished"
ORDER BY c."CreatedAt" DESC
2025-08-29 21:21:38.434 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 21:21:38.437 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api) in 12.8977ms
2025-08-29 21:21:38.438 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-08-29 21:21:38.439 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - 200 null application/json; charset=utf-8 23.7457ms
2025-08-29 21:22:08.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 21:22:08.968 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:22:08.969 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.2402ms
2025-08-29 21:22:08.976 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-29 21:22:08.980 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:22:08.981 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 21:22:08.982 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 21:22:08.988 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-29 21:22:08.991 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-29 21:22:08.993 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.3341ms
2025-08-29 21:22:08.994 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-29 21:22:08.995 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 19.088ms
2025-08-29 21:22:11.198 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - null null
2025-08-29 21:22:11.200 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:22:11.201 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - 204 null null 3.1314ms
2025-08-29 21:22:11.204 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - null 0
2025-08-29 21:22:11.206 +05:30 [INF] CORS policy execution successful.
2025-08-29 21:22:11.207 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 21:22:11.208 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-29 21:22:12.985 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='fcae87c7-30fb-4b7c-9708-48a5b22a5553'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-29 21:22:12.989 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:22:12.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-29 21:22:12.994 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 21:22:12.995 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-29 21:22:14.192 +05:30 [INF] Received HTTP response headers after 1196.7283ms - 200
2025-08-29 21:22:14.194 +05:30 [INF] End processing HTTP request after 1199.5554ms - 200
2025-08-29 21:22:14.213 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:22:14.216 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:22:14.217 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:22:15.802 +05:30 [INF] Received HTTP response headers after 1583.2469ms - 200
2025-08-29 21:22:15.803 +05:30 [INF] End processing HTTP request after 1586.8186ms - 200
2025-08-29 21:22:15.815 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='26511acc-1956-4daa-8bfa-b173c97721d1', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='fcae87c7-30fb-4b7c-9708-48a5b22a5553' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-29T15:52:15.8049476Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_1' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-29T15:52:15.8049477Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='95355d23-d50c-4f53-9cd9-a7bf26b1ba30', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='fcae87c7-30fb-4b7c-9708-48a5b22a5553', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-29T15:52:15.8057707Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='This is the Template : 1' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==', @p42='26511acc-1956-4daa-8bfa-b173c97721d1' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='bca7213f-d829-42c4-887d-2a6048ebc645', @p45='0', @p46='Sent', @p47='2025-08-29T15:52:15.8057709Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='template_1', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-29 21:22:20.148 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-29 21:22:20.153 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:22:20.154 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-29 21:22:20.155 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8946.0743ms
2025-08-29 21:22:20.161 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:20.163 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:20.164 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-29 21:22:20.165 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:20.166 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:20.167 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/fcae87c7-30fb-4b7c-9708-48a5b22a5553 - 200 null application/json; charset=utf-8 8963.9746ms
2025-08-29 21:22:20.170 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"sent","timestamp":"1756482735","recipient_id":"918974005240","conversation":{"id":"345103a1cc34f6d71307b7f780628c8e","expiration_timestamp":"1756482735","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:20.171 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"delivered","timestamp":"1756482737","recipient_id":"918974005240","conversation":{"id":"345103a1cc34f6d71307b7f780628c8e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:20.176 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:20.176 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"sent","timestamp":"1756482735","recipient_id":"918974005240","conversation":{"id":"345103a1cc34f6d71307b7f780628c8e","expiration_timestamp":"1756482735","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:20.178 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:20.179 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:20.180 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:22:20.181 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:20.183 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.4993ms
2025-08-29 21:22:20.184 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"sent","timestamp":"1756482735","recipient_id":"918974005240","conversation":{"id":"345103a1cc34f6d71307b7f780628c8e","expiration_timestamp":"1756482735","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:20.185 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.2291ms
2025-08-29 21:22:20.187 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:20.190 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:20.192 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.0912ms
2025-08-29 21:22:20.192 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:22:20.193 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 38.6059ms
2025-08-29 21:22:20.202 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='95355d23-d50c-4f53-9cd9-a7bf26b1ba30'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 21:22:20.208 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA== → sent
2025-08-29 21:22:20.211 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"delivered","timestamp":"1756482737","recipient_id":"918974005240","conversation":{"id":"345103a1cc34f6d71307b7f780628c8e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:20.213 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:22:20.214 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"delivered","timestamp":"1756482737","recipient_id":"918974005240","conversation":{"id":"345103a1cc34f6d71307b7f780628c8e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:20.217 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:22:20.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='95355d23-d50c-4f53-9cd9-a7bf26b1ba30'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 21:22:20.227 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='95355d23-d50c-4f53-9cd9-a7bf26b1ba30', @p0='2025-08-29T15:52:17.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-29 21:22:20.229 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA== → delivered
2025-08-29 21:22:34.468 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-29 21:22:34.470 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:34.471 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:34.473 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"read","timestamp":"1756482752","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 21:22:34.474 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:34.474 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"read","timestamp":"1756482752","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 21:22:34.474 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:34.475 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:22:34.476 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9308ms
2025-08-29 21:22:34.477 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==","status":"read","timestamp":"1756482752","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-29 21:22:34.478 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:34.480 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:22:34.481 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.0128ms
2025-08-29 21:22:34.484 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='95355d23-d50c-4f53-9cd9-a7bf26b1ba30'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-29 21:22:34.490 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='95355d23-d50c-4f53-9cd9-a7bf26b1ba30', @p0='2025-08-29T15:52:32.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-29 21:22:34.492 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA== → read
2025-08-29 21:22:36.858 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:22:36.860 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:36.861 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:36.863 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTBCREJDQ0YxRDRCQTcwODM0QzREMjczNjg1QjMzRTYA","timestamp":"1756482754","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:22:36.865 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:36.865 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTBCREJDQ0YxRDRCQTcwODM0QzREMjczNjg1QjMzRTYA","timestamp":"1756482754","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:22:36.865 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:36.867 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:22:36.868 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.3418ms
2025-08-29 21:22:36.870 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:36.871 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.3427ms
2025-08-29 21:22:36.874 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:22:36.875 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTBCREJDQ0YxRDRCQTcwODM0QzREMjczNjg1QjMzRTYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==, Text: Show Me Template 2
2025-08-29 21:22:36.894 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:22:36.897 +05:30 [INF] 📊 CampaignSendLog matched via context.id
2025-08-29 21:22:40.483 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:22:40.493 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM "CampaignSendLogs" AS c
INNER JOIN "CampaignRecipients" AS c0 ON c."RecipientId" = c0."Id"
WHERE c."MessageId" = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:22:40.497 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p3='95355d23-d50c-4f53-9cd9-a7bf26b1ba30', @p0='Show Me Template 2', @p1='2025-08-29T15:52:36.9002662Z' (Nullable = true) (DbType = DateTime), @p2='True'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ClickType" = @p0, "ClickedAt" = @p1, "IsClicked" = @p2
WHERE "Id" = @p3;
2025-08-29 21:22:40.553 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='7774fde5-ec68-4076-99b0-c92a7fb6d1b0', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 2', @p4='Show Me Template 2', @p5='fcae87c7-30fb-4b7c-9708-48a5b22a5553' (Nullable = true), @p6='95355d23-d50c-4f53-9cd9-a7bf26b1ba30' (Nullable = true), @p7=NULL, @p8='2025-08-29T15:52:36.9002662Z' (DbType = DateTime), @p9='webhook', @p10='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzk3NzFDNzVFQjBFRDI5MTY5AA==', @p18='26511acc-1956-4daa-8bfa-b173c97721d1' (Nullable = true), @p19=NULL, @p20=NULL (DbType = Guid), @p21='fcae87c7-30fb-4b7c-9708-48a5b22a5553' (Nullable = true), @p22='campaign' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:22:40.558 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:22:40.571 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='fcae87c7-30fb-4b7c-9708-48a5b22a5553' (Nullable = true), @__normalizedButtonText_1='show me template 2', @__normalizedTemplateName_2='template_1'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonText", c."CampaignId", c."CreatedAt", c."CreatedBy", c."OverrideNextTemplate", c."TemplateName"
FROM "CampaignFlowOverrides" AS c
WHERE c."CampaignId" = @__campaignId_0 AND lower(c."ButtonText") = @__normalizedButtonText_1 AND lower(c."TemplateName") = @__normalizedTemplateName_2
LIMIT 1
2025-08-29 21:22:40.573 +05:30 [INF] 🟡 No campaign override found for button 'show me template 2' on template 'template_1'
2025-08-29 21:22:40.598 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 2', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:22:40.604 +05:30 [INF] ✅ Fallback flow step matched: StepId = "b3026233-a679-44dd-9732-c4b0f8f80573", Flow = Flow_test_v1
2025-08-29 21:22:40.605 +05:30 [INF] 🔁 Matched CTA Step → "b3026233-a679-44dd-9732-c4b0f8f80573"
2025-08-29 21:22:40.607 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573" | TrackingLogId: "7774fde5-ec68-4076-99b0-c92a7fb6d1b0"
2025-08-29 21:22:40.627 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='7774fde5-ec68-4076-99b0-c92a7fb6d1b0'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:22:40.642 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='b3026233-a679-44dd-9732-c4b0f8f80573' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:22:40.645 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573", Template: template_2
2025-08-29 21:22:40.649 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:22:40.654 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:22:40.655 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:22:41.744 +05:30 [INF] Received HTTP response headers after 1087.8147ms - 200
2025-08-29 21:22:41.745 +05:30 [INF] End processing HTTP request after 1091.4931ms - 200
2025-08-29 21:22:41.767 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='8e70928c-4b5f-45da-9d68-c5f7ca62a238', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:52:41.7653378Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_2' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:52:41.7653369Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:22:41.796 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='43c247a5-35c3-4fc0-9039-d8bfe65d11b5', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:52:41.7708415Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='b3026233-a679-44dd-9732-c4b0f8f80573', @p8='' (Nullable = false), @p9='True', @p10='template_2', @p11='text_template', @p12='7774fde5-ec68-4076-99b0-c92a7fb6d1b0' (Nullable = true), @p13='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:22:41.799 +05:30 [INF] ✅ Flow step executed → Template: template_2 sent to +918974005240
2025-08-29 21:22:41.801 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:22:42.887 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:22:42.890 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:42.891 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:42.892 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==","status":"sent","timestamp":"1756482760","recipient_id":"918974005240","conversation":{"id":"666f63f9493709ae47eb1e8fe4e062a9","expiration_timestamp":"1756482760","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:42.893 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:42.894 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==","status":"sent","timestamp":"1756482760","recipient_id":"918974005240","conversation":{"id":"666f63f9493709ae47eb1e8fe4e062a9","expiration_timestamp":"1756482760","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:42.894 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:42.895 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:22:42.896 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.0673ms
2025-08-29 21:22:42.897 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==","status":"sent","timestamp":"1756482760","recipient_id":"918974005240","conversation":{"id":"666f63f9493709ae47eb1e8fe4e062a9","expiration_timestamp":"1756482760","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:42.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:42.900 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.265ms
2025-08-29 21:22:42.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:22:42.905 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==
2025-08-29 21:22:42.906 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==
2025-08-29 21:22:43.309 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:22:43.311 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:43.312 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:43.314 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==","status":"read","timestamp":"1756482761","recipient_id":"918974005240","conversation":{"id":"666f63f9493709ae47eb1e8fe4e062a9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:43.315 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:43.316 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==","status":"read","timestamp":"1756482761","recipient_id":"918974005240","conversation":{"id":"666f63f9493709ae47eb1e8fe4e062a9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:43.316 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:43.317 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:22:43.319 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.9005ms
2025-08-29 21:22:43.319 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==","status":"read","timestamp":"1756482761","recipient_id":"918974005240","conversation":{"id":"666f63f9493709ae47eb1e8fe4e062a9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:43.320 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:43.323 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.8799ms
2025-08-29 21:22:43.323 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:22:43.327 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==
2025-08-29 21:22:43.328 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==
2025-08-29 21:22:46.047 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:22:46.050 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:46.051 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:46.053 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjhCOTU1NzU0NEVGOUY4NjQzM0Y2RTk0QTkwMEY1RDQA","timestamp":"1756482763","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:22:46.054 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:46.055 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjhCOTU1NzU0NEVGOUY4NjQzM0Y2RTk0QTkwMEY1RDQA","timestamp":"1756482763","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:22:46.055 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:46.057 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:22:46.058 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.5184ms
2025-08-29 21:22:46.059 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:22:46.060 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:46.060 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjhCOTU1NzU0NEVGOUY4NjQzM0Y2RTk0QTkwMEY1RDQA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==, Text: Show Me Template 1
2025-08-29 21:22:46.061 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.1481ms
2025-08-29 21:22:46.065 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:22:46.084 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:22:46.086 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:22:47.305 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:22:47.308 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='2b68fc8a-f205-46da-b1a9-ec3a9274f04c', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 1', @p4='Show Me Template 1', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:52:46.0873198Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0EwMDI0NTc5NzgwRTE1N0IzAA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:22:47.310 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:22:47.313 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 1', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:22:47.315 +05:30 [INF] ✅ Fallback flow step matched: StepId = "9469559a-99a6-4112-b552-3ab3fb138062", Flow = Flow_test_v1
2025-08-29 21:22:47.316 +05:30 [INF] 🔁 Matched CTA Step → "9469559a-99a6-4112-b552-3ab3fb138062"
2025-08-29 21:22:47.317 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "9469559a-99a6-4112-b552-3ab3fb138062" | TrackingLogId: "2b68fc8a-f205-46da-b1a9-ec3a9274f04c"
2025-08-29 21:22:47.319 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__trackingLogId_0='2b68fc8a-f205-46da-b1a9-ec3a9274f04c'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:22:47.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:22:47.324 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "9469559a-99a6-4112-b552-3ab3fb138062", Template: template_1
2025-08-29 21:22:47.326 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:22:47.328 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:22:47.329 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:22:48.246 +05:30 [INF] Received HTTP response headers after 915.1971ms - 200
2025-08-29 21:22:48.247 +05:30 [INF] End processing HTTP request after 918.5457ms - 200
2025-08-29 21:22:48.250 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='eeec61ed-2cf3-4d19-8b47-deb89f905e8d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:52:48.2485846Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_1' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:52:48.2485843Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:22:48.253 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='e4a2ad63-219f-4995-b658-9e71b92b6fce', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:52:48.2526313Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='9469559a-99a6-4112-b552-3ab3fb138062', @p8='' (Nullable = false), @p9='True', @p10='template_1', @p11='text_template', @p12='2b68fc8a-f205-46da-b1a9-ec3a9274f04c' (Nullable = true), @p13='Show Me Template 1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:22:48.255 +05:30 [INF] ✅ Flow step executed → Template: template_1 sent to +918974005240
2025-08-29 21:22:48.257 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:22:49.625 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:22:49.627 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:49.628 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:49.630 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==","status":"sent","timestamp":"1756482767","recipient_id":"918974005240","conversation":{"id":"6d0f48dea4d9cc67f8905b2ab872afa7","expiration_timestamp":"1756482767","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:49.632 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:49.632 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==","status":"sent","timestamp":"1756482767","recipient_id":"918974005240","conversation":{"id":"6d0f48dea4d9cc67f8905b2ab872afa7","expiration_timestamp":"1756482767","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:49.633 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:49.634 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:22:49.635 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8531ms
2025-08-29 21:22:49.635 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==","status":"sent","timestamp":"1756482767","recipient_id":"918974005240","conversation":{"id":"6d0f48dea4d9cc67f8905b2ab872afa7","expiration_timestamp":"1756482767","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:49.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:49.638 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:22:49.639 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.0826ms
2025-08-29 21:22:49.640 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==
2025-08-29 21:22:49.644 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==
2025-08-29 21:22:50.110 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:22:50.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:50.113 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:50.115 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==","status":"read","timestamp":"1756482768","recipient_id":"918974005240","conversation":{"id":"6d0f48dea4d9cc67f8905b2ab872afa7","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:50.116 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:50.116 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==","status":"read","timestamp":"1756482768","recipient_id":"918974005240","conversation":{"id":"6d0f48dea4d9cc67f8905b2ab872afa7","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:50.117 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:50.118 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:22:50.119 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5322ms
2025-08-29 21:22:50.120 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==","status":"read","timestamp":"1756482768","recipient_id":"918974005240","conversation":{"id":"6d0f48dea4d9cc67f8905b2ab872afa7","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:22:50.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:50.124 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:22:50.124 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.0604ms
2025-08-29 21:22:50.126 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==
2025-08-29 21:22:50.129 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==
2025-08-29 21:22:52.293 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:22:52.296 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:52.297 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:22:52.299 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTkwMTcxMjQ4QjU2Njg2NjhEQjZDNkI2Qzc2NERFQjcA","timestamp":"1756482770","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:22:52.300 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:22:52.300 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTkwMTcxMjQ4QjU2Njg2NjhEQjZDNkI2Qzc2NERFQjcA","timestamp":"1756482770","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:22:52.301 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:22:52.302 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:22:52.303 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.1357ms
2025-08-29 21:22:52.304 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:22:52.305 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:22:52.306 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTkwMTcxMjQ4QjU2Njg2NjhEQjZDNkI2Qzc2NERFQjcA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==, Text: Show Me Template 2
2025-08-29 21:22:52.307 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.0802ms
2025-08-29 21:22:52.311 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:22:52.315 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:22:52.316 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:00.209 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:00.213 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='5fa81184-db83-405f-ad29-e9f407eca9bc', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 2', @p4='Show Me Template 2', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:52:52.3171812Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:00.215 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:00.217 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 2', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:00.220 +05:30 [INF] ✅ Fallback flow step matched: StepId = "b3026233-a679-44dd-9732-c4b0f8f80573", Flow = Flow_test_v1
2025-08-29 21:23:00.221 +05:30 [INF] 🔁 Matched CTA Step → "b3026233-a679-44dd-9732-c4b0f8f80573"
2025-08-29 21:23:00.221 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573" | TrackingLogId: "5fa81184-db83-405f-ad29-e9f407eca9bc"
2025-08-29 21:23:00.224 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='5fa81184-db83-405f-ad29-e9f407eca9bc'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:00.227 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='b3026233-a679-44dd-9732-c4b0f8f80573' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:00.229 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573", Template: template_2
2025-08-29 21:23:00.231 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:00.233 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:00.234 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:01.155 +05:30 [INF] Received HTTP response headers after 920.0886ms - 200
2025-08-29 21:23:01.157 +05:30 [INF] End processing HTTP request after 923.72ms - 200
2025-08-29 21:23:01.161 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='463649e5-1b0a-4d08-86bc-5d861118b8c5', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:01.1584161Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_2' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:01.1584157Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:01.165 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='850d722b-ac66-47f9-8c76-804b654f4f8c', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:01.1635608Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='b3026233-a679-44dd-9732-c4b0f8f80573', @p8='' (Nullable = false), @p9='True', @p10='template_2', @p11='text_template', @p12='5fa81184-db83-405f-ad29-e9f407eca9bc' (Nullable = true), @p13='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:01.167 +05:30 [INF] ✅ Flow step executed → Template: template_2 sent to +918974005240
2025-08-29 21:23:01.168 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:02.032 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:02.035 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:02.036 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:02.037 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggREFCOUI3QTM3RDYwMDY3N0UzRTA3NDgzOTk3QzZGRDIA","timestamp":"1756482780","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-08-29 21:23:02.039 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:02.039 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggREFCOUI3QTM3RDYwMDY3N0UzRTA3NDgzOTk3QzZGRDIA","timestamp":"1756482780","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-08-29 21:23:02.040 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:02.041 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:02.042 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.066ms
2025-08-29 21:23:02.043 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:02.044 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:02.044 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggREFCOUI3QTM3RDYwMDY3N0UzRTA3NDgzOTk3QzZGRDIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==, Text: Show Me Template 3
2025-08-29 21:23:02.045 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.3241ms
2025-08-29 21:23:02.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:02.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:02.055 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:02.711 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:02.714 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:02.715 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:02.716 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==","status":"sent","timestamp":"1756482780","recipient_id":"918974005240","conversation":{"id":"66ec46bc559710368fcbad0780540e5e","expiration_timestamp":"1756482780","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:02.718 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:02.718 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:02.720 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9936ms
2025-08-29 21:23:02.722 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:02.723 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.5396ms
2025-08-29 21:23:03.238 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:03.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:03.241 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:03.243 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==","status":"read","timestamp":"1756482781","recipient_id":"918974005240","conversation":{"id":"66ec46bc559710368fcbad0780540e5e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:03.244 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:03.245 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:03.245 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 2.8754ms
2025-08-29 21:23:03.247 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:03.248 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 9.8803ms
2025-08-29 21:23:04.127 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:04.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='e234845c-077a-4f6e-a6b4-52852ac62fcc', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 3', @p4='Show Me Template 3', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:02.0560173Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzgzREM4QTAwRUVBOEI2QzIzAA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:04.133 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:04.135 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 3', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:04.137 +05:30 [INF] ✅ Fallback flow step matched: StepId = "8639fb2e-ec58-40c6-a7d5-12da1af869d2", Flow = Flow_test_v1
2025-08-29 21:23:04.138 +05:30 [INF] 🔁 Matched CTA Step → "8639fb2e-ec58-40c6-a7d5-12da1af869d2"
2025-08-29 21:23:04.139 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "8639fb2e-ec58-40c6-a7d5-12da1af869d2" | TrackingLogId: "e234845c-077a-4f6e-a6b4-52852ac62fcc"
2025-08-29 21:23:04.141 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__trackingLogId_0='e234845c-077a-4f6e-a6b4-52852ac62fcc'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:04.145 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='8639fb2e-ec58-40c6-a7d5-12da1af869d2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:04.146 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "8639fb2e-ec58-40c6-a7d5-12da1af869d2", Template: template_3
2025-08-29 21:23:04.149 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:04.151 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:04.151 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:05.199 +05:30 [INF] Received HTTP response headers after 1047.0017ms - 200
2025-08-29 21:23:05.201 +05:30 [INF] End processing HTTP request after 1049.9947ms - 200
2025-08-29 21:23:05.203 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='c90492f1-5863-4e62-be32-dc22d3d1819e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:05.2023167Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_3' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:05.2023164Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:05.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='56f76f5c-7fd7-4e5c-b1db-5a8933b6c5b1', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:05.2063526Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='8639fb2e-ec58-40c6-a7d5-12da1af869d2', @p8='' (Nullable = false), @p9='True', @p10='template_3', @p11='text_template', @p12='e234845c-077a-4f6e-a6b4-52852ac62fcc' (Nullable = true), @p13='Show Me Template 3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:05.209 +05:30 [INF] ✅ Flow step executed → Template: template_3 sent to +918974005240
2025-08-29 21:23:05.210 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:05.212 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==","status":"sent","timestamp":"1756482780","recipient_id":"918974005240","conversation":{"id":"66ec46bc559710368fcbad0780540e5e","expiration_timestamp":"1756482780","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:05.213 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:05.214 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==","status":"sent","timestamp":"1756482780","recipient_id":"918974005240","conversation":{"id":"66ec46bc559710368fcbad0780540e5e","expiration_timestamp":"1756482780","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:05.217 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:05.219 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==
2025-08-29 21:23:05.219 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==
2025-08-29 21:23:05.220 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==","status":"read","timestamp":"1756482781","recipient_id":"918974005240","conversation":{"id":"66ec46bc559710368fcbad0780540e5e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:05.222 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:05.223 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==","status":"read","timestamp":"1756482781","recipient_id":"918974005240","conversation":{"id":"66ec46bc559710368fcbad0780540e5e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:05.225 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:05.227 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==
2025-08-29 21:23:05.228 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==
2025-08-29 21:23:05.751 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:05.754 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:05.755 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:05.756 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTZFREYyMUE1OUVDNzhCMEQ1Q0IzMUQzMUJFMEM1MkQA","timestamp":"1756482783","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:05.758 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:05.758 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTZFREYyMUE1OUVDNzhCMEQ1Q0IzMUQzMUJFMEM1MkQA","timestamp":"1756482783","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:05.759 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:05.761 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:05.762 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.789ms
2025-08-29 21:23:05.763 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:05.764 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:05.765 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTZFREYyMUE1OUVDNzhCMEQ1Q0IzMUQzMUJFMEM1MkQA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==, Text: Show Me Template 1
2025-08-29 21:23:05.765 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.4249ms
2025-08-29 21:23:05.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:05.773 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:05.774 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:06.305 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:06.308 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:06.309 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:06.311 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==","status":"sent","timestamp":"1756482784","recipient_id":"918974005240","conversation":{"id":"6bfc41cdafa0120689cc6ef6c288a906","expiration_timestamp":"1756482784","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:06.312 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:06.313 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:06.314 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.3973ms
2025-08-29 21:23:06.315 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:06.316 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.1765ms
2025-08-29 21:23:06.642 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:06.645 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:06.646 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:06.648 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==","status":"read","timestamp":"1756482784","recipient_id":"918974005240","conversation":{"id":"6bfc41cdafa0120689cc6ef6c288a906","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:06.649 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:06.650 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:06.651 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.436ms
2025-08-29 21:23:06.652 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:06.653 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10.8494ms
2025-08-29 21:23:07.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:07.975 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='e74f806d-334f-443c-8fe5-c8805cd92615', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 1', @p4='Show Me Template 1', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:05.7756286Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkUwNTZDMzgyRjZEQkUxNkFEAA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:07.976 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:07.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 1', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:07.981 +05:30 [INF] ✅ Fallback flow step matched: StepId = "9469559a-99a6-4112-b552-3ab3fb138062", Flow = Flow_test_v1
2025-08-29 21:23:07.981 +05:30 [INF] 🔁 Matched CTA Step → "9469559a-99a6-4112-b552-3ab3fb138062"
2025-08-29 21:23:07.982 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "9469559a-99a6-4112-b552-3ab3fb138062" | TrackingLogId: "e74f806d-334f-443c-8fe5-c8805cd92615"
2025-08-29 21:23:07.985 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='e74f806d-334f-443c-8fe5-c8805cd92615'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:07.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:07.990 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "9469559a-99a6-4112-b552-3ab3fb138062", Template: template_1
2025-08-29 21:23:07.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:07.994 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:07.995 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:09.053 +05:30 [INF] Received HTTP response headers after 1057.9118ms - 200
2025-08-29 21:23:09.055 +05:30 [INF] End processing HTTP request after 1061.1968ms - 200
2025-08-29 21:23:09.058 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='0af372e2-c68a-4745-be25-e27fd4777b7d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:09.0564637Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_1' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:09.0564633Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:09.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='e3953349-ca13-4935-822e-5a2ffcdd1e93', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:09.0607611Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='9469559a-99a6-4112-b552-3ab3fb138062', @p8='' (Nullable = false), @p9='True', @p10='template_1', @p11='text_template', @p12='e74f806d-334f-443c-8fe5-c8805cd92615' (Nullable = true), @p13='Show Me Template 1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:09.064 +05:30 [INF] ✅ Flow step executed → Template: template_1 sent to +918974005240
2025-08-29 21:23:09.065 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:09.066 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==","status":"sent","timestamp":"1756482784","recipient_id":"918974005240","conversation":{"id":"6bfc41cdafa0120689cc6ef6c288a906","expiration_timestamp":"1756482784","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:09.067 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:09.068 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==","status":"sent","timestamp":"1756482784","recipient_id":"918974005240","conversation":{"id":"6bfc41cdafa0120689cc6ef6c288a906","expiration_timestamp":"1756482784","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:09.070 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:09.072 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==
2025-08-29 21:23:09.073 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==
2025-08-29 21:23:09.074 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==","status":"read","timestamp":"1756482784","recipient_id":"918974005240","conversation":{"id":"6bfc41cdafa0120689cc6ef6c288a906","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:09.075 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:09.076 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==","status":"read","timestamp":"1756482784","recipient_id":"918974005240","conversation":{"id":"6bfc41cdafa0120689cc6ef6c288a906","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:09.079 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:09.081 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==
2025-08-29 21:23:09.082 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0Y2M0VCOUUxODRBNjg0QUMzAA==
2025-08-29 21:23:10.291 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:10.294 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:10.295 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:10.296 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==","status":"sent","timestamp":"1756482788","recipient_id":"918974005240","conversation":{"id":"c24df1a331ecd3de8cbcce32d064904b","expiration_timestamp":"1756482788","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:10.298 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:10.298 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==","status":"sent","timestamp":"1756482788","recipient_id":"918974005240","conversation":{"id":"c24df1a331ecd3de8cbcce32d064904b","expiration_timestamp":"1756482788","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:10.298 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:10.300 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:10.301 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.7171ms
2025-08-29 21:23:10.302 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==","status":"sent","timestamp":"1756482788","recipient_id":"918974005240","conversation":{"id":"c24df1a331ecd3de8cbcce32d064904b","expiration_timestamp":"1756482788","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:10.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:10.305 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:10.306 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.4955ms
2025-08-29 21:23:10.307 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==
2025-08-29 21:23:10.310 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==
2025-08-29 21:23:10.555 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:10.558 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:10.559 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:10.561 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==","status":"read","timestamp":"1756482788","recipient_id":"918974005240","conversation":{"id":"c24df1a331ecd3de8cbcce32d064904b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:10.562 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:10.562 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==","status":"read","timestamp":"1756482788","recipient_id":"918974005240","conversation":{"id":"c24df1a331ecd3de8cbcce32d064904b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:10.563 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:10.564 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:10.565 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6262ms
2025-08-29 21:23:10.566 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==","status":"read","timestamp":"1756482788","recipient_id":"918974005240","conversation":{"id":"c24df1a331ecd3de8cbcce32d064904b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:10.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:10.570 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:10.570 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.5102ms
2025-08-29 21:23:10.572 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==
2025-08-29 21:23:10.575 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==
2025-08-29 21:23:15.110 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:15.113 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:15.113 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:15.115 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTJGNTM4RkZBMDA2RUU0OUQzMUUyQkM1MEJFNjhDMTIA","timestamp":"1756482793","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:23:15.117 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:15.117 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTJGNTM4RkZBMDA2RUU0OUQzMUUyQkM1MEJFNjhDMTIA","timestamp":"1756482793","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:23:15.117 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:15.119 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:15.120 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.9931ms
2025-08-29 21:23:15.121 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:15.122 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:15.122 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTJGNTM4RkZBMDA2RUU0OUQzMUUyQkM1MEJFNjhDMTIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==, Text: Show Me Template 2
2025-08-29 21:23:15.123 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.8091ms
2025-08-29 21:23:15.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:15.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:15.132 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:18.303 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:18.308 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='1e59e13f-ef61-4c49-844a-de002449509a', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 2', @p4='Show Me Template 2', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:15.1336908Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjRERDlEODk5MDEzOUVEMkQ4AA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:18.310 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:18.312 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 2', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:18.314 +05:30 [INF] ✅ Fallback flow step matched: StepId = "b3026233-a679-44dd-9732-c4b0f8f80573", Flow = Flow_test_v1
2025-08-29 21:23:18.315 +05:30 [INF] 🔁 Matched CTA Step → "b3026233-a679-44dd-9732-c4b0f8f80573"
2025-08-29 21:23:18.315 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573" | TrackingLogId: "1e59e13f-ef61-4c49-844a-de002449509a"
2025-08-29 21:23:18.318 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='1e59e13f-ef61-4c49-844a-de002449509a'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:18.321 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='b3026233-a679-44dd-9732-c4b0f8f80573' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:18.324 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573", Template: template_2
2025-08-29 21:23:18.326 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:18.328 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:18.329 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:19.246 +05:30 [INF] Received HTTP response headers after 916.8386ms - 200
2025-08-29 21:23:19.248 +05:30 [INF] End processing HTTP request after 919.9388ms - 200
2025-08-29 21:23:19.251 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='d9bea299-3dbb-4e49-9a09-eccb7fda240d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:19.2496442Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_2' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:19.2496438Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:19.255 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='a00c1dcf-eebf-4f21-97af-b524ebf628c9', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:19.2540230Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='b3026233-a679-44dd-9732-c4b0f8f80573', @p8='' (Nullable = false), @p9='True', @p10='template_2', @p11='text_template', @p12='1e59e13f-ef61-4c49-844a-de002449509a' (Nullable = true), @p13='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:19.257 +05:30 [INF] ✅ Flow step executed → Template: template_2 sent to +918974005240
2025-08-29 21:23:19.258 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:20.259 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:20.262 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:20.263 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:20.265 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==","status":"sent","timestamp":"1756482798","recipient_id":"918974005240","conversation":{"id":"d30b602e5d6e51dcbe0a929535aa5e09","expiration_timestamp":"1756482798","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:20.266 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:20.266 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==","status":"sent","timestamp":"1756482798","recipient_id":"918974005240","conversation":{"id":"d30b602e5d6e51dcbe0a929535aa5e09","expiration_timestamp":"1756482798","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:20.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:20.268 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:20.269 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8211ms
2025-08-29 21:23:20.270 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==","status":"sent","timestamp":"1756482798","recipient_id":"918974005240","conversation":{"id":"d30b602e5d6e51dcbe0a929535aa5e09","expiration_timestamp":"1756482798","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:20.271 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:20.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:20.273 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.1298ms
2025-08-29 21:23:20.275 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==
2025-08-29 21:23:20.279 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==
2025-08-29 21:23:20.858 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:20.861 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:20.862 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:20.864 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==","status":"read","timestamp":"1756482799","recipient_id":"918974005240","conversation":{"id":"d30b602e5d6e51dcbe0a929535aa5e09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:20.865 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:20.865 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==","status":"read","timestamp":"1756482799","recipient_id":"918974005240","conversation":{"id":"d30b602e5d6e51dcbe0a929535aa5e09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:20.866 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:20.867 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:20.868 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.9057ms
2025-08-29 21:23:20.869 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==","status":"read","timestamp":"1756482799","recipient_id":"918974005240","conversation":{"id":"d30b602e5d6e51dcbe0a929535aa5e09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:20.870 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:20.873 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:20.874 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.3863ms
2025-08-29 21:23:20.875 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==
2025-08-29 21:23:20.878 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==
2025-08-29 21:23:24.722 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:24.725 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:24.726 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:24.728 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRjM5OTI0RTM3NkQzMkY2NzM1NTM3QzNGQTM4NEU1RjYA","timestamp":"1756482802","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:24.729 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:24.730 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRjM5OTI0RTM3NkQzMkY2NzM1NTM3QzNGQTM4NEU1RjYA","timestamp":"1756482802","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:24.730 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:24.732 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:24.733 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.2838ms
2025-08-29 21:23:24.734 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:24.735 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:24.735 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRjM5OTI0RTM3NkQzMkY2NzM1NTM3QzNGQTM4NEU1RjYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==, Text: Show Me Template 1
2025-08-29 21:23:24.736 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.0672ms
2025-08-29 21:23:24.740 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:24.745 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:24.747 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:27.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:27.572 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='eaeaa05b-08bd-494c-87c2-aba5e711fb97', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 1', @p4='Show Me Template 1', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:24.7479758Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUUxRDJFOEUyMjY0RUMzMTg4AA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:27.574 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:27.577 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 1', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:27.579 +05:30 [INF] ✅ Fallback flow step matched: StepId = "9469559a-99a6-4112-b552-3ab3fb138062", Flow = Flow_test_v1
2025-08-29 21:23:27.580 +05:30 [INF] 🔁 Matched CTA Step → "9469559a-99a6-4112-b552-3ab3fb138062"
2025-08-29 21:23:27.581 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "9469559a-99a6-4112-b552-3ab3fb138062" | TrackingLogId: "eaeaa05b-08bd-494c-87c2-aba5e711fb97"
2025-08-29 21:23:27.583 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__trackingLogId_0='eaeaa05b-08bd-494c-87c2-aba5e711fb97'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:27.586 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:27.588 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "9469559a-99a6-4112-b552-3ab3fb138062", Template: template_1
2025-08-29 21:23:27.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:27.592 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:27.593 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:28.741 +05:30 [INF] Received HTTP response headers after 1147.7184ms - 200
2025-08-29 21:23:28.744 +05:30 [INF] End processing HTTP request after 1151.7843ms - 200
2025-08-29 21:23:28.747 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='adada8b7-a100-4df2-bbcf-275df24a0377', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:28.7453294Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_1' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:28.7453291Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:28.751 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='8e9474b8-865f-41e8-8980-ec7c839e22d9', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:28.7496158Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='9469559a-99a6-4112-b552-3ab3fb138062', @p8='' (Nullable = false), @p9='True', @p10='template_1', @p11='text_template', @p12='eaeaa05b-08bd-494c-87c2-aba5e711fb97' (Nullable = true), @p13='Show Me Template 1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:28.753 +05:30 [INF] ✅ Flow step executed → Template: template_1 sent to +918974005240
2025-08-29 21:23:28.754 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:29.768 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:29.771 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:29.772 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:29.773 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==","status":"sent","timestamp":"1756482808","recipient_id":"918974005240","conversation":{"id":"aaee72588819cb22f5d2efa4197b456d","expiration_timestamp":"1756482808","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:29.775 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:29.775 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==","status":"sent","timestamp":"1756482808","recipient_id":"918974005240","conversation":{"id":"aaee72588819cb22f5d2efa4197b456d","expiration_timestamp":"1756482808","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:29.775 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:29.777 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:29.778 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.7762ms
2025-08-29 21:23:29.779 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==","status":"sent","timestamp":"1756482808","recipient_id":"918974005240","conversation":{"id":"aaee72588819cb22f5d2efa4197b456d","expiration_timestamp":"1756482808","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:29.780 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:29.782 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:29.782 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.1065ms
2025-08-29 21:23:29.784 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==
2025-08-29 21:23:29.787 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==
2025-08-29 21:23:30.105 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:30.108 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:30.109 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:30.111 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==","status":"read","timestamp":"1756482808","recipient_id":"918974005240","conversation":{"id":"aaee72588819cb22f5d2efa4197b456d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:30.112 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:30.113 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==","status":"read","timestamp":"1756482808","recipient_id":"918974005240","conversation":{"id":"aaee72588819cb22f5d2efa4197b456d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:30.113 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:30.114 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:30.115 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6036ms
2025-08-29 21:23:30.116 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==","status":"read","timestamp":"1756482808","recipient_id":"918974005240","conversation":{"id":"aaee72588819cb22f5d2efa4197b456d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:30.118 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:30.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:30.121 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.2567ms
2025-08-29 21:23:30.123 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==
2025-08-29 21:23:30.126 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==
2025-08-29 21:23:33.648 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:33.651 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:33.652 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:33.654 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTlBRjREOUUwMTA4RkRDOENCRkJDOEQyNzM3Qjc3QUYA","timestamp":"1756482811","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-08-29 21:23:33.655 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:33.655 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTlBRjREOUUwMTA4RkRDOENCRkJDOEQyNzM3Qjc3QUYA","timestamp":"1756482811","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-08-29 21:23:33.656 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:33.658 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:33.659 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.377ms
2025-08-29 21:23:33.659 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:33.661 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:33.661 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTlBRjREOUUwMTA4RkRDOENCRkJDOEQyNzM3Qjc3QUYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==, Text: Show Me Template 3
2025-08-29 21:23:33.662 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.4851ms
2025-08-29 21:23:33.666 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:33.670 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:33.672 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:34.755 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:34.760 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='e79780de-fcaa-4292-b237-78c0b803f41a', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 3', @p4='Show Me Template 3', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:33.6729190Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI2REM3NTU5NDVFMjRFNkVDAA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:34.762 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:34.763 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 3', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:34.765 +05:30 [INF] ✅ Fallback flow step matched: StepId = "8639fb2e-ec58-40c6-a7d5-12da1af869d2", Flow = Flow_test_v1
2025-08-29 21:23:34.766 +05:30 [INF] 🔁 Matched CTA Step → "8639fb2e-ec58-40c6-a7d5-12da1af869d2"
2025-08-29 21:23:34.767 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "8639fb2e-ec58-40c6-a7d5-12da1af869d2" | TrackingLogId: "e79780de-fcaa-4292-b237-78c0b803f41a"
2025-08-29 21:23:34.770 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='e79780de-fcaa-4292-b237-78c0b803f41a'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:34.773 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='8639fb2e-ec58-40c6-a7d5-12da1af869d2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:34.775 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "8639fb2e-ec58-40c6-a7d5-12da1af869d2", Template: template_3
2025-08-29 21:23:34.777 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:34.779 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:34.780 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:35.865 +05:30 [INF] Received HTTP response headers after 1084.7511ms - 200
2025-08-29 21:23:35.867 +05:30 [INF] End processing HTTP request after 1088.0876ms - 200
2025-08-29 21:23:35.870 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='76356a02-1e8a-47dc-ac66-42b44ecd7b13', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:35.8684075Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_3' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:35.8684071Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:35.874 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='54fc0d37-72a7-42ce-9759-09855def717c', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:35.8728515Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='8639fb2e-ec58-40c6-a7d5-12da1af869d2', @p8='' (Nullable = false), @p9='True', @p10='template_3', @p11='text_template', @p12='e79780de-fcaa-4292-b237-78c0b803f41a' (Nullable = true), @p13='Show Me Template 3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:35.876 +05:30 [INF] ✅ Flow step executed → Template: template_3 sent to +918974005240
2025-08-29 21:23:35.877 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:36.821 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:36.823 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:36.824 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:36.826 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==","status":"sent","timestamp":"1756482814","recipient_id":"918974005240","conversation":{"id":"7dd6e638d5b0fdd45b2a64ad7a4ea53e","expiration_timestamp":"1756482814","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:36.827 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:36.827 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==","status":"sent","timestamp":"1756482814","recipient_id":"918974005240","conversation":{"id":"7dd6e638d5b0fdd45b2a64ad7a4ea53e","expiration_timestamp":"1756482814","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:36.828 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:36.829 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:36.830 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6682ms
2025-08-29 21:23:36.831 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==","status":"sent","timestamp":"1756482814","recipient_id":"918974005240","conversation":{"id":"7dd6e638d5b0fdd45b2a64ad7a4ea53e","expiration_timestamp":"1756482814","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:36.832 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:36.834 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:36.835 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.9169ms
2025-08-29 21:23:36.836 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==
2025-08-29 21:23:36.840 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==
2025-08-29 21:23:37.300 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:37.303 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:37.304 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:37.306 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==","status":"read","timestamp":"1756482815","recipient_id":"918974005240","conversation":{"id":"7dd6e638d5b0fdd45b2a64ad7a4ea53e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:37.307 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:37.307 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==","status":"read","timestamp":"1756482815","recipient_id":"918974005240","conversation":{"id":"7dd6e638d5b0fdd45b2a64ad7a4ea53e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:37.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:37.309 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:37.310 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6725ms
2025-08-29 21:23:37.311 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==","status":"read","timestamp":"1756482815","recipient_id":"918974005240","conversation":{"id":"7dd6e638d5b0fdd45b2a64ad7a4ea53e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:37.312 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:37.315 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:37.315 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.8443ms
2025-08-29 21:23:37.317 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==
2025-08-29 21:23:37.321 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==
2025-08-29 21:23:39.166 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:39.168 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:39.169 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:39.171 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRkFFOUZDOUNDQUJDNTA4QzY2OUZENTczMDZFNzZENzgA","timestamp":"1756482817","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:39.172 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:39.172 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRkFFOUZDOUNDQUJDNTA4QzY2OUZENTczMDZFNzZENzgA","timestamp":"1756482817","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:39.173 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:39.174 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:39.175 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8497ms
2025-08-29 21:23:39.176 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:39.177 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:39.178 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRkFFOUZDOUNDQUJDNTA4QzY2OUZENTczMDZFNzZENzgA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==, Text: Show Me Template 1
2025-08-29 21:23:39.178 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.5499ms
2025-08-29 21:23:39.182 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:39.186 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:39.187 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:43.082 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:43.086 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='820e33db-731e-41fb-8b47-ac66f57d5298', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 1', @p4='Show Me Template 1', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:39.1886123Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTc3OEQ2NjIyMzI5N0E5QTE2AA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:43.088 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:43.090 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 1', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:43.092 +05:30 [INF] ✅ Fallback flow step matched: StepId = "9469559a-99a6-4112-b552-3ab3fb138062", Flow = Flow_test_v1
2025-08-29 21:23:43.093 +05:30 [INF] 🔁 Matched CTA Step → "9469559a-99a6-4112-b552-3ab3fb138062"
2025-08-29 21:23:43.094 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "9469559a-99a6-4112-b552-3ab3fb138062" | TrackingLogId: "820e33db-731e-41fb-8b47-ac66f57d5298"
2025-08-29 21:23:43.097 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='820e33db-731e-41fb-8b47-ac66f57d5298'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:43.100 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:43.102 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "9469559a-99a6-4112-b552-3ab3fb138062", Template: template_1
2025-08-29 21:23:43.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:43.106 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:43.107 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:44.123 +05:30 [INF] Received HTTP response headers after 1015.0094ms - 200
2025-08-29 21:23:44.125 +05:30 [INF] End processing HTTP request after 1018.7075ms - 200
2025-08-29 21:23:44.128 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='b954e589-b451-4682-b085-da742f4fb585', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:44.1266522Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_1' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:44.1266518Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:44.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='4d431120-7e60-40bd-9c07-d5f0d587e0b7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:44.1307343Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='9469559a-99a6-4112-b552-3ab3fb138062', @p8='' (Nullable = false), @p9='True', @p10='template_1', @p11='text_template', @p12='820e33db-731e-41fb-8b47-ac66f57d5298' (Nullable = true), @p13='Show Me Template 1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:44.134 +05:30 [INF] ✅ Flow step executed → Template: template_1 sent to +918974005240
2025-08-29 21:23:44.135 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:45.232 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:45.234 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:45.235 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:45.237 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==","status":"sent","timestamp":"1756482823","recipient_id":"918974005240","conversation":{"id":"f19e9cab8836484a31e408f1ebf8e520","expiration_timestamp":"1756482823","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:45.238 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:45.239 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==","status":"sent","timestamp":"1756482823","recipient_id":"918974005240","conversation":{"id":"f19e9cab8836484a31e408f1ebf8e520","expiration_timestamp":"1756482823","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:45.239 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:45.240 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:45.241 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6162ms
2025-08-29 21:23:45.242 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==","status":"sent","timestamp":"1756482823","recipient_id":"918974005240","conversation":{"id":"f19e9cab8836484a31e408f1ebf8e520","expiration_timestamp":"1756482823","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:45.243 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:45.245 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.7981ms
2025-08-29 21:23:45.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:45.250 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==
2025-08-29 21:23:45.250 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==
2025-08-29 21:23:45.565 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:45.568 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:45.569 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:45.571 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==","status":"read","timestamp":"1756482823","recipient_id":"918974005240","conversation":{"id":"f19e9cab8836484a31e408f1ebf8e520","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:45.572 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:45.573 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==","status":"read","timestamp":"1756482823","recipient_id":"918974005240","conversation":{"id":"f19e9cab8836484a31e408f1ebf8e520","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:45.573 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:45.574 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:45.576 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.2135ms
2025-08-29 21:23:45.576 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==","status":"read","timestamp":"1756482823","recipient_id":"918974005240","conversation":{"id":"f19e9cab8836484a31e408f1ebf8e520","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:45.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:45.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:45.581 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.1422ms
2025-08-29 21:23:45.582 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==
2025-08-29 21:23:45.586 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==
2025-08-29 21:23:48.593 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:48.595 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:48.596 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:48.598 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTMyNjNFRDlFQTY4QkMyRTZCMUZGMDJBOUJGMzA1RkEA","timestamp":"1756482825","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:23:48.599 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:48.599 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTMyNjNFRDlFQTY4QkMyRTZCMUZGMDJBOUJGMzA1RkEA","timestamp":"1756482825","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-08-29 21:23:48.600 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:48.601 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:48.602 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8457ms
2025-08-29 21:23:48.603 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:48.605 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:48.606 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTMyNjNFRDlFQTY4QkMyRTZCMUZGMDJBOUJGMzA1RkEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==, Text: Show Me Template 2
2025-08-29 21:23:48.606 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.5383ms
2025-08-29 21:23:48.610 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:48.614 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:48.616 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:23:50.893 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:23:50.914 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='71edd2e3-8c6a-4a8f-86db-f42bd0e13072', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 2', @p4='Show Me Template 2', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:48.6184342Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTY0RDlBREZDMUFCQ0M2OTVEAA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:23:50.916 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:23:50.919 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 2', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:23:50.920 +05:30 [INF] ✅ Fallback flow step matched: StepId = "b3026233-a679-44dd-9732-c4b0f8f80573", Flow = Flow_test_v1
2025-08-29 21:23:50.921 +05:30 [INF] 🔁 Matched CTA Step → "b3026233-a679-44dd-9732-c4b0f8f80573"
2025-08-29 21:23:50.922 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573" | TrackingLogId: "71edd2e3-8c6a-4a8f-86db-f42bd0e13072"
2025-08-29 21:23:50.924 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__trackingLogId_0='71edd2e3-8c6a-4a8f-86db-f42bd0e13072'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:23:50.927 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='b3026233-a679-44dd-9732-c4b0f8f80573' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:23:50.929 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "b3026233-a679-44dd-9732-c4b0f8f80573", Template: template_2
2025-08-29 21:23:50.932 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:23:50.934 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:50.935 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:23:53.039 +05:30 [INF] Received HTTP response headers after 2102.9807ms - 200
2025-08-29 21:23:53.041 +05:30 [INF] End processing HTTP request after 2106.3724ms - 200
2025-08-29 21:23:53.062 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='431a937a-a9cf-48e7-ae8f-89858176913b', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:53:53.0426767Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_2' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:53:53.0426763Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:23:53.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='2ca2398d-fd2e-493c-b056-850e51cc882f', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:53:53.0650993Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='b3026233-a679-44dd-9732-c4b0f8f80573', @p8='' (Nullable = false), @p9='True', @p10='template_2', @p11='text_template', @p12='71edd2e3-8c6a-4a8f-86db-f42bd0e13072' (Nullable = true), @p13='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:23:53.068 +05:30 [INF] ✅ Flow step executed → Template: template_2 sent to +918974005240
2025-08-29 21:23:53.069 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:23:54.244 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:23:54.247 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:54.249 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:54.251 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==","status":"sent","timestamp":"1756482832","recipient_id":"918974005240","conversation":{"id":"6e0f8e36662d8e51b1a612e5543835c4","expiration_timestamp":"1756482832","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:54.252 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:54.252 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==","status":"sent","timestamp":"1756482832","recipient_id":"918974005240","conversation":{"id":"6e0f8e36662d8e51b1a612e5543835c4","expiration_timestamp":"1756482832","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:54.253 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:54.254 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:54.255 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8632ms
2025-08-29 21:23:54.256 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==","status":"sent","timestamp":"1756482832","recipient_id":"918974005240","conversation":{"id":"6e0f8e36662d8e51b1a612e5543835c4","expiration_timestamp":"1756482832","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:54.257 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:54.260 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.3358ms
2025-08-29 21:23:54.260 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:54.265 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==
2025-08-29 21:23:54.266 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==
2025-08-29 21:23:54.489 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:23:54.492 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:54.493 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:54.495 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==","status":"read","timestamp":"1756482832","recipient_id":"918974005240","conversation":{"id":"6e0f8e36662d8e51b1a612e5543835c4","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:54.496 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:54.496 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==","status":"read","timestamp":"1756482832","recipient_id":"918974005240","conversation":{"id":"6e0f8e36662d8e51b1a612e5543835c4","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:54.497 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:54.498 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:23:54.499 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.7526ms
2025-08-29 21:23:54.500 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==","status":"read","timestamp":"1756482832","recipient_id":"918974005240","conversation":{"id":"6e0f8e36662d8e51b1a612e5543835c4","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:23:54.501 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:54.504 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:23:54.504 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.836ms
2025-08-29 21:23:54.506 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==
2025-08-29 21:23:54.510 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==
2025-08-29 21:23:59.865 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:23:59.868 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:59.869 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:23:59.871 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0ExOTI1MUU0Njk1ODNEMDdDMDM1REI5RUM0RjBBMDkA","timestamp":"1756482837","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:59.872 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:23:59.873 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0ExOTI1MUU0Njk1ODNEMDdDMDM1REI5RUM0RjBBMDkA","timestamp":"1756482837","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:23:59.873 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:23:59.875 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:23:59.876 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.221ms
2025-08-29 21:23:59.876 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:23:59.877 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:23:59.878 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0ExOTI1MUU0Njk1ODNEMDdDMDM1REI5RUM0RjBBMDkA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==, Text: Show Me Template 1
2025-08-29 21:23:59.878 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.4093ms
2025-08-29 21:23:59.882 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:23:59.905 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:23:59.907 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:24:02.522 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:24:02.526 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='4e1e271f-a052-4140-be4e-84ef307b39d3', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 1', @p4='Show Me Template 1', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:53:59.9083591Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFFOURCMDQyRDdCOEE4NDU3AA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:24:02.528 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:24:02.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 1', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:24:02.532 +05:30 [INF] ✅ Fallback flow step matched: StepId = "9469559a-99a6-4112-b552-3ab3fb138062", Flow = Flow_test_v1
2025-08-29 21:24:02.533 +05:30 [INF] 🔁 Matched CTA Step → "9469559a-99a6-4112-b552-3ab3fb138062"
2025-08-29 21:24:02.534 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "9469559a-99a6-4112-b552-3ab3fb138062" | TrackingLogId: "4e1e271f-a052-4140-be4e-84ef307b39d3"
2025-08-29 21:24:02.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='4e1e271f-a052-4140-be4e-84ef307b39d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:24:02.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:24:02.543 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "9469559a-99a6-4112-b552-3ab3fb138062", Template: template_1
2025-08-29 21:24:02.545 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:24:02.548 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:24:02.548 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:24:03.487 +05:30 [INF] Received HTTP response headers after 937.8776ms - 200
2025-08-29 21:24:03.489 +05:30 [INF] End processing HTTP request after 941.4344ms - 200
2025-08-29 21:24:03.512 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='6b8d675a-30f7-4b01-a507-ceda072134e9', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:54:03.4911976Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_1' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:54:03.4911973Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:24:03.516 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='1d39b636-61ee-45aa-b51e-952d34775b05', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:54:03.5149988Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='9469559a-99a6-4112-b552-3ab3fb138062', @p8='' (Nullable = false), @p9='True', @p10='template_1', @p11='text_template', @p12='4e1e271f-a052-4140-be4e-84ef307b39d3' (Nullable = true), @p13='Show Me Template 1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:24:03.518 +05:30 [INF] ✅ Flow step executed → Template: template_1 sent to +918974005240
2025-08-29 21:24:03.519 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:24:04.645 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:24:04.648 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:04.649 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:04.650 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==","status":"sent","timestamp":"1756482842","recipient_id":"918974005240","conversation":{"id":"5eeb6ed07aae9d0c443eff1ef8970002","expiration_timestamp":"1756482842","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:04.652 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:04.652 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==","status":"sent","timestamp":"1756482842","recipient_id":"918974005240","conversation":{"id":"5eeb6ed07aae9d0c443eff1ef8970002","expiration_timestamp":"1756482842","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:04.652 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:04.654 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:24:04.655 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6145ms
2025-08-29 21:24:04.656 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==","status":"sent","timestamp":"1756482842","recipient_id":"918974005240","conversation":{"id":"5eeb6ed07aae9d0c443eff1ef8970002","expiration_timestamp":"1756482842","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:04.657 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:04.660 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.92ms
2025-08-29 21:24:04.660 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:24:04.664 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==
2025-08-29 21:24:04.664 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==
2025-08-29 21:24:05.546 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:24:05.549 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:05.549 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:05.551 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==","status":"read","timestamp":"1756482843","recipient_id":"918974005240","conversation":{"id":"5eeb6ed07aae9d0c443eff1ef8970002","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:05.552 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:05.553 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==","status":"read","timestamp":"1756482843","recipient_id":"918974005240","conversation":{"id":"5eeb6ed07aae9d0c443eff1ef8970002","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:05.553 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:05.554 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:24:05.556 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5468ms
2025-08-29 21:24:05.556 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==","status":"read","timestamp":"1756482843","recipient_id":"918974005240","conversation":{"id":"5eeb6ed07aae9d0c443eff1ef8970002","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:05.557 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:05.560 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:24:05.560 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.9558ms
2025-08-29 21:24:05.562 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==
2025-08-29 21:24:05.565 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==
2025-08-29 21:24:28.309 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:24:28.312 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:28.313 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:28.315 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDc4NDc2RUQzM0VCQzhDMjU1MzgxMTdEMDMzRDM1NDYA","timestamp":"1756482866","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-08-29 21:24:28.317 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:28.317 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDc4NDc2RUQzM0VCQzhDMjU1MzgxMTdEMDMzRDM1NDYA","timestamp":"1756482866","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-08-29 21:24:28.318 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:28.319 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:24:28.321 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.2153ms
2025-08-29 21:24:28.321 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:24:28.322 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:28.323 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDc4NDc2RUQzM0VCQzhDMjU1MzgxMTdEMDMzRDM1NDYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==, Text: Show Me Template 3
2025-08-29 21:24:28.324 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.6573ms
2025-08-29 21:24:28.327 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:24:28.333 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:24:28.335 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:24:30.041 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:24:30.045 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='3e10bd98-2147-4fe8-a60a-4eccc0e09078', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 3', @p4='Show Me Template 3', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:54:28.3360926Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjJFMjk1OEIwOUQwN0FGOEQ1AA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:24:30.047 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:24:30.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 3', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:24:30.051 +05:30 [INF] ✅ Fallback flow step matched: StepId = "8639fb2e-ec58-40c6-a7d5-12da1af869d2", Flow = Flow_test_v1
2025-08-29 21:24:30.052 +05:30 [INF] 🔁 Matched CTA Step → "8639fb2e-ec58-40c6-a7d5-12da1af869d2"
2025-08-29 21:24:30.053 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "8639fb2e-ec58-40c6-a7d5-12da1af869d2" | TrackingLogId: "3e10bd98-2147-4fe8-a60a-4eccc0e09078"
2025-08-29 21:24:30.056 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='3e10bd98-2147-4fe8-a60a-4eccc0e09078'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:24:30.059 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='8639fb2e-ec58-40c6-a7d5-12da1af869d2' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:24:30.060 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "8639fb2e-ec58-40c6-a7d5-12da1af869d2", Template: template_3
2025-08-29 21:24:30.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:24:30.064 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:24:30.065 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:24:31.543 +05:30 [INF] Received HTTP response headers after 1476.7987ms - 200
2025-08-29 21:24:31.544 +05:30 [INF] End processing HTTP request after 1479.6137ms - 200
2025-08-29 21:24:31.547 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='d0e6e302-e00e-4822-afb8-df2691cf5723', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:54:31.5457835Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_3' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:54:31.5457831Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:24:31.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='b9a18a00-d512-41ab-b063-b759791342d3', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:54:31.5494242Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='8639fb2e-ec58-40c6-a7d5-12da1af869d2', @p8='' (Nullable = false), @p9='True', @p10='template_3', @p11='text_template', @p12='3e10bd98-2147-4fe8-a60a-4eccc0e09078' (Nullable = true), @p13='Show Me Template 3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:24:31.552 +05:30 [INF] ✅ Flow step executed → Template: template_3 sent to +918974005240
2025-08-29 21:24:31.553 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:24:32.745 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:24:32.748 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:32.749 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:32.751 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==","status":"sent","timestamp":"1756482870","recipient_id":"918974005240","conversation":{"id":"21e69730066712fb7a4854549113c403","expiration_timestamp":"1756482870","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:32.752 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:32.752 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==","status":"sent","timestamp":"1756482870","recipient_id":"918974005240","conversation":{"id":"21e69730066712fb7a4854549113c403","expiration_timestamp":"1756482870","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:32.753 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:32.754 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:24:32.755 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.068ms
2025-08-29 21:24:32.756 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==","status":"sent","timestamp":"1756482870","recipient_id":"918974005240","conversation":{"id":"21e69730066712fb7a4854549113c403","expiration_timestamp":"1756482870","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:32.757 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:32.760 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:24:32.760 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.0776ms
2025-08-29 21:24:32.762 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==
2025-08-29 21:24:32.766 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==
2025-08-29 21:24:33.605 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-08-29 21:24:33.608 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:33.609 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:33.611 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==","status":"read","timestamp":"1756482871","recipient_id":"918974005240","conversation":{"id":"21e69730066712fb7a4854549113c403","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:33.613 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:33.613 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==","status":"read","timestamp":"1756482871","recipient_id":"918974005240","conversation":{"id":"21e69730066712fb7a4854549113c403","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:33.613 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:33.614 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:24:33.616 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5097ms
2025-08-29 21:24:33.616 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==","status":"read","timestamp":"1756482871","recipient_id":"918974005240","conversation":{"id":"21e69730066712fb7a4854549113c403","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:33.617 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:33.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:24:33.619 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.9683ms
2025-08-29 21:24:33.621 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==
2025-08-29 21:24:33.624 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==
2025-08-29 21:24:41.035 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-08-29 21:24:41.037 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:41.038 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:41.039 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTk1REI3OEE1RTI4QzMyRUE0RUYzNTcyNjNEOTQxOUQA","timestamp":"1756482878","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:24:41.041 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:41.041 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTk1REI3OEE1RTI4QzMyRUE0RUYzNTcyNjNEOTQxOUQA","timestamp":"1756482878","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-08-29 21:24:41.042 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:41.043 +05:30 [INF] 👉 Routing to Click Processor
2025-08-29 21:24:41.044 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6623ms
2025-08-29 21:24:41.044 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-08-29 21:24:41.045 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:41.046 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTk1REI3OEE1RTI4QzMyRUE0RUYzNTcyNjNEOTQxOUQA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==, Text: Show Me Template 1
2025-08-29 21:24:41.046 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.7017ms
2025-08-29 21:24:41.050 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."MessageId" = @__originalMessageId_0
LIMIT 1
2025-08-29 21:24:41.060 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==', @__originalMessageId_0_contains='%wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==%'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 OR m."Id"::text = @__originalMessageId_0 OR m."RawResponse" LIKE @__originalMessageId_0_contains
LIMIT 1
2025-08-29 21:24:41.062 +05:30 [INF] ✅ Fallback matched MessageLog. BusinessId: "c13be597-6ae2-42bb-9d43-925815f24ff8"
2025-08-29 21:24:43.710 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_MessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__dto_MessageId_0 OR m."Id"::text = @__dto_MessageId_0
LIMIT 1
2025-08-29 21:24:43.715 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='9d43d594-c59d-48d3-a761-7bf53da5fad8', @p1='WhatsApp', @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='Show Me Template 1', @p4='Show Me Template 1', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8='2025-08-29T15:54:41.0628326Z' (DbType = DateTime), @p9='webhook', @p10=NULL (DbType = Guid), @p11='+918974005240', @p12='Unknown', @p13='Unknown', @p14='False', @p15='webhook', @p16='Clicked', @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzZEMkI0OTlFODAxM0M4RjdFAA==', @p18=NULL (DbType = Guid), @p19=NULL, @p20=NULL (DbType = Guid), @p21=NULL (DbType = Guid), @p22='flow' (Nullable = false), @p23=NULL (DbType = Guid), @p24=NULL, @p25=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "TrackingLogs" ("Id", "Browser", "BusinessId", "ButtonText", "CTAType", "CampaignId", "CampaignSendLogId", "City", "ClickedAt", "ClickedVia", "ContactId", "ContactPhone", "Country", "DeviceType", "FollowUpSent", "IPAddress", "LastInteractionType", "MessageId", "MessageLogId", "Referrer", "SessionId", "SourceId", "SourceType", "StepId", "TemplateId", "ThreadId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-29 21:24:43.716 +05:30 [INF] 📥 Click Tracked → Result: CTA click tracked successfully.
2025-08-29 21:24:43.719 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__normalizedButtonText_1='show me template 1', @__normalizedButtonType_2='quick_reply'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c0."Id", c0."BusinessId", c0."CreatedAt", c0."CreatedBy", c0."FlowName", c0."IsActive", c0."IsPublished", c0."UpdatedAt"
FROM "CTAFlowSteps" AS c
INNER JOIN "CTAFlowConfigs" AS c0 ON c."CTAFlowConfigId" = c0."Id"
WHERE c0."BusinessId" = @__businessId_0 AND c0."IsActive" AND c0."IsPublished" AND lower(c."TriggerButtonText") = @__normalizedButtonText_1 AND lower(c."TriggerButtonType") = @__normalizedButtonType_2
LIMIT 1
2025-08-29 21:24:43.721 +05:30 [INF] ✅ Fallback flow step matched: StepId = "9469559a-99a6-4112-b552-3ab3fb138062", Flow = Flow_test_v1
2025-08-29 21:24:43.722 +05:30 [INF] 🔁 Matched CTA Step → "9469559a-99a6-4112-b552-3ab3fb138062"
2025-08-29 21:24:43.722 +05:30 [INF] 🚦 Executing Visual Flow → StepId: "9469559a-99a6-4112-b552-3ab3fb138062" | TrackingLogId: "9d43d594-c59d-48d3-a761-7bf53da5fad8"
2025-08-29 21:24:43.725 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__trackingLogId_0='9d43d594-c59d-48d3-a761-7bf53da5fad8'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."Browser", t0."BusinessId", t0."ButtonText", t0."CTAType", t0."CampaignId", t0."CampaignSendLogId", t0."City", t0."ClickedAt", t0."ClickedVia", t0."ContactId", t0."ContactPhone", t0."Country", t0."DeviceType", t0."FollowUpSent", t0."IPAddress", t0."LastInteractionType", t0."MessageId", t0."MessageLogId", t0."Referrer", t0."SessionId", t0."SourceId", t0."SourceType", t0."StepId", t0."TemplateId", t0."ThreadId", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", t1."Id", t1."AssignedAt", t1."AssignedBy", t1."BusinessId", t1."ContactId", t1."TagId", t1."Id0", t1."BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
FROM (
    SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId", c."Id" AS "Id0", c."AssignedAgentId", c."BusinessId" AS "BusinessId0", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "TrackingLogs" AS t
    LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
    WHERE t."Id" = @__trackingLogId_0
    LIMIT 1
) AS t0
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t2."Id" AS "Id0", t2."BusinessId" AS "BusinessId0", t2."Category", t2."ColorHex", t2."CreatedAt", t2."IsActive", t2."IsSystemTag", t2."LastUsedAt", t2."Name", t2."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t2 ON c0."TagId" = t2."Id"
) AS t1 ON t0."Id0" = t1."ContactId"
ORDER BY t0."Id", t0."Id0", t1."Id"
2025-08-29 21:24:43.728 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__nextStepId_1='9469559a-99a6-4112-b552-3ab3fb138062' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", c1."Id", c1."CTAFlowConfigId", c1."PositionX", c1."PositionY", c1."RequiredSource", c1."RequiredTag", c1."StepOrder", c1."TemplateToSend", c1."TemplateType", c1."TriggerButtonText", c1."TriggerButtonType"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."BusinessId" = @__businessId_0 AND EXISTS (
        SELECT 1
        FROM "CTAFlowSteps" AS c0
        WHERE c."Id" = c0."CTAFlowConfigId" AND c0."Id" = @__nextStepId_1)
    LIMIT 1
) AS t
LEFT JOIN "CTAFlowSteps" AS c1 ON t."Id" = c1."CTAFlowConfigId"
ORDER BY t."Id"
2025-08-29 21:24:43.730 +05:30 [INF] ✅ Follow-up step found and matched → StepId: "9469559a-99a6-4112-b552-3ab3fb138062", Template: template_1
2025-08-29 21:24:43.731 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-29 21:24:43.733 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:24:43.734 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-29 21:24:44.739 +05:30 [INF] Received HTTP response headers after 1004.4876ms - 200
2025-08-29 21:24:44.741 +05:30 [INF] End processing HTTP request after 1007.6241ms - 200
2025-08-29 21:24:44.761 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='3b5977a0-3879-473f-a261-21b46201bf4c', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-29T15:54:44.7426358Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='template_1' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+918974005240\",\"wa_id\":\"918974005240\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-29T15:54:44.7426353Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-29 21:24:44.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='590e6f42-6d2f-4ec1-aca0-3ee8966033ac', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2='+918974005240', @p3=NULL, @p4='2025-08-29T15:54:44.7639473Z' (DbType = DateTime), @p5='4d706a0a-467c-4fca-a8e2-da978fd28504' (Nullable = true), @p6=NULL, @p7='9469559a-99a6-4112-b552-3ab3fb138062', @p8='' (Nullable = false), @p9='True', @p10='template_1', @p11='text_template', @p12='9d43d594-c59d-48d3-a761-7bf53da5fad8' (Nullable = true), @p13='Show Me Template 1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "RawResponse", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-08-29 21:24:44.767 +05:30 [INF] ✅ Flow step executed → Template: template_1 sent to +918974005240
2025-08-29 21:24:44.768 +05:30 [INF] ⚡ Visual flow triggered via CTA click.
2025-08-29 21:24:45.835 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-29 21:24:45.838 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:45.839 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:45.856 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==","status":"sent","timestamp":"1756482884","recipient_id":"918974005240","conversation":{"id":"92319307189db345708b253330a53570","expiration_timestamp":"1756482884","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:45.858 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:45.858 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==","status":"sent","timestamp":"1756482884","recipient_id":"918974005240","conversation":{"id":"92319307189db345708b253330a53570","expiration_timestamp":"1756482884","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:45.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:45.860 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:24:45.861 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 21.0062ms
2025-08-29 21:24:45.862 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==","status":"sent","timestamp":"1756482884","recipient_id":"918974005240","conversation":{"id":"92319307189db345708b253330a53570","expiration_timestamp":"1756482884","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:45.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:45.865 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 29.6203ms
2025-08-29 21:24:45.865 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:24:45.870 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==
2025-08-29 21:24:45.870 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==
2025-08-29 21:24:46.549 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-29 21:24:46.552 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:46.553 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-29 21:24:46.554 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==","status":"delivered","timestamp":"1756482884","recipient_id":"918974005240","conversation":{"id":"92319307189db345708b253330a53570","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:46.555 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-29 21:24:46.556 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==","status":"delivered","timestamp":"1756482884","recipient_id":"918974005240","conversation":{"id":"92319307189db345708b253330a53570","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:46.556 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType93`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-29 21:24:46.558 +05:30 [INF] 📦 Routing to Status Processor
2025-08-29 21:24:46.559 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.59ms
2025-08-29 21:24:46.560 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==","status":"delivered","timestamp":"1756482884","recipient_id":"918974005240","conversation":{"id":"92319307189db345708b253330a53570","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-29 21:24:46.561 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-29 21:24:46.563 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.2197ms
2025-08-29 21:24:46.563 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-29 21:24:46.568 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==
2025-08-29 21:24:46.569 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDU0QjU4RUQ3M0Q5REMxOTZGAA==
