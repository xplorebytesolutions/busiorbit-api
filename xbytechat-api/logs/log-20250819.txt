2025-08-19 10:50:05.157 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-19 10:50:05.214 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-19 10:50:05.235 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-19 10:50:06.258 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-19 10:50:06.927 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-19 10:50:07.152 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 10:50:07.174 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__cutoff_0='2025-08-12T05:20:05.3863393Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-19 10:50:07.204 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-19 10:50:07.206 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-19 10:50:07.207 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-19 10:50:07.208 +05:30 [INF] Hosting environment: Development
2025-08-19 10:50:07.209 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-19 10:50:09.976 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-19 10:50:10.304 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 342.8411ms
2025-08-19 10:50:10.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-19 10:50:10.382 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.2154ms
2025-08-19 10:50:10.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-19 10:50:10.514 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.4672ms
2025-08-19 10:50:10.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-19 10:50:11.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 272.9958ms
2025-08-19 10:50:43.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 10:50:43.260 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-19 10:50:43.342 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:43.349 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 97.2714ms
2025-08-19 10:50:43.355 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 10:50:43.368 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:43.462 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 10:50:43.492 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 10:50:43.615 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 10:50:43.752 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 10:50:43.906 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 10:50:43.919 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 10:50:43.977 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 10:50:43.992 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:50:44.009 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 508.9516ms
2025-08-19 10:50:44.012 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 10:50:44.022 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 667.2957ms
2025-08-19 10:50:44.029 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:50:44.035 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:44.040 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.122ms
2025-08-19 10:50:44.048 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:50:44.054 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:44.138 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:44.146 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 10:50:44.156 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:50:44.169 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.8981ms
2025-08-19 10:50:44.171 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:44.173 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 125.9782ms
2025-08-19 10:50:44.179 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:50:44.183 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:44.190 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:44.192 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 10:50:44.196 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:50:44.198 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.9472ms
2025-08-19 10:50:44.201 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:44.203 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.6046ms
2025-08-19 10:50:56.458 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 10:50:56.465 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:56.467 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 8.4023ms
2025-08-19 10:50:56.471 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 10:50:56.475 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:56.477 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 10:50:56.479 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 10:50:56.488 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 10:50:56.516 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 10:50:56.557 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 10:50:56.732 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 10:50:56.739 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 10:50:56.741 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 10:50:56.744 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:50:56.746 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 264.3018ms
2025-08-19 10:50:56.749 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 10:50:56.751 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 279.471ms
2025-08-19 10:50:56.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:50:56.760 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:56.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.9606ms
2025-08-19 10:50:56.767 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:50:56.771 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:56.776 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:56.778 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 10:50:56.799 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 10:50:56.824 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:50:56.836 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 55.3138ms
2025-08-19 10:50:56.839 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:56.841 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 73.8391ms
2025-08-19 10:50:56.847 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:50:56.852 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:50:56.854 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:56.856 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 10:50:56.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:50:56.862 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.5017ms
2025-08-19 10:50:56.864 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:50:56.866 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7794ms
2025-08-19 10:54:40.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:54:40.380 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:54:40.382 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 14.6562ms
2025-08-19 10:54:40.395 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:54:40.399 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:54:40.401 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:54:40.402 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 10:54:40.406 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:54:40.407 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.8234ms
2025-08-19 10:54:40.410 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:54:40.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.1894ms
2025-08-19 10:58:22.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:58:22.744 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:58:22.745 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.2376ms
2025-08-19 10:58:22.755 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 10:58:22.759 +05:30 [INF] CORS policy execution successful.
2025-08-19 10:58:22.760 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:58:22.762 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 10:58:22.765 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 10:58:22.767 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.7734ms
2025-08-19 10:58:22.769 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 10:58:22.771 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3561ms
2025-08-19 11:04:34.854 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:04:34.862 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:04:34.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.923ms
2025-08-19 11:04:34.881 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:04:34.886 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:04:34.888 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:04:34.892 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:04:34.901 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:04:34.906 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6291ms
2025-08-19 11:04:34.910 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:04:34.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.3234ms
2025-08-19 11:07:22.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 11:07:22.911 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:22.912 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 10.911ms
2025-08-19 11:07:22.922 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 11:07:22.925 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:22.927 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 11:07:22.928 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 11:07:22.940 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 11:07:23.051 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 11:07:23.057 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 11:07:23.060 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 11:07:23.062 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 11:07:23.064 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:07:23.065 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 134.8676ms
2025-08-19 11:07:23.067 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 11:07:23.068 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 146.6164ms
2025-08-19 11:07:23.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:07:23.077 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:23.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.5514ms
2025-08-19 11:07:23.083 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:07:23.086 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:23.089 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:07:23.090 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:07:23.093 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:07:23.098 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4223ms
2025-08-19 11:07:23.100 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:07:23.101 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.9768ms
2025-08-19 11:07:31.042 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-19 11:07:31.047 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:31.049 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 7.0957ms
2025-08-19 11:07:31.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-19 11:07:31.063 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:31.066 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-19 11:07:31.074 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-19 11:07:31.116 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-19 11:07:31.121 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-19 11:07:31.139 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 62.2159ms
2025-08-19 11:07:31.141 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-19 11:07:31.142 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 84.2671ms
2025-08-19 11:07:31.795 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - null null
2025-08-19 11:07:31.799 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:31.800 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - 204 null null 5.3696ms
2025-08-19 11:07:31.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - null null
2025-08-19 11:07:31.812 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:31.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-19 11:07:31.819 +05:30 [INF] Route matched with {action = "GetAll", controller = "FailedWebhookLogs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync() on controller xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController (xbytechat.api).
2025-08-19 11:07:31.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='100'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
ORDER BY f."CreatedAt" DESC
LIMIT @__p_0
2025-08-19 11:07:31.839 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Webhooks.Models.FailedWebhookLog, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 11:07:31.844 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api) in 22.4638ms
2025-08-19 11:07:31.846 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-19 11:07:31.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - 200 null application/json; charset=utf-8 41.0885ms
2025-08-19 11:07:32.862 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - null null
2025-08-19 11:07:32.869 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - null null
2025-08-19 11:07:32.877 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:32.885 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - 204 null null 22.4939ms
2025-08-19 11:07:32.886 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:32.897 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - null null
2025-08-19 11:07:32.898 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - 204 null null 28.9308ms
2025-08-19 11:07:32.902 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:32.906 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - null null
2025-08-19 11:07:32.907 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-19 11:07:32.910 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:07:32.913 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-19 11:07:32.915 +05:30 [INF] Route matched with {action = "GetCleanupStatus", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCleanupStatus() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-19 11:07:32.918 +05:30 [INF] Route matched with {action = "GetFailedCount", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFailedCount() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-19 11:07:32.923 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 11:07:32.932 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-19 11:07:32.942 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 11:07:32.954 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType78`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:07:32.960 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "FailedWebhookLogs" AS f
2025-08-19 11:07:32.963 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api) in 44.6132ms
2025-08-19 11:07:32.967 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-19 11:07:32.969 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2025-08-19 11:07:32.969 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - 200 null application/json; charset=utf-8 71.8883ms
2025-08-19 11:07:32.973 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api) in 52.0304ms
2025-08-19 11:07:32.975 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-19 11:07:32.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - 200 null application/json; charset=utf-8 70.9617ms
2025-08-19 11:11:47.234 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 11:11:47.243 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:11:47.246 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 11.388ms
2025-08-19 11:11:47.252 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 11:11:47.255 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:11:47.265 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 11:11:47.268 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 11:11:47.271 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 11:11:47.279 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 11:11:47.297 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 11:11:47.308 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 11:11:47.311 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 11:11:47.313 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 11:11:47.314 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:11:47.316 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 46.2599ms
2025-08-19 11:11:47.318 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 11:11:47.319 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 67.6263ms
2025-08-19 11:11:47.328 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:11:47.331 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:11:47.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.8671ms
2025-08-19 11:11:47.337 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:11:47.342 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:11:47.345 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:11:47.347 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:11:47.350 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:11:47.352 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.4766ms
2025-08-19 11:11:47.353 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:11:47.355 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.7334ms
2025-08-19 11:16:06.305 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:16:06.309 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:16:06.309 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.6476ms
2025-08-19 11:16:06.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:16:06.319 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:16:06.320 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:16:06.321 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:16:06.323 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:16:06.325 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.1487ms
2025-08-19 11:16:06.326 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:16:06.327 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.8014ms
2025-08-19 11:54:00.010 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:54:00.015 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:54:00.016 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.2902ms
2025-08-19 11:54:00.024 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:54:00.027 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:54:00.028 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:54:00.030 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:54:00.124 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 11:54:00.127 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:54:00.129 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 97.4733ms
2025-08-19 11:54:00.131 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:54:00.132 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 107.9559ms
2025-08-19 11:59:34.945 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:34.952 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:34.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.9424ms
2025-08-19 11:59:34.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:34.959 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:34.960 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:34.962 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:59:34.964 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:59:34.966 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.4507ms
2025-08-19 11:59:34.967 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:34.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.2735ms
2025-08-19 11:59:36.929 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:36.932 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:36.933 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:36.934 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:59:36.937 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:59:36.939 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.7189ms
2025-08-19 11:59:36.940 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:36.942 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9041ms
2025-08-19 11:59:37.694 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:37.699 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:37.700 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:37.702 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:59:37.704 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:59:37.706 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.2459ms
2025-08-19 11:59:37.708 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:37.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.5147ms
2025-08-19 11:59:38.422 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:38.426 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:38.428 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:38.430 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:59:38.433 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:59:38.436 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.9898ms
2025-08-19 11:59:38.438 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:38.440 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8328ms
2025-08-19 11:59:39.163 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:39.167 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:39.169 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:39.171 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:59:39.175 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:59:39.177 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.6081ms
2025-08-19 11:59:39.179 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:39.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.5707ms
2025-08-19 11:59:39.793 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:39.797 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:39.799 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:39.800 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:59:39.804 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:59:39.806 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.8523ms
2025-08-19 11:59:39.808 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:39.810 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.5339ms
2025-08-19 11:59:40.431 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:40.436 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:40.437 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.6864ms
2025-08-19 11:59:40.442 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 11:59:40.445 +05:30 [INF] CORS policy execution successful.
2025-08-19 11:59:40.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:40.449 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 11:59:40.453 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 11:59:40.456 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.8505ms
2025-08-19 11:59:40.459 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 11:59:40.460 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.0194ms
2025-08-19 12:03:03.843 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:03:03.852 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:03:03.853 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.723ms
2025-08-19 12:03:03.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:03:03.870 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:03:03.872 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:03:03.873 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:03:03.878 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:03:03.880 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.8382ms
2025-08-19 12:03:03.882 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:03:03.884 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.9281ms
2025-08-19 12:04:05.339 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:04:05.344 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:05.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7501ms
2025-08-19 12:04:05.354 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:04:05.357 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:05.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:04:05.361 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:04:05.363 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:04:05.366 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.4936ms
2025-08-19 12:04:05.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:04:05.371 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.7116ms
2025-08-19 12:04:13.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:04:13.334 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:13.335 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.3527ms
2025-08-19 12:04:13.341 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 12:04:13.351 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:13.354 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:04:13.356 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:04:13.360 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 12:04:13.467 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:04:13.475 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 12:04:13.486 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 12:04:13.490 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 12:04:13.492 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 12:04:13.494 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:04:13.497 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 137.5636ms
2025-08-19 12:04:13.499 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:04:13.500 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 159.2555ms
2025-08-19 12:04:13.506 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:04:13.511 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:13.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.8811ms
2025-08-19 12:04:13.516 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:04:13.521 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:13.523 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:04:13.525 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:04:13.528 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:04:13.530 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.4456ms
2025-08-19 12:04:13.532 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:04:13.534 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2457ms
2025-08-19 12:04:30.701 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:04:30.707 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:30.708 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.8711ms
2025-08-19 12:04:30.713 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:04:30.717 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:04:30.719 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:04:30.723 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:04:30.726 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:04:30.729 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.3089ms
2025-08-19 12:04:30.732 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:04:30.733 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4111ms
2025-08-19 12:07:02.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-19 12:07:02.016 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:07:02.019 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 204 null null 17.485ms
2025-08-19 12:07:02.040 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-19 12:07:02.046 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:07:02.048 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-19 12:07:02.062 +05:30 [INF] Route matched with {action = "GetPaginatedLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedLogs(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-19 12:07:02.113 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
2025-08-19 12:07:02.144 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-19 12:07:02.149 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 12:07:02.158 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api) in 92.6656ms
2025-08-19 12:07:02.160 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-19 12:07:02.161 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 200 null application/json; charset=utf-8 121.2155ms
2025-08-19 12:08:48.461 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:08:48.470 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:08:48.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.1903ms
2025-08-19 12:08:48.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:08:48.484 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:08:48.486 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:08:48.488 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:08:48.491 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:08:48.493 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.7712ms
2025-08-19 12:08:48.495 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:08:48.499 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4587ms
2025-08-19 12:08:56.089 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:08:56.093 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:08:56.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.1096ms
2025-08-19 12:08:56.100 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 12:08:56.104 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:08:56.106 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:08:56.108 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:08:56.114 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 12:08:56.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:08:56.128 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 12:08:56.136 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 12:08:56.139 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 12:08:56.141 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 12:08:56.144 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:08:56.146 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 34.4442ms
2025-08-19 12:08:56.149 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:08:56.150 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 50.0235ms
2025-08-19 12:08:56.155 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:08:56.159 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:08:56.160 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.1628ms
2025-08-19 12:08:56.164 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:08:56.168 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:08:56.170 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:08:56.171 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:08:56.174 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:08:56.177 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.2016ms
2025-08-19 12:08:56.179 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:08:56.181 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.3484ms
2025-08-19 12:09:28.299 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:28.305 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:28.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.2007ms
2025-08-19 12:09:28.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:28.320 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:28.322 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:28.323 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:28.326 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:28.329 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.5712ms
2025-08-19 12:09:28.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:28.335 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7777ms
2025-08-19 12:09:29.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:29.376 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:29.377 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:29.380 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:29.383 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:29.386 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.3433ms
2025-08-19 12:09:29.388 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:29.390 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.9868ms
2025-08-19 12:09:30.204 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:30.210 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:30.211 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:30.213 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:30.217 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:30.220 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.3418ms
2025-08-19 12:09:30.222 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:30.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.0474ms
2025-08-19 12:09:31.056 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:31.060 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:31.061 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:31.063 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:31.066 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:31.068 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.7161ms
2025-08-19 12:09:31.070 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:31.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.651ms
2025-08-19 12:09:31.749 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:31.766 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:31.768 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:31.770 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:31.774 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:31.776 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.2631ms
2025-08-19 12:09:31.779 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:31.781 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.2962ms
2025-08-19 12:09:32.559 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:32.564 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:32.566 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:32.567 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:32.571 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:32.573 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.4085ms
2025-08-19 12:09:32.575 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:32.577 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8814ms
2025-08-19 12:09:33.200 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:33.205 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:33.207 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:33.208 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:33.212 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:33.214 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.9143ms
2025-08-19 12:09:33.216 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:33.218 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.6615ms
2025-08-19 12:09:39.870 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:09:39.875 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:39.876 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.4964ms
2025-08-19 12:09:39.881 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 12:09:39.884 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:39.886 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:09:39.887 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:09:39.891 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 12:09:39.996 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:09:40.003 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 12:09:40.006 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 12:09:40.008 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 12:09:40.010 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:40.012 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 122.8249ms
2025-08-19 12:09:40.015 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:09:40.017 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 135.5859ms
2025-08-19 12:09:40.023 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:40.028 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:40.029 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.1313ms
2025-08-19 12:09:40.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:09:40.038 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:40.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:40.041 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:09:40.044 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:40.046 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.6066ms
2025-08-19 12:09:40.048 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:09:40.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.3163ms
2025-08-19 12:09:52.697 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - null null
2025-08-19 12:09:52.697 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - null null
2025-08-19 12:09:52.701 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:52.704 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:52.705 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - 204 null null 8.7604ms
2025-08-19 12:09:52.707 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - 204 null null 9.6694ms
2025-08-19 12:09:52.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - null null
2025-08-19 12:09:52.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - null null
2025-08-19 12:09:52.723 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:52.727 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:52.729 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-19 12:09:52.730 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-19 12:09:52.731 +05:30 [INF] Route matched with {action = "GetCleanupStatus", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCleanupStatus() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-19 12:09:52.732 +05:30 [INF] Route matched with {action = "GetFailedCount", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFailedCount() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-19 12:09:52.741 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 12:09:52.762 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 12:09:52.770 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType78`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:09:52.773 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api) in 37.7931ms
2025-08-19 12:09:52.775 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-19 12:09:52.777 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - 200 null application/json; charset=utf-8 58.2925ms
2025-08-19 12:09:52.857 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "FailedWebhookLogs" AS f
2025-08-19 12:09:52.861 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2025-08-19 12:09:52.863 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api) in 115.6135ms
2025-08-19 12:09:52.865 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-19 12:09:52.867 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - 200 null application/json; charset=utf-8 147.9106ms
2025-08-19 12:09:53.345 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - null null
2025-08-19 12:09:53.354 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:53.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - 204 null null 13.6054ms
2025-08-19 12:09:53.369 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - null null
2025-08-19 12:09:53.374 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:53.376 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-19 12:09:53.378 +05:30 [INF] Route matched with {action = "GetAll", controller = "FailedWebhookLogs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync() on controller xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController (xbytechat.api).
2025-08-19 12:09:53.386 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='100'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
ORDER BY f."CreatedAt" DESC
LIMIT @__p_0
2025-08-19 12:09:53.391 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Webhooks.Models.FailedWebhookLog, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 12:09:53.393 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api) in 12.204ms
2025-08-19 12:09:53.395 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-19 12:09:53.397 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - 200 null application/json; charset=utf-8 27.7783ms
2025-08-19 12:09:54.253 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-19 12:09:54.258 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:54.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/catalog-tracking/recent?limit=10 - 204 null null 7.3442ms
2025-08-19 12:09:54.266 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - null null
2025-08-19 12:09:54.270 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:09:54.272 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-19 12:09:54.274 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "CatalogTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController (xbytechat.api).
2025-08-19 12:09:54.284 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BotId", c."BusinessId", c."ButtonText", c."CTAJourney", c."CampaignId", c."CampaignSendLogId", c."CategoryBrowsed", c."ClickedAt", c."ContactId", c."CtaId", c."FollowUpSent", c."LastInteractionType", c."MessageLogId", c."PlanSnapshot", c."ProductBrowsed", c."ProductId", c."RefMessageId", c."Source", c."TemplateId", c."UserId", c."UserName", c."UserPhone"
FROM "CatalogClickLogs" AS c
ORDER BY c."ClickedAt" DESC
LIMIT @__p_0
2025-08-19 12:09:54.289 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-19 12:09:54.291 +05:30 [INF] Executed action xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api) in 14.4417ms
2025-08-19 12:09:54.293 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Catalog.Controllers.CatalogTrackingController.GetRecentLogs (xbytechat.api)'
2025-08-19 12:09:54.294 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/catalog-tracking/recent?limit=10 - 200 null application/json; charset=utf-8 28.8485ms
2025-08-19 12:11:00.277 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 12:11:00.289 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:00.291 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 13.4257ms
2025-08-19 12:11:00.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 12:11:00.307 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:00.311 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 12:11:00.319 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 12:11:00.461 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 138.778ms
2025-08-19 12:11:00.464 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 12:11:00.514 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 12:11:00.630 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 334.8771ms
2025-08-19 12:11:02.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/users/by-business - null null
2025-08-19 12:11:02.098 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/users/by-business - 404 0 null 4.9505ms
2025-08-19 12:11:02.105 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/users/by-business, Response status code: 404
2025-08-19 12:11:02.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/permissions - null null
2025-08-19 12:11:02.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/permissions - 404 0 null 3.7646ms
2025-08-19 12:11:02.401 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/permissions, Response status code: 404
2025-08-19 12:11:17.183 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:11:17.187 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:17.188 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.3244ms
2025-08-19 12:11:17.192 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 12:11:17.196 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:17.198 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:11:17.200 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:11:17.204 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 12:11:17.209 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:11:17.218 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 12:11:17.228 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 12:11:17.232 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 12:11:17.234 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 12:11:17.235 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:11:17.238 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 34.733ms
2025-08-19 12:11:17.240 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:11:17.241 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 48.9551ms
2025-08-19 12:11:17.246 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:11:17.250 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:17.251 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.4577ms
2025-08-19 12:11:17.257 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:11:17.261 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:17.263 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:11:17.265 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:11:17.268 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:11:17.271 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.0663ms
2025-08-19 12:11:17.273 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:11:17.275 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.533ms
2025-08-19 12:11:34.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:11:34.055 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:34.057 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.5676ms
2025-08-19 12:11:34.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:11:34.065 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:34.067 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:11:34.069 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:11:34.071 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:11:34.074 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.3832ms
2025-08-19 12:11:34.076 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:11:34.077 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.6073ms
2025-08-19 12:11:37.837 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:11:37.842 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:37.844 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.1054ms
2025-08-19 12:11:37.849 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 12:11:37.852 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:37.854 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:11:37.855 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:11:37.858 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 12:11:37.865 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:11:37.871 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 12:11:37.882 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 12:11:37.885 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 12:11:37.887 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 12:11:37.890 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:11:37.892 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 34.6122ms
2025-08-19 12:11:37.894 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:11:37.896 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 47.2543ms
2025-08-19 12:11:37.901 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:11:37.905 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:11:37.908 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:11:37.909 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:11:37.914 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:11:37.916 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.2072ms
2025-08-19 12:11:37.918 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:11:37.920 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4646ms
2025-08-19 12:12:31.901 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:12:31.906 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:12:31.907 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.9556ms
2025-08-19 12:12:31.914 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 12:12:31.924 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:12:31.926 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:12:31.929 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:12:31.933 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 12:12:31.940 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:12:31.951 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 12:12:31.961 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 12:12:31.963 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 12:12:31.965 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:12:31.967 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 35.1651ms
2025-08-19 12:12:31.972 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:12:31.974 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 59.8477ms
2025-08-19 12:12:31.980 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:12:31.983 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:12:31.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6124ms
2025-08-19 12:12:31.990 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:12:31.994 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:12:31.996 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:12:31.997 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:12:32.001 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:12:32.003 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.9893ms
2025-08-19 12:12:32.005 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:12:32.006 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6248ms
2025-08-19 12:14:55.918 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:14:55.922 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:14:55.923 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.3821ms
2025-08-19 12:14:55.932 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:14:55.935 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:14:55.937 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:14:55.938 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:14:55.941 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:14:55.943 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.0031ms
2025-08-19 12:14:55.945 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:14:55.946 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.8015ms
2025-08-19 12:30:51.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:30:51.225 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:30:51.226 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.6468ms
2025-08-19 12:30:51.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:30:51.239 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:30:51.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:30:51.246 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:30:51.248 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:30:51.251 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.6936ms
2025-08-19 12:30:51.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:30:51.254 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8328ms
2025-08-19 12:30:59.041 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:30:59.045 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:30:59.046 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.2713ms
2025-08-19 12:30:59.051 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:30:59.055 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:30:59.057 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:30:59.058 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:30:59.061 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:30:59.064 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.3652ms
2025-08-19 12:30:59.066 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:30:59.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.368ms
2025-08-19 12:38:27.753 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:38:27.762 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:38:27.764 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 10.9814ms
2025-08-19 12:38:27.775 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 12:38:27.779 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:38:27.781 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:38:27.783 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:38:27.788 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 12:38:27.897 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:38:27.906 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 12:38:27.917 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 12:38:27.921 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 12:38:27.923 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 12:38:27.925 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:38:27.927 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 141.8679ms
2025-08-19 12:38:27.930 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:38:27.931 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 156.611ms
2025-08-19 12:38:27.937 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:38:27.941 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:38:27.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7809ms
2025-08-19 12:38:27.948 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:38:27.952 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:38:27.954 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:38:27.956 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:38:27.980 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:38:27.983 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.6264ms
2025-08-19 12:38:27.986 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:38:27.987 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.5447ms
2025-08-19 12:56:42.156 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:56:42.161 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:56:42.162 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.6755ms
2025-08-19 12:56:42.167 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:56:42.169 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:56:42.170 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:56:42.171 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:56:42.252 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 12:56:42.255 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:56:42.256 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 83.1691ms
2025-08-19 12:56:42.257 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:56:42.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 90.736ms
2025-08-19 12:56:44.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:56:44.605 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:56:44.607 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:56:44.608 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:56:44.610 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:56:44.611 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7418ms
2025-08-19 12:56:44.612 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:56:44.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.0063ms
2025-08-19 12:56:51.914 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 12:56:51.918 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:56:51.919 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.3026ms
2025-08-19 12:56:51.922 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 12:56:51.924 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:56:51.924 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:56:51.925 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 12:56:51.928 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 12:56:51.931 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 12:56:51.935 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 12:56:51.941 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 12:56:51.943 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 12:56:51.944 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 12:56:51.945 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:56:51.946 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 19.5354ms
2025-08-19 12:56:51.947 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 12:56:51.948 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 26.6532ms
2025-08-19 12:56:51.951 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:56:51.953 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:56:51.954 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6897ms
2025-08-19 12:56:51.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 12:56:51.958 +05:30 [INF] CORS policy execution successful.
2025-08-19 12:56:51.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:56:51.960 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 12:56:51.962 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 12:56:51.964 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.239ms
2025-08-19 12:56:51.965 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 12:56:51.966 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.5308ms
2025-08-19 13:00:12.505 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:12.512 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:12.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.2672ms
2025-08-19 13:00:12.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:12.523 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:12.524 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:12.525 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:00:12.527 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:00:12.528 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.9326ms
2025-08-19 13:00:12.530 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:12.531 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.3641ms
2025-08-19 13:00:21.377 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 13:00:21.380 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:21.381 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5685ms
2025-08-19 13:00:21.383 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 13:00:21.386 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:21.386 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:00:21.387 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 13:00:21.389 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 13:00:21.392 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 13:00:21.396 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 13:00:21.401 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 13:00:21.403 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 13:00:21.403 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 13:00:21.405 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:00:21.406 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 17.0769ms
2025-08-19 13:00:21.407 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:00:21.408 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 24.2972ms
2025-08-19 13:00:21.411 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:21.413 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:21.413 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6357ms
2025-08-19 13:00:21.416 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:21.417 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:21.418 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:21.419 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:00:21.421 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:00:21.422 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3278ms
2025-08-19 13:00:21.423 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:21.424 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.8797ms
2025-08-19 13:00:31.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:31.705 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:31.707 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7303ms
2025-08-19 13:00:31.709 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:31.711 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:31.712 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:31.713 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:00:31.715 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:00:31.716 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3639ms
2025-08-19 13:00:31.718 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:31.719 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.6366ms
2025-08-19 13:00:38.948 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 13:00:38.951 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:38.952 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2692ms
2025-08-19 13:00:38.955 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 13:00:38.957 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:38.958 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:00:38.959 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 13:00:38.961 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 13:00:38.964 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 13:00:38.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 13:00:38.973 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 13:00:38.974 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 13:00:38.975 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:00:38.976 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 16.6364ms
2025-08-19 13:00:38.978 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:00:38.979 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 24.076ms
2025-08-19 13:00:38.982 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:38.984 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:38.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9049ms
2025-08-19 13:00:38.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:00:38.989 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:00:38.990 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:38.991 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:00:38.992 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:00:38.993 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4168ms
2025-08-19 13:00:38.995 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:00:38.995 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.4953ms
2025-08-19 13:01:05.389 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 13:01:05.391 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:01:05.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.0589ms
2025-08-19 13:01:05.394 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 13:01:05.396 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:01:05.397 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:01:05.398 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 13:01:05.400 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 13:01:05.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 13:01:05.407 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 13:01:05.415 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 13:01:05.418 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 13:01:05.419 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 13:01:05.420 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:01:05.421 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 21.6302ms
2025-08-19 13:01:05.422 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:01:05.423 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 28.5306ms
2025-08-19 13:01:05.426 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:01:05.429 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:01:05.429 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0875ms
2025-08-19 13:01:05.432 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:01:05.434 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:01:05.435 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:01:05.436 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:01:05.438 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:01:05.439 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7925ms
2025-08-19 13:01:05.440 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:01:05.441 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.3965ms
2025-08-19 13:02:03.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-19 13:02:03.354 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:03.355 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 204 null null 8.027ms
2025-08-19 13:02:03.363 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - null null
2025-08-19 13:02:03.365 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:03.365 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-19 13:02:03.366 +05:30 [INF] Route matched with {action = "GetPaginatedLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedLogs(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-19 13:02:03.427 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
2025-08-19 13:02:03.431 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-19 13:02:03.436 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 13:02:03.437 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api) in 69.2933ms
2025-08-19 13:02:03.438 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetPaginatedLogs (xbytechat.api)'
2025-08-19 13:02:03.439 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/history?page=1&pageSize=10 - 200 null application/json; charset=utf-8 76.4809ms
2025-08-19 13:02:05.889 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - null null
2025-08-19 13:02:05.892 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:05.893 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - 204 null null 3.8056ms
2025-08-19 13:02:05.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs - null null
2025-08-19 13:02:05.911 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:05.912 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-19 13:02:05.918 +05:30 [INF] Route matched with {action = "GetAll", controller = "TrackingViewer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid]) on controller xbytechat.api.Features.Tracking.Controllers.TrackingViewerController (xbytechat.api).
2025-08-19 13:02:05.956 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."ContactPhone", CASE
    WHEN c."Id" IS NOT NULL THEN c."Name"
    ELSE '(N/A)'
END AS "ContactName", t."ButtonText", t."CTAType", t."SourceType", t."ClickedAt", t."DeviceType", t."Country", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE '(Unknown)'
END AS "CampaignName"
FROM "TrackingLogs" AS t
LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
LEFT JOIN "Campaigns" AS c0 ON t."CampaignId" = c0."Id"
ORDER BY t."ClickedAt" DESC
2025-08-19 13:02:05.959 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType77`10[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:02:05.965 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api) in 45.2798ms
2025-08-19 13:02:05.966 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-19 13:02:05.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/logs - 200 null application/json; charset=utf-8 60.5531ms
2025-08-19 13:02:18.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 13:02:18.743 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:18.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4794ms
2025-08-19 13:02:18.747 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 13:02:18.749 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:18.750 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:02:18.751 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 13:02:18.772 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 13:02:18.775 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 13:02:18.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 13:02:18.781 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 13:02:18.782 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 13:02:18.783 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:02:18.785 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 14.1246ms
2025-08-19 13:02:18.786 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:02:18.787 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 39.8968ms
2025-08-19 13:02:18.790 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:02:18.792 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:18.793 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1071ms
2025-08-19 13:02:18.795 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:02:18.798 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:18.799 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:02:18.800 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:02:18.801 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:02:18.802 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.432ms
2025-08-19 13:02:18.804 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:02:18.805 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.4635ms
2025-08-19 13:02:23.086 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/permissions - null null
2025-08-19 13:02:23.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/permissions - 404 0 null 3.5713ms
2025-08-19 13:02:23.094 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/permissions, Response status code: 404
2025-08-19 13:02:23.377 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/users/by-business - null null
2025-08-19 13:02:23.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/users/by-business - 404 0 null 2.4446ms
2025-08-19 13:02:23.382 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/users/by-business, Response status code: 404
2025-08-19 13:02:24.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 13:02:24.088 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:24.089 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.0766ms
2025-08-19 13:02:24.096 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 13:02:24.100 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:24.102 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 13:02:24.103 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 13:02:24.135 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 28.486ms
2025-08-19 13:02:24.137 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 13:02:24.160 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 13:02:24.167 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 71.2266ms
2025-08-19 13:02:27.532 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-19 13:02:27.535 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:27.536 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-19 13:02:27.536 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 4.3115ms
2025-08-19 13:02:27.538 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:27.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 6.0297ms
2025-08-19 13:02:27.547 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-19 13:02:27.547 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-19 13:02:27.550 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:27.552 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:27.553 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-19 13:02:27.553 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-19 13:02:27.557 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-19 13:02:27.558 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:02:27.569 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-19 13:02:27.573 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 13:02:27.576 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 15.7284ms
2025-08-19 13:02:27.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-19 13:02:27.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 31.8621ms
2025-08-19 13:02:27.582 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-19 13:02:27.585 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:27.585 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.1379ms
2025-08-19 13:02:27.588 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-19 13:02:27.591 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:27.592 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:02:27.597 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:02:27.601 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 13:02:27.605 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 13:02:27.632 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-19 13:02:27.638 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 40.0713ms
2025-08-19 13:02:27.640 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:02:27.641 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 52.7512ms
2025-08-19 13:02:27.643 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-19 13:02:27.648 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 89.4803ms
2025-08-19 13:02:27.649 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-19 13:02:27.650 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 103.3016ms
2025-08-19 13:02:32.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-19 13:02:32.480 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:32.481 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.7601ms
2025-08-19 13:02:32.501 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-19 13:02:32.503 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:02:32.504 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:02:32.505 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:02:32.506 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 13:02:32.508 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.7458ms
2025-08-19 13:02:32.509 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:02:32.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 8.8106ms
2025-08-19 13:03:05.718 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-19 13:03:05.724 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:05.725 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 6.7187ms
2025-08-19 13:03:05.731 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 391
2025-08-19 13:03:05.733 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:05.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-19 13:03:05.739 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:03:05.774 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-19 13:03:05.890 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='00696bb5-5c82-46bc-a34d-57e57146d4ac', @p1='34cd566b-5dcf-4e63-81d9-3ddd05946b8a', @p2='484d8ad4-b0e3-460a-a99d-f64f610ee275', @p3='4b5a83fc-0a3e-4e9c-9ad9-e9be84ad0f42', @p4='6d759374-575d-4d84-ace6-b0683b99480e', @p5='769be65d-2877-46d5-9720-0060fbe3709c', @p6='22a153bc-6e0f-42f3-bbc0-4fbe3179612c', @p7='2025-08-19T07:33:05.8091347Z' (DbType = DateTime), @p8='system', @p9='True', @p10='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p11='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p12='2592d8cb-a885-41f3-a995-ca374564d2e7', @p13='2025-08-19T07:33:05.8090651Z' (DbType = DateTime), @p14='system', @p15='True', @p16='30000000-0000-0000-0000-000000000001', @p17='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p18='332737d4-2b37-4f7c-837b-03047e24ed41', @p19='2025-08-19T07:33:05.8084903Z' (DbType = DateTime), @p20='system', @p21='True', @p22='30000000-0000-0000-0000-000000000004', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='362df203-47a6-4977-b967-90e0c3986025', @p25='2025-08-19T07:33:05.8091052Z' (DbType = DateTime), @p26='system', @p27='True', @p28='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='4a3b8b27-6584-4e9d-99d0-5ef9026176ad', @p31='2025-08-19T07:33:05.7906557Z' (DbType = DateTime), @p32='system', @p33='True', @p34='30000000-0000-0000-0000-000000000003', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='9b3f7dc5-1f4b-4753-a108-8c825c95fe52', @p37='2025-08-19T07:33:05.8091437Z' (DbType = DateTime), @p38='system', @p39='True', @p40='c819f1bd-422d-4609-916c-cc185fe44ab0', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='cc7ff2d8-017e-4d36-bd5c-ef0cae526acb', @p43='2025-08-19T07:33:05.8090927Z' (DbType = DateTime), @p44='system', @p45='True', @p46='0485154c-dde5-4732-a7aa-a379c77a5b27', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='e1eb02f0-d782-45a5-8f47-c5efa9850833', @p49='2025-08-19T07:33:05.8090993Z' (DbType = DateTime), @p50='system', @p51='True', @p52='29461562-ef9c-48c0-a606-482ff57b8f95', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='e2ae0ccb-3f82-4189-b7f4-80ff666bca43', @p55='2025-08-19T07:33:05.8090832Z' (DbType = DateTime), @p56='system', @p57='True', @p58='30000000-0000-0000-0000-000000000002', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='f76260e0-0571-415b-b26a-9028c6f5fa4c', @p61='2025-08-19T07:33:05.8091112Z' (DbType = DateTime), @p62='system', @p63='True', @p64='974af1f9-3caa-4857-a1a7-48462c389332', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
2025-08-19 13:03:05.908 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:03:05.910 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 170.2959ms
2025-08-19 13:03:05.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-19 13:03:05.912 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 181.4087ms
2025-08-19 13:03:05.915 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-19 13:03:05.917 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:05.917 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:03:05.918 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:03:05.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 13:03:05.924 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 13:03:05.925 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.2059ms
2025-08-19 13:03:05.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:03:05.926 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.5157ms
2025-08-19 13:03:08.056 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 391
2025-08-19 13:03:08.058 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:08.077 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-19 13:03:08.078 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:03:08.081 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-19 13:03:08.090 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='22a153bc-6e0f-42f3-bbc0-4fbe3179612c', @p1='2592d8cb-a885-41f3-a995-ca374564d2e7', @p2='332737d4-2b37-4f7c-837b-03047e24ed41', @p3='362df203-47a6-4977-b967-90e0c3986025', @p4='4a3b8b27-6584-4e9d-99d0-5ef9026176ad', @p5='9b3f7dc5-1f4b-4753-a108-8c825c95fe52', @p6='cc7ff2d8-017e-4d36-bd5c-ef0cae526acb', @p7='e1eb02f0-d782-45a5-8f47-c5efa9850833', @p8='e2ae0ccb-3f82-4189-b7f4-80ff666bca43', @p9='f76260e0-0571-415b-b26a-9028c6f5fa4c', @p10='09001656-bb83-4b17-898f-093e4249a900', @p11='2025-08-19T07:33:08.0850470Z' (DbType = DateTime), @p12='system', @p13='True', @p14='0485154c-dde5-4732-a7aa-a379c77a5b27', @p15='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p16='32ad50e7-6920-422b-ae80-1da885626742', @p17='2025-08-19T07:33:08.0851493Z' (DbType = DateTime), @p18='system', @p19='True', @p20='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p21='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p22='461c0bb9-6f90-4f73-886a-fa59d44ed10c', @p23='2025-08-19T07:33:08.0848980Z' (DbType = DateTime), @p24='system', @p25='True', @p26='30000000-0000-0000-0000-000000000003', @p27='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p28='5bebd116-9561-48da-83f9-2bf7b6f58bc0', @p29='2025-08-19T07:33:08.0852323Z' (DbType = DateTime), @p30='system', @p31='True', @p32='c819f1bd-422d-4609-916c-cc185fe44ab0', @p33='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p34='67471555-ae5a-4a27-8990-c516adcf3065', @p35='2025-08-19T07:33:08.0850162Z' (DbType = DateTime), @p36='system', @p37='True', @p38='30000000-0000-0000-0000-000000000001', @p39='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p40='6d32fe6e-0e95-4db1-80ad-6fcbfc5ebfa2', @p41='2025-08-19T07:33:08.0850359Z' (DbType = DateTime), @p42='system', @p43='True', @p44='30000000-0000-0000-0000-000000000002', @p45='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p46='7b151513-2527-4300-99a5-ffee77c0dad0', @p47='2025-08-19T07:33:08.0849836Z' (DbType = DateTime), @p48='system', @p49='True', @p50='30000000-0000-0000-0000-000000000004', @p51='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p52='ad8ab6a9-a930-43b0-bf86-5e6abcd5528d', @p53='2025-08-19T07:33:08.0851373Z' (DbType = DateTime), @p54='system', @p55='True', @p56='29461562-ef9c-48c0-a606-482ff57b8f95', @p57='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p58='be115ed6-a983-4a82-b1dd-623b3ab6ae17', @p59='2025-08-19T07:33:08.0851589Z' (DbType = DateTime), @p60='system', @p61='True', @p62='974af1f9-3caa-4857-a1a7-48462c389332', @p63='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p64='d50e6455-3b2c-46f5-97aa-06a90108a4f8', @p65='2025-08-19T07:33:08.0852187Z' (DbType = DateTime), @p66='system', @p67='True', @p68='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p69='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p40, @p41, @p42, @p43, @p44, @p45);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p58, @p59, @p60, @p61, @p62, @p63);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p64, @p65, @p66, @p67, @p68, @p69);
2025-08-19 13:03:08.093 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:03:08.094 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 15.4986ms
2025-08-19 13:03:08.095 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-19 13:03:08.096 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 40.4012ms
2025-08-19 13:03:08.099 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-19 13:03:08.101 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:08.102 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:03:08.103 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:03:08.106 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 13:03:08.108 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 13:03:08.109 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.342ms
2025-08-19 13:03:08.110 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 13:03:08.111 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 12.2105ms
2025-08-19 13:03:15.025 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 13:03:15.028 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:15.028 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2681ms
2025-08-19 13:03:15.031 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 13:03:15.033 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:15.034 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:03:15.035 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 13:03:15.037 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 13:03:15.040 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 13:03:15.044 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 13:03:15.049 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 13:03:15.051 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 13:03:15.052 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 13:03:15.053 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:03:15.054 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 18.5131ms
2025-08-19 13:03:15.056 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 13:03:15.057 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 25.6246ms
2025-08-19 13:03:15.060 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:03:15.062 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:15.063 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6228ms
2025-08-19 13:03:15.065 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:03:15.067 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:03:15.068 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:03:15.069 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:03:15.071 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:03:15.072 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4216ms
2025-08-19 13:03:15.073 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:03:15.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.4672ms
2025-08-19 13:17:29.789 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:17:29.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:17:29.794 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:17:29.796 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:17:29.796 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.5319ms
2025-08-19 13:17:29.799 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.0522ms
2025-08-19 13:17:29.802 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:17:29.806 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:17:29.807 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:17:29.808 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:17:29.809 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:17:29.810 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4364ms
2025-08-19 13:17:29.811 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:17:29.811 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:17:29.814 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:17:29.814 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.1967ms
2025-08-19 13:17:29.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:17:29.818 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:17:29.820 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:17:29.821 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.6226ms
2025-08-19 13:17:29.822 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:17:29.823 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.3709ms
2025-08-19 13:27:18.814 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:27:18.815 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:27:18.821 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:27:18.823 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:27:18.823 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.9555ms
2025-08-19 13:27:18.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.6044ms
2025-08-19 13:27:18.833 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:27:18.834 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:27:18.835 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:27:18.836 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:27:18.838 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:27:18.839 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2896ms
2025-08-19 13:27:18.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:27:18.840 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:27:18.842 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:27:18.842 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.9668ms
2025-08-19 13:27:18.843 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:27:18.846 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:27:18.848 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:27:18.849 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5051ms
2025-08-19 13:27:18.850 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:27:18.851 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.6551ms
2025-08-19 13:31:00.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:31:00.800 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:31:00.801 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1799ms
2025-08-19 13:31:00.808 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:31:00.810 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:31:00.811 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2244ms
2025-08-19 13:31:00.815 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:31:00.819 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:31:00.820 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:31:00.821 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:31:00.824 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:31:00.827 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.4967ms
2025-08-19 13:31:00.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:31:00.829 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:31:00.835 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:31:00.836 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9947ms
2025-08-19 13:31:00.838 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:31:00.842 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:31:00.844 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:31:00.846 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.984ms
2025-08-19 13:31:00.847 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:31:00.848 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4055ms
2025-08-19 13:31:04.201 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:31:04.204 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:31:04.205 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:31:04.206 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:31:04.208 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:31:04.210 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.561ms
2025-08-19 13:31:04.211 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:31:04.212 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.8784ms
2025-08-19 13:34:00.783 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:34:00.787 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:34:00.789 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:34:00.791 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:34:00.791 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.9719ms
2025-08-19 13:34:00.795 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.4517ms
2025-08-19 13:34:00.798 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:34:00.802 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:34:00.803 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:34:00.804 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:34:00.805 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:34:00.807 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4781ms
2025-08-19 13:34:00.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:34:00.808 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:34:00.810 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:34:00.811 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.2719ms
2025-08-19 13:34:00.812 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:34:00.814 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:34:00.816 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:34:00.818 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5241ms
2025-08-19 13:34:00.819 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:34:00.820 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.9542ms
2025-08-19 13:41:36.796 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:36.802 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:36.803 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1725ms
2025-08-19 13:41:36.804 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:36.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:36.811 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:36.813 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:36.813 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.1987ms
2025-08-19 13:41:36.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:36.817 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:41:36.819 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:41:36.820 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4739ms
2025-08-19 13:41:36.821 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:36.821 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:36.823 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:36.824 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.1289ms
2025-08-19 13:41:36.825 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:36.828 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:41:36.830 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:41:36.831 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4141ms
2025-08-19 13:41:36.832 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:36.833 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.6687ms
2025-08-19 13:41:56.792 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:56.793 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:56.795 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:56.797 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:56.798 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.8265ms
2025-08-19 13:41:56.799 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0021ms
2025-08-19 13:41:56.804 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:56.806 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:56.807 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:56.808 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:41:56.809 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:41:56.810 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3976ms
2025-08-19 13:41:56.811 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 13:41:56.812 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:56.813 +05:30 [INF] CORS policy execution successful.
2025-08-19 13:41:56.814 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.8209ms
2025-08-19 13:41:56.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:56.818 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 13:41:56.820 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 13:41:56.822 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7528ms
2025-08-19 13:41:56.823 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 13:41:56.824 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.706ms
2025-08-19 14:50:23.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.b6359e8aa8e8f5b23f5f.hot-update.json - null null
2025-08-19 14:50:23.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.b6359e8aa8e8f5b23f5f.hot-update.json - 404 0 null 5.4222ms
2025-08-19 14:50:23.293 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.b6359e8aa8e8f5b23f5f.hot-update.json, Response status code: 404
2025-08-19 14:50:23.328 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.b6359e8aa8e8f5b23f5f.hot-update.json - null null
2025-08-19 14:50:23.331 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.b6359e8aa8e8f5b23f5f.hot-update.json - 404 0 null 2.9079ms
2025-08-19 14:50:23.338 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.b6359e8aa8e8f5b23f5f.hot-update.json, Response status code: 404
2025-08-19 14:59:52.915 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json - null null
2025-08-19 14:59:52.917 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json - 404 0 null 2.8386ms
2025-08-19 14:59:52.920 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json, Response status code: 404
2025-08-19 14:59:52.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json - null null
2025-08-19 14:59:52.962 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json - 404 0 null 5.8889ms
2025-08-19 14:59:52.971 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json, Response status code: 404
2025-08-19 14:59:53.112 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json - null null
2025-08-19 14:59:53.116 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json - 404 0 null 3.6793ms
2025-08-19 14:59:53.120 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.869a93531897e06dbe5e.hot-update.json, Response status code: 404
2025-08-19 15:00:29.387 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 15:00:29.393 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:29.394 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.0697ms
2025-08-19 15:00:29.396 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 15:00:29.399 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:29.400 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:00:29.400 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 15:00:29.405 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 15:00:29.477 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 15:00:29.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 15:00:29.490 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 15:00:29.492 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 15:00:29.493 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 15:00:29.494 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:00:29.495 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 92.8445ms
2025-08-19 15:00:29.496 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:00:29.497 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 100.6113ms
2025-08-19 15:00:29.500 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:00:29.502 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:29.503 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3769ms
2025-08-19 15:00:29.505 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:00:29.508 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:29.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:00:29.510 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:00:29.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 15:00:29.516 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:00:29.517 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7303ms
2025-08-19 15:00:29.518 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:00:29.520 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.1219ms
2025-08-19 15:00:41.201 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 15:00:41.203 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:41.204 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2684ms
2025-08-19 15:00:41.207 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 15:00:41.210 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:41.214 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:00:41.216 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 15:00:41.218 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 15:00:41.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 15:00:41.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 15:00:41.228 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 15:00:41.229 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 15:00:41.230 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:00:41.231 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 13.4557ms
2025-08-19 15:00:41.232 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:00:41.233 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 26.338ms
2025-08-19 15:00:41.236 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:00:41.238 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:41.239 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7358ms
2025-08-19 15:00:41.242 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:00:41.244 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:00:41.245 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:00:41.246 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:00:41.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:00:41.248 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2811ms
2025-08-19 15:00:41.249 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:00:41.250 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.4754ms
2025-08-19 15:01:09.168 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:01:09.171 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:01:09.173 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4247ms
2025-08-19 15:01:09.181 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:01:09.183 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:01:09.184 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:01:09.185 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:01:09.187 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:01:09.188 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5925ms
2025-08-19 15:01:09.190 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:01:09.191 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.8827ms
2025-08-19 15:12:26.620 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 15:12:26.626 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:26.626 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.1095ms
2025-08-19 15:12:26.633 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 15:12:26.635 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:26.635 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:12:26.636 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 15:12:26.639 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 15:12:26.702 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 15:12:26.706 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 15:12:26.708 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 15:12:26.708 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 15:12:26.710 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:12:26.711 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 73.1371ms
2025-08-19 15:12:26.712 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:12:26.713 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 80.5904ms
2025-08-19 15:12:26.716 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:12:26.718 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:26.719 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.5764ms
2025-08-19 15:12:26.722 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:12:26.724 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:26.725 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:12:26.725 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:12:26.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:12:26.729 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.8791ms
2025-08-19 15:12:26.730 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:12:26.731 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.6722ms
2025-08-19 15:12:29.790 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - null null
2025-08-19 15:12:29.792 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:29.793 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/failed-webhooks - 204 null null 3.6618ms
2025-08-19 15:12:29.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - null null
2025-08-19 15:12:29.799 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:29.800 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-19 15:12:29.801 +05:30 [INF] Route matched with {action = "GetAll", controller = "FailedWebhookLogs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAsync() on controller xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController (xbytechat.api).
2025-08-19 15:12:29.807 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='100'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
ORDER BY f."CreatedAt" DESC
LIMIT @__p_0
2025-08-19 15:12:29.810 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Webhooks.Models.FailedWebhookLog, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 15:12:29.812 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api) in 8.6919ms
2025-08-19 15:12:29.813 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.FailedWebhookLogsController.GetAllAsync (xbytechat.api)'
2025-08-19 15:12:29.814 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/failed-webhooks - 200 null application/json; charset=utf-8 16.8734ms
2025-08-19 15:12:30.342 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - null null
2025-08-19 15:12:30.345 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:30.346 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - null null
2025-08-19 15:12:30.347 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/settings - 204 null null 5.0419ms
2025-08-19 15:12:30.353 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:30.356 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/webhooks/failed/count - 204 null null 10.1231ms
2025-08-19 15:12:30.356 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - null null
2025-08-19 15:12:30.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - null null
2025-08-19 15:12:30.362 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:30.364 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:30.365 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-19 15:12:30.365 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-19 15:12:30.366 +05:30 [INF] Route matched with {action = "GetCleanupStatus", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCleanupStatus() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-19 15:12:30.367 +05:30 [INF] Route matched with {action = "GetFailedCount", controller = "Maintenance"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFailedCount() on controller xbytechat.api.Features.Webhooks.Controllers.MaintenanceController (xbytechat.api).
2025-08-19 15:12:30.371 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 15:12:30.380 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 15:12:30.383 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType78`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:12:30.385 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api) in 15.9551ms
2025-08-19 15:12:30.387 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetCleanupStatus (xbytechat.api)'
2025-08-19 15:12:30.388 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/settings - 200 null application/json; charset=utf-8 31.5416ms
2025-08-19 15:12:30.444 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "FailedWebhookLogs" AS f
2025-08-19 15:12:30.446 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2025-08-19 15:12:30.447 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api) in 75.398ms
2025-08-19 15:12:30.448 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.MaintenanceController.GetFailedCount (xbytechat.api)'
2025-08-19 15:12:30.449 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/webhooks/failed/count - 200 null application/json; charset=utf-8 89.5106ms
2025-08-19 15:12:31.956 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:31.959 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:31.960 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.4262ms
2025-08-19 15:12:31.964 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:31.966 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:31.967 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:31.968 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:12:31.989 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.2909ms
2025-08-19 15:12:31.991 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:32.015 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:12:32.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 57.6976ms
2025-08-19 15:12:36.534 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:36.536 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:36.537 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:36.538 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:12:36.556 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 16.5505ms
2025-08-19 15:12:36.558 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:36.581 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:12:36.586 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 51.8559ms
2025-08-19 15:12:37.893 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:37.896 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:37.897 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.0418ms
2025-08-19 15:12:37.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:37.903 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:37.905 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:37.906 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:12:37.930 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 21.6729ms
2025-08-19 15:12:37.932 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:37.960 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:12:37.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 66.7846ms
2025-08-19 15:12:38.897 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:38.900 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:38.902 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:38.903 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:12:38.931 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 24.918ms
2025-08-19 15:12:38.933 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:38.963 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:12:38.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 75.7971ms
2025-08-19 15:12:52.094 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:52.096 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:52.097 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.2896ms
2025-08-19 15:12:52.100 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:52.102 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:52.103 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:52.104 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:12:52.126 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.6179ms
2025-08-19 15:12:52.127 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:52.149 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:12:52.155 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 54.9603ms
2025-08-19 15:12:54.269 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:12:54.272 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:12:54.273 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:54.274 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:12:54.294 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 18.5176ms
2025-08-19 15:12:54.296 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:12:54.320 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:12:54.326 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 56.7392ms
2025-08-19 15:13:11.879 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:13:11.881 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:13:11.882 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.0199ms
2025-08-19 15:13:11.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:13:11.891 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:13:11.892 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:13:11.893 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:13:11.910 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 15.9719ms
2025-08-19 15:13:11.912 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:13:11.932 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:13:11.938 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 49.9185ms
2025-08-19 15:23:48.872 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:23:48.879 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:23:48.880 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.8877ms
2025-08-19 15:23:48.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:23:48.891 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:23:48.892 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:23:48.893 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:23:48.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:23:48.896 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7229ms
2025-08-19 15:23:48.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:23:48.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.218ms
2025-08-19 15:23:55.463 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 15:23:55.466 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:23:55.467 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.7701ms
2025-08-19 15:23:55.470 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 15:23:55.472 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:23:55.473 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:23:55.474 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 15:23:55.476 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 15:23:55.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 15:23:55.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 15:23:55.547 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 15:23:55.549 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 15:23:55.550 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 15:23:55.551 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:23:55.552 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 76.8743ms
2025-08-19 15:23:55.553 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:23:55.554 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 83.6253ms
2025-08-19 15:23:55.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:23:55.558 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:23:55.558 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4474ms
2025-08-19 15:23:55.561 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:23:55.563 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:23:55.564 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:23:55.565 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:23:55.566 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:23:55.567 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.1798ms
2025-08-19 15:23:55.568 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:23:55.569 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.7822ms
2025-08-19 15:24:12.710 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-19 15:24:12.714 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:24:12.715 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 204 null null 5.5139ms
2025-08-19 15:24:12.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-19 15:24:12.724 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:24:12.725 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-19 15:24:12.732 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-19 15:24:12.760 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-19 15:24:12.770 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-19 15:24:12.772 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 15:24:12.776 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 42.451ms
2025-08-19 15:24:12.778 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-19 15:24:12.780 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 60.3323ms
2025-08-19 15:24:16.048 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=25&status= - null null
2025-08-19 15:24:16.051 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:24:16.052 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=25&status= - 204 null null 3.4543ms
2025-08-19 15:24:16.055 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=25&status= - null null
2025-08-19 15:24:16.057 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:24:16.058 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-19 15:24:16.058 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-19 15:24:16.075 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-19 15:24:16.079 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-19 15:24:16.081 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 15:24:16.082 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 22.3259ms
2025-08-19 15:24:16.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-19 15:24:16.084 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=25&status= - 200 null application/json; charset=utf-8 29.6615ms
2025-08-19 15:31:44.722 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 15:31:44.728 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:31:44.729 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.8359ms
2025-08-19 15:31:44.735 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 15:31:44.737 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:31:44.737 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:31:44.738 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 15:31:44.740 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 15:31:44.801 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 15:31:44.806 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 15:31:44.807 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 15:31:44.808 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 15:31:44.809 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:31:44.810 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 70.7464ms
2025-08-19 15:31:44.811 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:31:44.812 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 77.5328ms
2025-08-19 15:31:44.815 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:31:44.816 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:31:44.817 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4231ms
2025-08-19 15:31:44.819 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:31:44.822 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:31:44.822 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:31:44.823 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:31:44.825 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:31:44.826 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4468ms
2025-08-19 15:31:44.827 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:31:44.828 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.2396ms
2025-08-19 15:31:52.423 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/users/by-business - null null
2025-08-19 15:31:52.425 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/permissions - null null
2025-08-19 15:31:52.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/users/by-business - 404 0 null 6.7585ms
2025-08-19 15:31:52.432 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/permissions - 404 0 null 6.9717ms
2025-08-19 15:31:52.435 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/users/by-business, Response status code: 404
2025-08-19 15:31:52.437 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/permissions, Response status code: 404
2025-08-19 15:31:58.388 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:31:58.391 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:31:58.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.2778ms
2025-08-19 15:31:58.397 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:31:58.400 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:31:58.401 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:31:58.402 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:31:58.426 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 21.7836ms
2025-08-19 15:31:58.427 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:31:58.461 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:31:58.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 72.9ms
2025-08-19 15:31:59.908 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/users/by-business - null null
2025-08-19 15:31:59.911 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/users/by-business - 404 0 null 3.1603ms
2025-08-19 15:31:59.914 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/users/by-business, Response status code: 404
2025-08-19 15:32:00.214 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/permissions - null null
2025-08-19 15:32:00.216 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/permissions - 404 0 null 2.3004ms
2025-08-19 15:32:00.219 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/permissions, Response status code: 404
2025-08-19 15:32:01.344 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:32:01.347 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:32:01.348 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:32:01.349 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:32:01.369 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 18.4444ms
2025-08-19 15:32:01.371 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:32:01.397 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:32:01.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 59.5901ms
2025-08-19 15:32:59.397 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/businesses/approved - null null
2025-08-19 15:32:59.401 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:32:59.402 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/businesses/approved - 204 null null 5.8785ms
2025-08-19 15:32:59.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/businesses/approved - null null
2025-08-19 15:32:59.412 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:32:59.416 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (SuperAdmin)
2025-08-19 15:32:59.422 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-19 15:32:59.423 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/businesses/approved - 403 0 null 15.0241ms
2025-08-19 15:33:03.805 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-19 15:33:03.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-19 15:33:03.812 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:03.814 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:03.814 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 9.3632ms
2025-08-19 15:33:03.815 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 8.501ms
2025-08-19 15:33:03.835 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-19 15:33:03.835 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-19 15:33:03.837 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:03.839 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:03.839 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-19 15:33:03.840 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-19 15:33:03.841 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-19 15:33:03.842 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:33:03.847 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-19 15:33:03.860 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-19 15:33:03.862 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 18.5738ms
2025-08-19 15:33:03.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-19 15:33:03.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 29.0673ms
2025-08-19 15:33:03.911 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-19 15:33:03.913 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 15:33:03.914 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 70.2069ms
2025-08-19 15:33:03.915 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-19 15:33:03.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 81.6549ms
2025-08-19 15:33:03.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-19 15:33:03.921 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:03.921 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.3755ms
2025-08-19 15:33:03.924 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-19 15:33:03.926 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:03.926 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 15:33:03.927 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:33:03.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 15:33:03.934 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 15:33:03.935 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.447ms
2025-08-19 15:33:03.936 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 15:33:03.937 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 13.0942ms
2025-08-19 15:33:10.907 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-19 15:33:10.909 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:10.910 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.1452ms
2025-08-19 15:33:10.913 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 40
2025-08-19 15:33:10.915 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:10.916 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-19 15:33:10.917 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:33:10.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-19 15:33:10.952 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@p0='bcd0b038-4a2c-4abe-acef-0bfaf7f88ee5', @p1='2025-08-19T10:03:10.9240613Z' (DbType = DateTime), @p2='system', @p3='True', @p4='30000000-0000-0000-0000-000000000000', @p5='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-19 15:33:10.954 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:33:10.955 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 36.3616ms
2025-08-19 15:33:10.956 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-19 15:33:10.957 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 44.3227ms
2025-08-19 15:33:10.959 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-19 15:33:10.961 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:10.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 15:33:10.962 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:33:10.966 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-19 15:33:10.969 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-19 15:33:10.970 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.0617ms
2025-08-19 15:33:10.971 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-19 15:33:10.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 12.6549ms
2025-08-19 15:33:17.717 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 15:33:17.720 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:17.720 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1765ms
2025-08-19 15:33:17.723 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-19 15:33:17.725 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:17.726 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:33:17.727 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 15:33:17.729 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-19 15:33:17.732 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 15:33:17.736 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-19 15:33:17.741 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-19 15:33:17.743 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-19 15:33:17.744 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-19 15:33:17.745 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:33:17.746 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 17.992ms
2025-08-19 15:33:17.747 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:33:17.748 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 25.0453ms
2025-08-19 15:33:17.751 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:33:17.753 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:17.753 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6246ms
2025-08-19 15:33:17.756 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:33:17.758 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:17.758 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:33:17.759 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:33:17.761 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:33:17.762 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3162ms
2025-08-19 15:33:17.763 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:33:17.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.8812ms
2025-08-19 15:33:20.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:33:20.544 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:20.545 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:33:20.546 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:33:20.547 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:33:20.548 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3306ms
2025-08-19 15:33:20.549 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:33:20.550 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.465ms
2025-08-19 15:33:30.210 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-19 15:33:30.213 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:30.213 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4286ms
2025-08-19 15:33:30.216 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-19 15:33:30.218 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:30.220 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:33:30.220 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-19 15:33:30.223 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-19 15:33:30.225 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-19 15:33:30.229 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-19 15:33:30.232 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-19 15:33:30.233 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-19 15:33:30.234 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:33:30.235 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 13.6554ms
2025-08-19 15:33:30.236 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-19 15:33:30.237 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 21.289ms
2025-08-19 15:33:30.240 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:33:30.242 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:30.242 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.5491ms
2025-08-19 15:33:30.245 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-19 15:33:30.247 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:33:30.248 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:33:30.249 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-19 15:33:30.250 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 15:33:30.251 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2649ms
2025-08-19 15:33:30.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-19 15:33:30.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.857ms
2025-08-19 15:34:22.126 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:34:22.134 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:34:22.136 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 10.0304ms
2025-08-19 15:34:22.146 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-19 15:34:22.150 +05:30 [INF] CORS policy execution successful.
2025-08-19 15:34:22.151 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:34:22.152 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-19 15:34:22.174 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.2465ms
2025-08-19 15:34:22.175 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-19 15:34:22.201 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 15:34:22.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 59.8763ms
2025-08-19 17:28:03.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-19 17:28:03.910 +05:30 [INF] CORS policy execution successful.
2025-08-19 17:28:03.910 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 9.3778ms
2025-08-19 17:28:03.917 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-08-19 17:28:03.919 +05:30 [INF] CORS policy execution successful.
2025-08-19 17:28:03.924 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-08-2025 11:03:30 AM', Current time (UTC): '19-08-2025 11:58:03 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-19 17:28:03.934 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-08-2025 11:03:30 AM', Current time (UTC): '19-08-2025 11:58:03 AM'.
2025-08-19 17:28:03.935 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-19 17:28:03.938 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-19 17:28:03.945 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 17:28:03.947 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.4905ms
2025-08-19 17:28:03.949 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-19 17:28:03.980 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-19 17:28:03.986 +05:30 [ERR] Response has already started, unable to write error response for path: /api/Campaign/get-image-campaign
2025-08-19 17:28:03.986 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 401 null application/json 69.15ms
2025-08-19 17:28:07.911 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - null null
2025-08-19 17:28:07.913 +05:30 [INF] CORS policy execution successful.
2025-08-19 17:28:07.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary - 404 0 null 3.6397ms
2025-08-19 17:28:07.922 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/campaigns/analytics/:campaignId/summary, Response status code: 404
2025-08-19 17:28:11.500 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-19 17:28:11.503 +05:30 [INF] CORS policy execution successful.
2025-08-19 17:28:11.504 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-19 17:28:11.508 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-19 17:28:11.668 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-19 17:28:11.686 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-19 17:28:11.689 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-19 17:28:14.928 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-19 17:28:14.931 +05:30 [INF] CORS policy execution successful.
2025-08-19 17:28:14.931 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-19 17:28:14.932 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-19 17:28:14.935 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 17:28:14.936 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 2.4855ms
2025-08-19 17:28:14.937 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-19 17:28:14.938 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 401 null application/json; charset=utf-8 9.9891ms
2025-08-19 17:28:33.037 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs - null null
2025-08-19 17:28:33.039 +05:30 [INF] CORS policy execution successful.
2025-08-19 17:28:33.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-19 17:28:33.040 +05:30 [INF] Route matched with {action = "GetAll", controller = "TrackingViewer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid]) on controller xbytechat.api.Features.Tracking.Controllers.TrackingViewerController (xbytechat.api).
2025-08-19 17:28:33.049 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."ContactPhone", CASE
    WHEN c."Id" IS NOT NULL THEN c."Name"
    ELSE '(N/A)'
END AS "ContactName", t."ButtonText", t."CTAType", t."SourceType", t."ClickedAt", t."DeviceType", t."Country", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE '(Unknown)'
END AS "CampaignName"
FROM "TrackingLogs" AS t
LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
LEFT JOIN "Campaigns" AS c0 ON t."CampaignId" = c0."Id"
ORDER BY t."ClickedAt" DESC
2025-08-19 17:28:33.051 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType77`10[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-19 17:28:33.053 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api) in 11.0961ms
2025-08-19 17:28:33.054 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-19 17:28:33.055 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/logs - 200 null application/json; charset=utf-8 17.8497ms
2025-08-19 17:28:34.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs/691b88f2-c331-46ba-bb95-2c3e26117541/details - null null
2025-08-19 17:28:34.493 +05:30 [INF] CORS policy execution successful.
2025-08-19 17:28:34.494 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetLogDetails (xbytechat.api)'
2025-08-19 17:28:34.499 +05:30 [INF] Route matched with {action = "GetLogDetails", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogDetails(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-19 17:56:08.974 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-19 17:56:09.015 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-19 17:56:09.031 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-19 17:56:09.758 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-19 17:56:10.273 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-19 17:56:10.480 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-19 17:56:10.485 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-19 17:56:10.486 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-19 17:56:10.487 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-19 17:56:10.488 +05:30 [INF] Hosting environment: Development
2025-08-19 17:56:10.489 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-19 17:56:10.499 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[@__cutoff_0='2025-08-12T12:26:09.1303663Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-19 17:56:12.431 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-19 17:56:12.578 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 152.8183ms
2025-08-19 17:56:12.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-19 17:56:12.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.3195ms
2025-08-19 17:56:12.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-19 17:56:12.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.4548ms
2025-08-19 17:56:12.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-19 17:56:13.043 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.4065ms
