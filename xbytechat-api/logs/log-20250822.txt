2025-08-22 10:59:10.023 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 10:59:10.080 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-22 10:59:10.097 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-22 10:59:11.152 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-22 10:59:12.077 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-22 10:59:12.465 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-22 10:59:12.467 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-22 10:59:12.470 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 10:59:12.472 +05:30 [INF] Hosting environment: Development
2025-08-22 10:59:12.473 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-22 10:59:12.518 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-22 10:59:12.549 +05:30 [INF] Executed DbCommand (68ms) [Parameters=[@__cutoff_0='2025-08-15T05:29:10.2503284Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-22 10:59:14.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-22 10:59:14.545 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 297.4311ms
2025-08-22 10:59:14.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-22 10:59:14.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-22 10:59:14.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.6437ms
2025-08-22 10:59:14.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.3504ms
2025-08-22 10:59:14.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-22 10:59:15.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 287.4665ms
2025-08-22 11:00:12.165 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 11:00:12.170 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-22 11:00:12.223 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:00:12.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 61.873ms
2025-08-22 11:00:12.234 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 11:00:12.243 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:00:12.298 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:00:12.319 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 11:00:12.393 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 11:00:12.477 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 11:00:12.588 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 11:00:12.719 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 11:00:12.730 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 11:00:12.772 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 11:00:12.781 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:00:12.793 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 467.891ms
2025-08-22 11:00:12.795 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:00:12.800 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 565.7966ms
2025-08-22 11:00:12.804 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:00:12.808 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:00:12.810 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.3331ms
2025-08-22 11:00:12.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:00:12.818 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:00:12.882 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:00:12.887 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:00:12.901 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 11:00:12.921 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:00:12.931 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 41.6528ms
2025-08-22 11:00:12.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:00:12.934 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 119.9205ms
2025-08-22 11:14:39.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:14:39.892 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:14:39.893 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1084ms
2025-08-22 11:14:39.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:14:39.899 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:14:39.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:14:39.905 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:14:39.909 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:39.914 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.199ms
2025-08-22 11:14:39.915 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:14:39.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.9514ms
2025-08-22 11:14:56.556 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 11:14:56.558 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:14:56.559 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4253ms
2025-08-22 11:14:56.562 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 11:14:56.564 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:14:56.565 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:14:56.566 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 11:14:56.571 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 11:14:56.800 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 11:14:56.810 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 11:14:56.812 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 11:14:56.813 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 11:14:56.815 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:56.816 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 248.0213ms
2025-08-22 11:14:56.817 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:14:56.818 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 256.2566ms
2025-08-22 11:14:56.821 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:14:56.823 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:14:56.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4047ms
2025-08-22 11:14:56.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:14:56.829 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:14:56.831 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:14:56.832 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:14:56.835 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:14:56.840 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1773ms
2025-08-22 11:14:56.842 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:14:56.842 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.6102ms
2025-08-22 11:29:02.659 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:29:02.662 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:29:02.663 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.3929ms
2025-08-22 11:29:02.670 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:29:02.689 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:29:02.690 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:29:02.691 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:29:02.693 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:29:02.694 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.8009ms
2025-08-22 11:29:02.696 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:29:02.697 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.912ms
2025-08-22 11:29:09.704 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 11:29:09.707 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:29:09.708 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.9293ms
2025-08-22 11:29:09.711 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 11:29:09.713 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:29:09.714 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:29:09.715 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 11:29:09.724 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 11:29:09.835 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 11:29:09.839 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 11:29:09.841 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 11:29:09.841 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 11:29:09.842 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:29:09.844 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 127.5525ms
2025-08-22 11:29:09.844 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:29:09.845 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 134.8171ms
2025-08-22 11:29:09.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:29:09.850 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:29:09.851 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4184ms
2025-08-22 11:29:09.854 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:29:09.856 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:29:09.857 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:29:09.858 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:29:09.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:29:09.860 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4047ms
2025-08-22 11:29:09.861 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:29:09.862 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.2905ms
2025-08-22 11:31:12.899 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 11:31:12.906 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:31:12.907 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.9862ms
2025-08-22 11:31:12.912 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 11:31:12.914 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:31:12.915 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:31:12.916 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 11:31:12.919 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 11:31:12.922 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 11:31:12.928 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 11:31:12.935 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 11:31:12.938 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 11:31:12.939 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 11:31:12.940 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:31:12.941 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 23.3825ms
2025-08-22 11:31:12.942 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:31:12.943 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 30.461ms
2025-08-22 11:31:12.946 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:31:12.948 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:31:12.949 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7966ms
2025-08-22 11:31:12.951 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:31:12.954 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:31:12.955 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:31:12.956 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:31:12.957 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:31:12.958 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5416ms
2025-08-22 11:31:12.959 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:31:12.960 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.9063ms
2025-08-22 11:43:45.194 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 11:43:45.197 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:43:45.198 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 5.8874ms
2025-08-22 11:43:45.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 11:43:45.207 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:43:45.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 3.5329ms
2025-08-22 11:43:45.212 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41, Response status code: 404
2025-08-22 11:44:05.194 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 11:44:05.196 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:05.198 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.8767ms
2025-08-22 11:44:05.202 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 11:44:05.205 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:05.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 4.9746ms
2025-08-22 11:44:05.211 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41, Response status code: 404
2025-08-22 11:44:18.675 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 11:44:18.677 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:18.678 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.6407ms
2025-08-22 11:44:18.681 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 11:44:18.683 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:18.685 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:44:18.685 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 11:44:18.687 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 11:44:18.804 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 11:44:18.808 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 11:44:18.814 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 11:44:18.817 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 11:44:18.817 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 11:44:18.819 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:44:18.820 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 133.2189ms
2025-08-22 11:44:18.821 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:44:18.822 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 140.8751ms
2025-08-22 11:44:18.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:44:18.827 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:18.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8198ms
2025-08-22 11:44:18.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:44:18.833 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:18.834 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:44:18.834 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:44:18.836 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:44:18.837 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5589ms
2025-08-22 11:44:18.838 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:44:18.839 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.6929ms
2025-08-22 11:44:18.900 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 11:44:18.903 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:18.904 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.8036ms
2025-08-22 11:44:18.910 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 11:44:18.912 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:44:18.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 4.291ms
2025-08-22 11:44:18.917 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41, Response status code: 404
2025-08-22 11:45:26.831 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 11:45:26.836 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:45:26.837 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.3589ms
2025-08-22 11:45:26.843 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 11:45:26.845 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:45:26.845 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:45:26.846 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 11:45:26.848 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 11:45:26.851 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 11:45:26.854 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 11:45:26.856 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 11:45:26.857 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 11:45:26.858 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:45:26.859 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 11.4805ms
2025-08-22 11:45:26.860 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:45:26.861 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 18.0954ms
2025-08-22 11:45:26.863 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:45:26.865 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:45:26.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.2213ms
2025-08-22 11:45:26.868 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:45:26.870 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:45:26.871 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:45:26.872 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:45:26.874 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:45:26.875 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4962ms
2025-08-22 11:45:26.876 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:45:26.877 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.8362ms
2025-08-22 11:47:34.028 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 11:47:34.030 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:47:34.031 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.7836ms
2025-08-22 11:47:34.038 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 11:47:34.040 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:47:34.041 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:47:34.042 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 11:47:34.044 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 11:47:34.046 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 11:47:34.050 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 11:47:34.051 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 11:47:34.052 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 11:47:34.054 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:47:34.055 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 11.669ms
2025-08-22 11:47:34.056 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 11:47:34.057 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 19.1918ms
2025-08-22 11:47:34.060 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:47:34.061 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:47:34.062 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.3882ms
2025-08-22 11:47:34.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 11:47:34.066 +05:30 [INF] CORS policy execution successful.
2025-08-22 11:47:34.067 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:47:34.068 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 11:47:34.070 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 11:47:34.071 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.8019ms
2025-08-22 11:47:34.072 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 11:47:34.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.739ms
2025-08-22 12:11:43.323 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:11:43.327 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:11:43.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.6397ms
2025-08-22 12:11:43.333 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:11:43.335 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:11:43.336 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:11:43.337 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:11:43.339 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:11:43.340 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4189ms
2025-08-22 12:11:43.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:11:43.341 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.0679ms
2025-08-22 12:13:15.404 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:13:15.410 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:13:15.411 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.7201ms
2025-08-22 12:13:15.417 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:13:15.419 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:13:15.420 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:13:15.421 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:13:15.424 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:13:26.259 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:14:25.212 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:15:30.724 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:15:42.246 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:15:48.818 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:23:14.425 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:23:14.454 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 599031.1296ms
2025-08-22 12:23:14.456 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:23:14.457 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 599040.1023ms
2025-08-22 12:23:14.494 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:23:14.496 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:14.497 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5916ms
2025-08-22 12:23:14.500 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:23:14.502 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:14.503 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:23:14.504 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:23:14.512 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 12:23:14.514 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:23:14.515 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.7825ms
2025-08-22 12:23:14.516 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:23:14.517 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4997ms
2025-08-22 12:23:14.590 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:23:14.594 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:14.595 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 4.9555ms
2025-08-22 12:23:14.604 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:23:14.608 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:14.610 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 6.1954ms
2025-08-22 12:23:14.616 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41, Response status code: 404
2025-08-22 12:23:14.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:23:14.709 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:14.710 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.38ms
2025-08-22 12:23:14.713 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:23:14.716 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:14.717 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 3.5261ms
2025-08-22 12:23:14.720 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans, Response status code: 404
2025-08-22 12:23:30.560 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:23:30.564 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:30.565 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.5952ms
2025-08-22 12:23:30.568 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:23:30.577 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:23:30.578 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:23:30.582 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:23:30.588 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:23:34.192 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:23:40.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:23:46.676 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:23:48.082 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:24:06.274 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:24:08.633 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:24:08.636 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:24:08.638 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 38054.3719ms
2025-08-22 12:24:08.639 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:24:08.640 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 38071.8015ms
2025-08-22 12:24:08.643 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:24:08.645 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:08.646 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6236ms
2025-08-22 12:24:08.648 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:24:08.650 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:08.651 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:24:08.655 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:24:08.656 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:24:08.658 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.0666ms
2025-08-22 12:24:08.659 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:24:08.660 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.8637ms
2025-08-22 12:24:08.784 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:08.787 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:08.787 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.2956ms
2025-08-22 12:24:08.790 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:08.792 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:08.793 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 2.7237ms
2025-08-22 12:24:08.795 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41, Response status code: 404
2025-08-22 12:24:08.803 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:08.805 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:08.806 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 2.883ms
2025-08-22 12:24:08.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:08.810 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:08.811 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 3.0339ms
2025-08-22 12:24:08.814 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans, Response status code: 404
2025-08-22 12:24:38.350 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:24:38.352 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:38.353 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1525ms
2025-08-22 12:24:38.356 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:24:38.358 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:38.359 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:24:38.360 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:24:38.362 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:24:40.870 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:24:40.875 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:24:40.879 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:24:40.881 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:24:40.882 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:24:40.883 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:24:40.885 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:24:40.886 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 2524.9876ms
2025-08-22 12:24:40.888 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:24:40.889 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 2532.87ms
2025-08-22 12:24:40.893 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:24:40.895 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:40.896 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7435ms
2025-08-22 12:24:40.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:24:40.902 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:40.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:24:40.905 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:24:40.907 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:24:40.909 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.1084ms
2025-08-22 12:24:40.910 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:24:40.912 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.8921ms
2025-08-22 12:24:41.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:41.004 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:41.005 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.4018ms
2025-08-22 12:24:41.008 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:41.010 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:41.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 3.8387ms
2025-08-22 12:24:41.015 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41, Response status code: 404
2025-08-22 12:24:41.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:41.024 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:41.025 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.7016ms
2025-08-22 12:24:41.029 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:24:41.032 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:24:41.033 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 4.5997ms
2025-08-22 12:24:41.036 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans, Response status code: 404
2025-08-22 12:33:32.093 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:33:32.100 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:32.101 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.1454ms
2025-08-22 12:33:32.114 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:33:32.116 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:32.118 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:33:32.119 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:33:32.121 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:33:32.122 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.8076ms
2025-08-22 12:33:32.124 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:33:32.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.0218ms
2025-08-22 12:33:32.212 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:33:32.215 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:32.216 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.9639ms
2025-08-22 12:33:32.220 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:33:32.223 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:32.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 4.1938ms
2025-08-22 12:33:32.227 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans/b1ed0526-abd0-472f-a9ea-5bfebeeffe41, Response status code: 404
2025-08-22 12:33:32.232 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:33:32.234 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:32.236 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 204 null null 3.9338ms
2025-08-22 12:33:32.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - null null
2025-08-22 12:33:32.242 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:32.243 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plans?id=b1ed0526-abd0-472f-a9ea-5bfebeeffe41 - 404 0 null 3.6494ms
2025-08-22 12:33:32.247 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/plans, Response status code: 404
2025-08-22 12:33:41.513 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:33:41.515 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:41.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.0197ms
2025-08-22 12:33:41.518 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:33:41.520 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:33:41.521 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:33:41.521 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:33:41.523 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:42:03.550 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-22 12:42:03.584 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-22 12:42:03.599 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-22 12:42:04.296 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-22 12:42:04.756 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-22 12:42:04.965 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-22 12:42:04.966 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-22 12:42:04.967 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-22 12:42:04.968 +05:30 [INF] Hosting environment: Development
2025-08-22 12:42:04.969 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-22 12:42:04.989 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-22 12:42:05.004 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[@__cutoff_0='2025-08-15T07:12:03.6982656Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-22 12:42:07.069 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-22 12:42:07.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 148.0234ms
2025-08-22 12:42:07.233 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-22 12:42:07.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.4423ms
2025-08-22 12:42:07.298 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-22 12:42:07.331 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.8324ms
2025-08-22 12:42:07.479 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-22 12:42:07.658 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 179.2021ms
2025-08-22 12:42:13.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:42:13.837 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-22 12:42:13.883 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:42:13.886 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 53.6192ms
2025-08-22 12:42:13.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:42:13.899 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:42:14.047 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:42:14.064 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:42:14.164 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 12:42:14.255 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:42:14.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:42:14.295 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 225.5941ms
2025-08-22 12:42:14.297 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:42:14.304 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 412.6382ms
2025-08-22 12:42:19.264 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:42:19.269 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:42:19.270 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.443ms
2025-08-22 12:42:19.273 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:42:19.276 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:42:19.278 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:42:19.283 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:42:19.303 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:42:21.295 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:42:21.349 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:42:21.449 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:42:21.457 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:42:21.468 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:42:21.469 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:42:21.471 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:42:21.473 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 2188.6851ms
2025-08-22 12:42:21.475 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:42:21.476 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 2202.4529ms
2025-08-22 12:42:21.479 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:42:21.484 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:42:21.485 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0104ms
2025-08-22 12:42:21.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:42:21.494 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:42:21.499 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:42:21.501 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:42:21.512 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:42:21.516 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:42:21.518 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.4762ms
2025-08-22 12:42:21.520 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:42:21.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.389ms
2025-08-22 12:42:21.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:42:21.587 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:42:21.591 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:42:21.593 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:42:21.604 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:42:21.608 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:42:21.610 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.3654ms
2025-08-22 12:42:21.613 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:42:21.615 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.185ms
2025-08-22 12:43:50.118 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:43:50.124 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:43:50.124 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.0972ms
2025-08-22 12:43:50.135 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 12:43:50.137 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:43:50.138 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:43:50.139 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:43:50.144 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 12:43:51.567 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:43:51.595 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 12:43:51.597 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 12:43:51.599 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 12:43:51.600 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 12:43:51.601 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:43:51.603 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 1462.3752ms
2025-08-22 12:43:51.604 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:43:51.605 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 1470.0661ms
2025-08-22 12:43:51.609 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:43:51.611 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:43:51.612 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4224ms
2025-08-22 12:43:51.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:43:51.618 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:43:51.619 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:43:51.620 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:43:51.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:43:51.629 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8272ms
2025-08-22 12:43:51.630 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:43:51.631 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.0523ms
2025-08-22 12:43:51.778 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:43:51.782 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:43:51.784 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:43:51.785 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:43:51.788 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:43:51.789 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.9778ms
2025-08-22 12:43:51.790 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:43:51.792 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.4732ms
2025-08-22 12:44:03.945 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:44:03.947 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:44:03.947 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.8313ms
2025-08-22 12:44:03.950 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:44:03.952 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:44:03.953 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:44:03.954 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:44:03.960 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-22 12:44:04.631 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:44:04.635 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:44:04.657 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:44:04.660 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 704.7807ms
2025-08-22 12:44:04.661 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:44:04.662 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json; charset=utf-8 711.7147ms
2025-08-22 12:44:13.301 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:44:13.303 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:44:13.304 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.787ms
2025-08-22 12:44:13.306 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:44:13.308 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:44:13.309 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:44:13.310 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:44:13.312 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:44:16.831 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:44:16.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:44:16.841 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:44:16.842 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:44:16.843 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:44:16.844 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:44:16.845 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:44:16.846 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 3534.5964ms
2025-08-22 12:44:16.847 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:44:16.848 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 3541.5889ms
2025-08-22 12:44:16.851 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:44:16.852 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:44:16.853 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4404ms
2025-08-22 12:44:16.856 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:44:16.858 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:44:16.859 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:44:16.860 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:44:16.863 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:44:16.866 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:44:16.867 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8135ms
2025-08-22 12:44:16.868 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:44:16.869 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.7393ms
2025-08-22 12:44:16.974 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:44:16.976 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:44:16.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:44:16.978 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:44:16.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:44:16.984 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:44:16.985 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.857ms
2025-08-22 12:44:16.986 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:44:16.987 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.5254ms
2025-08-22 12:47:02.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:47:02.942 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:47:02.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.061ms
2025-08-22 12:47:02.969 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:47:02.980 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:47:02.981 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:47:02.983 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:47:02.992 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:47:03.002 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:47:03.005 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.2809ms
2025-08-22 12:47:03.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:47:03.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 41.099ms
2025-08-22 12:47:12.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:47:12.067 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:47:12.068 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5697ms
2025-08-22 12:47:12.071 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:47:12.072 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:47:12.073 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:47:12.074 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:47:12.076 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:47:12.188 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:47:12.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:47:12.197 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:47:12.199 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:47:12.200 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:47:12.201 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:47:12.201 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:47:12.202 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 127.0362ms
2025-08-22 12:47:12.203 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:47:12.204 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 133.4353ms
2025-08-22 12:47:12.207 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:47:12.208 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:47:12.209 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4783ms
2025-08-22 12:47:12.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:47:12.214 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:47:12.215 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:47:12.217 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:47:12.220 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:47:12.222 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:47:12.224 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8268ms
2025-08-22 12:47:12.225 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:47:12.226 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.6358ms
2025-08-22 12:47:12.285 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:47:12.290 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:47:12.291 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:47:12.295 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:47:12.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:47:12.305 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:47:12.306 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.202ms
2025-08-22 12:47:12.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:47:12.310 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3178ms
2025-08-22 12:48:37.651 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:48:37.655 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:48:37.656 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0282ms
2025-08-22 12:48:37.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:48:37.667 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:48:37.669 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:48:37.670 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:48:37.681 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:48:37.699 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:48:37.701 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 28.7621ms
2025-08-22 12:48:37.703 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:48:37.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.3912ms
2025-08-22 12:48:37.858 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:48:37.862 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:48:37.863 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:48:37.865 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:48:37.870 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:48:37.873 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:48:37.874 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.297ms
2025-08-22 12:48:37.876 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:48:37.877 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.939ms
2025-08-22 12:48:47.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:48:48.002 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-22 12:48:48.007 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-22 12:48:48.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 401 0 null 24.5208ms
2025-08-22 12:49:01.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:49:01.921 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:01.922 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.0307ms
2025-08-22 12:49:01.924 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:49:01.926 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:01.927 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:49:01.927 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:49:01.930 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:49:01.932 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:49:01.936 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:49:01.939 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:49:01.941 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:49:01.942 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:49:01.942 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:49:01.944 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:49:01.945 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 15.7573ms
2025-08-22 12:49:01.946 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:49:01.947 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 22.9053ms
2025-08-22 12:49:01.951 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:49:01.953 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:01.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.616ms
2025-08-22 12:49:01.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:49:01.958 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:01.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:01.960 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:49:01.965 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:49:01.968 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:49:01.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.9927ms
2025-08-22 12:49:01.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:01.970 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0888ms
2025-08-22 12:49:02.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:49:02.036 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:02.037 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:02.038 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:49:02.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:49:02.045 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:49:02.049 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7829ms
2025-08-22 12:49:02.050 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:02.052 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4427ms
2025-08-22 12:49:10.990 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:49:10.994 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:10.995 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1871ms
2025-08-22 12:49:11.008 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:49:11.011 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:11.013 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:11.014 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:49:11.020 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:49:11.024 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:49:11.026 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.027ms
2025-08-22 12:49:11.027 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:11.029 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.8882ms
2025-08-22 12:49:11.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:49:11.164 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:49:11.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:11.168 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:49:11.175 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:49:11.179 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:49:11.180 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2245ms
2025-08-22 12:49:11.182 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:49:11.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.7591ms
2025-08-22 12:54:25.208 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:25.210 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:25.211 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7049ms
2025-08-22 12:54:25.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:25.224 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:25.225 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:25.226 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:54:25.357 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:54:25.359 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:25.360 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 131.7947ms
2025-08-22 12:54:25.361 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:25.362 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 148.991ms
2025-08-22 12:54:32.730 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:32.732 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:32.733 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6142ms
2025-08-22 12:54:32.735 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:32.737 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:32.738 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:32.738 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:54:32.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:54:32.744 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:32.745 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3859ms
2025-08-22 12:54:32.746 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:32.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.8247ms
2025-08-22 12:54:32.846 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:32.849 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:32.850 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:32.851 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:54:32.855 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:54:32.858 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:32.860 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.9519ms
2025-08-22 12:54:32.861 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:32.862 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.1738ms
2025-08-22 12:54:36.384 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:36.386 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:36.388 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:36.389 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:54:36.396 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:54:36.398 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:36.400 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8407ms
2025-08-22 12:54:36.401 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:36.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4485ms
2025-08-22 12:54:40.129 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:40.132 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:40.133 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2872ms
2025-08-22 12:54:40.146 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:40.148 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:40.149 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:40.150 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:54:40.155 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:54:40.157 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:40.158 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7027ms
2025-08-22 12:54:40.159 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:40.160 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.4775ms
2025-08-22 12:54:50.922 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:54:50.925 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:50.925 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.8551ms
2025-08-22 12:54:50.927 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 12:54:50.929 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:50.930 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:54:50.931 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:54:50.933 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 12:54:50.937 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:54:50.940 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 12:54:50.942 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 12:54:50.943 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 12:54:50.943 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 12:54:50.944 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:50.945 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 13.3659ms
2025-08-22 12:54:50.946 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:54:50.947 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 19.3514ms
2025-08-22 12:54:50.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:50.953 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:50.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.257ms
2025-08-22 12:54:50.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:50.957 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:50.958 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:50.959 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:54:50.960 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:50.961 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3202ms
2025-08-22 12:54:50.962 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:50.963 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.3614ms
2025-08-22 12:54:51.017 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:54:51.020 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:54:51.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:51.023 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:54:51.025 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:54:51.027 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.0431ms
2025-08-22 12:54:51.028 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:54:51.029 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.6764ms
2025-08-22 12:55:03.303 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:55:03.305 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:55:03.306 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5735ms
2025-08-22 12:55:03.311 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:55:03.313 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:55:03.313 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:55:03.314 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:55:03.316 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:55:03.318 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:55:03.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:55:03.330 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:55:03.332 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:55:03.333 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:55:03.333 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:55:03.334 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:55:03.335 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 20.0864ms
2025-08-22 12:55:03.336 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:55:03.337 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 26.3398ms
2025-08-22 12:55:03.343 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:55:03.344 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:55:03.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.3527ms
2025-08-22 12:55:03.347 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:55:03.349 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:55:03.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:55:03.351 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:55:03.354 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:55:03.356 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:55:03.357 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6877ms
2025-08-22 12:55:03.359 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:55:03.359 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.2193ms
2025-08-22 12:55:03.411 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:55:03.413 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:55:03.414 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:55:03.415 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:55:03.419 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:55:03.422 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:55:03.424 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.4066ms
2025-08-22 12:55:03.425 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:55:03.426 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3985ms
2025-08-22 12:56:26.975 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:56:26.982 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:56:26.983 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.9095ms
2025-08-22 12:56:26.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:56:26.996 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:56:26.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:56:27.000 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:56:27.005 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:56:27.012 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:56:27.013 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1107ms
2025-08-22 12:56:27.014 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:56:27.015 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.0655ms
2025-08-22 12:56:53.467 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:56:53.469 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:56:53.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2188ms
2025-08-22 12:56:53.490 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 12:56:53.492 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:56:53.493 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:56:53.493 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:56:53.495 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 12:56:53.498 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:56:53.505 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 12:56:53.507 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 12:56:53.507 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 12:56:53.508 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 12:56:53.509 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:56:53.510 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 15.4185ms
2025-08-22 12:56:53.511 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:56:53.512 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 21.5996ms
2025-08-22 12:56:53.515 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:56:53.517 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:56:53.517 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6055ms
2025-08-22 12:56:53.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:56:53.523 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:56:53.523 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:56:53.524 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:56:53.526 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:56:53.527 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3946ms
2025-08-22 12:56:53.528 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:56:53.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.7612ms
2025-08-22 12:56:53.579 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:56:53.581 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:56:53.582 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:56:53.583 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:56:53.586 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:56:53.590 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.7456ms
2025-08-22 12:56:53.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:56:53.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3026ms
2025-08-22 12:57:09.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 12:57:09.631 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:57:09.632 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.0738ms
2025-08-22 12:57:09.634 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 12:57:09.636 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:57:09.637 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:57:09.638 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 12:57:09.642 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 12:57:09.644 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 12:57:09.648 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 12:57:09.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 12:57:09.658 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 12:57:09.659 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 12:57:09.660 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 12:57:09.661 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:57:09.662 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 21.1882ms
2025-08-22 12:57:09.663 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 12:57:09.664 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 29.6974ms
2025-08-22 12:57:09.666 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:57:09.668 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:57:09.669 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4301ms
2025-08-22 12:57:09.672 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:57:09.674 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:57:09.675 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:57:09.677 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:57:09.681 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:57:09.684 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:57:09.685 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3541ms
2025-08-22 12:57:09.686 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:57:09.687 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3427ms
2025-08-22 12:57:09.757 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 12:57:09.760 +05:30 [INF] CORS policy execution successful.
2025-08-22 12:57:09.762 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:57:09.764 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 12:57:09.768 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 12:57:09.773 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 12:57:09.775 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3012ms
2025-08-22 12:57:09.776 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 12:57:09.778 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.3504ms
2025-08-22 13:05:50.891 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:05:50.897 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:05:50.898 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0704ms
2025-08-22 13:05:50.909 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:05:50.911 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:05:50.913 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:05:50.914 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:05:51.030 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:05:51.031 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:05:51.032 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 117.4704ms
2025-08-22 13:05:51.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:05:51.034 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 125.2201ms
2025-08-22 13:06:17.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 13:06:17.621 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:17.621 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.6854ms
2025-08-22 13:06:17.627 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 13:06:17.629 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:17.629 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:06:17.630 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 13:06:17.632 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 13:06:17.636 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 13:06:17.640 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 13:06:17.641 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 13:06:17.642 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 13:06:17.643 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 13:06:17.644 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:06:17.645 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 13.5231ms
2025-08-22 13:06:17.646 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:06:17.646 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 19.4971ms
2025-08-22 13:06:17.649 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:06:17.652 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:17.653 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.6918ms
2025-08-22 13:06:17.655 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:06:17.657 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:17.658 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:06:17.659 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:06:17.660 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:06:17.661 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2838ms
2025-08-22 13:06:17.662 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:06:17.663 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.4034ms
2025-08-22 13:06:17.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:06:17.722 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:17.723 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:06:17.725 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:06:17.727 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:06:17.728 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7075ms
2025-08-22 13:06:17.729 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:06:17.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.3471ms
2025-08-22 13:06:22.564 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 13:06:22.566 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:22.567 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 3.4477ms
2025-08-22 13:06:22.568 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 13:06:22.577 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:22.577 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 13:06:22.578 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 9.4954ms
2025-08-22 13:06:22.580 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:22.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 13:06:22.584 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 13:06:22.585 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:22.586 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 13:06:22.589 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:06:22.589 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 13:06:22.597 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 13:06:22.600 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:06:22.601 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 11.1493ms
2025-08-22 13:06:22.602 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 13:06:22.603 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 25.9895ms
2025-08-22 13:06:22.606 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 13:06:22.608 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:22.608 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.5394ms
2025-08-22 13:06:22.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 13:06:22.612 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:22.613 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:06:22.617 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:06:22.624 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 13:06:22.627 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:06:22.647 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 13:06:22.656 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 13:06:22.660 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 40.9952ms
2025-08-22 13:06:22.661 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 69.4026ms
2025-08-22 13:06:22.661 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:06:22.662 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 13:06:22.663 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 52.3531ms
2025-08-22 13:06:22.664 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 81.3417ms
2025-08-22 13:06:43.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:06:43.952 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:43.952 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.7413ms
2025-08-22 13:06:43.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:06:43.956 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:06:43.957 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:06:43.958 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:06:43.959 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:06:43.960 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.4999ms
2025-08-22 13:06:43.961 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:06:43.962 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.5769ms
2025-08-22 13:37:52.551 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 13:37:52.554 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:37:52.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2995ms
2025-08-22 13:37:52.558 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 13:37:52.560 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:37:52.561 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:37:52.562 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 13:37:52.565 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 13:37:52.677 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 13:37:52.681 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 13:37:52.688 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 13:37:52.690 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 13:37:52.691 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 13:37:52.692 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 13:37:52.693 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:37:52.694 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 130.6972ms
2025-08-22 13:37:52.695 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:37:52.696 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 137.8734ms
2025-08-22 13:37:52.698 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:37:52.700 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:37:52.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.2686ms
2025-08-22 13:37:52.702 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:37:52.704 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:37:52.705 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:37:52.706 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:37:52.710 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:37:52.713 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:37:52.714 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0507ms
2025-08-22 13:37:52.715 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:37:52.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.5293ms
2025-08-22 13:37:52.764 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:37:52.766 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:37:52.768 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:37:52.769 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:37:52.777 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:37:52.781 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:37:52.783 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0976ms
2025-08-22 13:37:52.784 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:37:52.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.9363ms
2025-08-22 13:38:13.052 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.9c7b702787f4c51059ef.hot-update.json - null null
2025-08-22 13:38:13.056 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.9c7b702787f4c51059ef.hot-update.json - 404 0 null 4.2817ms
2025-08-22 13:38:13.060 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.9c7b702787f4c51059ef.hot-update.json, Response status code: 404
2025-08-22 13:38:13.835 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:38:13.837 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:38:13.838 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2673ms
2025-08-22 13:38:13.848 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:38:13.852 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:38:13.854 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:13.856 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:38:13.861 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:38:13.865 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:38:13.866 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8985ms
2025-08-22 13:38:13.868 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:13.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.6119ms
2025-08-22 13:38:14.992 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:38:14.995 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:38:14.996 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:14.997 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:38:15.000 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:38:15.003 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:38:15.005 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7739ms
2025-08-22 13:38:15.007 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:15.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.338ms
2025-08-22 13:38:15.133 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:38:15.136 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:38:15.142 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:15.148 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:38:15.153 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:38:15.159 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:38:15.161 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8514ms
2025-08-22 13:38:15.163 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:15.164 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:38:15.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.0294ms
2025-08-22 13:38:15.173 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:38:15.178 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:15.179 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:38:15.184 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:38:15.188 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:38:15.191 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6516ms
2025-08-22 13:38:15.194 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:38:15.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.3692ms
2025-08-22 13:40:50.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 13:40:50.536 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:50.537 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.5267ms
2025-08-22 13:40:50.542 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 13:40:50.544 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:50.544 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:40:50.545 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 13:40:50.547 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 13:40:50.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 13:40:50.553 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 13:40:50.555 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 13:40:50.556 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 13:40:50.556 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 13:40:50.558 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:40:50.558 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 12.0777ms
2025-08-22 13:40:50.559 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:40:50.560 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 18.2559ms
2025-08-22 13:40:50.565 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:40:50.567 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:50.568 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0305ms
2025-08-22 13:40:50.570 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:40:50.571 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:50.572 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:40:50.573 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:40:50.575 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:40:50.576 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2648ms
2025-08-22 13:40:50.576 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:40:50.577 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.5235ms
2025-08-22 13:40:50.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:40:50.660 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:50.661 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:40:50.663 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:40:50.665 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:40:50.666 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.25ms
2025-08-22 13:40:50.668 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:40:50.669 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.2617ms
2025-08-22 13:40:54.736 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 13:40:54.738 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:54.739 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 2.6289ms
2025-08-22 13:40:54.744 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 13:40:54.746 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:54.747 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 3.1093ms
2025-08-22 13:40:54.755 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 13:40:54.756 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 13:40:54.757 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:54.759 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:54.760 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 13:40:54.761 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 13:40:54.761 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:40:54.762 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 13:40:54.766 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 13:40:54.772 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:40:54.773 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 13:40:54.774 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 10.8722ms
2025-08-22 13:40:54.776 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 13:40:54.777 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 13:40:54.778 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 12.76ms
2025-08-22 13:40:54.779 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 23.662ms
2025-08-22 13:40:54.780 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 13:40:54.783 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 26.8925ms
2025-08-22 13:40:54.785 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 13:40:54.787 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:54.787 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.2907ms
2025-08-22 13:40:54.791 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 13:40:54.792 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:54.793 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:40:54.794 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:40:54.796 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:40:54.797 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.3984ms
2025-08-22 13:40:54.798 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:40:54.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 8.2598ms
2025-08-22 13:40:55.866 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:40:55.868 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:55.869 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.4397ms
2025-08-22 13:40:55.871 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:40:55.873 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:40:55.873 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:40:55.874 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:40:55.876 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:40:55.877 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.7173ms
2025-08-22 13:40:55.878 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:40:55.879 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.976ms
2025-08-22 13:45:26.681 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:26.686 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:26.687 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0956ms
2025-08-22 13:45:26.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:26.695 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:26.696 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:26.697 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:26.699 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:26.700 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4825ms
2025-08-22 13:45:26.701 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:26.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.8822ms
2025-08-22 13:45:26.787 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:26.788 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 13:45:26.799 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 13:45:26.801 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:26.803 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:26.805 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:26.807 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:26.807 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 18.9263ms
2025-08-22 13:45:26.808 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 9.0794ms
2025-08-22 13:45:26.810 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:26.813 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 13:45:26.816 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 13:45:26.818 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:26.820 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:26.822 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:26.823 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.149ms
2025-08-22 13:45:26.824 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 13:45:26.825 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 13:45:26.825 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:26.827 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 13:45:26.830 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:26.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.6771ms
2025-08-22 13:45:26.984 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 13:45:26.986 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 13:45:26.987 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 153.8257ms
2025-08-22 13:45:26.988 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 13:45:26.989 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 175.5182ms
2025-08-22 13:45:27.068 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 13:45:27.070 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:45:27.071 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 235.9323ms
2025-08-22 13:45:27.072 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 13:45:27.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 256.5632ms
2025-08-22 13:45:27.076 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 13:45:27.078 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:27.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.0569ms
2025-08-22 13:45:27.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 13:45:27.086 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:27.087 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:27.089 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:27.090 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:45:27.092 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.6319ms
2025-08-22 13:45:27.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:27.094 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 10.2667ms
2025-08-22 13:45:31.370 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:45:31.372 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:31.373 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.3233ms
2025-08-22 13:45:31.376 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:45:31.378 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:31.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:31.379 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:31.383 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 13:45:31.385 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:45:31.386 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.2709ms
2025-08-22 13:45:31.386 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:31.387 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.4925ms
2025-08-22 13:45:36.789 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:45:36.791 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:36.792 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.6147ms
2025-08-22 13:45:36.794 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 430
2025-08-22 13:45:36.796 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:36.799 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 13:45:36.803 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:36.837 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 13:45:36.950 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='09001656-bb83-4b17-898f-093e4249a900', @p1='32ad50e7-6920-422b-ae80-1da885626742', @p2='461c0bb9-6f90-4f73-886a-fa59d44ed10c', @p3='5bebd116-9561-48da-83f9-2bf7b6f58bc0', @p4='67471555-ae5a-4a27-8990-c516adcf3065', @p5='6d32fe6e-0e95-4db1-80ad-6fcbfc5ebfa2', @p6='7b151513-2527-4300-99a5-ffee77c0dad0', @p7='ad8ab6a9-a930-43b0-bf86-5e6abcd5528d', @p8='be115ed6-a983-4a82-b1dd-623b3ab6ae17', @p9='d50e6455-3b2c-46f5-97aa-06a90108a4f8', @p10='089cbdd9-a6ab-40f9-8ec6-54f92017b8b5', @p11='2025-08-22T08:15:36.8777453Z' (DbType = DateTime), @p12='system', @p13='True', @p14='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p15='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p16='2652e043-d053-4e1f-a5fe-be91e4aa9967', @p17='2025-08-22T08:15:36.8777017Z' (DbType = DateTime), @p18='system', @p19='True', @p20='30000000-0000-0000-0000-000000000002', @p21='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p22='2ed31bdf-f9a4-4435-a53c-3574a89d8430', @p23='2025-08-22T08:15:36.8776941Z' (DbType = DateTime), @p24='system', @p25='True', @p26='30000000-0000-0000-0000-000000000001', @p27='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p28='31929128-6d8d-4011-b73a-3c70e9621235', @p29='2025-08-22T08:15:36.8776758Z' (DbType = DateTime), @p30='system', @p31='True', @p32='30000000-0000-0000-0000-000000000004', @p33='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p34='5136115c-bf87-4146-9f61-1fb34c34ac9b', @p35='2025-08-22T08:15:36.8777229Z' (DbType = DateTime), @p36='system', @p37='True', @p38='974af1f9-3caa-4857-a1a7-48462c389332', @p39='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p40='5c580633-acc4-483d-b845-ac7573b464ca', @p41='2025-08-22T08:15:36.8777107Z' (DbType = DateTime), @p42='system', @p43='True', @p44='29461562-ef9c-48c0-a606-482ff57b8f95', @p45='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p46='77cbb7dd-4160-4bb3-baca-fee874bdf3ac', @p47='2025-08-22T08:15:36.8767425Z' (DbType = DateTime), @p48='system', @p49='True', @p50='30000000-0000-0000-0000-000000000003', @p51='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p52='87015d57-9f5d-4507-9d37-6d1fa797fbc5', @p53='2025-08-22T08:15:36.8777323Z' (DbType = DateTime), @p54='system', @p55='True', @p56='0485154c-dde5-4732-a7aa-a379c77a5b27', @p57='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p58='ca39e325-10ab-4bed-a0c1-2421496338b1', @p59='2025-08-22T08:15:36.8777389Z' (DbType = DateTime), @p60='system', @p61='True', @p62='c819f1bd-422d-4609-916c-cc185fe44ab0', @p63='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p64='eb69686b-d41c-46e3-895c-32c5c43d8317', @p65='2025-08-22T08:15:36.8559302Z' (DbType = DateTime), @p66='system', @p67='True', @p68='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p69='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p70='f84348c4-47bb-4caf-971b-9c8d928328cd', @p71='2025-08-22T08:15:36.8777169Z' (DbType = DateTime), @p72='system', @p73='True', @p74='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p75='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p40, @p41, @p42, @p43, @p44, @p45);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p58, @p59, @p60, @p61, @p62, @p63);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75);
2025-08-22 13:45:36.967 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:36.969 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 164.0603ms
2025-08-22 13:45:36.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 13:45:36.971 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 176.4025ms
2025-08-22 13:45:36.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:45:36.974 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:36.975 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:36.975 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:36.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 13:45:36.981 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:45:36.981 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.7826ms
2025-08-22 13:45:36.982 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:36.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 10.2247ms
2025-08-22 13:45:38.648 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 430
2025-08-22 13:45:38.651 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:38.652 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 13:45:38.653 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:38.656 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 13:45:38.664 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='089cbdd9-a6ab-40f9-8ec6-54f92017b8b5', @p1='2652e043-d053-4e1f-a5fe-be91e4aa9967', @p2='2ed31bdf-f9a4-4435-a53c-3574a89d8430', @p3='31929128-6d8d-4011-b73a-3c70e9621235', @p4='5136115c-bf87-4146-9f61-1fb34c34ac9b', @p5='5c580633-acc4-483d-b845-ac7573b464ca', @p6='77cbb7dd-4160-4bb3-baca-fee874bdf3ac', @p7='87015d57-9f5d-4507-9d37-6d1fa797fbc5', @p8='ca39e325-10ab-4bed-a0c1-2421496338b1', @p9='eb69686b-d41c-46e3-895c-32c5c43d8317', @p10='f84348c4-47bb-4caf-971b-9c8d928328cd', @p11='17b9b430-4263-4e48-a480-86152f33c486', @p12='2025-08-22T08:15:38.6593223Z' (DbType = DateTime), @p13='system', @p14='True', @p15='974af1f9-3caa-4857-a1a7-48462c389332', @p16='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p17='1def3925-64cf-4c18-8062-25f1b58bc01f', @p18='2025-08-22T08:15:38.6593494Z' (DbType = DateTime), @p19='system', @p20='True', @p21='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p22='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p23='32113ce5-8ca9-46f2-ab88-85a1537d29fc', @p24='2025-08-22T08:15:38.6592646Z' (DbType = DateTime), @p25='system', @p26='True', @p27='30000000-0000-0000-0000-000000000003', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='3ed10367-faec-4b27-b5e2-2e72a6469acc', @p30='2025-08-22T08:15:38.6592957Z' (DbType = DateTime), @p31='system', @p32='True', @p33='30000000-0000-0000-0000-000000000002', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='4786cdda-2361-4a27-9b32-5a87564e4062', @p36='2025-08-22T08:15:38.6593327Z' (DbType = DateTime), @p37='system', @p38='True', @p39='0485154c-dde5-4732-a7aa-a379c77a5b27', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='88216b0f-df4c-47ca-b3b9-32fac52e52ce', @p42='2025-08-22T08:15:38.6592777Z' (DbType = DateTime), @p43='system', @p44='True', @p45='30000000-0000-0000-0000-000000000004', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='95c66c6f-ec02-4e65-b5fa-419ce9848b1c', @p48='2025-08-22T08:15:38.6593405Z' (DbType = DateTime), @p49='system', @p50='True', @p51='c819f1bd-422d-4609-916c-cc185fe44ab0', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='d050fdea-a751-44ca-a916-13ca7b232edd', @p54='2025-08-22T08:15:38.6592862Z' (DbType = DateTime), @p55='system', @p56='True', @p57='30000000-0000-0000-0000-000000000001', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='d5395732-281a-4e8d-877e-311155f4212c', @p60='2025-08-22T08:15:38.6593042Z' (DbType = DateTime), @p61='system', @p62='True', @p63='29461562-ef9c-48c0-a606-482ff57b8f95', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='f6912dd9-f089-4081-8ec3-55f9befdb395', @p66='2025-08-22T08:15:38.6591633Z' (DbType = DateTime), @p67='system', @p68='True', @p69='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='fd22079f-89b7-4e5a-88a0-5b9a97c8adee', @p72='2025-08-22T08:15:38.6593122Z' (DbType = DateTime), @p73='system', @p74='True', @p75='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
2025-08-22 13:45:38.668 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:38.669 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 15.0405ms
2025-08-22 13:45:38.670 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 13:45:38.671 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 22.7101ms
2025-08-22 13:45:38.673 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 13:45:38.675 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:38.676 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:38.677 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:38.679 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 13:45:38.682 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 13:45:38.683 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.4919ms
2025-08-22 13:45:38.684 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 13:45:38.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.9613ms
2025-08-22 13:45:47.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 13:45:47.077 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:47.078 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.8178ms
2025-08-22 13:45:47.081 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 13:45:47.083 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:47.084 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:45:47.084 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 13:45:47.086 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 13:45:47.089 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 13:45:47.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 13:45:47.097 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 13:45:47.099 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 13:45:47.099 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 13:45:47.100 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 13:45:47.101 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:47.102 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 16.2441ms
2025-08-22 13:45:47.103 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:45:47.103 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 22.4094ms
2025-08-22 13:45:47.106 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:47.107 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:47.108 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.3631ms
2025-08-22 13:45:47.111 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:47.113 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:47.113 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:47.114 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:47.117 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:45:47.119 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:47.120 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.7208ms
2025-08-22 13:45:47.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:47.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.12ms
2025-08-22 13:45:47.184 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:47.186 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:47.187 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:47.188 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:47.198 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:45:47.208 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:47.211 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.0609ms
2025-08-22 13:45:47.213 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:47.214 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.4666ms
2025-08-22 13:45:50.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:50.749 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:50.750 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:50.751 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:50.753 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:45:50.756 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:50.757 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7485ms
2025-08-22 13:45:50.759 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:50.759 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.4658ms
2025-08-22 13:45:50.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:45:50.819 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:45:50.820 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:50.821 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:45:50.825 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:45:50.828 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:45:50.830 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2644ms
2025-08-22 13:45:50.831 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:45:50.832 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.6693ms
2025-08-22 13:47:45.164 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:47:45.176 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:47:45.177 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 12.5712ms
2025-08-22 13:47:45.180 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:47:45.183 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:47:45.183 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:47:45.184 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:47:45.188 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:47:45.191 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:47:45.193 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1034ms
2025-08-22 13:47:45.194 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:47:45.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.8803ms
2025-08-22 13:47:45.270 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:47:45.273 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:47:45.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:47:45.275 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:47:45.279 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:47:45.284 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:47:45.285 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.515ms
2025-08-22 13:47:45.287 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:47:45.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2557ms
2025-08-22 13:48:59.346 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 13:48:59.352 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:48:59.352 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.7091ms
2025-08-22 13:48:59.358 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 13:48:59.360 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:48:59.360 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:48:59.361 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 13:48:59.363 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 13:48:59.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 13:48:59.368 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 13:48:59.372 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 13:48:59.375 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 13:48:59.376 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 13:48:59.376 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 13:48:59.377 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:48:59.378 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 15.9734ms
2025-08-22 13:48:59.379 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:48:59.380 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 22.1144ms
2025-08-22 13:48:59.383 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:48:59.385 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:48:59.385 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.2901ms
2025-08-22 13:48:59.387 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:48:59.389 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:48:59.390 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:48:59.391 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:48:59.394 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:48:59.396 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:48:59.397 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.2294ms
2025-08-22 13:48:59.398 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:48:59.399 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.7497ms
2025-08-22 13:48:59.502 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:48:59.504 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:48:59.505 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:48:59.506 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:48:59.512 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:48:59.519 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:48:59.520 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.5313ms
2025-08-22 13:48:59.521 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:48:59.522 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4333ms
2025-08-22 13:49:03.292 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:03.294 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:03.294 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:03.295 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:03.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:03.300 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:03.301 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.5542ms
2025-08-22 13:49:03.302 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:03.302 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.6273ms
2025-08-22 13:49:03.405 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:03.408 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:03.409 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:03.410 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:03.413 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:03.416 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:03.417 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6804ms
2025-08-22 13:49:03.418 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:03.419 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3221ms
2025-08-22 13:49:28.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:28.935 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:28.936 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3738ms
2025-08-22 13:49:28.942 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:28.944 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:28.945 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:28.945 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:28.949 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:28.952 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:28.953 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.162ms
2025-08-22 13:49:28.954 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:28.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.7339ms
2025-08-22 13:49:29.002 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:29.005 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:29.006 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:29.007 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:29.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:29.016 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:29.017 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.891ms
2025-08-22 13:49:29.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:29.019 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0008ms
2025-08-22 13:49:29.799 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:29.801 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:29.801 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:29.802 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:29.804 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:29.807 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:29.808 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.726ms
2025-08-22 13:49:29.809 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:29.810 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.1874ms
2025-08-22 13:49:29.858 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:29.860 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:29.861 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:29.862 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:29.866 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:29.869 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:29.870 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2857ms
2025-08-22 13:49:29.871 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:29.872 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.3924ms
2025-08-22 13:49:30.589 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:30.591 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:30.591 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:30.592 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:30.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:30.597 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:30.598 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.8351ms
2025-08-22 13:49:30.599 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:30.600 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.2016ms
2025-08-22 13:49:30.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:30.658 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:30.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:30.660 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:30.663 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:30.666 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:30.667 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.825ms
2025-08-22 13:49:30.668 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:30.669 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9786ms
2025-08-22 13:49:31.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:31.301 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:31.302 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:31.303 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:31.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:31.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:31.309 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.9364ms
2025-08-22 13:49:31.310 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:31.311 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.7832ms
2025-08-22 13:49:31.356 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:31.358 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:31.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:31.360 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:31.363 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:31.367 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:31.368 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5192ms
2025-08-22 13:49:31.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:31.370 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.4806ms
2025-08-22 13:49:32.030 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:32.033 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:32.033 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:32.034 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:32.037 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:32.039 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:32.040 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.7867ms
2025-08-22 13:49:32.041 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:32.042 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.283ms
2025-08-22 13:49:32.072 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:49:32.074 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:49:32.075 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:32.076 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:49:32.080 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:49:32.082 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:49:32.084 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9338ms
2025-08-22 13:49:32.085 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:49:32.087 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.8971ms
2025-08-22 13:50:21.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:50:21.970 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:50:21.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0013ms
2025-08-22 13:50:21.978 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:50:21.980 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:50:21.981 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:50:21.982 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:50:21.986 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:50:21.989 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:50:21.991 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6046ms
2025-08-22 13:50:21.995 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:50:21.997 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.753ms
2025-08-22 13:50:22.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:50:22.074 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:50:22.075 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:50:22.076 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:50:22.079 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:50:22.081 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:50:22.082 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4465ms
2025-08-22 13:50:22.084 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:50:22.085 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.2724ms
2025-08-22 13:54:20.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:54:20.575 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:54:20.576 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.5729ms
2025-08-22 13:54:20.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:54:20.582 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:54:20.583 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:54:20.584 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:54:20.704 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:54:20.706 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:54:20.707 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 121.7482ms
2025-08-22 13:54:20.708 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:54:20.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 128.0863ms
2025-08-22 13:54:20.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:54:20.736 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:54:20.737 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:54:20.738 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:54:20.740 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:54:20.742 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:54:20.743 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.2496ms
2025-08-22 13:54:20.744 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:54:20.745 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.636ms
2025-08-22 13:58:42.152 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:58:42.157 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:42.158 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.1334ms
2025-08-22 13:58:42.164 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:58:42.165 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:42.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:42.167 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:58:42.169 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:58:42.172 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:58:42.173 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.6894ms
2025-08-22 13:58:42.174 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:42.175 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.708ms
2025-08-22 13:58:42.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:58:42.281 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:42.282 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:42.283 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:58:42.286 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:58:42.289 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:58:42.290 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7311ms
2025-08-22 13:58:42.292 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:42.294 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.7535ms
2025-08-22 13:58:45.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:58:45.140 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:45.141 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:45.142 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:58:45.146 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 13:58:45.151 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:58:45.153 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2738ms
2025-08-22 13:58:45.154 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:45.155 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6815ms
2025-08-22 13:58:50.275 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 13:58:50.277 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:50.278 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.4769ms
2025-08-22 13:58:50.280 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 13:58:50.282 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:50.282 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:58:50.283 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 13:58:50.285 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 13:58:50.289 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 13:58:50.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 13:58:50.295 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 13:58:50.296 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 13:58:50.296 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 13:58:50.297 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:58:50.299 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 14.4056ms
2025-08-22 13:58:50.300 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 13:58:50.301 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 20.9191ms
2025-08-22 13:58:50.305 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:58:50.307 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:50.308 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7699ms
2025-08-22 13:58:50.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:58:50.312 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:50.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:50.314 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:58:50.315 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:58:50.316 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.2285ms
2025-08-22 13:58:50.317 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:50.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.9358ms
2025-08-22 13:58:50.404 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 13:58:50.407 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:50.409 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:50.410 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 13:58:50.412 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 13:58:50.414 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7464ms
2025-08-22 13:58:50.415 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 13:58:50.416 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.801ms
2025-08-22 13:58:59.393 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 13:58:59.396 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:59.397 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.9824ms
2025-08-22 13:58:59.399 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 13:58:59.402 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:58:59.403 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 13:58:59.406 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 13:58:59.461 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 53.9298ms
2025-08-22 13:58:59.463 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 13:58:59.488 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 13:58:59.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 139.5474ms
2025-08-22 13:59:11.025 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 13:59:11.028 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:59:11.029 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.6921ms
2025-08-22 13:59:11.032 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 13:59:11.033 +05:30 [INF] CORS policy execution successful.
2025-08-22 13:59:11.034 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 13:59:11.035 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 13:59:11.056 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.0499ms
2025-08-22 13:59:11.057 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 13:59:11.079 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 13:59:11.085 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 53.7002ms
2025-08-22 14:00:22.430 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 14:00:22.432 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:22.433 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 3.0181ms
2025-08-22 14:00:22.439 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 14:00:22.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 14:00:22.478 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:22.480 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:22.480 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 41.6015ms
2025-08-22 14:00:22.481 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 14:00:22.486 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 14:00:22.487 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:22.488 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:22.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 14:00:22.492 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 14:00:22.617 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 14:00:22.619 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 14:00:22.620 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 130.9843ms
2025-08-22 14:00:22.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 14:00:22.622 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 182.4074ms
2025-08-22 14:00:22.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 14:00:22.631 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:22.632 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 4.1844ms
2025-08-22 14:00:22.635 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 14:00:22.637 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:22.638 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:00:22.639 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:22.642 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 14:00:22.643 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.1361ms
2025-08-22 14:00:22.645 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:00:22.646 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 11.1982ms
2025-08-22 14:00:22.705 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 14:00:22.707 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 14:00:22.708 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 211.4189ms
2025-08-22 14:00:22.709 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 14:00:22.710 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 223.8313ms
2025-08-22 14:00:24.020 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:00:24.022 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:24.023 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.4554ms
2025-08-22 14:00:24.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:00:24.028 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:24.028 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:00:24.029 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:24.030 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 14:00:24.031 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.1401ms
2025-08-22 14:00:24.032 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:00:24.033 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.3997ms
2025-08-22 14:00:32.835 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:00:32.837 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:32.838 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.9035ms
2025-08-22 14:00:32.840 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 664
2025-08-22 14:00:32.842 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:32.843 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 14:00:32.844 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:32.848 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 14:00:32.856 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='17b9b430-4263-4e48-a480-86152f33c486', @p1='1def3925-64cf-4c18-8062-25f1b58bc01f', @p2='32113ce5-8ca9-46f2-ab88-85a1537d29fc', @p3='3ed10367-faec-4b27-b5e2-2e72a6469acc', @p4='4786cdda-2361-4a27-9b32-5a87564e4062', @p5='88216b0f-df4c-47ca-b3b9-32fac52e52ce', @p6='95c66c6f-ec02-4e65-b5fa-419ce9848b1c', @p7='d050fdea-a751-44ca-a916-13ca7b232edd', @p8='d5395732-281a-4e8d-877e-311155f4212c', @p9='f6912dd9-f089-4081-8ec3-55f9befdb395', @p10='fd22079f-89b7-4e5a-88a0-5b9a97c8adee', @p11='301d4585-8884-48a5-bcb3-04f2fdb6fdc2', @p12='2025-08-22T08:30:32.8504307Z' (DbType = DateTime), @p13='system', @p14='True', @p15='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p16='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p17='37905877-95a5-412c-a627-0eda7475891a', @p18='2025-08-22T08:30:32.8503795Z' (DbType = DateTime), @p19='system', @p20='True', @p21='30000000-0000-0000-0000-000000000001', @p22='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p23='4795350e-d6dd-4069-ad03-b0a81f77f4f0', @p24='2025-08-22T08:30:32.8503091Z' (DbType = DateTime), @p25='system', @p26='True', @p27='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='537851ac-bf0b-42f5-b07b-97829ef2bf13', @p30='2025-08-22T08:30:32.8503618Z' (DbType = DateTime), @p31='system', @p32='True', @p33='30000000-0000-0000-0000-000000000003', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='61388bab-f8cf-433d-ab4d-dc34312fc5d6', @p36='2025-08-22T08:30:32.8503935Z' (DbType = DateTime), @p37='system', @p38='True', @p39='29461562-ef9c-48c0-a606-482ff57b8f95', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='64f63819-6d68-40db-ad9a-15191fa383fa', @p42='2025-08-22T08:30:32.8503273Z' (DbType = DateTime), @p43='system', @p44='True', @p45='30000000-0000-0000-0000-000000000013', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='723cd166-c23a-4396-a651-bc77076d2e4a', @p48='2025-08-22T08:30:32.8503866Z' (DbType = DateTime), @p49='system', @p50='True', @p51='30000000-0000-0000-0000-000000000002', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='77604bc3-5350-4c65-8102-fcb6b7a8b665', @p54='2025-08-22T08:30:32.8503537Z' (DbType = DateTime), @p55='system', @p56='True', @p57='30000000-0000-0000-0000-000000000009', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='8da6f95b-56cc-4d47-805e-0940b9c2c164', @p60='2025-08-22T08:30:32.8503732Z' (DbType = DateTime), @p61='system', @p62='True', @p63='30000000-0000-0000-0000-000000000004', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='966b2de4-abe2-4e94-8e86-7880c7fa2347', @p66='2025-08-22T08:30:32.8504160Z' (DbType = DateTime), @p67='system', @p68='True', @p69='0485154c-dde5-4732-a7aa-a379c77a5b27', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='a3274e7c-2d77-491f-b3a0-339c2b1ba9ad', @p72='2025-08-22T08:30:32.8504095Z' (DbType = DateTime), @p73='system', @p74='True', @p75='974af1f9-3caa-4857-a1a7-48462c389332', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='c35e66fb-0415-4a14-a6df-cf467d2c8f22', @p78='2025-08-22T08:30:32.8503464Z' (DbType = DateTime), @p79='system', @p80='True', @p81='30000000-0000-0000-0000-000000000011', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='c4670814-c1ab-4739-83b1-7f2c6189855b', @p84='2025-08-22T08:30:32.8503383Z' (DbType = DateTime), @p85='system', @p86='True', @p87='30000000-0000-0000-0000-000000000012', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='cf23d20e-731e-4d32-b24c-63a4bd7aa3e5', @p90='2025-08-22T08:30:32.8503194Z' (DbType = DateTime), @p91='system', @p92='True', @p93='30000000-0000-0000-0000-000000000014', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='ea57612a-ccd0-490e-b819-9d112ac453fc', @p96='2025-08-22T08:30:32.8502063Z' (DbType = DateTime), @p97='system', @p98='True', @p99='30000000-0000-0000-0000-000000000010', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='f22f78ba-5e6f-45e7-b243-c602c32b9366', @p102='2025-08-22T08:30:32.8504234Z' (DbType = DateTime), @p103='system', @p104='True', @p105='c819f1bd-422d-4609-916c-cc185fe44ab0', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='f9c060c9-7edd-4f36-9a25-71ce3b7dc01a', @p108='2025-08-22T08:30:32.8504015Z' (DbType = DateTime), @p109='system', @p110='True', @p111='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
2025-08-22 14:00:32.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:00:32.859 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 14.2994ms
2025-08-22 14:00:32.860 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 14:00:32.861 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 21.098ms
2025-08-22 14:00:32.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:00:32.865 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:32.866 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:00:32.866 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:32.871 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 14:00:32.872 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 14:00:32.873 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.7843ms
2025-08-22 14:00:32.875 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:00:32.875 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.7561ms
2025-08-22 14:00:44.512 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 14:00:44.514 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:44.515 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.8949ms
2025-08-22 14:00:44.518 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 14:00:44.519 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:44.520 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:00:44.521 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 14:00:44.523 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 14:00:44.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 14:00:44.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 14:00:44.535 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 14:00:44.537 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 14:00:44.537 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 14:00:44.538 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 14:00:44.539 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:00:44.540 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 17.6424ms
2025-08-22 14:00:44.541 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:00:44.542 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 23.9683ms
2025-08-22 14:00:44.546 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:00:44.548 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:44.549 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9101ms
2025-08-22 14:00:44.551 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:00:44.553 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:44.553 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:44.554 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:44.557 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:00:44.559 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:00:44.560 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.5053ms
2025-08-22 14:00:44.561 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:44.562 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.0167ms
2025-08-22 14:00:44.616 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:00:44.619 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:44.621 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:44.624 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:44.631 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:00:44.634 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:00:44.638 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8282ms
2025-08-22 14:00:44.639 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:44.640 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.1966ms
2025-08-22 14:00:48.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:00:48.064 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:48.064 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:48.065 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:48.068 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:00:48.070 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:00:48.071 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.5932ms
2025-08-22 14:00:48.072 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:48.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.1731ms
2025-08-22 14:00:48.124 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:00:48.127 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:00:48.128 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:48.128 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:00:48.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:00:48.134 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:00:48.135 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5642ms
2025-08-22 14:00:48.136 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:00:48.137 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3772ms
2025-08-22 14:05:48.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:05:48.033 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:05:48.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1641ms
2025-08-22 14:05:48.038 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:05:48.040 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:05:48.041 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:05:48.041 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:05:48.193 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:05:48.195 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:05:48.196 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 153.3451ms
2025-08-22 14:05:48.197 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:05:48.198 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 160.8117ms
2025-08-22 14:05:48.244 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:05:48.247 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:05:48.248 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:05:48.249 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:05:48.252 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:05:48.255 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:05:48.256 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3329ms
2025-08-22 14:05:48.257 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:05:48.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0607ms
2025-08-22 14:06:14.757 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:06:14.759 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:14.760 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.69ms
2025-08-22 14:06:14.767 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:06:14.770 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:14.771 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:06:14.772 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:06:14.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:06:14.777 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:06:14.779 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5191ms
2025-08-22 14:06:14.780 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:06:14.781 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2419ms
2025-08-22 14:06:14.856 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 14:06:14.858 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:06:14.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 14:06:14.866 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:14.868 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:14.872 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:14.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 16.7291ms
2025-08-22 14:06:14.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:06:14.875 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 16.4887ms
2025-08-22 14:06:14.879 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:06:14.887 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:06:14.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 14:06:14.887 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 14:06:14.897 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:06:14.899 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:14.901 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:14.903 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.0343ms
2025-08-22 14:06:14.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 14:06:14.905 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 14:06:14.906 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:06:14.907 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 14:06:14.907 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:06:14.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 50.4593ms
2025-08-22 14:06:14.914 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 14:06:14.926 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 14:06:14.927 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 16.9657ms
2025-08-22 14:06:14.929 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 14:06:14.931 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 43.6279ms
2025-08-22 14:06:15.046 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 14:06:15.048 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 14:06:15.049 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 135.4417ms
2025-08-22 14:06:15.050 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 14:06:15.051 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 163.757ms
2025-08-22 14:06:15.053 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 14:06:15.055 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:15.056 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.5961ms
2025-08-22 14:06:15.059 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 14:06:15.061 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:15.061 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:06:15.062 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:06:15.064 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 14:06:15.065 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.3528ms
2025-08-22 14:06:15.067 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:06:15.067 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 8.4893ms
2025-08-22 14:06:16.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:06:16.557 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:16.557 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.1764ms
2025-08-22 14:06:16.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:06:16.562 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:16.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:06:16.563 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:06:16.565 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 14:06:16.566 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.222ms
2025-08-22 14:06:16.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 14:06:16.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.9132ms
2025-08-22 14:06:18.253 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:06:18.255 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:18.256 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.4496ms
2025-08-22 14:06:18.258 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 664
2025-08-22 14:06:18.260 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:18.261 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (superadmin|partneradmin)
2025-08-22 14:06:18.265 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-22 14:06:18.266 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 403 0 null 7.6129ms
2025-08-22 14:06:20.756 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 664
2025-08-22 14:06:20.758 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:20.759 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (superadmin|partneradmin)
2025-08-22 14:06:20.760 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-22 14:06:20.761 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 403 0 null 5.1497ms
2025-08-22 14:06:23.676 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 14:06:23.678 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:23.678 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.7953ms
2025-08-22 14:06:23.681 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 664
2025-08-22 14:06:23.683 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:06:23.683 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (superadmin|partneradmin)
2025-08-22 14:06:23.684 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-08-22 14:06:23.685 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 403 0 null 4.1345ms
2025-08-22 14:29:18.045 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:18.053 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:18.054 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.1344ms
2025-08-22 14:29:18.061 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:18.064 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:18.065 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:18.066 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:29:18.235 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:29:18.237 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:29:18.239 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 170.6283ms
2025-08-22 14:29:18.240 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:18.241 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 179.9429ms
2025-08-22 14:29:18.302 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:18.304 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:18.305 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:18.306 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:29:18.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:29:18.313 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:29:18.315 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5676ms
2025-08-22 14:29:18.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:18.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5118ms
2025-08-22 14:29:26.753 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:26.756 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:26.758 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7662ms
2025-08-22 14:29:26.763 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:26.766 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:26.767 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:26.768 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:29:26.773 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:29:26.777 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:29:26.779 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2486ms
2025-08-22 14:29:26.782 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:26.783 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.7108ms
2025-08-22 14:29:34.624 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 14:29:34.628 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:34.630 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.9167ms
2025-08-22 14:29:34.635 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 14:29:34.638 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:34.639 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:29:34.641 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 14:29:34.644 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 14:29:34.668 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 14:29:34.674 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 14:29:34.684 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 14:29:34.688 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 14:29:34.689 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 14:29:34.691 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 14:29:34.693 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:29:34.694 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 51.1414ms
2025-08-22 14:29:34.696 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:29:34.697 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 62.9403ms
2025-08-22 14:29:34.704 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:34.707 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:34.708 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.3188ms
2025-08-22 14:29:34.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:34.717 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:34.718 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:34.720 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:29:34.725 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:29:34.729 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:29:34.732 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6001ms
2025-08-22 14:29:34.734 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:34.735 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4896ms
2025-08-22 14:29:34.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:29:34.838 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:29:34.840 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:34.841 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:29:34.848 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:29:34.853 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:29:34.855 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0806ms
2025-08-22 14:29:34.856 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:29:34.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.412ms
2025-08-22 14:30:00.317 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:30:00.320 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:30:00.321 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9439ms
2025-08-22 14:30:00.333 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:30:00.335 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:30:00.336 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:00.338 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:30:00.344 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:30:00.347 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:30:00.350 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.204ms
2025-08-22 14:30:00.352 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:00.353 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.8994ms
2025-08-22 14:30:00.450 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:30:00.454 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:30:00.455 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:00.456 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:30:00.461 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:30:00.465 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:30:00.466 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3842ms
2025-08-22 14:30:00.468 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:00.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8287ms
2025-08-22 14:30:02.328 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:30:02.332 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:30:02.333 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:02.334 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:30:02.338 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:30:02.343 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:30:02.344 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2297ms
2025-08-22 14:30:02.346 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:02.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.812ms
2025-08-22 14:30:02.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:30:02.434 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:30:02.435 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:02.437 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:30:02.443 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:30:02.453 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:30:02.455 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.0374ms
2025-08-22 14:30:02.457 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:30:02.458 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.0718ms
2025-08-22 14:34:54.541 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:34:54.546 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:34:54.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.11ms
2025-08-22 14:34:54.551 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:34:54.555 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:34:54.556 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:34:54.557 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:34:54.704 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:34:54.705 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:34:54.706 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 147.246ms
2025-08-22 14:34:54.708 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:34:54.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 158.257ms
2025-08-22 14:34:54.756 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:34:54.758 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:34:54.759 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:34:54.760 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:34:54.763 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:34:54.765 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:34:54.766 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.9021ms
2025-08-22 14:34:54.767 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:34:54.768 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.6417ms
2025-08-22 14:35:02.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 14:35:02.631 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:02.631 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.0459ms
2025-08-22 14:35:02.634 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 14:35:02.636 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:02.637 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:35:02.638 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 14:35:02.640 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 14:35:02.643 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 14:35:02.646 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 14:35:02.653 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 14:35:02.655 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 14:35:02.655 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 14:35:02.656 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 14:35:02.657 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:35:02.658 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 18.8678ms
2025-08-22 14:35:02.659 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:35:02.660 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 26.2871ms
2025-08-22 14:35:02.664 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:35:02.666 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:02.667 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6525ms
2025-08-22 14:35:02.670 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:35:02.673 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:02.674 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:02.675 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:35:02.678 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:35:02.681 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:35:02.683 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9384ms
2025-08-22 14:35:02.684 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:02.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.4986ms
2025-08-22 14:35:02.755 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:35:02.758 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:02.759 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:02.760 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:35:02.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:35:02.769 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:35:02.771 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5267ms
2025-08-22 14:35:02.773 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:02.774 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.1029ms
2025-08-22 14:35:40.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:35:40.737 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:40.738 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3869ms
2025-08-22 14:35:40.745 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:35:40.747 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:40.748 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:40.749 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:35:40.752 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:35:40.755 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:35:40.756 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2033ms
2025-08-22 14:35:40.757 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:40.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3938ms
2025-08-22 14:35:40.869 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:35:40.872 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:35:40.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:40.875 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:35:40.879 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:35:40.882 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:35:40.884 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1909ms
2025-08-22 14:35:40.885 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:35:40.887 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.8012ms
2025-08-22 14:37:18.555 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:37:18.561 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:37:18.562 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1937ms
2025-08-22 14:37:18.568 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:37:18.571 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:37:18.571 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:37:18.572 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:37:18.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:37:18.580 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:37:18.582 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.631ms
2025-08-22 14:37:18.583 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:37:18.584 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3257ms
2025-08-22 14:37:18.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:37:18.666 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:37:18.667 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:37:18.668 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:37:18.671 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:37:18.673 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:37:18.674 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.0237ms
2025-08-22 14:37:18.676 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:37:18.677 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.5027ms
2025-08-22 14:38:37.506 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:38:37.512 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:37.513 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.4936ms
2025-08-22 14:38:37.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:38:37.522 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:37.522 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:37.523 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:38:37.527 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:38:37.535 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:38:37.536 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.2568ms
2025-08-22 14:38:37.537 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:37.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8354ms
2025-08-22 14:38:37.594 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:38:37.597 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:37.598 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:37.599 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:38:37.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:38:37.605 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:38:37.607 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0814ms
2025-08-22 14:38:37.608 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:37.609 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0245ms
2025-08-22 14:38:45.097 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 14:38:45.098 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:45.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.4147ms
2025-08-22 14:38:45.101 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 14:38:45.103 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:45.103 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:38:45.104 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 14:38:45.106 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 14:38:45.109 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 14:38:45.128 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 14:38:45.130 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 14:38:45.131 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 14:38:45.132 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 14:38:45.133 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:38:45.134 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 28.4547ms
2025-08-22 14:38:45.135 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:38:45.136 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 34.6635ms
2025-08-22 14:38:45.139 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:38:45.144 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:45.145 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.4946ms
2025-08-22 14:38:45.148 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:38:45.150 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:45.151 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:45.152 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:38:45.153 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:38:45.155 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5651ms
2025-08-22 14:38:45.156 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:45.158 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.0811ms
2025-08-22 14:38:45.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:38:45.268 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:45.269 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:45.270 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:38:45.273 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:38:45.275 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.3249ms
2025-08-22 14:38:45.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:38:45.278 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.6523ms
2025-08-22 14:38:52.909 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 14:38:52.911 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:52.913 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.4522ms
2025-08-22 14:38:52.916 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 14:38:52.920 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:38:52.921 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 14:38:52.921 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 14:38:52.947 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 23.8451ms
2025-08-22 14:38:52.948 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 14:38:52.973 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 14:38:52.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 65.8501ms
2025-08-22 14:43:09.553 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:09.558 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:09.559 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.8128ms
2025-08-22 14:43:09.565 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:09.566 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:09.567 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:09.568 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:09.570 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:09.571 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4713ms
2025-08-22 14:43:09.572 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:09.572 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.7154ms
2025-08-22 14:43:09.691 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:09.694 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:09.695 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:09.696 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:09.698 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:09.700 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5508ms
2025-08-22 14:43:09.701 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:09.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.4101ms
2025-08-22 14:43:19.398 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 14:43:19.400 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:19.400 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.6362ms
2025-08-22 14:43:19.402 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 14:43:19.404 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:19.405 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:43:19.406 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 14:43:19.408 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 14:43:19.516 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 14:43:19.519 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 14:43:19.525 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 14:43:19.526 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 14:43:19.527 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 14:43:19.528 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 14:43:19.529 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:19.529 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 122.2461ms
2025-08-22 14:43:19.530 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:43:19.531 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 128.703ms
2025-08-22 14:43:19.534 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:19.535 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:19.536 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.3544ms
2025-08-22 14:43:19.538 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:19.540 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:19.541 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:19.542 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:19.544 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:19.546 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:19.547 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.3392ms
2025-08-22 14:43:19.548 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:19.549 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.5062ms
2025-08-22 14:43:19.614 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:19.617 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:19.618 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:19.619 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:19.623 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:19.626 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:19.627 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9465ms
2025-08-22 14:43:19.628 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:19.629 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5219ms
2025-08-22 14:43:22.684 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:22.687 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:22.687 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:22.688 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:22.691 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:22.693 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:22.694 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.5316ms
2025-08-22 14:43:22.695 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:22.696 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.8444ms
2025-08-22 14:43:22.740 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:22.743 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:22.744 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:22.746 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:22.751 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:22.754 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:22.755 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3477ms
2025-08-22 14:43:22.757 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:22.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.5761ms
2025-08-22 14:43:23.499 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:23.501 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:23.502 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:23.502 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:23.505 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:23.507 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:23.508 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.2945ms
2025-08-22 14:43:23.509 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:23.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.9712ms
2025-08-22 14:43:23.541 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:23.543 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:23.544 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:23.546 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:23.553 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:23.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:23.558 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.889ms
2025-08-22 14:43:23.560 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:23.561 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.9513ms
2025-08-22 14:43:24.277 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:24.279 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:24.280 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:24.281 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:24.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:24.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:24.287 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.0394ms
2025-08-22 14:43:24.288 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:24.289 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.1855ms
2025-08-22 14:43:24.343 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:43:24.345 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:43:24.346 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:24.347 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:43:24.352 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 14:43:24.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:43:24.359 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8011ms
2025-08-22 14:43:24.360 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:43:24.361 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8848ms
2025-08-22 14:44:26.696 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 14:44:26.701 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:44:26.702 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.028ms
2025-08-22 14:44:26.707 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 14:44:26.709 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:44:26.709 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:44:26.710 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 14:44:26.712 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 14:44:26.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 14:44:26.717 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 14:44:26.719 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 14:44:26.720 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 14:44:26.721 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 14:44:26.722 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:44:26.723 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 11.2818ms
2025-08-22 14:44:26.723 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 14:44:26.724 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 17.2269ms
2025-08-22 14:44:26.727 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:44:26.729 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:44:26.730 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4296ms
2025-08-22 14:44:26.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:44:26.734 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:44:26.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:44:26.736 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:44:26.738 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:44:26.739 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.1724ms
2025-08-22 14:44:26.739 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:44:26.740 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.1447ms
2025-08-22 14:44:26.779 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 14:44:26.781 +05:30 [INF] CORS policy execution successful.
2025-08-22 14:44:26.781 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:44:26.782 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 14:44:26.783 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 14:44:26.785 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.4956ms
2025-08-22 14:44:26.786 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 14:44:26.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.8785ms
2025-08-22 15:03:11.004 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:03:11.011 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:11.011 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.9897ms
2025-08-22 15:03:11.014 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:03:11.016 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:11.016 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:11.017 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:03:11.165 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 15:03:11.170 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:03:11.172 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:03:11.173 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 155.0366ms
2025-08-22 15:03:11.174 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:11.175 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 161.5215ms
2025-08-22 15:03:11.230 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:03:11.233 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:11.234 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:11.234 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:03:11.238 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:03:11.241 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:03:11.242 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5348ms
2025-08-22 15:03:11.243 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:11.244 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.8378ms
2025-08-22 15:03:22.145 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 15:03:22.147 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:22.147 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.3906ms
2025-08-22 15:03:22.149 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 15:03:22.151 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:22.152 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 15:03:22.152 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 15:03:22.154 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 15:03:22.157 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 15:03:22.160 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 15:03:22.165 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 15:03:22.167 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 15:03:22.168 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 15:03:22.168 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 15:03:22.169 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:03:22.170 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 16.5129ms
2025-08-22 15:03:22.171 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 15:03:22.171 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 22.0998ms
2025-08-22 15:03:22.203 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:03:22.205 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:22.206 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8246ms
2025-08-22 15:03:22.210 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:03:22.214 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:22.215 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:22.216 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:03:22.219 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:03:22.222 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:03:22.223 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9071ms
2025-08-22 15:03:22.225 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:22.226 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7778ms
2025-08-22 15:03:22.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:03:22.290 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:03:22.292 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:22.293 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:03:22.308 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:03:22.314 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:03:22.315 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6742ms
2025-08-22 15:03:22.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:03:22.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.4759ms
2025-08-22 15:04:50.415 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:04:50.422 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:04:50.423 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.4518ms
2025-08-22 15:04:50.435 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:04:50.438 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:04:50.439 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:04:50.441 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:04:50.446 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:04:50.455 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:04:50.456 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.1103ms
2025-08-22 15:04:50.460 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:04:50.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.9364ms
2025-08-22 15:04:50.550 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:04:50.553 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:04:50.554 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:04:50.555 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:04:50.561 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:04:50.571 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:04:50.573 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.2715ms
2025-08-22 15:04:50.574 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:04:50.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.8722ms
2025-08-22 15:05:04.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:04.904 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:04.905 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1166ms
2025-08-22 15:05:04.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:04.910 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:04.910 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:04.911 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:05:04.916 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:05:04.919 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:05:04.921 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1107ms
2025-08-22 15:05:04.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:04.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.8368ms
2025-08-22 15:05:05.021 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:05.024 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:05.025 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:05.026 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:05:05.030 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:05:05.033 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:05:05.035 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1402ms
2025-08-22 15:05:05.036 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:05.037 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.1571ms
2025-08-22 15:05:07.368 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:07.372 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:07.373 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:07.373 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:05:07.377 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:05:07.379 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:05:07.380 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.0858ms
2025-08-22 15:05:07.381 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:07.382 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.7763ms
2025-08-22 15:05:07.427 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:07.430 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:07.431 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:07.432 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:05:07.442 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:05:07.444 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:05:07.446 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1998ms
2025-08-22 15:05:07.447 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:07.448 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.8456ms
2025-08-22 15:05:40.669 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:40.671 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:40.671 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.5887ms
2025-08-22 15:05:40.678 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:40.680 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:40.681 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:40.682 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:05:40.686 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:05:40.695 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:05:40.697 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.1913ms
2025-08-22 15:05:40.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:40.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.1131ms
2025-08-22 15:05:40.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:05:40.796 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:05:40.797 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:40.798 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:05:40.801 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:05:40.804 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:05:40.805 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2134ms
2025-08-22 15:05:40.806 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:05:40.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.6771ms
2025-08-22 15:06:21.067 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:06:21.069 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:06:21.069 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6948ms
2025-08-22 15:06:21.075 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:06:21.078 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:06:21.079 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:06:21.079 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:06:21.083 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:06:21.087 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:06:21.088 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2544ms
2025-08-22 15:06:21.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:06:21.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.9891ms
2025-08-22 15:06:21.171 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:06:21.174 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:06:21.175 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:06:21.177 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:06:21.180 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:06:21.183 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:06:21.184 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7242ms
2025-08-22 15:06:21.186 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:06:21.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.2943ms
2025-08-22 15:08:14.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:14.533 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:14.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.5771ms
2025-08-22 15:08:14.539 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:14.540 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:14.541 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:14.542 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:14.680 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:14.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:14.683 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 139.1617ms
2025-08-22 15:08:14.684 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:14.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 146.0382ms
2025-08-22 15:08:14.730 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:14.732 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:14.733 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:14.734 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:14.737 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:14.739 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:14.740 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.9511ms
2025-08-22 15:08:14.741 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:14.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.9745ms
2025-08-22 15:08:31.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - null null
2025-08-22 15:08:31.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - 404 0 null 4.9225ms
2025-08-22 15:08:31.297 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json, Response status code: 404
2025-08-22 15:08:31.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - null null
2025-08-22 15:08:31.371 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - null null
2025-08-22 15:08:31.375 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - 404 0 null 4.9962ms
2025-08-22 15:08:31.377 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - 404 0 null 7.3723ms
2025-08-22 15:08:31.381 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json, Response status code: 404
2025-08-22 15:08:31.385 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json, Response status code: 404
2025-08-22 15:08:31.604 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - null null
2025-08-22 15:08:31.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - 404 0 null 4.0001ms
2025-08-22 15:08:31.613 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json, Response status code: 404
2025-08-22 15:08:31.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - null null
2025-08-22 15:08:31.660 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json - 404 0 null 3.8575ms
2025-08-22 15:08:31.663 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.d4a0297407bf205fec98.hot-update.json, Response status code: 404
2025-08-22 15:08:32.076 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:32.082 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:32.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.7628ms
2025-08-22 15:08:32.092 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:32.096 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:32.103 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:32.105 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:32.112 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:32.118 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:32.120 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.5732ms
2025-08-22 15:08:32.122 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:32.123 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.0404ms
2025-08-22 15:08:32.617 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:32.620 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:32.621 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:32.622 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:32.625 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:32.629 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:32.631 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.767ms
2025-08-22 15:08:32.633 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:32.634 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.1389ms
2025-08-22 15:08:34.070 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.073 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.074 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.157ms
2025-08-22 15:08:34.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.080 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.081 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.083 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.086 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.087 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.0887ms
2025-08-22 15:08:34.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.2865ms
2025-08-22 15:08:34.107 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.110 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.114 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.119 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:34.124 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.125 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.101ms
2025-08-22 15:08:34.127 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.0168ms
2025-08-22 15:08:34.161 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.164 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.168 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.175 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:34.180 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.182 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3551ms
2025-08-22 15:08:34.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.187 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.816ms
2025-08-22 15:08:34.187 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.203 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.205 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.206 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.211 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:34.216 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.218 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.665ms
2025-08-22 15:08:34.220 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.0757ms
2025-08-22 15:08:34.245 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.248 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.249 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.251 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.253 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.254 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5534ms
2025-08-22 15:08:34.255 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.3051ms
2025-08-22 15:08:34.270 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.273 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.276 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.282 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:34.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.288 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.186ms
2025-08-22 15:08:34.291 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.293 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.4233ms
2025-08-22 15:08:34.373 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 15:08:34.373 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.375 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.378 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.378 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.9979ms
2025-08-22 15:08:34.380 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.383 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 15:08:34.384 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.386 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.389 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 15:08:34.390 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:34.392 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 15:08:34.395 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.398 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8589ms
2025-08-22 15:08:34.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.0881ms
2025-08-22 15:08:34.455 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 15:08:34.463 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:34.465 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 68.9662ms
2025-08-22 15:08:34.467 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:34.469 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 15:08:34.469 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 87.542ms
2025-08-22 15:08:34.471 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:34.477 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:34.481 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:34.482 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.9837ms
2025-08-22 15:08:34.484 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:34.485 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3747ms
2025-08-22 15:08:39.228 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 15:08:39.230 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:39.231 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9592ms
2025-08-22 15:08:39.233 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 15:08:39.235 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:39.236 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 15:08:39.236 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 15:08:39.238 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 15:08:39.241 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 15:08:39.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 15:08:39.261 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 15:08:39.264 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 15:08:39.265 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 15:08:39.265 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 15:08:39.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:39.268 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 30.082ms
2025-08-22 15:08:39.268 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 15:08:39.269 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 35.8848ms
2025-08-22 15:08:39.272 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:39.274 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:39.275 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6569ms
2025-08-22 15:08:39.277 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:39.279 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:39.280 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:39.280 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:39.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:39.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:39.287 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.2325ms
2025-08-22 15:08:39.288 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:39.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.2058ms
2025-08-22 15:08:39.348 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:08:39.351 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:08:39.352 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:39.353 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:08:39.359 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:08:39.363 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:08:39.365 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5542ms
2025-08-22 15:08:39.366 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:08:39.367 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.7744ms
2025-08-22 15:10:59.609 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:10:59.615 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:10:59.616 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0495ms
2025-08-22 15:10:59.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:10:59.623 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:10:59.624 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:10:59.625 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:10:59.628 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:10:59.630 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:10:59.631 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.2177ms
2025-08-22 15:10:59.632 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:10:59.633 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.0063ms
2025-08-22 15:10:59.737 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:10:59.740 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:10:59.742 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:10:59.743 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:10:59.753 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:10:59.757 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:10:59.759 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.5456ms
2025-08-22 15:10:59.761 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:10:59.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.8673ms
2025-08-22 15:11:15.071 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 15:11:15.073 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:11:15.074 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9012ms
2025-08-22 15:11:15.076 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 15:11:15.078 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:11:15.079 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 15:11:15.080 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 15:11:15.082 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 15:11:15.085 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 15:11:15.088 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 15:11:15.092 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 15:11:15.094 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 15:11:15.095 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 15:11:15.095 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 15:11:15.096 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:11:15.097 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 16.2329ms
2025-08-22 15:11:15.098 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 15:11:15.099 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 22.6285ms
2025-08-22 15:11:15.103 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:11:15.105 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:11:15.106 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6477ms
2025-08-22 15:11:15.108 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:11:15.110 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:11:15.110 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:11:15.111 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:11:15.114 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:11:15.116 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:11:15.117 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.9832ms
2025-08-22 15:11:15.119 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:11:15.120 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.8589ms
2025-08-22 15:11:15.186 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 15:11:15.190 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:11:15.191 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:11:15.192 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 15:11:15.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 15:11:15.214 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 15:11:15.216 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.33ms
2025-08-22 15:11:15.218 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 15:11:15.220 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.2214ms
2025-08-22 15:13:27.410 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 15:13:27.415 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:13:27.416 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.0796ms
2025-08-22 15:13:27.422 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 15:13:27.424 +05:30 [INF] CORS policy execution successful.
2025-08-22 15:13:27.425 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 15:13:27.426 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 15:13:27.454 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 27.0822ms
2025-08-22 15:13:27.456 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 15:13:27.482 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 15:13:27.488 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 66.5857ms
2025-08-22 16:08:36.710 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:08:36.717 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:08:36.717 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.6308ms
2025-08-22 16:08:36.725 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:08:36.728 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:08:36.729 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:08:36.730 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:08:36.857 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 16:08:36.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:08:36.862 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:08:36.863 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 132.3149ms
2025-08-22 16:08:36.864 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:08:36.865 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 139.9307ms
2025-08-22 16:08:36.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:08:36.909 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:08:36.909 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:08:36.910 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:08:36.914 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:08:36.917 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:08:36.918 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5489ms
2025-08-22 16:08:36.919 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:08:36.920 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.2952ms
2025-08-22 16:14:34.081 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 16:14:34.083 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:14:34.084 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.671ms
2025-08-22 16:14:34.090 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 16:14:34.091 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:14:34.092 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 16:14:34.093 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 16:14:34.095 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 16:14:34.212 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 16:14:34.215 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 16:14:34.220 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 16:14:34.222 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 16:14:34.223 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 16:14:34.224 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 16:14:34.224 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:14:34.225 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 131.2791ms
2025-08-22 16:14:34.226 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 16:14:34.227 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 137.8019ms
2025-08-22 16:14:34.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:14:34.233 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:14:34.233 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.482ms
2025-08-22 16:14:34.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:14:34.237 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:14:34.238 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:14:34.239 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:14:34.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:14:34.244 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:14:34.245 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3574ms
2025-08-22 16:14:34.246 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:14:34.247 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.2756ms
2025-08-22 16:14:34.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:14:34.324 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:14:34.325 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:14:34.326 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:14:34.331 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:14:34.334 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:14:34.336 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3548ms
2025-08-22 16:14:34.337 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:14:34.338 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6339ms
2025-08-22 16:15:01.616 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:01.618 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:01.618 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.5066ms
2025-08-22 16:15:01.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:01.627 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:01.628 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:01.629 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:01.632 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:15:01.635 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:01.637 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1048ms
2025-08-22 16:15:01.638 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:01.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.9917ms
2025-08-22 16:15:01.717 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:01.719 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:01.720 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:01.721 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:01.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:15:01.727 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:01.728 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.283ms
2025-08-22 16:15:01.729 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:01.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.1656ms
2025-08-22 16:15:34.091 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 16:15:34.092 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 16:15:34.096 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:34.098 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:34.098 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 6.8995ms
2025-08-22 16:15:34.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 6.7411ms
2025-08-22 16:15:34.104 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 16:15:34.106 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 16:15:34.107 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:34.109 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:34.124 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 10:14:26 AM', Current time (UTC): '22-08-2025 10:45:34 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-22 16:15:34.124 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 10:14:26 AM', Current time (UTC): '22-08-2025 10:45:34 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-22 16:15:34.150 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 10:14:26 AM', Current time (UTC): '22-08-2025 10:45:34 AM'.
2025-08-22 16:15:34.150 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 10:14:26 AM', Current time (UTC): '22-08-2025 10:45:34 AM'.
2025-08-22 16:15:34.151 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-22 16:15:34.151 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-22 16:15:34.216 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 16:15:34.216 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 16:15:34.221 +05:30 [ERR] Response has already started, unable to write error response for path: /api/Plan
2025-08-22 16:15:34.222 +05:30 [ERR] Response has already started, unable to write error response for path: /api/Permission/grouped
2025-08-22 16:15:34.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 401 null application/json 118.9494ms
2025-08-22 16:15:34.224 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 401 null application/json 117.6252ms
2025-08-22 16:15:39.899 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 16:15:39.901 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:39.901 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.6921ms
2025-08-22 16:15:39.904 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 16:15:39.905 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:39.906 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 16:15:39.907 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 16:15:39.910 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 16:15:39.930 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 16:15:39.933 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 16:15:39.935 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 16:15:39.936 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 16:15:39.937 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 16:15:39.938 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:39.939 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 30.0648ms
2025-08-22 16:15:39.940 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 16:15:39.941 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 36.9304ms
2025-08-22 16:15:39.945 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:39.948 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:39.948 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0487ms
2025-08-22 16:15:39.951 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:39.953 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:39.954 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:39.955 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:39.957 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:39.958 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7971ms
2025-08-22 16:15:39.960 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:39.961 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.6677ms
2025-08-22 16:15:40.000 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:40.002 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:40.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:40.004 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:40.006 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:40.007 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.6104ms
2025-08-22 16:15:40.009 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:40.010 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.3876ms
2025-08-22 16:15:42.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 16:15:42.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 16:15:42.835 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:42.837 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:42.837 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 4.7599ms
2025-08-22 16:15:42.838 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 5.6249ms
2025-08-22 16:15:42.844 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 16:15:42.844 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 16:15:42.847 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:42.849 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:42.849 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 16:15:42.850 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 16:15:42.851 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:42.851 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 16:15:42.854 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 16:15:42.857 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 16:15:42.859 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 5.9132ms
2025-08-22 16:15:42.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 16:15:42.860 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 16:15:42.863 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 16:15:42.863 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 19.0091ms
2025-08-22 16:15:42.866 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 11.4334ms
2025-08-22 16:15:42.867 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 16:15:42.867 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 16:15:42.869 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:42.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 25.4734ms
2025-08-22 16:15:42.870 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.7704ms
2025-08-22 16:15:42.875 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 16:15:42.877 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:42.878 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:42.878 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:42.884 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 16:15:42.886 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 16:15:42.887 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 7.3992ms
2025-08-22 16:15:42.888 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:42.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 14.4449ms
2025-08-22 16:15:44.187 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 16:15:44.189 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:44.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 3.0273ms
2025-08-22 16:15:44.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 16:15:44.194 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:44.194 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:44.195 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:44.196 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 16:15:44.198 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.1558ms
2025-08-22 16:15:44.199 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:44.200 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.8556ms
2025-08-22 16:15:49.969 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 16:15:49.971 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:49.972 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.8243ms
2025-08-22 16:15:49.974 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 664
2025-08-22 16:15:49.976 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:49.990 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 16:15:49.992 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:49.997 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 16:15:50.014 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='301d4585-8884-48a5-bcb3-04f2fdb6fdc2', @p1='37905877-95a5-412c-a627-0eda7475891a', @p2='4795350e-d6dd-4069-ad03-b0a81f77f4f0', @p3='537851ac-bf0b-42f5-b07b-97829ef2bf13', @p4='61388bab-f8cf-433d-ab4d-dc34312fc5d6', @p5='64f63819-6d68-40db-ad9a-15191fa383fa', @p6='723cd166-c23a-4396-a651-bc77076d2e4a', @p7='77604bc3-5350-4c65-8102-fcb6b7a8b665', @p8='8da6f95b-56cc-4d47-805e-0940b9c2c164', @p9='966b2de4-abe2-4e94-8e86-7880c7fa2347', @p10='a3274e7c-2d77-491f-b3a0-339c2b1ba9ad', @p11='c35e66fb-0415-4a14-a6df-cf467d2c8f22', @p12='c4670814-c1ab-4739-83b1-7f2c6189855b', @p13='cf23d20e-731e-4d32-b24c-63a4bd7aa3e5', @p14='ea57612a-ccd0-490e-b819-9d112ac453fc', @p15='f22f78ba-5e6f-45e7-b243-c602c32b9366', @p16='f9c060c9-7edd-4f36-9a25-71ce3b7dc01a', @p17='0218d031-044d-4f70-8a9e-7c0dca3252b5', @p18='2025-08-22T10:45:50.0030020Z' (DbType = DateTime), @p19='system', @p20='True', @p21='30000000-0000-0000-0000-000000000001', @p22='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p23='1076a7c2-2890-41da-b8fe-146598f11e01', @p24='2025-08-22T10:45:50.0030174Z' (DbType = DateTime), @p25='system', @p26='True', @p27='30000000-0000-0000-0000-000000000002', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='15cd9390-a486-4bbe-a594-7168e496c64f', @p30='2025-08-22T10:45:50.0030289Z' (DbType = DateTime), @p31='system', @p32='True', @p33='0485154c-dde5-4732-a7aa-a379c77a5b27', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='275fb962-f4b4-47e2-967c-8427f97d29d6', @p36='2025-08-22T10:45:50.0026053Z' (DbType = DateTime), @p37='system', @p38='True', @p39='30000000-0000-0000-0000-000000000010', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='5644ced4-6d28-4673-b96e-f0691f2719aa', @p42='2025-08-22T10:45:50.0029632Z' (DbType = DateTime), @p43='system', @p44='True', @p45='30000000-0000-0000-0000-000000000004', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='575cb7fa-5d2b-4a62-8a23-188210a4ee4c', @p48='2025-08-22T10:45:50.0030877Z' (DbType = DateTime), @p49='system', @p50='True', @p51='974af1f9-3caa-4857-a1a7-48462c389332', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='57aad257-fbd6-48ac-8ec7-9cf53968d6a6', @p54='2025-08-22T10:45:50.0030405Z' (DbType = DateTime), @p55='system', @p56='True', @p57='29461562-ef9c-48c0-a606-482ff57b8f95', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='6e8a70bb-5007-443a-ab5f-fb081ec05cec', @p60='2025-08-22T10:45:50.0029525Z' (DbType = DateTime), @p61='system', @p62='True', @p63='30000000-0000-0000-0000-000000000003', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='81b1bf38-4f7f-46bf-b416-dcf6cd1d6454', @p66='2025-08-22T10:45:50.0029298Z' (DbType = DateTime), @p67='system', @p68='True', @p69='30000000-0000-0000-0000-000000000012', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='8818f254-15be-49d8-afd3-6d5284c9913c', @p72='2025-08-22T10:45:50.0029160Z' (DbType = DateTime), @p73='system', @p74='True', @p75='30000000-0000-0000-0000-000000000013', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='882da8ea-db75-4695-bceb-c69504ea02c3', @p78='2025-08-22T10:45:50.0031138Z' (DbType = DateTime), @p79='system', @p80='True', @p81='c819f1bd-422d-4609-916c-cc185fe44ab0', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='94b85fe3-15e4-4057-83d7-14a15eba3c00', @p84='2025-08-22T10:45:50.0031047Z' (DbType = DateTime), @p85='system', @p86='True', @p87='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='96951cff-f6fe-4543-91d4-ce0f0a421861', @p90='2025-08-22T10:45:50.0028884Z' (DbType = DateTime), @p91='system', @p92='True', @p93='30000000-0000-0000-0000-000000000014', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='bc338a63-9b30-4f22-a0cc-5a4794ba8efa', @p96='2025-08-22T10:45:50.0029413Z' (DbType = DateTime), @p97='system', @p98='True', @p99='30000000-0000-0000-0000-000000000011', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='c6e1e952-e681-4da3-9482-cbfe28e5d34b', @p102='2025-08-22T10:45:50.0030778Z' (DbType = DateTime), @p103='system', @p104='True', @p105='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='e04b573e-38ea-41af-9ff9-e20889898dd3', @p108='2025-08-22T10:45:50.0008619Z' (DbType = DateTime), @p109='system', @p110='True', @p111='30000000-0000-0000-0000-000000000009', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p113='ea9c5ed7-8cd6-478a-8dac-51a8c532cf13', @p114='2025-08-22T10:45:50.0030509Z' (DbType = DateTime), @p115='system', @p116='True', @p117='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p118='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p113, @p114, @p115, @p116, @p117, @p118);
2025-08-22 16:15:50.018 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:50.019 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 26.3025ms
2025-08-22 16:15:50.020 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 16:15:50.021 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 46.2632ms
2025-08-22 16:15:50.025 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 16:15:50.027 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:50.028 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:50.029 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:50.032 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 16:15:50.036 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 16:15:50.037 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.2952ms
2025-08-22 16:15:50.037 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:50.038 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 13.4726ms
2025-08-22 16:15:51.338 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 664
2025-08-22 16:15:51.340 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:51.341 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 16:15:51.342 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:51.365 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 16:15:51.372 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0218d031-044d-4f70-8a9e-7c0dca3252b5', @p1='1076a7c2-2890-41da-b8fe-146598f11e01', @p2='15cd9390-a486-4bbe-a594-7168e496c64f', @p3='275fb962-f4b4-47e2-967c-8427f97d29d6', @p4='5644ced4-6d28-4673-b96e-f0691f2719aa', @p5='575cb7fa-5d2b-4a62-8a23-188210a4ee4c', @p6='57aad257-fbd6-48ac-8ec7-9cf53968d6a6', @p7='6e8a70bb-5007-443a-ab5f-fb081ec05cec', @p8='81b1bf38-4f7f-46bf-b416-dcf6cd1d6454', @p9='8818f254-15be-49d8-afd3-6d5284c9913c', @p10='882da8ea-db75-4695-bceb-c69504ea02c3', @p11='94b85fe3-15e4-4057-83d7-14a15eba3c00', @p12='96951cff-f6fe-4543-91d4-ce0f0a421861', @p13='bc338a63-9b30-4f22-a0cc-5a4794ba8efa', @p14='c6e1e952-e681-4da3-9482-cbfe28e5d34b', @p15='e04b573e-38ea-41af-9ff9-e20889898dd3', @p16='ea9c5ed7-8cd6-478a-8dac-51a8c532cf13', @p17='26ac54f7-6dec-4efc-98bd-df74f56669ce', @p18='2025-08-22T10:45:51.3683866Z' (DbType = DateTime), @p19='system', @p20='True', @p21='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p22='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p23='31f6731f-2cf7-48df-b865-6cec110b5dd5', @p24='2025-08-22T10:45:51.3683114Z' (DbType = DateTime), @p25='system', @p26='True', @p27='30000000-0000-0000-0000-000000000013', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='3419f989-8af9-4dad-9068-0d9011959d54', @p30='2025-08-22T10:45:51.3684064Z' (DbType = DateTime), @p31='system', @p32='True', @p33='c819f1bd-422d-4609-916c-cc185fe44ab0', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='36e97311-f5ba-442b-b4aa-548160ff794b', @p36='2025-08-22T10:45:51.3683265Z' (DbType = DateTime), @p37='system', @p38='True', @p39='30000000-0000-0000-0000-000000000011', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='39e63bcb-94d8-4d43-a2cb-9baeacefb8f4', @p42='2025-08-22T10:45:51.3683525Z' (DbType = DateTime), @p43='system', @p44='True', @p45='30000000-0000-0000-0000-000000000002', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='4388b24c-6776-46cb-825a-b74767fc03d4', @p48='2025-08-22T10:45:51.3683326Z' (DbType = DateTime), @p49='system', @p50='True', @p51='30000000-0000-0000-0000-000000000003', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='5ef1cf61-b6f9-4406-a97a-3f6779db0cc9', @p54='2025-08-22T10:45:51.3682943Z' (DbType = DateTime), @p55='system', @p56='True', @p57='30000000-0000-0000-0000-000000000010', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='65d355d4-b50b-4911-bdce-138ebd09d0ea', @p60='2025-08-22T10:45:51.3683594Z' (DbType = DateTime), @p61='system', @p62='True', @p63='0485154c-dde5-4732-a7aa-a379c77a5b27', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='6884c0ba-a158-461d-beb3-60bdea1892a0', @p66='2025-08-22T10:45:51.3683991Z' (DbType = DateTime), @p67='system', @p68='True', @p69='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='69032e69-a2be-4dff-bc07-99eca6bc29d2', @p72='2025-08-22T10:45:51.3683044Z' (DbType = DateTime), @p73='system', @p74='True', @p75='30000000-0000-0000-0000-000000000014', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='74f1ab9a-2655-4359-ba6b-337aedc623da', @p78='2025-08-22T10:45:51.3683200Z' (DbType = DateTime), @p79='system', @p80='True', @p81='30000000-0000-0000-0000-000000000012', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='8a6603c3-efbd-4de0-9b24-3b07fa06abe7', @p84='2025-08-22T10:45:51.3683463Z' (DbType = DateTime), @p85='system', @p86='True', @p87='30000000-0000-0000-0000-000000000001', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='b4357c53-0763-480e-a0da-46ca5e74ac66', @p90='2025-08-22T10:45:51.3683387Z' (DbType = DateTime), @p91='system', @p92='True', @p93='30000000-0000-0000-0000-000000000004', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='b62b874d-2679-4696-90dc-21bd0f10a542', @p96='2025-08-22T10:45:51.3683929Z' (DbType = DateTime), @p97='system', @p98='True', @p99='974af1f9-3caa-4857-a1a7-48462c389332', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='bf2d023d-42cf-4f6b-b13a-dc86c529c363', @p102='2025-08-22T10:45:51.3683679Z' (DbType = DateTime), @p103='system', @p104='True', @p105='29461562-ef9c-48c0-a606-482ff57b8f95', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='cdd40832-5217-4772-af1a-5c27fdfb948a', @p108='2025-08-22T10:45:51.3681661Z' (DbType = DateTime), @p109='system', @p110='True', @p111='30000000-0000-0000-0000-000000000009', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p113='ffea2357-2a5e-4de0-9f78-021a6e412c89', @p114='2025-08-22T10:45:51.3683741Z' (DbType = DateTime), @p115='system', @p116='True', @p117='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p118='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p113, @p114, @p115, @p116, @p117, @p118);
2025-08-22 16:15:51.375 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:51.376 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 32.5079ms
2025-08-22 16:15:51.377 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 16:15:51.378 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 40.1122ms
2025-08-22 16:15:51.380 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 16:15:51.381 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:51.382 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:51.383 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:51.386 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 16:15:51.388 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 16:15:51.389 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.6506ms
2025-08-22 16:15:51.390 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:15:51.391 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 10.7888ms
2025-08-22 16:15:55.997 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:56.000 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:56.001 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1385ms
2025-08-22 16:15:56.011 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:56.014 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:56.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:56.016 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:56.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:15:56.021 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:56.022 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.2307ms
2025-08-22 16:15:56.024 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:56.025 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.9651ms
2025-08-22 16:15:56.091 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:56.094 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:56.095 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:56.096 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:56.101 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:15:56.104 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:56.105 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6714ms
2025-08-22 16:15:56.106 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:56.107 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7946ms
2025-08-22 16:15:59.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:59.921 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:59.922 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:59.923 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:59.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:15:59.928 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:15:59.930 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.406ms
2025-08-22 16:15:59.931 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:59.931 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.9849ms
2025-08-22 16:15:59.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:15:59.991 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:15:59.992 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:15:59.992 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:15:59.996 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:15:59.998 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:16:00.000 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6385ms
2025-08-22 16:16:00.000 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:16:00.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0314ms
2025-08-22 16:17:34.094 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:17:34.096 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:17:34.097 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2956ms
2025-08-22 16:17:34.107 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:17:34.109 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:17:34.110 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:17:34.111 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:17:34.115 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:17:34.124 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:17:34.126 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.3314ms
2025-08-22 16:17:34.128 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:17:34.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.2818ms
2025-08-22 16:17:34.206 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:17:34.209 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:17:34.210 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:17:34.211 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:17:34.220 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:17:34.223 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:17:34.224 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0375ms
2025-08-22 16:17:34.225 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:17:34.226 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.2154ms
2025-08-22 16:19:34.727 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:19:34.732 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:19:34.733 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.3215ms
2025-08-22 16:19:34.740 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:19:34.743 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:19:34.744 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:34.745 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:19:34.908 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:19:34.909 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:19:34.911 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 164.4747ms
2025-08-22 16:19:34.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:34.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 172.368ms
2025-08-22 16:19:34.961 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:19:34.963 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:19:34.964 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:34.965 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:19:34.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:19:34.971 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:19:34.972 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5923ms
2025-08-22 16:19:34.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:34.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9193ms
2025-08-22 16:19:37.020 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:19:37.022 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:19:37.023 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:37.024 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:19:37.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:19:37.029 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:19:37.030 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.9362ms
2025-08-22 16:19:37.031 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:37.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.4905ms
2025-08-22 16:19:37.071 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:19:37.073 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:19:37.074 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:37.075 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:19:37.082 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:19:37.085 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:19:37.086 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2799ms
2025-08-22 16:19:37.088 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:19:37.089 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4749ms
2025-08-22 16:23:33.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:23:33.208 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:23:33.209 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9738ms
2025-08-22 16:23:33.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:23:33.218 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:23:33.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:23:33.220 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:23:33.223 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:23:33.225 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:23:33.227 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6574ms
2025-08-22 16:23:33.228 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:23:33.229 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.4848ms
2025-08-22 16:23:33.345 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:23:33.348 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:23:33.349 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:23:33.350 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:23:33.353 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:23:33.359 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:23:33.360 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.8991ms
2025-08-22 16:23:33.362 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:23:33.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.8492ms
2025-08-22 16:24:49.827 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:24:49.833 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:24:49.833 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.1243ms
2025-08-22 16:24:49.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:24:49.842 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:24:49.843 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:24:49.844 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:24:49.987 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:24:49.989 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:24:49.990 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 144.4844ms
2025-08-22 16:24:49.991 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:24:49.992 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 151.8207ms
2025-08-22 16:24:50.040 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:24:50.042 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:24:50.043 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:24:50.044 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:24:50.047 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:24:50.049 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:24:50.051 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.223ms
2025-08-22 16:24:50.052 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:24:50.053 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.5364ms
2025-08-22 16:25:06.350 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:25:06.352 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:25:06.353 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8434ms
2025-08-22 16:25:06.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:25:06.357 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:25:06.358 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:06.359 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:25:06.363 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:25:06.365 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:25:06.367 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8237ms
2025-08-22 16:25:06.368 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:06.369 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2612ms
2025-08-22 16:25:06.461 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:25:06.464 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:25:06.465 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:06.466 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:25:06.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:25:06.473 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:25:06.475 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3263ms
2025-08-22 16:25:06.476 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:06.477 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.1939ms
2025-08-22 16:25:35.476 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:25:35.483 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:25:35.483 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0387ms
2025-08-22 16:25:35.486 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:25:35.491 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:25:35.491 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:35.492 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:25:35.495 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:25:35.498 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:25:35.499 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7289ms
2025-08-22 16:25:35.500 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:35.501 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3971ms
2025-08-22 16:25:35.579 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:25:35.582 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:25:35.583 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:35.584 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:25:35.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:25:35.590 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:25:35.591 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8534ms
2025-08-22 16:25:35.592 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:25:35.593 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.7513ms
2025-08-22 16:26:34.726 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json - null null
2025-08-22 16:26:34.728 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json - 404 0 null 2.6531ms
2025-08-22 16:26:34.732 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json, Response status code: 404
2025-08-22 16:26:34.768 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json - null null
2025-08-22 16:26:34.782 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json - 404 0 null 14.8713ms
2025-08-22 16:26:34.786 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json, Response status code: 404
2025-08-22 16:26:36.477 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:36.480 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:36.481 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8779ms
2025-08-22 16:26:36.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:36.488 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:36.489 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.490 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:36.494 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:26:36.498 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:36.499 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1807ms
2025-08-22 16:26:36.502 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.464ms
2025-08-22 16:26:36.564 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:36.569 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:36.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.572 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:36.577 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:26:36.582 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:36.586 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.857ms
2025-08-22 16:26:36.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.9374ms
2025-08-22 16:26:36.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:36.860 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:36.861 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.863 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:36.868 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:26:36.876 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:36.879 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.2002ms
2025-08-22 16:26:36.884 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.886 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.0598ms
2025-08-22 16:26:36.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:36.926 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:36.927 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8453ms
2025-08-22 16:26:36.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:36.932 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:36.933 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.934 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:36.936 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:36.938 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7143ms
2025-08-22 16:26:36.939 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:36.940 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.3307ms
2025-08-22 16:26:36.998 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:36.999 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 16:26:37.000 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:37.002 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 16:26:37.003 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:37.004 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:37.007 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:37.007 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 8.9308ms
2025-08-22 16:26:37.008 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:37.009 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 6.9899ms
2025-08-22 16:26:37.012 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 16:26:37.014 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:37.016 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 16:26:37.018 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:37.019 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8944ms
2025-08-22 16:26:37.022 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:37.023 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 16:26:37.023 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:37.024 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 16:26:37.025 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:37.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.2775ms
2025-08-22 16:26:37.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 16:26:37.027 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 16:26:37.035 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 16:26:37.038 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 10.1966ms
2025-08-22 16:26:37.039 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 16:26:37.041 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 16:26:37.044 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 16:26:37.044 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 31.9863ms
2025-08-22 16:26:37.046 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 9.6566ms
2025-08-22 16:26:37.048 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 16:26:37.049 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 16:26:37.053 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:37.054 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 37.8701ms
2025-08-22 16:26:37.054 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 6.1907ms
2025-08-22 16:26:37.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 16:26:37.062 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:37.063 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:26:37.064 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:37.066 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 16:26:37.068 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.4267ms
2025-08-22 16:26:37.069 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 16:26:37.070 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 10.2821ms
2025-08-22 16:26:42.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 16:26:42.472 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:42.473 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.835ms
2025-08-22 16:26:42.475 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 16:26:42.477 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:42.477 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 16:26:42.478 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 16:26:42.480 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 16:26:42.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 16:26:42.486 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 16:26:42.491 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 16:26:42.492 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 16:26:42.493 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 16:26:42.494 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 16:26:42.495 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:42.496 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 16.6529ms
2025-08-22 16:26:42.497 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 16:26:42.498 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 22.6796ms
2025-08-22 16:26:42.501 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:42.502 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:42.503 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.3187ms
2025-08-22 16:26:42.506 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:42.508 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:42.508 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:42.509 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:42.512 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:26:42.515 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:42.515 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.0283ms
2025-08-22 16:26:42.516 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:42.517 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.702ms
2025-08-22 16:26:42.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:42.614 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:42.615 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:42.616 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:42.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:26:42.622 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:42.622 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.1676ms
2025-08-22 16:26:42.624 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:42.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.0064ms
2025-08-22 16:26:42.849 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json - null null
2025-08-22 16:26:42.852 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json - 404 0 null 2.3547ms
2025-08-22 16:26:42.854 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.4100d4ee36801b60d806.hot-update.json, Response status code: 404
2025-08-22 16:26:43.651 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:26:43.654 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:26:43.655 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:43.655 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:26:43.658 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:26:43.661 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:26:43.662 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.7965ms
2025-08-22 16:26:43.663 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:26:43.664 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.3223ms
2025-08-22 16:29:17.895 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:29:17.905 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:29:17.906 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.4313ms
2025-08-22 16:29:17.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:29:17.921 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:29:17.922 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:17.923 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:29:17.928 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:29:17.932 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:29:17.933 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3167ms
2025-08-22 16:29:17.937 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:17.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.7187ms
2025-08-22 16:29:18.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:29:18.008 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:29:18.008 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:18.009 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:29:18.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:29:18.015 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:29:18.017 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6637ms
2025-08-22 16:29:18.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:18.019 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.7572ms
2025-08-22 16:29:32.326 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:29:32.328 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:29:32.329 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0215ms
2025-08-22 16:29:32.332 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:29:32.334 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:29:32.335 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:32.335 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:29:32.339 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:29:32.346 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:29:32.348 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.2481ms
2025-08-22 16:29:32.349 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:32.350 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.2342ms
2025-08-22 16:29:32.406 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:29:32.408 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:29:32.409 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:32.410 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:29:32.414 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:29:32.417 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:29:32.418 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0148ms
2025-08-22 16:29:32.419 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:29:32.420 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.3395ms
2025-08-22 16:44:05.936 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:44:05.946 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:44:05.947 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.3708ms
2025-08-22 16:44:05.951 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:44:05.953 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:44:05.954 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:44:05.955 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:44:06.130 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:44:06.132 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:44:06.133 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 175.5509ms
2025-08-22 16:44:06.134 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:44:06.135 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 184.0404ms
2025-08-22 16:44:06.191 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:44:06.193 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:44:06.194 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:44:06.195 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:44:06.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:44:06.202 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:44:06.203 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6021ms
2025-08-22 16:44:06.205 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:44:06.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.9066ms
2025-08-22 16:56:10.275 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:56:10.281 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:56:10.282 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1909ms
2025-08-22 16:56:10.288 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:56:10.290 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:56:10.291 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:56:10.292 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:56:10.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:56:10.471 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:56:10.473 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 179.0102ms
2025-08-22 16:56:10.473 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:56:10.474 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 186.1343ms
2025-08-22 16:56:10.524 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 16:56:10.526 +05:30 [INF] CORS policy execution successful.
2025-08-22 16:56:10.527 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:56:10.528 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 16:56:10.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 16:56:10.533 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 16:56:10.535 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.4176ms
2025-08-22 16:56:10.536 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 16:56:10.537 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.1061ms
2025-08-22 17:01:46.807 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:01:46.812 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:01:46.812 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0011ms
2025-08-22 17:01:46.815 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:01:46.817 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:01:46.818 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:01:46.819 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:01:46.963 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:01:46.964 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:01:46.965 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 144.7508ms
2025-08-22 17:01:46.967 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:01:46.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 152.7681ms
2025-08-22 17:01:47.013 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:01:47.015 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:01:47.017 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:01:47.018 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:01:47.021 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:01:47.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:01:47.024 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.39ms
2025-08-22 17:01:47.025 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:01:47.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3395ms
2025-08-22 17:29:49.181 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 17:29:49.188 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:29:49.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 9.1425ms
2025-08-22 17:29:49.194 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 17:29:49.202 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:29:49.204 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 11:45:39 AM', Current time (UTC): '22-08-2025 11:59:49 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-22 17:29:49.209 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 11:45:39 AM', Current time (UTC): '22-08-2025 11:59:49 AM'.
2025-08-22 17:29:49.210 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-22 17:29:49.245 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 17:29:49.252 +05:30 [ERR] Response has already started, unable to write error response for path: /api/whatsappsettings/me
2025-08-22 17:29:49.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 401 null application/json 58.7401ms
2025-08-22 17:35:45.650 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 17:35:45.655 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:35:45.655 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.3926ms
2025-08-22 17:35:45.661 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 17:35:45.662 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:35:45.663 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:35:45.664 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 17:35:45.667 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 17:35:45.895 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 17:35:45.899 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 17:35:45.905 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 17:35:45.907 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 17:35:45.908 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 17:35:45.908 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 17:35:45.909 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:35:45.910 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 245.3158ms
2025-08-22 17:35:45.911 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:35:45.912 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 251.474ms
2025-08-22 17:35:45.915 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:35:45.917 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:35:45.917 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4908ms
2025-08-22 17:35:45.920 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:35:45.922 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:35:45.922 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:35:45.923 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:35:45.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 17:35:45.930 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:35:45.931 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:35:45.932 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8346ms
2025-08-22 17:35:45.933 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:35:45.934 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0612ms
2025-08-22 17:35:46.007 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:35:46.010 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:35:46.011 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:35:46.012 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:35:46.015 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:35:46.019 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:35:46.020 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1037ms
2025-08-22 17:35:46.021 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:35:46.022 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.078ms
2025-08-22 17:36:27.981 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 17:36:27.983 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:27.984 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.6256ms
2025-08-22 17:36:27.987 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 17:36:27.989 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:27.990 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:36:27.991 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 17:36:27.993 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 17:36:27.996 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 17:36:28.014 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 17:36:28.016 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 17:36:28.017 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 17:36:28.018 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 17:36:28.019 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:36:28.020 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 27.6447ms
2025-08-22 17:36:28.021 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:36:28.022 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 34.9109ms
2025-08-22 17:36:28.025 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:36:28.027 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:28.028 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7982ms
2025-08-22 17:36:28.031 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:36:28.034 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:28.034 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:36:28.035 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:28.037 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:36:28.039 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5032ms
2025-08-22 17:36:28.040 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:36:28.041 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.3289ms
2025-08-22 17:36:28.081 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:36:28.083 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:28.084 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:36:28.085 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:28.086 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:36:28.088 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.467ms
2025-08-22 17:36:28.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:36:28.090 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 8.8516ms
2025-08-22 17:36:37.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 17:36:37.085 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 17:36:37.093 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:37.095 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:37.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 12.212ms
2025-08-22 17:36:37.096 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 10.6122ms
2025-08-22 17:36:37.100 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 17:36:37.107 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 17:36:37.109 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:37.111 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:37.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 17:36:37.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 17:36:37.113 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 17:36:37.114 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:37.118 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 17:36:37.124 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 17:36:37.126 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 10.9591ms
2025-08-22 17:36:37.127 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 17:36:37.129 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 28.3861ms
2025-08-22 17:36:37.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 17:36:37.247 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:36:37.248 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 130.6772ms
2025-08-22 17:36:37.249 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 17:36:37.250 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 142.217ms
2025-08-22 17:36:37.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:36:37.254 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:37.255 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.3859ms
2025-08-22 17:36:37.257 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:36:37.259 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:37.260 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:36:37.261 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:37.263 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 17:36:37.266 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:36:37.267 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.1448ms
2025-08-22 17:36:37.268 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:36:37.269 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 11.7287ms
2025-08-22 17:36:42.373 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:36:42.375 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:42.376 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.4384ms
2025-08-22 17:36:42.378 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 79
2025-08-22 17:36:42.380 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:42.380 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 17:36:42.381 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:42.384 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 17:36:42.390 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='bcd0b038-4a2c-4abe-acef-0bfaf7f88ee5', @p1='29e68036-b638-4675-9604-8dd902d6bc37', @p2='2025-08-22T12:06:42.3871639Z' (DbType = DateTime), @p3='system', @p4='True', @p5='30000000-0000-0000-0000-000000000000', @p6='3e92e204-cda8-4128-94c6-ac1e977e1152', @p7='95e775ea-de82-4143-b258-caaa289a3597', @p8='2025-08-22T12:06:42.3873101Z' (DbType = DateTime), @p9='system', @p10='True', @p11='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p12='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
2025-08-22 17:36:42.393 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:36:42.393 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 11.2448ms
2025-08-22 17:36:42.394 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 17:36:42.395 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 17.1546ms
2025-08-22 17:36:42.397 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:36:42.399 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:42.400 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:36:42.400 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:42.405 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 17:36:42.407 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:36:42.408 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 6.2991ms
2025-08-22 17:36:42.409 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:36:42.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 12.1244ms
2025-08-22 17:36:43.626 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - application/json 79
2025-08-22 17:36:43.628 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:43.629 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 17:36:43.629 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:43.632 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 17:36:43.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='29e68036-b638-4675-9604-8dd902d6bc37', @p1='95e775ea-de82-4143-b258-caaa289a3597', @p2='5343ccc4-7770-499e-8e18-795ff34b76a3', @p3='2025-08-22T12:06:43.6351920Z' (DbType = DateTime), @p4='system', @p5='True', @p6='30000000-0000-0000-0000-000000000000', @p7='3e92e204-cda8-4128-94c6-ac1e977e1152', @p8='8600561b-5f53-4faa-8040-1f0fd371fe71', @p9='2025-08-22T12:06:43.6352576Z' (DbType = DateTime), @p10='system', @p11='True', @p12='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p13='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13);
2025-08-22 17:36:43.656 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:36:43.658 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 26.7518ms
2025-08-22 17:36:43.658 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 17:36:43.659 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 33.5613ms
2025-08-22 17:36:43.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:36:43.663 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:36:43.664 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:36:43.664 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:36:43.667 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='3e92e204-cda8-4128-94c6-ac1e977e1152'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 17:36:43.669 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:36:43.670 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.7825ms
2025-08-22 17:36:43.671 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:36:43.672 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 10.5789ms
2025-08-22 17:37:22.119 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json - null null
2025-08-22 17:37:22.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json - 404 0 null 3.1149ms
2025-08-22 17:37:22.125 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json, Response status code: 404
2025-08-22 17:37:22.155 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json - null null
2025-08-22 17:37:22.163 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json - null null
2025-08-22 17:37:22.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json - 404 0 null 9.4527ms
2025-08-22 17:37:22.168 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json - 404 0 null 5.021ms
2025-08-22 17:37:22.178 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json, Response status code: 404
2025-08-22 17:37:22.181 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.b551dadd1a7858e60264.hot-update.json, Response status code: 404
2025-08-22 17:37:22.828 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:22.832 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:22.833 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.393ms
2025-08-22 17:37:22.837 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:22.842 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:22.843 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:22.844 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:22.849 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:37:22.853 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:22.855 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.3152ms
2025-08-22 17:37:22.860 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:22.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.2769ms
2025-08-22 17:37:24.601 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:24.613 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.614 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.8395ms
2025-08-22 17:37:24.619 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:24.622 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.624 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.626 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:24.630 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:24.631 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.9752ms
2025-08-22 17:37:24.633 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.634 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4081ms
2025-08-22 17:37:24.680 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:24.684 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.689 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:24.718 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:37:24.725 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:24.727 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.6061ms
2025-08-22 17:37:24.729 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.731 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 51.055ms
2025-08-22 17:37:24.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:24.762 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:24.764 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 17:37:24.770 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 17:37:24.765 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.775 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.779 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.782 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.784 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.785 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.786 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 22.3791ms
2025-08-22 17:37:24.787 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 17.3618ms
2025-08-22 17:37:24.790 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:24.789 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:24.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 17:37:24.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 17:37:24.812 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:24.817 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:37:24.821 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.823 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.825 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.0383ms
2025-08-22 17:37:24.828 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:24.830 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 17:37:24.831 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 17:37:24.833 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.835 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.6587ms
2025-08-22 17:37:24.836 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 17:37:24.838 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:24.847 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 17:37:24.839 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 77.1012ms
2025-08-22 17:37:24.851 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 17:37:24.841 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.859 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 17:37:24.863 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:37:24.864 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 105.0038ms
2025-08-22 17:37:24.866 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 22.6197ms
2025-08-22 17:37:24.868 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 19.3262ms
2025-08-22 17:37:24.874 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 17:37:24.876 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 17:37:24.878 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 81.2341ms
2025-08-22 17:37:24.880 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 70.7829ms
2025-08-22 17:37:24.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:37:24.893 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.894 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 5.714ms
2025-08-22 17:37:24.899 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:37:24.903 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.905 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.906 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:24.910 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:37:24.912 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.3947ms
2025-08-22 17:37:24.913 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.915 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 15.9488ms
2025-08-22 17:37:24.935 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:24.939 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:24.941 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.943 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:24.989 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:37:24.992 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:24.995 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 42.3706ms
2025-08-22 17:37:24.996 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:24.998 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 62.7741ms
2025-08-22 17:37:28.225 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 17:37:28.227 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:28.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.0557ms
2025-08-22 17:37:28.230 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 17:37:28.232 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:28.233 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:37:28.234 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 17:37:28.237 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 17:37:28.240 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 17:37:28.243 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 17:37:28.248 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 17:37:28.250 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 17:37:28.252 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 17:37:28.253 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 17:37:28.254 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:28.255 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 19.954ms
2025-08-22 17:37:28.256 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:37:28.257 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 26.2283ms
2025-08-22 17:37:28.261 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:28.263 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:28.264 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0202ms
2025-08-22 17:37:28.266 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:28.268 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:28.269 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:28.270 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:28.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:37:28.276 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:28.277 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5894ms
2025-08-22 17:37:28.278 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:28.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.4428ms
2025-08-22 17:37:28.342 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:37:28.345 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:37:28.346 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:28.347 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:37:28.352 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:37:28.355 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:37:28.357 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.15ms
2025-08-22 17:37:28.359 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:37:28.360 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4064ms
2025-08-22 17:53:33.257 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:53:33.263 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:53:33.265 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.8817ms
2025-08-22 17:53:33.272 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:53:33.275 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:53:33.276 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:53:33.276 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:53:33.426 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:53:33.427 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:53:33.428 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 150.3314ms
2025-08-22 17:53:33.429 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:53:33.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 158.4128ms
2025-08-22 17:53:33.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:53:33.482 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:53:33.483 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:53:33.483 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:53:33.486 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:53:33.489 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:53:33.490 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5058ms
2025-08-22 17:53:33.491 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:53:33.492 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.3837ms
2025-08-22 17:57:01.194 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.203 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.206 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 11.7031ms
2025-08-22 17:57:01.205 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.220 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.221 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 21.481ms
2025-08-22 17:57:01.211 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.227 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.212 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.217 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 17:57:01.217 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 17:57:01.230 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 29.7722ms
2025-08-22 17:57:01.230 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.232 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.234 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.235 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.238 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.239 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 27.3526ms
2025-08-22 17:57:01.243 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:57:01.240 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 22.7432ms
2025-08-22 17:57:01.240 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 23.4018ms
2025-08-22 17:57:01.245 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 17:57:01.246 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:57:01.248 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 17:57:01.249 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.251 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.252 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7988ms
2025-08-22 17:57:01.252 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.253 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.255 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.256 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 17:57:01.256 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.259 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.259 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 17:57:01.259 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.260 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 17:57:01.260 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.3387ms
2025-08-22 17:57:01.262 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.263 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.268 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 17:57:01.272 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:57:01.261 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.279 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 17:57:01.279 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9547ms
2025-08-22 17:57:01.280 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.282 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 17.7064ms
2025-08-22 17:57:01.283 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.287 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 17:57:01.287 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:57:01.289 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.5122ms
2025-08-22 17:57:01.290 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 45.4599ms
2025-08-22 17:57:01.293 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:57:01.300 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.4834ms
2025-08-22 17:57:01.301 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.302 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.304 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.307 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 54.2054ms
2025-08-22 17:57:01.308 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.312 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.316 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:57:01.320 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:57:01.322 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5933ms
2025-08-22 17:57:01.323 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.324 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.326 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.327 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.4871ms
2025-08-22 17:57:01.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.332 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.336 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:57:01.340 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:57:01.342 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5913ms
2025-08-22 17:57:01.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.4377ms
2025-08-22 17:57:01.358 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:01.360 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.361 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.361 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:57:01.367 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:57:01.368 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.0447ms
2025-08-22 17:57:01.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.370 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.5507ms
2025-08-22 17:57:01.523 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 17:57:01.525 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:57:01.526 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 256.9016ms
2025-08-22 17:57:01.527 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 17:57:01.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 280.4084ms
2025-08-22 17:57:01.531 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:57:01.533 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 3.0521ms
2025-08-22 17:57:01.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 17:57:01.538 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:01.539 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.540 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:01.542 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 17:57:01.542 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.3569ms
2025-08-22 17:57:01.544 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 17:57:01.544 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 7.9967ms
2025-08-22 17:57:43.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:43.371 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:43.372 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.6413ms
2025-08-22 17:57:43.386 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:57:43.393 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:57:43.394 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:43.395 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:57:43.399 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:57:43.401 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:57:43.402 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.864ms
2025-08-22 17:57:43.403 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:57:43.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2018ms
2025-08-22 17:59:32.459 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 17:59:32.466 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.467 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 8.1812ms
2025-08-22 17:59:32.477 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 17:59:32.480 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.481 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:59:32.482 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 17:59:32.485 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 17:59:32.493 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 17:59:32.498 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 17:59:32.507 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 17:59:32.510 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 17:59:32.512 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 17:59:32.514 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 17:59:32.515 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:59:32.517 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 33.1939ms
2025-08-22 17:59:32.519 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 17:59:32.520 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 43.0022ms
2025-08-22 17:59:32.525 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:59:32.527 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.528 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5777ms
2025-08-22 17:59:32.531 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:59:32.534 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.537 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:59:32.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:59:32.550 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:59:32.551 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.7467ms
2025-08-22 17:59:32.552 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.3842ms
2025-08-22 17:59:32.573 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:59:32.575 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.577 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.578 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:59:32.582 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:59:32.585 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:59:32.588 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1428ms
2025-08-22 17:59:32.589 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:59:32.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.592 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.593 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.6675ms
2025-08-22 17:59:32.594 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.599 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:59:32.604 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:59:32.607 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:59:32.609 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.839ms
2025-08-22 17:59:32.610 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:59:32.610 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.613 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.614 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.2138ms
2025-08-22 17:59:32.615 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.620 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:59:32.625 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:59:32.629 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:59:32.630 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0637ms
2025-08-22 17:59:32.632 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.633 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.0621ms
2025-08-22 17:59:32.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:59:32.686 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.688 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.690 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:59:32.695 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:59:32.700 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:59:32.702 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0631ms
2025-08-22 17:59:32.705 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.706 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.7401ms
2025-08-22 17:59:32.724 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 17:59:32.728 +05:30 [INF] CORS policy execution successful.
2025-08-22 17:59:32.729 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.731 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 17:59:32.737 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 17:59:32.742 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 17:59:32.744 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5252ms
2025-08-22 17:59:32.747 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 17:59:32.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.583ms
2025-08-22 18:01:50.885 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:01:50.892 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:01:50.893 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.2767ms
2025-08-22 18:01:50.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:01:50.903 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:01:50.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:01:50.905 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:01:50.910 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:01:50.913 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:01:50.915 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8808ms
2025-08-22 18:01:50.916 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:01:50.917 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.3691ms
2025-08-22 18:01:50.972 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:01:50.977 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:01:50.978 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:01:50.980 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:01:50.985 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:01:50.989 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:01:50.991 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1477ms
2025-08-22 18:01:50.993 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:01:50.994 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.9368ms
2025-08-22 18:01:51.031 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:01:51.034 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:01:51.035 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:01:51.036 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:01:51.040 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:01:51.044 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:01:51.045 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8658ms
2025-08-22 18:01:51.046 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:01:51.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6166ms
2025-08-22 18:02:32.402 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 18:02:32.404 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.404 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.7304ms
2025-08-22 18:02:32.407 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 18:02:32.409 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.410 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 18:02:32.411 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 18:02:32.413 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 18:02:32.415 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 18:02:32.418 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 18:02:32.422 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 18:02:32.424 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 18:02:32.426 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 18:02:32.427 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 18:02:32.428 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:32.429 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 16.7159ms
2025-08-22 18:02:32.430 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 18:02:32.431 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 24.0077ms
2025-08-22 18:02:32.433 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:32.435 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.436 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6298ms
2025-08-22 18:02:32.438 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:32.440 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.441 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.442 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:02:32.445 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:02:32.451 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:32.452 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4936ms
2025-08-22 18:02:32.453 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.454 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.451ms
2025-08-22 18:02:32.471 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:32.474 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.476 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:02:32.479 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:02:32.482 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:32.483 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.74ms
2025-08-22 18:02:32.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:32.484 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.486 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.486 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5797ms
2025-08-22 18:02:32.487 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.490 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:02:32.494 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:02:32.497 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:32.498 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.1601ms
2025-08-22 18:02:32.499 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:32.499 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.501 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.502 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.1824ms
2025-08-22 18:02:32.503 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.506 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:02:32.511 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:02:32.515 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:32.516 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2934ms
2025-08-22 18:02:32.518 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.948ms
2025-08-22 18:02:32.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:32.548 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.549 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.550 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:02:32.555 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:02:32.559 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:32.561 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7481ms
2025-08-22 18:02:32.562 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.564 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.3336ms
2025-08-22 18:02:32.580 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:32.583 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:32.584 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.585 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:02:32.588 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:02:32.591 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:32.593 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4525ms
2025-08-22 18:02:32.594 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:32.595 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.5818ms
2025-08-22 18:02:39.343 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:39.346 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:39.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7709ms
2025-08-22 18:02:39.351 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:02:39.353 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:02:39.354 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:39.354 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:02:39.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:02:39.360 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:02:39.362 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.8884ms
2025-08-22 18:02:39.363 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:02:39.364 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9696ms
2025-08-22 18:04:44.426 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:04:44.428 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:44.429 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6701ms
2025-08-22 18:04:44.435 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:04:44.437 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:44.438 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:04:44.439 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:04:44.593 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:04:44.595 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:04:44.596 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 155.904ms
2025-08-22 18:04:44.597 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:04:44.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 162.8976ms
2025-08-22 18:04:44.604 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:04:44.607 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:44.607 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:04:44.608 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:04:44.612 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:04:44.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:04:44.616 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9711ms
2025-08-22 18:04:44.617 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:04:44.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.6966ms
2025-08-22 18:04:44.646 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:04:44.648 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:44.649 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:04:44.650 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:04:44.652 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:04:44.656 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:04:44.657 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9618ms
2025-08-22 18:04:44.658 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:04:44.659 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.4319ms
2025-08-22 18:04:57.726 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-08-22 18:04:57.726 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-08-22 18:04:57.734 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:57.731 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:57.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 13.495ms
2025-08-22 18:04:57.742 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 16.2631ms
2025-08-22 18:04:57.744 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-08-22 18:04:57.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-08-22 18:04:57.748 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:57.750 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:57.750 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 18:04:57.751 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 18:04:57.752 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-08-22 18:04:57.752 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:04:57.756 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-08-22 18:04:57.761 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 18:04:57.764 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 10.6151ms
2025-08-22 18:04:57.765 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-08-22 18:04:57.766 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 21.9898ms
2025-08-22 18:04:57.894 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-08-22 18:04:57.896 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 18:04:57.897 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 141.2312ms
2025-08-22 18:04:57.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-08-22 18:04:57.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 152.2891ms
2025-08-22 18:04:57.901 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 18:04:57.903 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:57.903 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 204 null null 2.2236ms
2025-08-22 18:04:57.905 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - null null
2025-08-22 18:04:57.907 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:57.908 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:04:57.909 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:04:57.911 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 18:04:57.912 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 2.4267ms
2025-08-22 18:04:57.913 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:04:57.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/3e92e204-cda8-4128-94c6-ac1e977e1152/permissions - 200 null application/json; charset=utf-8 8.8119ms
2025-08-22 18:04:58.900 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 18:04:58.902 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:58.903 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.8438ms
2025-08-22 18:04:58.905 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 18:04:58.907 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:04:58.908 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:04:58.908 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:04:58.910 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 18:04:58.911 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.4846ms
2025-08-22 18:04:58.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:04:58.913 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 7.853ms
2025-08-22 18:05:02.772 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 18:05:02.774 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:02.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.9081ms
2025-08-22 18:05:02.777 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 703
2025-08-22 18:05:02.779 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:02.780 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 18:05:02.781 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:02.785 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 18:05:02.809 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='26ac54f7-6dec-4efc-98bd-df74f56669ce', @p1='31f6731f-2cf7-48df-b865-6cec110b5dd5', @p2='3419f989-8af9-4dad-9068-0d9011959d54', @p3='36e97311-f5ba-442b-b4aa-548160ff794b', @p4='39e63bcb-94d8-4d43-a2cb-9baeacefb8f4', @p5='4388b24c-6776-46cb-825a-b74767fc03d4', @p6='5ef1cf61-b6f9-4406-a97a-3f6779db0cc9', @p7='65d355d4-b50b-4911-bdce-138ebd09d0ea', @p8='6884c0ba-a158-461d-beb3-60bdea1892a0', @p9='69032e69-a2be-4dff-bc07-99eca6bc29d2', @p10='74f1ab9a-2655-4359-ba6b-337aedc623da', @p11='8a6603c3-efbd-4de0-9b24-3b07fa06abe7', @p12='b4357c53-0763-480e-a0da-46ca5e74ac66', @p13='b62b874d-2679-4696-90dc-21bd0f10a542', @p14='bf2d023d-42cf-4f6b-b13a-dc86c529c363', @p15='cdd40832-5217-4772-af1a-5c27fdfb948a', @p16='ffea2357-2a5e-4de0-9f78-021a6e412c89', @p17='1227a1cb-927b-482c-a1c6-08f828d4df2e', @p18='2025-08-22T12:35:02.8012888Z' (DbType = DateTime), @p19='system', @p20='True', @p21='0485154c-dde5-4732-a7aa-a379c77a5b27', @p22='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p23='1bf2a922-3313-450c-9b04-328361ac1268', @p24='2025-08-22T12:35:02.8012651Z' (DbType = DateTime), @p25='system', @p26='True', @p27='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p28='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p29='1c88a5bf-0ad4-47bc-9847-dbd767429a1d', @p30='2025-08-22T12:35:02.7883003Z' (DbType = DateTime), @p31='system', @p32='True', @p33='30000000-0000-0000-0000-000000000011', @p34='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p35='201298bb-b00c-4395-9b6d-267ad6cf985c', @p36='2025-08-22T12:35:02.7882690Z' (DbType = DateTime), @p37='system', @p38='True', @p39='30000000-0000-0000-0000-000000000014', @p40='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p41='252d50a7-4e27-4c90-aaf0-47dee65abae3', @p42='2025-08-22T12:35:02.8012999Z' (DbType = DateTime), @p43='system', @p44='True', @p45='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p46='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p47='3ab1430c-a0bb-4c16-bc11-311dc0f5d0a4', @p48='2025-08-22T12:35:02.7882929Z' (DbType = DateTime), @p49='system', @p50='True', @p51='30000000-0000-0000-0000-000000000012', @p52='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p53='42314a58-71ac-489c-9c0f-a100cb231fd0', @p54='2025-08-22T12:35:02.7882861Z' (DbType = DateTime), @p55='system', @p56='True', @p57='30000000-0000-0000-0000-000000000013', @p58='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p59='424de5df-fc8b-4476-8bb2-d801cfba7f25', @p60='2025-08-22T12:35:02.8014042Z' (DbType = DateTime), @p61='system', @p62='True', @p63='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p64='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p65='60c9e71c-e59d-419f-8010-4d3446e53090', @p66='2025-08-22T12:35:02.8012945Z' (DbType = DateTime), @p67='system', @p68='True', @p69='c819f1bd-422d-4609-916c-cc185fe44ab0', @p70='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p71='661d49ae-7d97-4eb0-826e-a53682fc866e', @p72='2025-08-22T12:35:02.7878825Z' (DbType = DateTime), @p73='system', @p74='True', @p75='30000000-0000-0000-0000-000000000010', @p76='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p77='77c6994e-0a96-40bf-930f-c3f5cafeb9ab', @p78='2025-08-22T12:35:02.8012765Z' (DbType = DateTime), @p79='system', @p80='True', @p81='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p82='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p83='7999aba0-f7cd-485f-bdd1-1c65656f99c9', @p84='2025-08-22T12:35:02.7883457Z' (DbType = DateTime), @p85='system', @p86='True', @p87='30000000-0000-0000-0000-000000000001', @p88='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p89='cb424614-0978-40ac-8d5e-36befcabb662', @p90='2025-08-22T12:35:02.7883345Z' (DbType = DateTime), @p91='system', @p92='True', @p93='30000000-0000-0000-0000-000000000003', @p94='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p95='d2a81e97-15a1-4c93-80b0-3f9a430ce0bd', @p96='2025-08-22T12:35:02.7883402Z' (DbType = DateTime), @p97='system', @p98='True', @p99='30000000-0000-0000-0000-000000000004', @p100='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p101='d61aee65-38d0-4a39-b826-773abdcc93cb', @p102='2025-08-22T12:35:02.7883249Z' (DbType = DateTime), @p103='system', @p104='True', @p105='30000000-0000-0000-0000-000000000009', @p106='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p107='dd132d5c-aa72-4e6d-ad70-3c8dce657f3e', @p108='2025-08-22T12:35:02.8012367Z' (DbType = DateTime), @p109='system', @p110='True', @p111='29461562-ef9c-48c0-a606-482ff57b8f95', @p112='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p113='e1f18c44-2c8c-4f7c-a017-243ac0cba880', @p114='2025-08-22T12:35:02.8012825Z' (DbType = DateTime), @p115='system', @p116='True', @p117='974af1f9-3caa-4857-a1a7-48462c389332', @p118='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p119='fc26283a-49d8-4f85-bbaa-d3607a7503c2', @p120='2025-08-22T12:35:02.8012089Z' (DbType = DateTime), @p121='system', @p122='True', @p123='30000000-0000-0000-0000-000000000002', @p124='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p47, @p48, @p49, @p50, @p51, @p52);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p53, @p54, @p55, @p56, @p57, @p58);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p59, @p60, @p61, @p62, @p63, @p64);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p77, @p78, @p79, @p80, @p81, @p82);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p83, @p84, @p85, @p86, @p87, @p88);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p101, @p102, @p103, @p104, @p105, @p106);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p107, @p108, @p109, @p110, @p111, @p112);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124);
2025-08-22 18:05:02.812 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:02.813 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 31.0242ms
2025-08-22 18:05:02.814 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 18:05:02.815 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 37.8864ms
2025-08-22 18:05:02.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 18:05:02.819 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:02.820 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:05:02.821 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:02.824 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 18:05:02.826 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 18:05:02.827 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.4105ms
2025-08-22 18:05:02.828 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:05:02.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.6839ms
2025-08-22 18:05:03.713 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 703
2025-08-22 18:05:03.716 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:03.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 18:05:03.736 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:03.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 18:05:03.747 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='1227a1cb-927b-482c-a1c6-08f828d4df2e', @p1='1bf2a922-3313-450c-9b04-328361ac1268', @p2='1c88a5bf-0ad4-47bc-9847-dbd767429a1d', @p3='201298bb-b00c-4395-9b6d-267ad6cf985c', @p4='252d50a7-4e27-4c90-aaf0-47dee65abae3', @p5='3ab1430c-a0bb-4c16-bc11-311dc0f5d0a4', @p6='42314a58-71ac-489c-9c0f-a100cb231fd0', @p7='424de5df-fc8b-4476-8bb2-d801cfba7f25', @p8='60c9e71c-e59d-419f-8010-4d3446e53090', @p9='661d49ae-7d97-4eb0-826e-a53682fc866e', @p10='77c6994e-0a96-40bf-930f-c3f5cafeb9ab', @p11='7999aba0-f7cd-485f-bdd1-1c65656f99c9', @p12='cb424614-0978-40ac-8d5e-36befcabb662', @p13='d2a81e97-15a1-4c93-80b0-3f9a430ce0bd', @p14='d61aee65-38d0-4a39-b826-773abdcc93cb', @p15='dd132d5c-aa72-4e6d-ad70-3c8dce657f3e', @p16='e1f18c44-2c8c-4f7c-a017-243ac0cba880', @p17='fc26283a-49d8-4f85-bbaa-d3607a7503c2', @p18='0f337012-a8ae-4c7d-9f93-5b1f97835ddb', @p19='2025-08-22T12:35:03.7428718Z' (DbType = DateTime), @p20='system', @p21='True', @p22='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='1b788970-2634-47d4-91c5-1788c14bef32', @p25='2025-08-22T12:35:03.7428742Z' (DbType = DateTime), @p26='system', @p27='True', @p28='974af1f9-3caa-4857-a1a7-48462c389332', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='1bbd231e-600f-4ef5-b404-7f2e29644448', @p31='2025-08-22T12:35:03.7428572Z' (DbType = DateTime), @p32='system', @p33='True', @p34='30000000-0000-0000-0000-000000000004', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='4b2501b5-e8c8-41ac-801b-611d8e8063b9', @p37='2025-08-22T12:35:03.7428408Z' (DbType = DateTime), @p38='system', @p39='True', @p40='30000000-0000-0000-0000-000000000012', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='64dc24bf-41a9-4e92-9c6d-d34cca7bc7fe', @p43='2025-08-22T12:35:03.7428667Z' (DbType = DateTime), @p44='system', @p45='True', @p46='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='659109b0-9cc2-4f81-af35-f6ae461f06e0', @p49='2025-08-22T12:35:03.7428790Z' (DbType = DateTime), @p50='system', @p51='True', @p52='c819f1bd-422d-4609-916c-cc185fe44ab0', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='715569f4-9926-4296-9aaa-df39c834c854', @p55='2025-08-22T12:35:03.7414580Z' (DbType = DateTime), @p56='system', @p57='True', @p58='30000000-0000-0000-0000-000000000010', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='7793b64f-1127-4b35-b10c-e102b856c48f', @p61='2025-08-22T12:35:03.7428545Z' (DbType = DateTime), @p62='system', @p63='True', @p64='30000000-0000-0000-0000-000000000003', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='7a4ff1d6-7f43-4900-bf9c-4acd052bb76b', @p67='2025-08-22T12:35:03.7428599Z' (DbType = DateTime), @p68='system', @p69='True', @p70='30000000-0000-0000-0000-000000000001', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='87832913-bd53-4522-853d-992af49ea3e2', @p73='2025-08-22T12:35:03.7428835Z' (DbType = DateTime), @p74='system', @p75='True', @p76='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='90ce9387-14bb-4235-8cdd-e20a9dd17cc1', @p79='2025-08-22T12:35:03.7428377Z' (DbType = DateTime), @p80='system', @p81='True', @p82='30000000-0000-0000-0000-000000000013', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='ad8d7604-57eb-4938-8b8a-6d9e420c9b0f', @p85='2025-08-22T12:35:03.7428258Z' (DbType = DateTime), @p86='system', @p87='True', @p88='30000000-0000-0000-0000-000000000014', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p90='b2e04671-3b58-48c7-b2e4-5ead8e5f84c6', @p91='2025-08-22T12:35:03.7428465Z' (DbType = DateTime), @p92='system', @p93='True', @p94='30000000-0000-0000-0000-000000000009', @p95='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p96='baf3e572-a7f5-4209-93ea-4acd2cc75e7a', @p97='2025-08-22T12:35:03.7428440Z' (DbType = DateTime), @p98='system', @p99='True', @p100='30000000-0000-0000-0000-000000000011', @p101='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p102='bb610cb3-8e85-4288-b651-bb64e495a487', @p103='2025-08-22T12:35:03.7428812Z' (DbType = DateTime), @p104='system', @p105='True', @p106='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p107='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p108='cf5e69ff-d975-488b-8a9b-8ac440d4d4cf', @p109='2025-08-22T12:35:03.7428767Z' (DbType = DateTime), @p110='system', @p111='True', @p112='0485154c-dde5-4732-a7aa-a379c77a5b27', @p113='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p114='d0f96e95-126b-4c22-a396-dc4bf92fcbc6', @p115='2025-08-22T12:35:03.7428621Z' (DbType = DateTime), @p116='system', @p117='True', @p118='30000000-0000-0000-0000-000000000002', @p119='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p120='f9ed620b-23d6-4ff0-b4b2-ca2439548a51', @p121='2025-08-22T12:35:03.7428644Z' (DbType = DateTime), @p122='system', @p123='True', @p124='29461562-ef9c-48c0-a606-482ff57b8f95', @p125='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
2025-08-22 18:05:03.750 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:03.751 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 14.2232ms
2025-08-22 18:05:03.752 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 18:05:03.753 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 39.9907ms
2025-08-22 18:05:03.755 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 18:05:03.757 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:03.758 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:05:03.758 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:03.761 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 18:05:03.763 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 18:05:03.764 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.8281ms
2025-08-22 18:05:03.765 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:05:03.766 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 10.8758ms
2025-08-22 18:05:08.294 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:08.296 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:08.297 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9791ms
2025-08-22 18:05:08.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:08.301 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:08.302 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:08.303 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:08.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:05:08.309 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:08.310 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5457ms
2025-08-22 18:05:08.311 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:08.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.2077ms
2025-08-22 18:05:08.367 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:08.370 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:08.371 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:08.372 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:08.377 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:05:08.381 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:08.383 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2508ms
2025-08-22 18:05:08.385 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:08.386 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.3516ms
2025-08-22 18:05:08.423 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:08.426 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:08.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:08.428 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:08.431 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:05:08.435 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:08.436 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5089ms
2025-08-22 18:05:08.438 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:08.439 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.1699ms
2025-08-22 18:05:10.301 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:10.304 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:10.305 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.5373ms
2025-08-22 18:05:10.320 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:10.323 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:10.324 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:10.325 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:05:10.330 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:05:10.332 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:10.334 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 7.353ms
2025-08-22 18:05:10.335 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:10.336 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 15.9316ms
2025-08-22 18:05:27.110 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 18:05:27.112 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:27.113 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 204 null null 2.5718ms
2025-08-22 18:05:27.115 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - application/json 469
2025-08-22 18:05:27.116 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:27.117 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 18:05:27.118 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:27.121 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-08-22 18:05:27.128 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='0f337012-a8ae-4c7d-9f93-5b1f97835ddb', @p1='1b788970-2634-47d4-91c5-1788c14bef32', @p2='1bbd231e-600f-4ef5-b404-7f2e29644448', @p3='4b2501b5-e8c8-41ac-801b-611d8e8063b9', @p4='64dc24bf-41a9-4e92-9c6d-d34cca7bc7fe', @p5='659109b0-9cc2-4f81-af35-f6ae461f06e0', @p6='715569f4-9926-4296-9aaa-df39c834c854', @p7='7793b64f-1127-4b35-b10c-e102b856c48f', @p8='7a4ff1d6-7f43-4900-bf9c-4acd052bb76b', @p9='87832913-bd53-4522-853d-992af49ea3e2', @p10='90ce9387-14bb-4235-8cdd-e20a9dd17cc1', @p11='ad8d7604-57eb-4938-8b8a-6d9e420c9b0f', @p12='b2e04671-3b58-48c7-b2e4-5ead8e5f84c6', @p13='baf3e572-a7f5-4209-93ea-4acd2cc75e7a', @p14='bb610cb3-8e85-4288-b651-bb64e495a487', @p15='cf5e69ff-d975-488b-8a9b-8ac440d4d4cf', @p16='d0f96e95-126b-4c22-a396-dc4bf92fcbc6', @p17='f9ed620b-23d6-4ff0-b4b2-ca2439548a51', @p18='1f581e2d-3bde-4b69-b7ac-f2afe9fcd5e0', @p19='2025-08-22T12:35:27.1241884Z' (DbType = DateTime), @p20='system', @p21='True', @p22='29461562-ef9c-48c0-a606-482ff57b8f95', @p23='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p24='200b6f75-b273-4f98-8701-c9db86911003', @p25='2025-08-22T12:35:27.1241624Z' (DbType = DateTime), @p26='system', @p27='True', @p28='30000000-0000-0000-0000-000000000002', @p29='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p30='341408ab-5c35-45a5-aefe-b37f134d5ed9', @p31='2025-08-22T12:35:27.1242003Z' (DbType = DateTime), @p32='system', @p33='True', @p34='0485154c-dde5-4732-a7aa-a379c77a5b27', @p35='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p36='42f32a76-2066-4b2c-9071-45d40c8b65db', @p37='2025-08-22T12:35:27.1242104Z' (DbType = DateTime), @p38='system', @p39='True', @p40='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p41='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p42='94436a33-e2ee-4532-951d-f78b252ea172', @p43='2025-08-22T12:35:27.1241143Z' (DbType = DateTime), @p44='system', @p45='True', @p46='30000000-0000-0000-0000-000000000003', @p47='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p48='ba30a01c-2856-49ae-b96d-9f9c6b86c0f4', @p49='2025-08-22T12:35:27.1242058Z' (DbType = DateTime), @p50='system', @p51='True', @p52='c819f1bd-422d-4609-916c-cc185fe44ab0', @p53='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p54='cdfdd223-c31c-4c1b-9913-61cc42a2ca1d', @p55='2025-08-22T12:35:27.1242081Z' (DbType = DateTime), @p56='system', @p57='True', @p58='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p59='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p60='d9f244d5-7827-42a4-8783-804333aa2b66', @p61='2025-08-22T12:35:27.1241597Z' (DbType = DateTime), @p62='system', @p63='True', @p64='30000000-0000-0000-0000-000000000001', @p65='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p66='db33fb31-1a27-4c2a-bb93-c3958f4ac52e', @p67='2025-08-22T12:35:27.1241559Z' (DbType = DateTime), @p68='system', @p69='True', @p70='30000000-0000-0000-0000-000000000004', @p71='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p72='dc297468-68b2-49ca-b6fa-e9b52461a4d6', @p73='2025-08-22T12:35:27.1241979Z' (DbType = DateTime), @p74='system', @p75='True', @p76='974af1f9-3caa-4857-a1a7-48462c389332', @p77='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p78='deaa5c57-b032-42ca-b1ed-f21eed0f9130', @p79='2025-08-22T12:35:27.1241937Z' (DbType = DateTime), @p80='system', @p81='True', @p82='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p83='b1ed0526-abd0-472f-a9ea-5bfebeeffe41', @p84='fa6bf65d-8a0e-4083-b155-c33af0d89194', @p85='2025-08-22T12:35:27.1241912Z' (DbType = DateTime), @p86='system', @p87='True', @p88='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p89='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
2025-08-22 18:05:27.131 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:27.132 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 13.1002ms
2025-08-22 18:05:27.133 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-08-22 18:05:27.134 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 19.382ms
2025-08-22 18:05:27.137 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - null null
2025-08-22 18:05:27.139 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:27.140 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:05:27.140 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:27.143 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 18:05:27.145 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 18:05:27.146 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 4.7718ms
2025-08-22 18:05:27.147 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-08-22 18:05:27.148 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/b1ed0526-abd0-472f-a9ea-5bfebeeffe41/permissions - 200 null application/json; charset=utf-8 11.4326ms
2025-08-22 18:05:30.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:30.176 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:30.177 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8635ms
2025-08-22 18:05:30.179 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:30.181 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:30.181 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:30.182 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:30.185 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:05:30.188 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:30.189 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.2931ms
2025-08-22 18:05:30.190 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:30.191 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.1278ms
2025-08-22 18:05:30.220 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:30.222 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:30.223 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:30.223 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:30.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:05:30.229 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:30.230 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3346ms
2025-08-22 18:05:30.231 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:30.232 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.9571ms
2025-08-22 18:05:30.253 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:30.254 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:05:30.255 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:30.257 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:30.258 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.3032ms
2025-08-22 18:05:30.258 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:30.260 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:30.261 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:05:30.263 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:30.265 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:30.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:05:30.267 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:05:30.269 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:30.271 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0292ms
2025-08-22 18:05:30.272 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:05:30.273 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:05:30.274 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:30.275 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.3596ms
2025-08-22 18:05:30.276 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 6.1361ms
2025-08-22 18:05:30.279 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:30.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 19.0379ms
2025-08-22 18:05:36.511 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:36.514 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:36.515 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.422ms
2025-08-22 18:05:36.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:36.527 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:36.528 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:36.529 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:05:36.533 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:05:36.535 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:36.536 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 5.6815ms
2025-08-22 18:05:36.537 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:36.538 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 13.0371ms
2025-08-22 18:05:43.343 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:43.346 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:43.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.3397ms
2025-08-22 18:05:43.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:43.362 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:43.363 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:43.364 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:05:43.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:05:43.369 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:43.370 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 4.8134ms
2025-08-22 18:05:43.371 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:43.372 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 12.2256ms
2025-08-22 18:05:45.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:45.626 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:45.627 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:45.628 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:05:45.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:05:45.634 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:45.636 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 6.3751ms
2025-08-22 18:05:45.637 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:45.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 14.6158ms
2025-08-22 18:05:57.360 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:57.363 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:57.363 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.5201ms
2025-08-22 18:05:57.375 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:05:57.377 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:05:57.379 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:57.380 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:05:57.399 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:05:57.401 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:05:57.402 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 20.5782ms
2025-08-22 18:05:57.403 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:05:57.403 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 28.895ms
2025-08-22 18:06:04.402 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:06:04.405 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:06:04.406 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.5541ms
2025-08-22 18:06:04.423 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:06:04.426 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:06:04.427 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:06:04.428 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:06:04.431 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:06:04.434 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:06:04.435 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 5.2151ms
2025-08-22 18:06:04.436 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:06:04.437 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 13.7436ms
2025-08-22 18:15:27.187 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:15:27.192 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:27.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.3932ms
2025-08-22 18:15:27.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:15:27.201 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:27.202 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:27.203 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:15:27.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:15:27.324 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:15:27.326 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 121.4733ms
2025-08-22 18:15:27.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:27.328 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 129.9822ms
2025-08-22 18:15:31.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:15:31.218 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:31.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:31.220 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:15:31.223 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:15:31.226 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:15:31.228 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.3908ms
2025-08-22 18:15:31.229 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:31.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2259ms
2025-08-22 18:15:31.294 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:15:31.297 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:31.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:31.300 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:15:31.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:15:31.310 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:15:31.311 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6999ms
2025-08-22 18:15:31.313 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:31.314 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.4784ms
2025-08-22 18:15:31.356 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:15:31.358 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 18:15:31.359 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:31.362 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:31.362 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.4436ms
2025-08-22 18:15:31.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:31.373 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:15:31.374 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 18:15:31.376 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:31.379 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:15:31.380 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 18:15:31.382 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:15:31.385 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:15:31.389 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:15:31.390 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1714ms
2025-08-22 18:15:31.393 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:15:31.394 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 18:15:31.396 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 8.5911ms
2025-08-22 18:15:31.398 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 40.1076ms
2025-08-22 18:15:31.399 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:15:31.406 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 33.2903ms
2025-08-22 18:15:34.130 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:15:34.133 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:34.134 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:15:34.136 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:15:34.139 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:15:34.141 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:15:34.143 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 5.5716ms
2025-08-22 18:15:34.144 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:15:34.145 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 14.3581ms
2025-08-22 18:15:36.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 18:15:36.242 +05:30 [INF] CORS policy execution successful.
2025-08-22 18:15:36.243 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:15:36.244 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 18:15:36.248 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 18:15:36.251 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 18:15:36.252 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 6.4514ms
2025-08-22 18:15:36.253 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 18:15:36.254 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 14.6026ms
2025-08-22 19:05:22.133 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 19:05:22.139 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:22.140 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 7.1645ms
2025-08-22 19:05:22.148 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 19:05:22.150 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:22.153 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 01:32:32 PM', Current time (UTC): '22-08-2025 01:35:22 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-22 19:05:22.156 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 01:32:32 PM', Current time (UTC): '22-08-2025 01:35:22 PM'.
2025-08-22 19:05:22.157 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-22 19:05:22.200 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 19:05:22.204 +05:30 [ERR] Response has already started, unable to write error response for path: /api/whatsappsettings/me
2025-08-22 19:05:22.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 401 null application/json 57.0911ms
2025-08-22 19:05:37.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 19:05:37.694 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.695 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.7474ms
2025-08-22 19:05:37.698 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 19:05:37.700 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.701 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:05:37.702 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 19:05:37.705 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 19:05:37.821 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 19:05:37.826 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 19:05:37.833 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 19:05:37.835 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 19:05:37.836 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 19:05:37.837 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 19:05:37.838 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:05:37.839 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 135.4743ms
2025-08-22 19:05:37.840 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:05:37.841 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 142.8508ms
2025-08-22 19:05:37.844 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:05:37.847 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.848 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4205ms
2025-08-22 19:05:37.850 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:05:37.852 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.853 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.854 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:05:37.856 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 19:05:37.861 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:05:37.863 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:05:37.864 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2697ms
2025-08-22 19:05:37.865 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.866 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7958ms
2025-08-22 19:05:37.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:05:37.882 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.883 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.884 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:05:37.887 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:05:37.890 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:05:37.891 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7511ms
2025-08-22 19:05:37.892 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:05:37.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.4737ms
2025-08-22 19:05:37.899 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.904 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.904 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:05:37.908 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:05:37.910 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:05:37.911 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6756ms
2025-08-22 19:05:37.912 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:05:37.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.915 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.916 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.9206ms
2025-08-22 19:05:37.917 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.920 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:05:37.923 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:05:37.928 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:05:37.930 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.5402ms
2025-08-22 19:05:37.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.933 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.7463ms
2025-08-22 19:05:37.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:05:37.947 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:05:37.948 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.950 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:05:37.954 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:05:37.957 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:05:37.958 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8726ms
2025-08-22 19:05:37.960 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:05:37.961 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.2525ms
2025-08-22 19:06:22.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 19:06:22.221 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:06:22.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.3876ms
2025-08-22 19:06:22.226 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 19:06:22.229 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:06:22.230 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:06:22.231 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 19:06:22.232 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 19:06:22.234 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 19:06:22.237 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 19:06:22.239 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 19:06:22.240 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 19:06:22.240 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 19:06:22.241 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:06:22.242 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 10.269ms
2025-08-22 19:06:22.243 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:06:22.244 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 17.4531ms
2025-08-22 19:06:22.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:06:22.250 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:06:22.250 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.4205ms
2025-08-22 19:06:22.253 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:06:22.254 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:06:22.255 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:06:22.256 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:06:22.257 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:06:22.258 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.3402ms
2025-08-22 19:06:22.259 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:06:22.260 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 7.5799ms
2025-08-22 19:06:22.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:06:22.352 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:06:22.353 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:06:22.354 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:06:22.356 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:06:22.357 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.5584ms
2025-08-22 19:06:22.358 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:06:22.359 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 9.459ms
2025-08-22 19:06:31.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 19:06:31.692 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:06:31.693 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.5625ms
2025-08-22 19:06:31.696 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 19:06:31.697 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:06:31.698 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 19:06:31.699 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 19:06:31.727 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 26.0735ms
2025-08-22 19:06:31.728 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 19:06:31.751 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings() in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppSettingsController.cs:line 85
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 19:06:31.760 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 500 null application/json; charset=utf-8 64.6705ms
2025-08-22 19:07:38.224 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 19:07:38.226 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.227 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9745ms
2025-08-22 19:07:38.229 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 19:07:38.231 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.232 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:07:38.233 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 19:07:38.236 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 19:07:38.239 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 19:07:38.243 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 19:07:38.247 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 19:07:38.249 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 19:07:38.249 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 19:07:38.250 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 19:07:38.252 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:38.253 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 18.2626ms
2025-08-22 19:07:38.254 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:07:38.255 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 25.6375ms
2025-08-22 19:07:38.258 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:07:38.260 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.2746ms
2025-08-22 19:07:38.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:07:38.264 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.265 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.265 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:07:38.269 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:07:38.271 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:38.272 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5884ms
2025-08-22 19:07:38.273 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.274 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.7995ms
2025-08-22 19:07:38.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:07:38.289 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.290 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.291 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:07:38.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:07:38.297 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:38.298 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7486ms
2025-08-22 19:07:38.299 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:07:38.299 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.301 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.302 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.2889ms
2025-08-22 19:07:38.303 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.306 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:07:38.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:07:38.313 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:38.314 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5625ms
2025-08-22 19:07:38.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:07:38.315 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.317 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.4562ms
2025-08-22 19:07:38.318 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.321 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:07:38.325 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:07:38.327 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:38.328 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.676ms
2025-08-22 19:07:38.329 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.330 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7661ms
2025-08-22 19:07:38.411 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:07:38.414 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.415 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.417 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:07:38.422 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:07:38.425 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:38.426 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.7001ms
2025-08-22 19:07:38.426 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:07:38.427 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.429 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:38.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.5551ms
2025-08-22 19:07:38.430 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.433 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:07:38.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:07:38.439 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:38.440 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5303ms
2025-08-22 19:07:38.441 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:07:38.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5715ms
2025-08-22 19:07:44.536 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 19:07:44.538 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:44.539 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.0732ms
2025-08-22 19:07:44.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 19:07:44.544 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:07:44.544 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 19:07:44.545 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 19:07:44.568 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 19:07:44.570 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:07:44.571 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 23.7047ms
2025-08-22 19:07:44.572 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 19:07:44.573 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 31.2027ms
2025-08-22 19:13:11.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-22 19:13:11.973 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:13:11.973 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 7.5724ms
2025-08-22 19:13:11.975 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 481
2025-08-22 19:13:11.977 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:13:11.978 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-22 19:13:11.997 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 19:13:12.030 +05:30 [INF] 🔧 [UpdateSetting] Request received for WhatsApp settings update.
2025-08-22 19:13:12.032 +05:30 [INF] 💾 [UpdateSetting] Saving/updating WhatsApp settings for businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d".
2025-08-22 19:13:12.152 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-22 19:13:12.199 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='8ed44a85-eb06-4f76-b64f-d72122e1621f', @p1='EAAUbmP4285YBPFfZBmAgE2EoyHx12Q0ZCLoUlsrp5fIj4hSU9EfYWF4MQyDaxYhQ8u4iOdSSqLvXOZBsZBXtGbZCLIO3XwLVhcqZA2U3wcaMZCZCr9Gq5u7ZB2BUgc9RZC0gJiVoxwWzYk1VmUZB92QmZAZAkmrQcByBRxQokViQZCISgzZBLKRNaRTVeR1dVMbL4EZBZBL66XLh6Nxo7DLGIDDxcQaZAn3lHtJKfvuDdupnfJEGnsIaPOUpY0fzxSdDoZCKyv1kgZDZD' (Nullable = false), @p2='https://graph.facebook.com/v22.0/' (Nullable = false), @p3='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p4='2025-08-22T13:43:12.1548759Z' (DbType = DateTime), @p5='True', @p6='673199269218077', @p7='BusiOrbit', @p8=NULL (DbType = DateTime), @p9='744548247936621', @p10='5551622077' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppSettings" ("Id", "ApiToken", "ApiUrl", "BusinessId", "CreatedAt", "IsActive", "PhoneNumberId", "SenderDisplayName", "UpdatedAt", "WabaId", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-22 19:13:12.202 +05:30 [INF] ✅ [UpdateSetting] WhatsApp settings updated successfully.
2025-08-22 19:13:12.203 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:13:12.204 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 205.0847ms
2025-08-22 19:13:12.204 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-22 19:13:12.205 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 229.7933ms
2025-08-22 19:13:13.434 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-22 19:13:13.437 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:13:13.437 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 2.9275ms
2025-08-22 19:13:13.439 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 481
2025-08-22 19:13:13.441 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:13:13.442 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 19:13:13.445 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 19:13:15.054 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:13:15.056 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1609.1103ms
2025-08-22 19:13:15.057 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 19:13:15.058 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1618.2327ms
2025-08-22 19:14:48.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 19:14:48.556 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:14:48.557 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 3.734ms
2025-08-22 19:14:48.562 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 19:14:48.571 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 19:14:48.576 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:14:48.577 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:14:48.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 15.7584ms
2025-08-22 19:14:48.579 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 19:14:48.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 19:14:48.587 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:14:48.588 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 19:14:48.592 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 19:14:48.593 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-22 19:14:48.604 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-22 19:14:48.633 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-22 19:14:48.636 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:14:48.650 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 56.0787ms
2025-08-22 19:14:48.651 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 19:14:48.652 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 69.9021ms
2025-08-22 19:14:48.774 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 19:14:48.812 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 19:14:48.815 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 19:14:48.820 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 226.5971ms
2025-08-22 19:14:48.821 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 19:14:48.822 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 251.3083ms
2025-08-22 19:15:02.503 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 19:15:02.505 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:02.505 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 2.7096ms
2025-08-22 19:15:02.509 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 19:15:02.511 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:02.511 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 19:15:02.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 3.4289ms
2025-08-22 19:15:02.514 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:02.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 19:15:02.518 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 19:15:02.519 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:02.520 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 19:15:02.520 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 19:15:02.522 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-22 19:15:02.522 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-22 19:15:02.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 19:15:02.532 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 19:15:02.533 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-22 19:15:02.536 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 19:15:02.538 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:15:02.538 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 16.9598ms
2025-08-22 19:15:02.539 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 13.14ms
2025-08-22 19:15:02.540 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 19:15:02.541 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 19:15:02.542 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 30.8335ms
2025-08-22 19:15:02.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 26.29ms
2025-08-22 19:15:08.949 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - null null
2025-08-22 19:15:08.952 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:08.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/logs - 204 null null 3.5563ms
2025-08-22 19:15:08.963 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/logs - null null
2025-08-22 19:15:08.966 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:08.967 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-22 19:15:08.971 +05:30 [INF] Route matched with {action = "GetAll", controller = "TrackingViewer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid]) on controller xbytechat.api.Features.Tracking.Controllers.TrackingViewerController (xbytechat.api).
2025-08-22 19:15:09.005 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."ContactPhone", CASE
    WHEN c."Id" IS NOT NULL THEN c."Name"
    ELSE '(N/A)'
END AS "ContactName", t."ButtonText", t."CTAType", t."SourceType", t."ClickedAt", t."DeviceType", t."Country", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE '(Unknown)'
END AS "CampaignName"
FROM "TrackingLogs" AS t
LEFT JOIN "Contacts" AS c ON t."ContactId" = c."Id"
LEFT JOIN "Campaigns" AS c0 ON t."CampaignId" = c0."Id"
ORDER BY t."ClickedAt" DESC
2025-08-22 19:15:09.008 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType77`10[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:15:09.013 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api) in 40.3393ms
2025-08-22 19:15:09.014 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingViewerController.GetAll (xbytechat.api)'
2025-08-22 19:15:09.015 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/logs - 200 null application/json; charset=utf-8 52.4264ms
2025-08-22 19:15:12.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-22 19:15:12.542 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - null null
2025-08-22 19:15:12.544 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:12.546 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:12.546 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 4.4928ms
2025-08-22 19:15:12.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?negotiateVersion=1 - 204 null null 5.0023ms
2025-08-22 19:15:12.564 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-08-22 19:15:12.564 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-08-22 19:15:12.567 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:12.569 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:12.569 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 5.1618ms
2025-08-22 19:15:12.570 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 5.6533ms
2025-08-22 19:15:12.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-08-22 19:15:12.580 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-08-22 19:15:12.582 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:12.584 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-22 19:15:12.584 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:12.585 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-22 19:15:12.587 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 19:15:12.590 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-08-22 19:15:12.591 +05:30 [INF] GetAllContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all
2025-08-22 19:15:12.603 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-08-22 19:15:12.605 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."UserId" = @__userId_0
2025-08-22 19:15:12.606 +05:30 [INF] GetAllContactsAsync returned 0 contacts
2025-08-22 19:15:12.609 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 19:15:12.612 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 22.883ms
2025-08-22 19:15:12.613 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-08-22 19:15:12.614 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 35.4693ms
2025-08-22 19:15:12.616 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL
2025-08-22 19:15:12.621 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:15:12.625 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 34.0709ms
2025-08-22 19:15:12.626 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-08-22 19:15:12.627 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 47.3702ms
2025-08-22 19:15:14.346 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 19:15:14.348 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:14.349 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 2.8379ms
2025-08-22 19:15:14.357 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 19:15:14.360 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:14.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 19:15:14.361 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 4.0718ms
2025-08-22 19:15:14.363 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:14.366 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 19:15:14.367 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 19:15:14.369 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:15:14.370 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 19:15:14.371 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 19:15:14.373 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-22 19:15:14.374 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-22 19:15:14.377 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 19:15:14.382 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-22 19:15:14.385 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 19:15:14.386 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:15:14.388 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 19:15:14.389 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 11.0805ms
2025-08-22 19:15:14.391 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 18.1523ms
2025-08-22 19:15:14.392 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 19:15:14.393 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 19:15:14.394 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 27.5746ms
2025-08-22 19:15:14.395 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 34.716ms
2025-08-22 19:16:38.172 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 19:16:38.178 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:16:38.179 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.774ms
2025-08-22 19:16:38.184 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 19:16:38.186 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:16:38.187 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:16:38.188 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 19:16:38.190 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-22 19:16:38.193 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 19:16:38.196 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 19:16:38.198 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:16:38.200 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 10.2857ms
2025-08-22 19:16:38.201 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:16:38.201 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json; charset=utf-8 17.7229ms
2025-08-22 19:21:21.425 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 19:21:21.433 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.434 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 8.4327ms
2025-08-22 19:21:21.440 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 19:21:21.442 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.443 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:21:21.444 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 19:21:21.446 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-22 19:21:21.555 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 19:21:21.559 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 19:21:21.564 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 19:21:21.566 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-22 19:21:21.569 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 19:21:21.570 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 19:21:21.570 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:21:21.571 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 125.6573ms
2025-08-22 19:21:21.572 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 19:21:21.573 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 133.3741ms
2025-08-22 19:21:21.576 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:21:21.578 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.578 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.5362ms
2025-08-22 19:21:21.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:21:21.583 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.583 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.584 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:21:21.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:21:21.589 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:21:21.590 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.6242ms
2025-08-22 19:21:21.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.591 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.4533ms
2025-08-22 19:21:21.609 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:21:21.613 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.613 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.614 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:21:21.618 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:21:21.621 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:21:21.622 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.4004ms
2025-08-22 19:21:21.623 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4168ms
2025-08-22 19:21:21.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:21:21.659 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.660 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.661 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:21:21.666 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:21:21.670 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:21:21.672 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.2405ms
2025-08-22 19:21:21.674 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.674 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:21:21.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.361ms
2025-08-22 19:21:21.689 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.694 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.696 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:21:21.701 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:21:21.706 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:21:21.707 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4778ms
2025-08-22 19:21:21.710 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.711 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.9422ms
2025-08-22 19:21:21.727 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:21:21.730 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.732 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.734 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:21:21.737 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:21:21.739 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:21:21.741 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.3194ms
2025-08-22 19:21:21.742 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.745 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4822ms
2025-08-22 19:21:21.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 19:21:21.819 +05:30 [INF] CORS policy execution successful.
2025-08-22 19:21:21.819 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.820 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 19:21:21.823 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 19:21:21.826 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 19:21:21.827 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5665ms
2025-08-22 19:21:21.828 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 19:21:21.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.3086ms
2025-08-22 20:59:11.928 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:11.949 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:11.950 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 22.9611ms
2025-08-22 20:59:11.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:11.969 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:11.971 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 02:51:21 PM', Current time (UTC): '22-08-2025 03:29:11 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-22 20:59:11.976 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '22-08-2025 02:51:21 PM', Current time (UTC): '22-08-2025 03:29:11 PM'.
2025-08-22 20:59:11.978 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-22 20:59:12.056 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 20:59:12.063 +05:30 [ERR] Response has already started, unable to write error response for path: /api/plan/me/permissions
2025-08-22 20:59:12.065 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 401 null application/json 100.1313ms
2025-08-22 20:59:24.938 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 20:59:24.947 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:24.949 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 10.2465ms
2025-08-22 20:59:24.953 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 20:59:24.959 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:24.961 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 20:59:24.962 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 20:59:24.966 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-22 20:59:25.184 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 20:59:25.190 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 20:59:25.200 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 20:59:25.204 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-22 20:59:25.205 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 20:59:25.206 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 20:59:25.209 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:25.210 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 245.4636ms
2025-08-22 20:59:25.212 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 20:59:25.214 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 260.5085ms
2025-08-22 20:59:25.220 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:25.224 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:25.225 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0978ms
2025-08-22 20:59:25.232 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:25.235 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:25.237 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.238 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 20:59:25.244 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 20:59:25.251 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 20:59:25.261 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:25.263 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 21.8505ms
2025-08-22 20:59:25.266 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.267 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.4695ms
2025-08-22 20:59:25.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:25.299 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:25.301 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.303 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 20:59:25.310 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 20:59:25.315 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:25.318 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.0199ms
2025-08-22 20:59:25.320 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:25.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.3328ms
2025-08-22 20:59:25.334 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:25.340 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.342 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 20:59:25.348 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 20:59:25.353 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:25.356 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8125ms
2025-08-22 20:59:25.357 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:25.358 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.362 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:25.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.3691ms
2025-08-22 20:59:25.365 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.372 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 20:59:25.378 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 20:59:25.384 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:25.385 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4864ms
2025-08-22 20:59:25.387 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.389 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.8052ms
2025-08-22 20:59:25.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:25.444 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:25.446 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.448 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 20:59:25.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 20:59:25.459 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:25.462 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8832ms
2025-08-22 20:59:25.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.466 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.9911ms
2025-08-22 20:59:25.529 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 20:59:25.533 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:25.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.536 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 20:59:25.543 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 20:59:25.549 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:25.552 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4655ms
2025-08-22 20:59:25.554 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 20:59:25.556 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.1349ms
2025-08-22 20:59:28.029 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 20:59:28.034 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:28.035 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.1094ms
2025-08-22 20:59:28.049 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 20:59:28.053 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:28.055 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 20:59:28.057 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 20:59:28.063 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 20:59:28.068 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-22 20:59:28.078 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 18.7268ms
2025-08-22 20:59:28.081 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 20:59:28.083 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 34.4635ms
2025-08-22 20:59:39.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-22 20:59:39.240 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:39.241 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 9.8429ms
2025-08-22 20:59:39.247 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 472
2025-08-22 20:59:39.250 +05:30 [INF] CORS policy execution successful.
2025-08-22 20:59:39.251 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 20:59:39.252 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 20:59:42.932 +05:30 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType141`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 20:59:42.937 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 3682.2621ms
2025-08-22 20:59:42.939 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 20:59:42.940 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 500 null application/json; charset=utf-8 3693.4849ms
2025-08-22 21:00:11.161 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-22 21:00:11.165 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:11.166 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.2605ms
2025-08-22 21:00:11.199 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 470
2025-08-22 21:00:11.202 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:11.204 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-22 21:00:11.206 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 21:00:11.209 +05:30 [INF] 🔧 [UpdateSetting] Request received for WhatsApp settings update.
2025-08-22 21:00:11.210 +05:30 [INF] 💾 [UpdateSetting] Saving/updating WhatsApp settings for businessId="c13be597-6ae2-42bb-9d43-925815f24ff8".
2025-08-22 21:00:11.214 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-22 21:00:11.251 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='36de2595-f729-4b07-9958-11c8a56db12f', @p0='EAAUbmP4285YBPNZBOrWoxIMAah18Hm8eGNJDPKnxWXkA4dNVCJ0wn3EAPI5N5TSBJr0EZAdI1MGFx3Ql2jV4leUyOcwZAfzRcJkWcZB1rcKHHYaEG35tOe7J6ZAvBSorLZA2MDFBkPdEkMHSsB09nWwnTeA62UiZCQPJlPa55cUp6lYVo48SPAqNIA1xs82ZAfj3W7sPo2UsSXOnpsLS4L4tIubTwIfPODVB52N3d4EFl4PPBVkL6MSYFVec26yhrAIZD' (Nullable = false), @p1='2025-08-22T15:30:11.2190198Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-22 21:00:11.257 +05:30 [INF] ✅ [UpdateSetting] WhatsApp settings updated successfully.
2025-08-22 21:00:11.258 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:00:11.260 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 51.5599ms
2025-08-22 21:00:11.262 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-22 21:00:11.264 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 65.0371ms
2025-08-22 21:00:12.306 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-22 21:00:12.310 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:12.311 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.8409ms
2025-08-22 21:00:12.316 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 470
2025-08-22 21:00:12.323 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:12.325 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 21:00:12.326 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 21:00:14.421 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:00:14.423 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 2095.0729ms
2025-08-22 21:00:14.425 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 21:00:14.427 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 2110.8127ms
2025-08-22 21:00:20.340 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:00:20.344 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:20.347 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 6.1175ms
2025-08-22 21:00:20.349 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 21:00:20.356 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:00:20.369 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:20.372 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:20.373 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 23.4311ms
2025-08-22 21:00:20.374 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:00:20.378 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-22 21:00:20.380 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:00:20.383 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:20.386 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:00:20.387 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 21:00:20.391 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-22 21:00:20.393 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:00:20.437 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:00:20.574 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:00:20.584 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 198.3131ms
2025-08-22 21:00:20.586 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:00:20.588 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 231.7206ms
2025-08-22 21:00:20.621 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-22 21:00:20.626 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType58`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:00:20.630 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 226.8735ms
2025-08-22 21:00:20.633 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-22 21:00:20.634 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 255.6719ms
2025-08-22 21:00:30.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-22 21:00:30.207 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:30.208 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 5.8294ms
2025-08-22 21:00:30.212 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 54
2025-08-22 21:00:30.216 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:00:30.217 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:00:30.227 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:00:30.335 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+917082156227
2025-08-22 21:00:30.354 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+917082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-22 21:00:30.358 +05:30 [INF] Contact already exists: contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-08-22 21:00:30.613 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-22 21:00:30.635 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:00:30.643 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:00:33.238 +05:30 [INF] Received HTTP response headers after 2571.7378ms - 200
2025-08-22 21:00:33.242 +05:30 [INF] End processing HTTP request after 2610.8201ms - 200
2025-08-22 21:00:33.525 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='f737d94b-fcd5-482f-8e02-ef2fb2ac445e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-22T15:30:33.4191018Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hi' (Nullable = false), @p11='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNkE5MkJENjIwQzhEQTBBM0UyAA==', @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+917082156227\",\"wa_id\":\"917082156227\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNkE5MkJENjIwQzhEQTBBM0UyAA==\"}]}","MessageId":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNkE5MkJENjIwQzhEQTBBM0UyAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='hi', @p16='2025-08-22T15:30:33.4192119Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:00:33.531 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:00:33.538 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3308.417ms
2025-08-22 21:00:33.540 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:00:33.542 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 3329.3559ms
2025-08-22 21:01:02.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-22 21:01:02.339 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:01:02.341 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 7.28ms
2025-08-22 21:01:02.345 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 54
2025-08-22 21:01:02.348 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:01:02.349 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:01:02.352 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:01:02.376 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+917082156227
2025-08-22 21:01:02.383 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+917082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-22 21:01:02.386 +05:30 [INF] Contact already exists: contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-08-22 21:01:02.388 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:01:02.390 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:01:03.517 +05:30 [INF] Received HTTP response headers after 1125.6511ms - 200
2025-08-22 21:01:03.519 +05:30 [INF] End processing HTTP request after 1130.2979ms - 200
2025-08-22 21:01:03.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d4ef3441-95fd-4719-8b40-15acc66b3351', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-22T15:31:03.5355502Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hi' (Nullable = false), @p11='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSREJFNTI2NUVFNzAwMDM2OTFBAA==', @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+917082156227\",\"wa_id\":\"917082156227\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSREJFNTI2NUVFNzAwMDM2OTFBAA==\"}]}","MessageId":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSREJFNTI2NUVFNzAwMDM2OTFBAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='hi', @p16='2025-08-22T15:31:03.5355505Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:01:03.541 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:01:03.543 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1189.2802ms
2025-08-22 21:01:03.548 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:01:03.550 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1204.9616ms
2025-08-22 21:01:03.557 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 51
2025-08-22 21:01:03.560 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:01:03.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:01:03.564 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:01:03.572 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=7082156227
2025-08-22 21:01:03.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='7082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-22 21:01:03.581 +05:30 [INF] Contact already exists: contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-08-22 21:01:03.583 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:01:03.584 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:01:04.582 +05:30 [INF] Received HTTP response headers after 996.1076ms - 400
2025-08-22 21:01:04.584 +05:30 [INF] End processing HTTP request after 1001.4393ms - 400
2025-08-22 21:01:04.608 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='5bd65bf1-bc2c-4f40-ae70-fe3f8008a6c2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true), @p6='2025-08-22T15:31:04.5893620Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hi' (Nullable = false), @p11=NULL, @p12='{"Success":false,"Message":"❌ WhatsApp API returned an error.","Data":null,"ErrorMessage":"API returned error","RawResponse":"{\"error\":{\"message\":\"(#131030) Recipient phone number not in allowed list\",\"type\":\"OAuthException\",\"code\":131030,\"error_data\":{\"messaging_product\":\"whatsapp\",\"details\":\"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again.\"},\"fbtrace_id\":\"A_8sc_9UGjX_sfBEAmVTIhE\"}}","MessageId":null,"LogId":null,"Token":null,"RefreshToken":null}', @p13='7082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='hi', @p16='2025-08-22T15:31:04.5893622Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:01:04.611 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:01:04.613 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1045.7306ms
2025-08-22 21:01:04.615 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:01:04.617 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1060.0409ms
2025-08-22 21:02:01.550 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-22 21:02:01.555 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:01.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 10.4859ms
2025-08-22 21:02:01.572 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 54
2025-08-22 21:02:01.576 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:01.577 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:01.579 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:02:01.581 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+917082156227
2025-08-22 21:02:01.586 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+917082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-22 21:02:01.591 +05:30 [INF] Contact already exists: contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-08-22 21:02:01.593 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:01.596 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:02.900 +05:30 [INF] Received HTTP response headers after 1302.6807ms - 200
2025-08-22 21:02:02.902 +05:30 [INF] End processing HTTP request after 1308.4629ms - 200
2025-08-22 21:02:02.925 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='9ec8ed84-7f86-48ca-9dac-ca75f3737a28', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-22T15:32:02.9054207Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hi' (Nullable = false), @p11='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSQjgwQTc1NjI1MDg1RDM2RjAwAA==', @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+917082156227\",\"wa_id\":\"917082156227\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSQjgwQTc1NjI1MDg1RDM2RjAwAA==\"}]}","MessageId":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSQjgwQTc1NjI1MDg1RDM2RjAwAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='hi', @p16='2025-08-22T15:32:02.9054210Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:02:02.930 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:02:02.933 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1352.3784ms
2025-08-22 21:02:02.935 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:02.937 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1366.0863ms
2025-08-22 21:02:02.942 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 51
2025-08-22 21:02:02.946 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:02.950 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:02.953 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:02:02.955 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=7082156227
2025-08-22 21:02:02.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='7082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-22 21:02:02.966 +05:30 [INF] Contact already exists: contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-08-22 21:02:02.968 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:02.969 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:03.922 +05:30 [INF] Received HTTP response headers after 950.606ms - 400
2025-08-22 21:02:03.924 +05:30 [INF] End processing HTTP request after 955.8323ms - 400
2025-08-22 21:02:03.946 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p0='88b32b58-07bb-4aed-a3fc-916473f8d14e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true), @p6='2025-08-22T15:32:03.9288067Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hi' (Nullable = false), @p11=NULL, @p12='{"Success":false,"Message":"❌ WhatsApp API returned an error.","Data":null,"ErrorMessage":"API returned error","RawResponse":"{\"error\":{\"message\":\"(#131030) Recipient phone number not in allowed list\",\"type\":\"OAuthException\",\"code\":131030,\"error_data\":{\"messaging_product\":\"whatsapp\",\"details\":\"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again.\"},\"fbtrace_id\":\"AM59fekHzNh5XQ9OccfPV9y\"}}","MessageId":null,"LogId":null,"Token":null,"RefreshToken":null}', @p13='7082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='hi', @p16='2025-08-22T15:32:03.9288069Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:02:03.950 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:02:03.952 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 996.7891ms
2025-08-22 21:02:03.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:03.955 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1012.8127ms
2025-08-22 21:02:12.895 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-22 21:02:12.899 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:12.901 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 5.6118ms
2025-08-22 21:02:12.907 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 51
2025-08-22 21:02:12.912 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:12.914 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:12.916 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:02:12.920 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=7082156227
2025-08-22 21:02:12.926 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='7082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-22 21:02:12.931 +05:30 [INF] Contact already exists: contactId="867c9c9b-f85e-4572-9bbd-4447b44597b7"
2025-08-22 21:02:12.933 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:12.935 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:15.595 +05:30 [INF] Received HTTP response headers after 2658.21ms - 400
2025-08-22 21:02:15.597 +05:30 [INF] End processing HTTP request after 2664.0901ms - 400
2025-08-22 21:02:15.622 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='b08516f8-4468-4240-b888-cf27c8c1a65f', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='867c9c9b-f85e-4572-9bbd-4447b44597b7' (Nullable = true), @p6='2025-08-22T15:32:15.6011308Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hi' (Nullable = false), @p11=NULL, @p12='{"Success":false,"Message":"❌ WhatsApp API returned an error.","Data":null,"ErrorMessage":"API returned error","RawResponse":"{\"error\":{\"message\":\"(#131030) Recipient phone number not in allowed list\",\"type\":\"OAuthException\",\"code\":131030,\"error_data\":{\"messaging_product\":\"whatsapp\",\"details\":\"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again.\"},\"fbtrace_id\":\"AHwKcJH3iVMP1kG-Vm5BatB\"}}","MessageId":null,"LogId":null,"Token":null,"RefreshToken":null}', @p13='7082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='hi', @p16='2025-08-22T15:32:15.6011310Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:02:15.627 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:02:15.629 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2709.2206ms
2025-08-22 21:02:15.631 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:15.632 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 2725.1262ms
2025-08-22 21:02:22.630 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-22 21:02:22.634 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:22.635 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 5.1161ms
2025-08-22 21:02:22.640 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 54
2025-08-22 21:02:22.644 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:22.645 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:22.647 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:02:22.650 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+917082156227
2025-08-22 21:02:22.654 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+917082156227'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-22 21:02:22.660 +05:30 [INF] Contact already exists: contactId="8aac7c57-6699-4511-897b-4121b407eb1c"
2025-08-22 21:02:22.662 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:22.663 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:02:23.888 +05:30 [INF] Received HTTP response headers after 1224.0667ms - 200
2025-08-22 21:02:23.891 +05:30 [INF] End processing HTTP request after 1229.3711ms - 200
2025-08-22 21:02:23.915 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='6c9fd128-9080-4ec1-8c9b-d0463eb55a7b', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-22T15:32:23.8949024Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hi' (Nullable = false), @p11='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTM3NzUwMUM0NEZBREEwODJEAA==', @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+917082156227\",\"wa_id\":\"917082156227\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTM3NzUwMUM0NEZBREEwODJEAA==\"}]}","MessageId":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTM3NzUwMUM0NEZBREEwODJEAA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='hi', @p16='2025-08-22T15:32:23.8949028Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:02:23.918 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:02:23.920 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1271.2655ms
2025-08-22 21:02:23.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-22 21:02:23.924 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1283.6925ms
2025-08-22 21:02:42.353 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:02:42.357 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:42.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 5.3822ms
2025-08-22 21:02:42.363 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:02:42.367 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:02:42.368 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:02:42.369 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:02:42.372 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:02:42.376 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:02:42.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:02:42.388 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:02:42.390 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 18.7477ms
2025-08-22 21:02:42.392 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:02:42.393 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 30.5906ms
2025-08-22 21:42:07.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:42:07.043 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:07.044 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 13.7949ms
2025-08-22 21:42:07.049 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:42:07.052 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:07.054 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:42:07.056 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:42:07.286 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:42:07.290 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:42:07.292 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 233.8027ms
2025-08-22 21:42:07.294 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:42:07.296 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 247.0399ms
2025-08-22 21:42:07.306 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:42:07.310 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:07.312 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:42:07.314 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:42:07.319 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:42:07.325 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:42:07.326 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5282ms
2025-08-22 21:42:07.329 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:42:07.331 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.0613ms
2025-08-22 21:42:07.374 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:42:07.376 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:42:07.391 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:07.395 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:07.396 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 22.162ms
2025-08-22 21:42:07.399 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:42:07.404 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:42:07.404 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:42:07.410 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:42:07.415 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:07.418 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:42:07.419 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:42:07.421 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.5219ms
2025-08-22 21:42:07.423 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:42:07.425 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:42:07.427 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:42:07.429 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 53.1649ms
2025-08-22 21:42:07.434 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:42:07.447 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:42:07.452 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:42:07.454 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 27.673ms
2025-08-22 21:42:07.457 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:42:07.459 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 55.2213ms
2025-08-22 21:42:26.515 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-22 21:42:26.520 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:26.521 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.7202ms
2025-08-22 21:42:26.534 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-22 21:42:26.541 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:26.543 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-22 21:42:26.555 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-22 21:42:26.608 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-22 21:42:26.613 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 21:42:26.619 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 60.468ms
2025-08-22 21:42:26.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-22 21:42:26.623 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 89.2084ms
2025-08-22 21:42:51.056 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:42:51.060 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:51.062 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 6.0035ms
2025-08-22 21:42:51.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:42:51.071 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:51.073 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:42:51.074 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:42:51.078 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:42:51.083 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:42:51.098 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:42:51.106 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:42:51.111 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 34.2106ms
2025-08-22 21:42:51.115 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:42:51.117 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 50.0954ms
2025-08-22 21:42:58.512 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-22 21:42:58.515 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:58.516 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 204 null null 4.6401ms
2025-08-22 21:42:58.527 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - null null
2025-08-22 21:42:58.531 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:42:58.532 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-22 21:42:58.553 +05:30 [INF] Route matched with {action = "GetPaginatedCampaigns", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPaginatedCampaigns(xbytechat.api.Shared.PaginatedRequest) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-22 21:42:58.589 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
2025-08-22 21:42:58.600 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
LIMIT @__p_2 OFFSET @__p_1
2025-08-22 21:42:58.607 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Shared.PaginatedResponse`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-22 21:42:58.612 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api) in 54.9946ms
2025-08-22 21:42:58.615 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetPaginatedCampaigns (xbytechat.api)'
2025-08-22 21:42:58.616 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/paginated?page=1&pageSize=10&status= - 200 null application/json; charset=utf-8 89.6055ms
2025-08-22 21:43:18.616 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 21:43:18.622 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:18.623 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.8228ms
2025-08-22 21:43:18.633 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 21:43:18.636 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:18.637 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:43:18.642 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 21:43:18.646 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 21:43:18.651 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 21:43:18.666 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 21:43:18.668 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 21:43:18.670 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 21:43:18.672 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 21:43:18.674 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:18.675 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 30.9974ms
2025-08-22 21:43:18.677 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:43:18.678 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 45.8446ms
2025-08-22 21:43:18.685 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:18.688 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:18.689 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.2414ms
2025-08-22 21:43:18.693 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:18.697 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:18.698 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:18.700 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:18.703 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:18.705 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.1477ms
2025-08-22 21:43:18.706 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:18.708 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.7406ms
2025-08-22 21:43:18.806 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:18.812 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:18.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:18.815 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:18.817 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:18.818 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.6985ms
2025-08-22 21:43:18.824 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:18.825 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.4447ms
2025-08-22 21:43:48.860 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 21:43:48.865 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:48.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.0711ms
2025-08-22 21:43:48.873 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 21:43:48.877 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:48.878 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:43:48.880 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 21:43:48.886 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 21:43:48.889 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 21:43:48.905 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 21:43:48.915 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 21:43:48.918 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 21:43:48.920 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 21:43:48.922 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 21:43:48.923 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:48.925 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 39.8601ms
2025-08-22 21:43:48.927 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:43:48.929 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 55.9765ms
2025-08-22 21:43:48.935 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:48.938 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:48.939 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1357ms
2025-08-22 21:43:48.944 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:48.948 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:48.950 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:48.951 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:48.957 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:43:48.961 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:48.963 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.869ms
2025-08-22 21:43:48.967 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:48.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.4915ms
2025-08-22 21:43:48.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:48.998 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:49.000 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.002 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:49.008 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:43:49.012 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:49.014 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.61ms
2025-08-22 21:43:49.016 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.017 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:49.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.8242ms
2025-08-22 21:43:49.023 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:49.029 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.030 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:49.041 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:43:49.046 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:49.048 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4599ms
2025-08-22 21:43:49.050 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.051 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:49.052 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.6175ms
2025-08-22 21:43:49.057 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:49.062 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.065 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:49.070 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:43:49.075 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:49.077 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.7134ms
2025-08-22 21:43:49.079 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.082 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.0932ms
2025-08-22 21:43:49.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:49.120 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:49.122 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.124 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:49.130 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:43:49.134 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:49.136 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.068ms
2025-08-22 21:43:49.138 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.140 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.7526ms
2025-08-22 21:43:49.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:43:49.239 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:43:49.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.241 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:43:49.249 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:43:49.253 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:43:49.255 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8784ms
2025-08-22 21:43:49.258 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:43:49.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.1332ms
2025-08-22 21:44:05.429 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:44:05.432 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:44:05.433 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:05.436 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:05.437 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 7.8972ms
2025-08-22 21:44:05.438 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 6.1121ms
2025-08-22 21:44:05.450 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:44:05.453 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:05.453 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:44:05.454 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:44:05.460 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:44:05.460 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:05.463 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-22 21:44:05.463 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:44:05.470 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:44:05.482 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:44:05.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:44:05.488 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:44:05.491 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 28.5837ms
2025-08-22 21:44:05.494 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:44:05.496 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 46.3876ms
2025-08-22 21:44:05.515 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:44:05.520 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:44:05.522 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:44:22.576 +05:30 [INF] Received HTTP response headers after 17052.8581ms - 401
2025-08-22 21:44:22.597 +05:30 [INF] End processing HTTP request after 17076.6911ms - 401
2025-08-22 21:44:22.600 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:14:07 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ABOcJqSQZSmD5mFj1zUUFdx"}}
2025-08-22 21:44:22.601 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:14:07 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ABOcJqSQZSmD5mFj1zUUFdx"}}
2025-08-22 21:44:22.603 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:44:22.605 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:44:23.589 +05:30 [INF] Received HTTP response headers after 982.0879ms - 200
2025-08-22 21:44:23.591 +05:30 [INF] End processing HTTP request after 987.6167ms - 200
2025-08-22 21:44:23.593 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:44:23.635 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:44:23.649 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 18163.6809ms
2025-08-22 21:44:23.651 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:44:23.653 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 499 null application/json; charset=utf-8 18199.8115ms
2025-08-22 21:44:42.166 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:44:42.170 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:42.172 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7247ms
2025-08-22 21:44:42.177 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:44:42.180 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:42.181 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:42.183 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:44:42.189 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:44:42.195 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:44:42.197 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.9398ms
2025-08-22 21:44:42.199 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:42.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3511ms
2025-08-22 21:44:42.345 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:44:42.349 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:42.351 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:42.352 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:44:42.362 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:44:42.368 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:44:42.370 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.0044ms
2025-08-22 21:44:42.375 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:42.377 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.0659ms
2025-08-22 21:44:57.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 21:44:57.080 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:57.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 8.3728ms
2025-08-22 21:44:57.088 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 21:44:57.096 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:57.097 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:44:57.099 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 21:44:57.103 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 21:44:57.106 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 21:44:57.116 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 21:44:57.123 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 21:44:57.129 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 21:44:57.131 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 21:44:57.132 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 21:44:57.134 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:44:57.135 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 33.6591ms
2025-08-22 21:44:57.137 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:44:57.139 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 51.7747ms
2025-08-22 21:44:57.144 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:44:57.148 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:57.150 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7874ms
2025-08-22 21:44:57.155 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:44:57.158 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:57.160 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:57.162 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:44:57.167 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:44:57.177 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:44:57.179 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.1388ms
2025-08-22 21:44:57.181 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:57.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.3598ms
2025-08-22 21:44:57.202 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:44:57.207 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:57.208 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:57.211 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:44:57.219 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:44:57.224 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:44:57.226 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4741ms
2025-08-22 21:44:57.228 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:57.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.6223ms
2025-08-22 21:44:57.318 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:44:57.322 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:44:57.324 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:57.327 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:44:57.334 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:44:57.339 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:44:57.341 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.1711ms
2025-08-22 21:44:57.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:44:57.345 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.0024ms
2025-08-22 21:45:03.536 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:45:03.542 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:03.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 7.3912ms
2025-08-22 21:45:03.546 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:45:03.550 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:45:03.556 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:03.560 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:03.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 14.8168ms
2025-08-22 21:45:03.562 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:45:03.568 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:45:03.570 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:45:03.572 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-22 21:45:03.575 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:03.579 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:45:03.580 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:45:03.586 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:45:03.586 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:45:03.590 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:45:03.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:45:03.595 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 24.4049ms
2025-08-22 21:45:03.599 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:03.601 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:45:03.602 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:03.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 54.595ms
2025-08-22 21:45:12.332 +05:30 [INF] Received HTTP response headers after 8726.194ms - 401
2025-08-22 21:45:12.334 +05:30 [INF] End processing HTTP request after 8734.3476ms - 401
2025-08-22 21:45:12.336 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:15:04 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AIXTLpG2hMYmSpuC-n0X9jg"}}
2025-08-22 21:45:12.337 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:15:04 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AIXTLpG2hMYmSpuC-n0X9jg"}}
2025-08-22 21:45:12.338 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:12.340 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:13.151 +05:30 [INF] Received HTTP response headers after 809.6728ms - 200
2025-08-22 21:45:13.153 +05:30 [INF] End processing HTTP request after 814.7608ms - 200
2025-08-22 21:45:13.155 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:45:13.157 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:45:13.160 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 9568.0453ms
2025-08-22 21:45:13.162 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:45:13.163 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 9593.6264ms
2025-08-22 21:45:27.853 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 21:45:27.858 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:27.859 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.3565ms
2025-08-22 21:45:27.864 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 21:45:27.867 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:27.871 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:45:27.872 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 21:45:27.876 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-22 21:45:27.880 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 21:45:27.888 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 21:45:27.914 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 21:45:27.918 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-22 21:45:27.920 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 21:45:27.921 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 21:45:27.923 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:45:27.925 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 49.7883ms
2025-08-22 21:45:27.927 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:45:27.928 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 64.6536ms
2025-08-22 21:45:27.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:45:27.937 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:27.939 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.8515ms
2025-08-22 21:45:27.944 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:45:27.947 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:27.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:45:27.951 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:45:27.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:45:27.961 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:45:27.963 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.179ms
2025-08-22 21:45:27.965 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:45:27.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.9726ms
2025-08-22 21:45:27.991 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:45:27.996 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:27.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:45:27.999 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:45:28.006 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:45:28.011 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:45:28.013 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4885ms
2025-08-22 21:45:28.016 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:45:28.017 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.9425ms
2025-08-22 21:45:28.125 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:45:28.128 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:28.130 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:45:28.131 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:45:28.156 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:45:28.161 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:45:28.163 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 29.1925ms
2025-08-22 21:45:28.165 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:45:28.166 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 41.7794ms
2025-08-22 21:45:32.011 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:45:32.012 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:45:32.017 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:32.020 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:32.021 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 10.1988ms
2025-08-22 21:45:32.022 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 10.6203ms
2025-08-22 21:45:32.032 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:45:32.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:45:32.037 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:32.040 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:32.041 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:45:32.042 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:45:32.043 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:45:32.045 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:45:32.048 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:45:32.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:45:32.092 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:45:32.110 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:45:32.112 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 64.9386ms
2025-08-22 21:45:32.114 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:45:32.118 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 85.5822ms
2025-08-22 21:45:32.287 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:45:32.291 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:32.293 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:32.914 +05:30 [INF] Received HTTP response headers after 618.4176ms - 401
2025-08-22 21:45:32.916 +05:30 [INF] End processing HTTP request after 624.9653ms - 401
2025-08-22 21:45:32.918 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:15:32 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AgIm3mfLUhDilGu699W9wQj"}}
2025-08-22 21:45:32.919 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:15:32 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AgIm3mfLUhDilGu699W9wQj"}}
2025-08-22 21:45:32.921 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:32.923 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:45:33.852 +05:30 [INF] Received HTTP response headers after 927.1677ms - 200
2025-08-22 21:45:33.854 +05:30 [INF] End processing HTTP request after 932.6197ms - 200
2025-08-22 21:45:33.855 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:45:33.857 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:45:33.860 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1809.073ms
2025-08-22 21:45:33.861 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:45:33.863 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1830.2606ms
2025-08-22 21:45:51.198 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-template-simple - null null
2025-08-22 21:45:51.201 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:51.202 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-template-simple - 204 null null 4.6712ms
2025-08-22 21:45:51.208 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-template-simple - application/json 155
2025-08-22 21:45:51.212 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:45:51.213 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTemplateMessageSimple (xbytechat.api)'
2025-08-22 21:45:51.221 +05:30 [INF] Route matched with {action = "SendTemplateMessageSimple", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateMessageSimple(xbytechat.api.Features.MessagesEngine.DTOs.SimpleTemplateMessageDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-22 21:45:55.559 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE b."Id" = @__businessId_0
LIMIT 1
2025-08-22 21:45:55.584 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:45:55.585 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-22 21:45:59.333 +05:30 [INF] Received HTTP response headers after 3746.5094ms - 200
2025-08-22 21:45:59.335 +05:30 [INF] End processing HTTP request after 3751.7032ms - 200
2025-08-22 21:45:59.365 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@p0='8807ff15-ff03-48e0-8088-cc06c671bd9a', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='2025-08-22T16:15:59.3391664Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='hello_world' (Nullable = false), @p11=NULL, @p12='{"Success":true,"Message":"✅ Message sent successfully","Data":null,"ErrorMessage":null,"RawResponse":"{\"messaging_product\":\"whatsapp\",\"contacts\":[{\"input\":\"+917082156227\",\"wa_id\":\"917082156227\"}],\"messages\":[{\"id\":\"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTJEQThEOUJGNjc2N0MzQjQ3AA==\",\"message_status\":\"accepted\"}]}","MessageId":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSMTJEQThEOUJGNjc2N0MzQjQ3AA==","LogId":null,"Token":null,"RefreshToken":null}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15='', @p16='2025-08-22T16:15:59.3391659Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-22 21:45:59.369 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:45:59.372 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTemplateMessageSimple (xbytechat.api) in 8148.0416ms
2025-08-22 21:45:59.374 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTemplateMessageSimple (xbytechat.api)'
2025-08-22 21:45:59.378 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-template-simple - 200 null application/json; charset=utf-8 8170.0335ms
2025-08-22 21:48:10.247 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:10.252 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.6145ms
2025-08-22 21:48:10.259 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:10.268 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.269 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:10.271 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:10.279 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:48:10.283 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:10.285 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0876ms
2025-08-22 21:48:10.287 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:10.289 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.4815ms
2025-08-22 21:48:10.382 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:10.387 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.388 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:10.391 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:10.397 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:48:10.402 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:10.404 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5363ms
2025-08-22 21:48:10.406 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:10.408 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.4518ms
2025-08-22 21:48:10.447 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:48:10.450 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:10.449 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:48:10.462 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.465 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.468 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.471 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:10.469 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 22.4284ms
2025-08-22 21:48:10.473 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 24.0266ms
2025-08-22 21:48:10.482 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:10.486 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:48:10.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:48:10.498 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:48:10.501 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.506 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:10.509 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:10.510 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:48:10.512 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:48:10.513 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.5112ms
2025-08-22 21:48:10.515 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:48:10.517 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:48:10.519 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:10.523 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:48:10.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:48:10.527 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 77.6202ms
2025-08-22 21:48:10.540 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:10.560 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:10.752 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:48:10.761 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:48:10.765 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:48:10.767 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 244.6328ms
2025-08-22 21:48:10.769 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:48:10.771 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 285.0221ms
2025-08-22 21:48:26.075 +05:30 [INF] Received HTTP response headers after 15513.8203ms - 401
2025-08-22 21:48:26.085 +05:30 [INF] End processing HTTP request after 15544.1139ms - 401
2025-08-22 21:48:26.087 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:18:16 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ASGv0RZHoAA5seyfawLOf57"}}
2025-08-22 21:48:26.088 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:18:16 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ASGv0RZHoAA5seyfawLOf57"}}
2025-08-22 21:48:26.090 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:26.099 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:26.998 +05:30 [INF] Received HTTP response headers after 895.1837ms - 200
2025-08-22 21:48:27.000 +05:30 [INF] End processing HTTP request after 910.0579ms - 200
2025-08-22 21:48:27.002 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:48:27.003 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:27.005 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 16479.505ms
2025-08-22 21:48:27.007 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:48:27.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 16517.5078ms
2025-08-22 21:48:27.298 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:27.302 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.306 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.1425ms
2025-08-22 21:48:27.311 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:27.315 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.317 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:27.319 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:27.325 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:48:27.332 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:27.334 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6044ms
2025-08-22 21:48:27.336 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:27.338 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.7266ms
2025-08-22 21:48:27.393 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:27.397 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.399 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:27.401 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:27.407 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:48:27.413 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:27.415 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.2017ms
2025-08-22 21:48:27.417 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:27.419 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.2504ms
2025-08-22 21:48:27.456 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:48:27.457 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:48:27.457 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:27.461 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.465 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.469 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.8745ms
2025-08-22 21:48:27.472 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 14.9503ms
2025-08-22 21:48:27.473 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:27.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:48:27.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:48:27.486 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:27.490 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.494 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:27.498 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:48:27.500 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:48:27.502 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:48:27.504 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:48:27.507 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:27.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:48:27.516 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.7749ms
2025-08-22 21:48:27.508 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:48:27.520 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:27.521 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:27.524 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:48:27.525 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:27.527 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 69.9929ms
2025-08-22 21:48:27.532 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:48:27.547 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:48:27.552 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:48:27.554 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 30.465ms
2025-08-22 21:48:27.556 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:48:27.558 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 73.1799ms
2025-08-22 21:48:28.738 +05:30 [INF] Received HTTP response headers after 1204.9745ms - 401
2025-08-22 21:48:28.739 +05:30 [INF] End processing HTTP request after 1219.6786ms - 401
2025-08-22 21:48:28.741 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:18:27 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A_LuifVm30JU6DF90la2ucA"}}
2025-08-22 21:48:28.743 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:18:27 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A_LuifVm30JU6DF90la2ucA"}}
2025-08-22 21:48:28.745 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:28.746 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:48:31.100 +05:30 [INF] Received HTTP response headers after 2351.3864ms - 200
2025-08-22 21:48:31.103 +05:30 [INF] End processing HTTP request after 2357.5694ms - 200
2025-08-22 21:48:31.104 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:48:31.106 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:31.108 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 3596.7515ms
2025-08-22 21:48:31.110 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:48:31.111 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 3631.4989ms
2025-08-22 21:48:58.495 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 21:48:58.499 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:58.501 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.7122ms
2025-08-22 21:48:58.507 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-22 21:48:58.511 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:58.512 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:48:58.513 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 21:48:58.516 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-22 21:48:58.524 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 21:48:58.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-22 21:48:58.532 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-22 21:48:58.534 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-22 21:48:58.535 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-22 21:48:58.536 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:58.538 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 22.2756ms
2025-08-22 21:48:58.540 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:48:58.541 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 34.1584ms
2025-08-22 21:48:58.548 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:58.555 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:58.556 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.5009ms
2025-08-22 21:48:58.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:58.564 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:58.566 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:58.567 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:58.571 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:58.573 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.6932ms
2025-08-22 21:48:58.575 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:58.576 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.4602ms
2025-08-22 21:48:58.709 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:48:58.712 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:48:58.714 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:58.715 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:48:58.718 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:48:58.720 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.4788ms
2025-08-22 21:48:58.723 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:48:58.724 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3626ms
2025-08-22 21:49:04.071 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:49:04.074 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:04.076 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 4.5537ms
2025-08-22 21:49:04.083 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:49:04.087 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:04.088 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 5.5865ms
2025-08-22 21:49:04.090 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:49:04.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:49:04.095 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:04.101 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:04.102 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:49:04.103 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:49:04.105 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:49:04.106 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:49:04.163 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 54.6268ms
2025-08-22 21:49:04.166 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:49:04.169 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:49:04.171 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:04.186 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:04.216 +05:30 [ERR] ❌ An unhandled exception occurred
System.UnauthorizedAccessException: Invalid or missing businessId in token.
   at xbytechat.api.Shared.ClaimsBusinessDetails.GetBusinessId(ClaimsPrincipal user) in D:\xbytechat\xbytechat-api\xbytechat-api\Shared\ClaimsBusinessDetails.cs:line 12
   at xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts(String tab, Int32 page, Int32 pageSize) in D:\xbytechat\xbytechat-api\xbytechat-api\CRM\Controllers\ContactsController.cs:line 135
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_9>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 370
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-22 21:49:04.227 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 500 null application/json; charset=utf-8 137.8317ms
2025-08-22 21:49:05.090 +05:30 [INF] Received HTTP response headers after 883.6195ms - 401
2025-08-22 21:49:05.093 +05:30 [INF] End processing HTTP request after 921.1329ms - 401
2025-08-22 21:49:05.095 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:19:04 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ApKMIAsWEX3_pXCwhkP8RgN"}}
2025-08-22 21:49:05.097 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:19:04 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ApKMIAsWEX3_pXCwhkP8RgN"}}
2025-08-22 21:49:05.099 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:05.100 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:06.115 +05:30 [INF] Received HTTP response headers after 1012.8025ms - 200
2025-08-22 21:49:06.117 +05:30 [INF] End processing HTTP request after 1018.2857ms - 200
2025-08-22 21:49:06.119 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:49:06.121 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:06.124 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1962.1458ms
2025-08-22 21:49:06.126 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:49:06.128 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 2034.7342ms
2025-08-22 21:49:26.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 21:49:26.713 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:26.714 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 11.0306ms
2025-08-22 21:49:26.719 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 21:49:26.722 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:26.723 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:49:26.724 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 21:49:26.728 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-22 21:49:26.736 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 21:49:26.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 21:49:26.753 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 21:49:26.757 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-22 21:49:26.758 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 21:49:26.760 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 21:49:26.762 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:26.764 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 36.61ms
2025-08-22 21:49:26.765 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:49:26.767 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 48.2648ms
2025-08-22 21:49:26.771 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:26.774 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:26.776 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.3409ms
2025-08-22 21:49:26.781 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:26.784 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:26.786 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:26.788 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:49:26.793 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:49:26.798 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:26.800 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.3168ms
2025-08-22 21:49:26.802 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:26.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.8694ms
2025-08-22 21:49:26.836 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:26.844 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:26.848 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:26.850 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:49:26.856 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:49:26.862 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:26.865 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1814ms
2025-08-22 21:49:26.867 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:26.869 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.2181ms
2025-08-22 21:49:26.964 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:26.968 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:26.970 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:26.972 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:49:26.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:49:26.983 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:26.985 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0217ms
2025-08-22 21:49:26.987 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:26.988 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.6129ms
2025-08-22 21:49:30.140 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:49:30.140 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:49:30.145 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:30.149 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:30.150 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 9.7891ms
2025-08-22 21:49:30.151 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 11.032ms
2025-08-22 21:49:30.167 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:49:30.168 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:49:30.173 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:30.178 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:30.179 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:49:30.180 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:49:30.182 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:49:30.183 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:49:30.189 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:49:30.192 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:49:30.195 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:30.200 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:30.200 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:49:30.211 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:49:30.216 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:49:30.218 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 26.7ms
2025-08-22 21:49:30.220 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:49:30.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 55.1504ms
2025-08-22 21:49:30.794 +05:30 [INF] Received HTTP response headers after 590.2589ms - 401
2025-08-22 21:49:30.796 +05:30 [INF] End processing HTTP request after 600.7073ms - 401
2025-08-22 21:49:30.798 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:19:30 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AyBRH_UbEGARIonDhAHub08"}}
2025-08-22 21:49:30.799 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:19:30 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AyBRH_UbEGARIonDhAHub08"}}
2025-08-22 21:49:30.801 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:30.803 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:32.037 +05:30 [INF] Received HTTP response headers after 1233.529ms - 200
2025-08-22 21:49:32.040 +05:30 [INF] End processing HTTP request after 1238.4976ms - 200
2025-08-22 21:49:32.042 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:49:32.044 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:32.046 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1860.6125ms
2025-08-22 21:49:32.048 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:49:32.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1882.8475ms
2025-08-22 21:49:50.681 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:50.686 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.687 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.7594ms
2025-08-22 21:49:50.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:50.699 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.701 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:50.702 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:49:50.707 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:49:50.714 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:50.715 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.7164ms
2025-08-22 21:49:50.717 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:50.718 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4455ms
2025-08-22 21:49:50.830 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:50.835 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.837 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:50.838 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:49:50.845 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:49:50.849 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:50.851 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.3227ms
2025-08-22 21:49:50.853 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:50.854 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.3924ms
2025-08-22 21:49:50.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:49:50.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:49:50.901 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:49:50.912 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.915 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.918 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.919 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:50.920 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 17.9956ms
2025-08-22 21:49:50.921 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 20.2707ms
2025-08-22 21:49:50.922 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:49:50.929 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:49:50.938 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:49:50.941 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.933 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:49:50.952 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:50.953 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:49:50.956 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:49:50.958 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 23.1209ms
2025-08-22 21:49:50.960 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:49:50.962 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:49:50.964 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:49:50.967 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:49:50.968 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:49:50.969 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 69.0791ms
2025-08-22 21:49:50.981 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:49:50.975 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:49:50.989 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:50.995 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:50.997 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:49:51.002 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:49:51.004 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 38.1656ms
2025-08-22 21:49:51.006 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:49:51.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 79.6132ms
2025-08-22 21:49:51.889 +05:30 [INF] Received HTTP response headers after 891.7354ms - 401
2025-08-22 21:49:51.893 +05:30 [INF] End processing HTTP request after 903.5447ms - 401
2025-08-22 21:49:51.894 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:19:50 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ACuLW5GvF5dbjwyEJT3a12o"}}
2025-08-22 21:49:51.896 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:19:50 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ACuLW5GvF5dbjwyEJT3a12o"}}
2025-08-22 21:49:51.898 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:51.900 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:49:52.786 +05:30 [INF] Received HTTP response headers after 884.9217ms - 200
2025-08-22 21:49:52.788 +05:30 [INF] End processing HTTP request after 889.7023ms - 200
2025-08-22 21:49:52.792 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:49:52.794 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:49:52.797 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1818.2142ms
2025-08-22 21:49:52.799 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:49:52.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1898.075ms
2025-08-22 21:55:15.476 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 21:55:15.491 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:15.493 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 18.7861ms
2025-08-22 21:55:15.508 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 21:55:15.513 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:15.515 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 21:55:15.519 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 21:55:15.708 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 21:55:15.711 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-22 21:55:15.713 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 192.0705ms
2025-08-22 21:55:15.715 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 21:55:15.717 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 209.0257ms
2025-08-22 21:55:19.293 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-22 21:55:19.302 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:19.302 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 9.139ms
2025-08-22 21:55:19.307 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 468
2025-08-22 21:55:19.310 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:19.312 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-22 21:55:19.314 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 21:55:19.317 +05:30 [INF] 🔧 [UpdateSetting] Request received for WhatsApp settings update.
2025-08-22 21:55:19.318 +05:30 [INF] 💾 [UpdateSetting] Saving/updating WhatsApp settings for businessId="c13be597-6ae2-42bb-9d43-925815f24ff8".
2025-08-22 21:55:19.321 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-22 21:55:19.348 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p2='36de2595-f729-4b07-9958-11c8a56db12f', @p0='EAAUbmP4285YBPCfUzoMecUddlSSndDrKq9hpOT89NtBUknN3hs5ROchmOmeBsWUgDFToCanJ7sMyNfYf1k9WZAeycMZADZA0hg4ZCRRTZA4IZBoqMLIFOxJexg0UqEmCDqI3DgLd4fRHhj4qXfwmOmB91nP7ab4wqkD24865nXrWrheBXYMZBHXY3Y6BUgc6vT1kyRDW5pNw4A8hccCKgOKUeCmvuHDNFiPysn24HIwann2fzUPWvuNbXRPEeFmrOCv' (Nullable = false), @p1='2025-08-22T16:25:19.3260525Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-22 21:55:19.351 +05:30 [INF] ✅ [UpdateSetting] WhatsApp settings updated successfully.
2025-08-22 21:55:19.353 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:19.355 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 38.365ms
2025-08-22 21:55:19.357 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-22 21:55:19.359 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 52.1555ms
2025-08-22 21:55:20.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-22 21:55:20.082 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:20.083 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 5.6363ms
2025-08-22 21:55:20.089 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 468
2025-08-22 21:55:20.092 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:20.093 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 21:55:20.095 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 21:55:22.155 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:22.158 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 2058.8123ms
2025-08-22 21:55:22.160 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-22 21:55:22.162 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 2073.2081ms
2025-08-22 21:55:25.951 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:55:25.953 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:55:25.956 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:25.961 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:25.961 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 10.7994ms
2025-08-22 21:55:25.962 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 9.22ms
2025-08-22 21:55:25.979 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:55:25.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:55:25.984 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:25.987 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:25.989 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:55:25.990 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:55:25.991 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:55:25.993 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:55:25.996 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:55:26.000 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:55:26.009 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:26.015 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:26.183 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:55:26.191 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:55:26.195 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:55:26.197 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 201.9154ms
2025-08-22 21:55:26.199 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:55:26.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 221.7672ms
2025-08-22 21:55:27.159 +05:30 [INF] Received HTTP response headers after 1138.0575ms - 401
2025-08-22 21:55:27.161 +05:30 [INF] End processing HTTP request after 1151.9742ms - 401
2025-08-22 21:55:27.163 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:25:26 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AZHgsy_9hAqiWsEI4Iwuwod"}}
2025-08-22 21:55:27.164 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:25:26 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AZHgsy_9hAqiWsEI4Iwuwod"}}
2025-08-22 21:55:27.166 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:27.168 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:29.507 +05:30 [INF] Received HTTP response headers after 2337.7758ms - 200
2025-08-22 21:55:29.510 +05:30 [INF] End processing HTTP request after 2343.5088ms - 200
2025-08-22 21:55:29.511 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:55:29.514 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:29.516 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 3517.7806ms
2025-08-22 21:55:29.518 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:55:29.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 3539.3378ms
2025-08-22 21:55:34.666 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:34.673 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.674 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.6349ms
2025-08-22 21:55:34.679 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:34.682 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.685 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:34.686 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:55:34.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:55:34.697 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:34.698 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2995ms
2025-08-22 21:55:34.700 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:34.702 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.3531ms
2025-08-22 21:55:34.764 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:34.771 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:34.775 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:55:34.789 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:55:34.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:34.797 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.9828ms
2025-08-22 21:55:34.800 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:34.803 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.3416ms
2025-08-22 21:55:34.839 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:55:34.841 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:34.839 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:55:34.855 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.855 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.855 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.857 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 17.3216ms
2025-08-22 21:55:34.858 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 18.0653ms
2025-08-22 21:55:34.859 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:34.868 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:55:34.866 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:55:34.863 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:55:34.875 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:55:34.878 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.881 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:34.883 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:34.885 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:55:34.886 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:55:34.888 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.1937ms
2025-08-22 21:55:34.889 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:55:34.891 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:55:34.892 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:34.895 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:55:34.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 57.7348ms
2025-08-22 21:55:34.906 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:55:34.900 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:55:34.923 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:34.924 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:34.925 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:55:34.931 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:55:34.933 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 38.5698ms
2025-08-22 21:55:34.935 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:55:34.937 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 70.7452ms
2025-08-22 21:55:36.675 +05:30 [INF] Received HTTP response headers after 1749.5556ms - 401
2025-08-22 21:55:36.678 +05:30 [INF] End processing HTTP request after 1755.2076ms - 401
2025-08-22 21:55:36.680 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:25:35 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AEflvo_nll0sZkFvid9sOAV"}}
2025-08-22 21:55:36.682 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:25:35 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AEflvo_nll0sZkFvid9sOAV"}}
2025-08-22 21:55:36.685 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:36.687 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:38.929 +05:30 [INF] Received HTTP response headers after 2240.9355ms - 200
2025-08-22 21:55:38.932 +05:30 [INF] End processing HTTP request after 2246.8692ms - 200
2025-08-22 21:55:38.934 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:55:38.936 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:38.938 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 4040.7591ms
2025-08-22 21:55:38.940 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:55:38.941 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 4078.2107ms
2025-08-22 21:55:50.399 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:50.403 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.405 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.6037ms
2025-08-22 21:55:50.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:50.414 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.415 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:50.417 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:55:50.422 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:55:50.426 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:50.429 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.9744ms
2025-08-22 21:55:50.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:50.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.8675ms
2025-08-22 21:55:50.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:50.484 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.486 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:50.488 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:55:50.495 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:55:50.501 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:50.522 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 31.2283ms
2025-08-22 21:55:50.524 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:50.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 48.5753ms
2025-08-22 21:55:50.568 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 21:55:50.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:55:50.569 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:55:50.573 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.577 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.581 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.583 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 14.8603ms
2025-08-22 21:55:50.584 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 15.5544ms
2025-08-22 21:55:50.586 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:50.591 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 21:55:50.596 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 21:55:50.598 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:55:50.601 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.605 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:55:50.610 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:55:50.612 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:55:50.614 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:55:50.615 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 21:55:50.619 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:50.620 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 21:55:50.626 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 21:55:50.626 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.9586ms
2025-08-22 21:55:50.631 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-22 21:55:50.635 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:50.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:55:50.642 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:50.642 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 21:55:50.645 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 76.5797ms
2025-08-22 21:55:50.655 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 21:55:50.663 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 21:55:50.666 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 35.2258ms
2025-08-22 21:55:50.669 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 21:55:50.671 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 74.7551ms
2025-08-22 21:55:51.458 +05:30 [INF] Received HTTP response headers after 810.9876ms - 401
2025-08-22 21:55:51.460 +05:30 [INF] End processing HTTP request after 825.5086ms - 401
2025-08-22 21:55:51.462 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:25:50 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Aaq5nM_9lK0VvvSgLwwGkmU"}}
2025-08-22 21:55:51.463 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:25:50 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Aaq5nM_9lK0VvvSgLwwGkmU"}}
2025-08-22 21:55:51.465 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:51.466 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 21:55:52.420 +05:30 [INF] Received HTTP response headers after 951.9533ms - 200
2025-08-22 21:55:52.422 +05:30 [INF] End processing HTTP request after 957.2315ms - 200
2025-08-22 21:55:52.424 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 21:55:52.425 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:55:52.427 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1804.4265ms
2025-08-22 21:55:52.429 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 21:55:52.431 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1839.8635ms
2025-08-22 21:58:02.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-22 21:58:02.187 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:02.188 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 12.0224ms
2025-08-22 21:58:02.197 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-22 21:58:02.202 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:02.204 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:58:02.205 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-22 21:58:02.208 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-22 21:58:02.213 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-22 21:58:02.225 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-22 21:58:02.234 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-22 21:58:02.238 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-22 21:58:02.240 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-22 21:58:02.241 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-22 21:58:02.243 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:58:02.245 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 38.0554ms
2025-08-22 21:58:02.247 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-22 21:58:02.249 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 51.8388ms
2025-08-22 21:58:02.256 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:58:02.259 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:02.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7977ms
2025-08-22 21:58:02.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:58:02.270 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:02.272 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:58:02.274 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:58:02.280 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:58:02.285 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:58:02.287 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4236ms
2025-08-22 21:58:02.289 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:58:02.291 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.8439ms
2025-08-22 21:58:02.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:58:02.320 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:02.322 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:58:02.324 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:58:02.331 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:58:02.336 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:58:02.339 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.506ms
2025-08-22 21:58:02.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:58:02.342 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.8482ms
2025-08-22 21:58:02.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 21:58:02.450 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:02.452 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:58:02.453 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 21:58:02.459 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 21:58:02.464 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 21:58:02.467 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5419ms
2025-08-22 21:58:02.469 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 21:58:02.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.2694ms
2025-08-22 21:58:05.087 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 21:58:05.092 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:05.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 7.4251ms
2025-08-22 21:58:05.108 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-22 21:58:05.112 +05:30 [INF] CORS policy execution successful.
2025-08-22 21:58:05.118 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 21:58:05.120 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-22 21:58:05.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-22 21:58:05.142 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-22 21:58:05.145 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 22.0361ms
2025-08-22 21:58:05.147 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-22 21:58:05.150 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 42.4358ms
2025-08-22 22:00:43.563 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 22:00:43.565 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 22:00:43.575 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:43.579 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:43.580 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 16.9698ms
2025-08-22 22:00:43.582 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 17.1607ms
2025-08-22 22:00:43.594 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 22:00:43.602 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 22:00:43.608 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:43.611 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:43.612 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 22:00:43.613 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 22:00:43.615 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 22:00:43.616 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 22:00:43.624 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-22 22:00:43.816 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 22:00:43.819 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:43.823 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:44.052 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 22:00:44.059 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 22:00:44.063 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 22:00:44.066 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 442.9265ms
2025-08-22 22:00:44.067 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 22:00:44.069 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 466.9699ms
2025-08-22 22:00:45.724 +05:30 [INF] Received HTTP response headers after 1899.1144ms - 401
2025-08-22 22:00:45.726 +05:30 [INF] End processing HTTP request after 1906.8997ms - 401
2025-08-22 22:00:45.727 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:30:44 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AnoMkZyX5Pj1pgXeGkY3NUg"}}
2025-08-22 22:00:45.729 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:30:44 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AnoMkZyX5Pj1pgXeGkY3NUg"}}
2025-08-22 22:00:45.730 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:45.732 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:46.751 +05:30 [INF] Received HTTP response headers after 1017.8776ms - 200
2025-08-22 22:00:46.754 +05:30 [INF] End processing HTTP request after 1023.9281ms - 200
2025-08-22 22:00:46.756 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 22:00:46.758 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:00:46.760 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 3141.5434ms
2025-08-22 22:00:46.763 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 22:00:46.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 3170.5482ms
2025-08-22 22:00:53.249 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:00:53.253 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.255 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.299ms
2025-08-22 22:00:53.260 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:00:53.265 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.267 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:00:53.268 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 22:00:53.276 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-22 22:00:53.283 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 22:00:53.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:00:53.288 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.0629ms
2025-08-22 22:00:53.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:00:53.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.3163ms
2025-08-22 22:00:53.364 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:00:53.370 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.372 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:00:53.377 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 22:00:53.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 22:00:53.389 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:00:53.392 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2159ms
2025-08-22 22:00:53.395 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:00:53.397 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.7217ms
2025-08-22 22:00:53.433 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 22:00:53.434 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 22:00:53.436 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:00:53.438 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.441 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.445 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.446 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 12.4572ms
2025-08-22 22:00:53.447 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 13.4683ms
2025-08-22 22:00:53.449 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:00:53.464 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 22:00:53.476 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.477 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 22:00:53.469 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 22:00:53.472 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 22:00:53.480 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-08-22 22:00:53.484 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:00:53.491 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 22:00:53.495 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 22:00:53.497 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-08-22 22:00:53.502 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:00:53.503 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-22 22:00:53.506 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:53.508 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.2944ms
2025-08-22 22:00:53.512 +05:30 [INF] GetPagedContactsAsync: businessId="1fd4aee7-d6b6-4aa6-9c78-76e7e592341d", tab=all, page=1, pageSize=25
2025-08-22 22:00:53.514 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:53.516 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:00:53.521 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-22 22:00:53.525 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 88.8684ms
2025-08-22 22:00:53.533 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-22 22:00:53.537 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-22 22:00:53.539 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 27.8652ms
2025-08-22 22:00:53.542 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-22 22:00:53.544 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 74.2528ms
2025-08-22 22:00:56.074 +05:30 [INF] Received HTTP response headers after 2553.4462ms - 401
2025-08-22 22:00:56.076 +05:30 [INF] End processing HTTP request after 2569.8118ms - 401
2025-08-22 22:00:56.081 +05:30 [INF] 📦 Meta Template API Raw JSON for "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d":
{"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:30:53 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AmXUM-5qbQBGzf0yPV0mTSr"}}
2025-08-22 22:00:56.083 +05:30 [ERR] ❌ Failed to fetch templates for BusinessId "1fd4aee7-d6b6-4aa6-9c78-76e7e592341d": {"error":{"message":"Error validating access token: Session has expired on Friday, 22-Aug-25 08:00:00 PDT. The current time is Friday, 22-Aug-25 09:30:53 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AmXUM-5qbQBGzf0yPV0mTSr"}}
2025-08-22 22:00:56.085 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:56.087 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates
2025-08-22 22:00:56.911 +05:30 [INF] Received HTTP response headers after 823.0405ms - 200
2025-08-22 22:00:56.913 +05:30 [INF] End processing HTTP request after 828.2309ms - 200
2025-08-22 22:00:56.915 +05:30 [INF] 📦 Meta Template API Raw JSON for "c13be597-6ae2-42bb-9d43-925815f24ff8":
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}],"paging":{"cursors":{"before":"MAZDZD","after":"MjQZD"}}}
2025-08-22 22:00:56.917 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType75`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:00:56.919 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 3431.0105ms
2025-08-22 22:00:56.921 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 22:00:56.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 3459.1684ms
2025-08-22 22:01:16.225 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:01:16.230 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.232 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.9144ms
2025-08-22 22:01:16.236 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:01:16.239 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:01:16.241 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 22:01:16.246 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 22:01:16.250 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:01:16.252 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.9248ms
2025-08-22 22:01:16.254 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:01:16.255 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.1957ms
2025-08-22 22:01:16.281 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:01:16.286 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.288 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:01:16.290 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 22:01:16.299 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 22:01:16.307 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:01:16.309 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6017ms
2025-08-22 22:01:16.311 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:01:16.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.6799ms
2025-08-22 22:01:16.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-22 22:01:16.350 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-22 22:01:16.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 22:01:16.353 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.355 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.358 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-22 22:01:16.360 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 9.6884ms
2025-08-22 22:01:16.378 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-08-22 22:01:16.374 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-22 22:01:16.362 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 11.2254ms
2025-08-22 22:01:16.388 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-22 22:01:16.384 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-22 22:01:16.395 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-22 22:01:16.396 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-08-22 22:01:16.399 +05:30 [INF] CORS policy execution successful.
2025-08-22 22:01:16.400 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.7349ms
2025-08-22 22:01:16.401 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
