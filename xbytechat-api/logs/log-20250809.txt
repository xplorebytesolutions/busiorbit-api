2025-08-09 17:44:06.744 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-09 17:44:06.805 +05:30 [INF] ðŸš€ Webhook Queue Worker started.
2025-08-09 17:44:06.825 +05:30 [INF] ðŸ§¹ FailedWebhookLogCleanupService started.
2025-08-09 17:44:07.811 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-09 17:44:08.436 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-09 17:44:08.671 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-09 17:44:08.672 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-09 17:44:08.674 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-09 17:44:08.675 +05:30 [INF] Hosting environment: Development
2025-08-09 17:44:08.675 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-09 17:44:08.762 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-09 17:44:08.781 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[@__cutoff_0='2025-08-02T12:14:07.0012305Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-09 17:44:09.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-09 17:44:10.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 364.1715ms
2025-08-09 17:44:10.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-09 17:44:10.312 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-09 17:44:10.324 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.8127ms
2025-08-09 17:44:10.402 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 90.1198ms
2025-08-09 17:44:10.799 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-09 17:44:11.025 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 226.4831ms
2025-08-09 17:44:30.314 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/auth/login - null null
2025-08-09 17:44:30.322 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-09 17:44:30.391 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:44:30.398 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/auth/login - 204 null null 83.4814ms
2025-08-09 17:44:30.403 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/api/auth/login - application/json 53
2025-08-09 17:44:30.417 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:44:30.508 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/api/auth/login - 404 0 null 104.3615ms
2025-08-09 17:44:30.515 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7113/api/api/auth/login, Response status code: 404
2025-08-09 17:44:32.374 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/api/auth/login - application/json 53
2025-08-09 17:44:32.379 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:44:32.382 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/api/auth/login - 404 0 null 8.3219ms
2025-08-09 17:44:32.388 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7113/api/api/auth/login, Response status code: 404
2025-08-09 17:44:37.389 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/api/auth/login - null null
2025-08-09 17:44:37.395 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:44:37.397 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/api/auth/login - 204 null null 8.2969ms
2025-08-09 17:44:37.405 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/api/auth/login - application/json 47
2025-08-09 17:44:37.410 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:44:37.413 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/api/auth/login - 404 0 null 8.2895ms
2025-08-09 17:44:37.419 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:7113/api/api/auth/login, Response status code: 404
2025-08-09 17:46:56.669 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-09 17:46:56.678 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:46:56.680 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 10.7678ms
2025-08-09 17:46:56.690 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-09 17:46:56.695 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:46:56.716 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-09 17:46:56.751 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-09 17:46:56.884 +05:30 [INF] ðŸ”‘ Login attempt for email: ratan@tcs.com
2025-08-09 17:46:57.025 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-09 17:46:57.187 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", b0."Id", b0."BusinessId", b0."CreatedAt", b0."Plan", b0."QuotaResetDate", b0."RemainingMessages", b0."TotalMonthlyQuota", b0."UpdatedAt", b0."WalletBalance"
FROM "Businesses" AS b
LEFT JOIN "BusinessPlanInfos" AS b0 ON b."Id" = b0."BusinessId"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-09 17:46:57.323 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_RoleId_0='00000000-0000-0000-0000-000000000004' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."AssignedAt", r."AssignedBy", r."IsActive", r."IsRevoked", r."PermissionId", r."RoleId"
FROM "RolePermissions" AS r
WHERE r."RoleId" = @__user_RoleId_0 AND NOT (r."IsRevoked")
2025-08-09 17:46:57.357 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AssignedAt", u."AssignedBy", u."IsGranted", u."IsRevoked", u."PermissionId", u."UserId"
FROM "UserPermissions" AS u
WHERE u."UserId" = @__userId_0 AND NOT (u."IsRevoked")
2025-08-09 17:46:57.504 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[@__permissionIds_0={ '30000000-0000-0000-0000-000000000000', '30000000-0000-0000-0000-000000000007', '30000000-0000-0000-0000-000000000001', '30000000-0000-0000-0000-000000000004' } (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."CreatedAt", p."Description", p."Group", p."IsActive", p."Name"
FROM "Permissions" AS p
WHERE p."Id" = ANY (@__permissionIds_0)
2025-08-09 17:46:57.541 +05:30 [INF] âœ… Token generated for: ratan@tcs.com
2025-08-09 17:46:57.593 +05:30 [INF] âœ… Login successful for ratan@tcs.com, Role: business, Plan: Smart
2025-08-09 17:46:57.604 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-09 17:46:57.619 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 858.361ms
2025-08-09 17:46:57.622 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-09 17:46:57.632 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 941.2663ms
2025-08-09 17:46:57.637 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/feature-access/me - null null
2025-08-09 17:46:57.642 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:46:57.643 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/feature-access/me - 204 null null 6.3506ms
2025-08-09 17:46:57.649 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/feature-access/me - null null
2025-08-09 17:46:57.655 +05:30 [INF] CORS policy execution successful.
2025-08-09 17:46:57.744 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.FeatureAccessModule.Controllers.FeatureAccessController.GetMyFeatureAccess (xbytechat.api)'
2025-08-09 17:46:57.751 +05:30 [INF] Route matched with {action = "GetMyFeatureAccess", controller = "FeatureAccess"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyFeatureAccess() on controller xbytechat.api.Features.FeatureAccessModule.Controllers.FeatureAccessController (xbytechat.api).
2025-08-09 17:46:57.786 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__plan_0='smart'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."CreatedAt", f."Description", f."FeatureName", f."Group", f."IsEnabled", f."Notes", f."Plan"
FROM "FeatureAccess" AS f
WHERE lower(f."Plan") = @__plan_0
2025-08-09 17:46:57.797 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."CreatedAt", f."Description", f."FeatureName", f."Group", f."IsEnabled", f."Notes", f."Plan"
FROM "FeatureAccess" AS f
WHERE f."BusinessId" = @__businessId_0
2025-08-09 17:46:57.803 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.FeatureAccessModule.Controllers.FeatureAccessController+FeatureMeDto[]'.
2025-08-09 17:46:57.818 +05:30 [INF] Executed action xbytechat.api.Features.FeatureAccessModule.Controllers.FeatureAccessController.GetMyFeatureAccess (xbytechat.api) in 62.9981ms
2025-08-09 17:46:57.820 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.FeatureAccessModule.Controllers.FeatureAccessController.GetMyFeatureAccess (xbytechat.api)'
2025-08-09 17:46:57.823 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/feature-access/me - 200 null application/json; charset=utf-8 174.2871ms
