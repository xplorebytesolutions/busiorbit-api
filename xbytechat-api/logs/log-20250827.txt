2025-08-27 10:19:50.571 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 10:19:50.617 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 10:19:50.634 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 10:19:51.502 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 10:19:52.044 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 10:19:52.298 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 10:19:52.299 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 10:19:52.300 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 10:19:52.300 +05:30 [INF] Hosting environment: Development
2025-08-27 10:19:52.301 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 10:19:52.302 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 10:19:52.317 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__cutoff_0='2025-08-20T04:49:50.7667949Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 10:19:54.319 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 10:19:54.493 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 185.2614ms
2025-08-27 10:19:54.642 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 10:19:54.642 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 10:19:54.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.1931ms
2025-08-27 10:19:54.674 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.4531ms
2025-08-27 10:19:54.818 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 10:19:55.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.2733ms
2025-08-27 10:20:05.727 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 10:20:05.819 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 10:20:05.842 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 10:20:06.659 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 10:20:07.112 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 10:20:07.287 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 10:20:07.288 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 10:20:07.289 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 10:20:07.290 +05:30 [INF] Hosting environment: Development
2025-08-27 10:20:07.291 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 10:20:07.299 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 10:20:07.315 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__cutoff_0='2025-08-20T04:50:05.9992170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 10:20:09.498 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 10:20:09.632 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 141.6954ms
2025-08-27 10:20:09.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 10:20:09.664 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.1914ms
2025-08-27 10:20:09.711 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 10:20:09.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.4012ms
2025-08-27 10:20:09.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 10:20:10.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 177.0274ms
2025-08-27 10:20:33.856 +05:30 [INF] Request starting HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1853976629&hub.verify_token=xbytechat-secret-token - null null
2025-08-27 10:20:33.863 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 10:20:33.945 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 10:20:33.960 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 10:20:33.977 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-08-27 10:20:33.980 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-27 10:20:33.986 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 21.9705ms
2025-08-27 10:20:33.987 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 10:20:33.989 +05:30 [INF] Request finished HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1853976629&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 133.0506ms
2025-08-27 10:27:08.938 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 10:27:08.973 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 10:27:08.988 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 10:27:09.650 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 10:27:10.109 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 10:27:10.290 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 10:27:10.290 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 10:27:10.291 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 10:27:10.292 +05:30 [INF] Hosting environment: Development
2025-08-27 10:27:10.293 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 10:27:10.307 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 10:27:10.322 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[@__cutoff_0='2025-08-20T04:57:09.0693073Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 10:27:12.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 10:27:12.675 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 159.5418ms
2025-08-27 10:27:12.705 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 10:27:12.714 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9757ms
2025-08-27 10:27:12.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 10:27:12.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.8772ms
2025-08-27 10:27:12.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 10:27:13.141 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 196.4058ms
2025-08-27 10:31:07.448 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 10:31:07.464 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 18.2978ms
2025-08-27 10:31:07.511 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 10:31:07.512 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 10:31:07.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.0864ms
2025-08-27 10:31:07.535 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.9403ms
2025-08-27 10:31:07.921 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 10:31:07.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 61.9413ms
2025-08-27 10:37:49.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 10:37:49.935 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.8946ms
2025-08-27 10:37:50.229 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 10:37:50.295 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 65.6023ms
2025-08-27 10:37:51.037 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 10:37:51.041 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.1873ms
2025-08-27 10:37:51.266 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 10:37:51.321 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.6219ms
2025-08-27 11:38:48.779 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.d24132496a9b99109f1a.hot-update.json - null null
2025-08-27 11:38:48.875 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 11:38:49.387 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.d24132496a9b99109f1a.hot-update.json - 404 0 null 611.855ms
2025-08-27 11:38:49.400 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.d24132496a9b99109f1a.hot-update.json, Response status code: 404
2025-08-27 11:40:09.643 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 11:40:09.697 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 11:40:09.717 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 11:40:10.519 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 11:40:11.023 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 11:40:11.267 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 11:40:11.268 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 11:40:11.269 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 11:40:11.270 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 11:40:11.270 +05:30 [INF] Hosting environment: Development
2025-08-27 11:40:11.276 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 11:40:11.292 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@__cutoff_0='2025-08-20T06:10:09.8236317Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 11:40:13.323 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 11:40:13.507 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 193.3419ms
2025-08-27 11:40:13.633 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 11:40:13.633 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 11:40:13.643 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.7504ms
2025-08-27 11:40:13.669 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.0762ms
2025-08-27 11:40:13.801 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 11:40:13.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 194.9973ms
2025-08-27 11:40:32.203 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 11:40:32.208 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 11:40:32.247 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:32.250 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 47.2444ms
2025-08-27 11:40:32.253 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-08-27 11:40:32.262 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:32.306 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:40:32.321 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 11:40:32.387 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-08-27 11:40:32.461 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 11:40:32.542 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-08-27 11:40:32.552 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-08-27 11:40:32.625 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-08-27 11:40:32.627 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: superadmin, PlanId: null
2025-08-27 11:40:32.636 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:32.646 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 319.919ms
2025-08-27 11:40:32.648 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:40:32.653 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 399.409ms
2025-08-27 11:40:32.657 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:32.660 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:32.662 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0211ms
2025-08-27 11:40:32.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:32.670 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:32.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:32.715 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:40:32.719 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:32.730 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.8548ms
2025-08-27 11:40:32.732 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:32.733 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 67.3352ms
2025-08-27 11:40:32.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:32.870 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:32.877 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:32.878 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:40:32.882 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:32.884 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.9716ms
2025-08-27 11:40:32.885 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:32.887 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.8634ms
2025-08-27 11:40:45.146 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 11:40:45.149 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:45.150 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.1993ms
2025-08-27 11:40:45.153 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 11:40:45.155 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:45.157 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:40:45.158 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 11:40:45.164 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-27 11:40:45.171 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 11:40:45.199 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 11:40:45.325 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 11:40:45.329 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-27 11:40:45.330 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 11:40:45.331 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 11:40:45.333 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:45.334 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 174.5341ms
2025-08-27 11:40:45.336 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:40:45.337 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 184.103ms
2025-08-27 11:40:45.341 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:45.344 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:45.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.926ms
2025-08-27 11:40:45.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:45.352 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:45.355 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.356 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:40:45.371 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-27 11:40:45.404 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:40:45.408 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:45.415 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 56.4356ms
2025-08-27 11:40:45.416 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 67.8205ms
2025-08-27 11:40:45.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:45.431 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:45.433 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.434 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:40:45.442 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:40:45.447 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:45.450 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.1765ms
2025-08-27 11:40:45.452 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.453 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:45.454 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.5012ms
2025-08-27 11:40:45.458 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:45.462 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.464 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:40:45.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:40:45.475 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:45.477 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.8315ms
2025-08-27 11:40:45.479 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.481 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.8185ms
2025-08-27 11:40:45.541 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:40:45.545 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:45.547 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.549 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:40:45.556 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:40:45.562 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:45.564 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2724ms
2025-08-27 11:40:45.566 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:40:45.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.9849ms
2025-08-27 11:40:49.520 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:40:49.523 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:49.524 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.8ms
2025-08-27 11:40:49.527 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:40:49.531 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:49.532 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:40:49.536 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:40:49.566 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:40:49.569 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:49.578 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 40.4085ms
2025-08-27 11:40:49.580 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:40:49.581 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 54.2235ms
2025-08-27 11:40:51.743 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:40:51.745 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:51.746 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.2374ms
2025-08-27 11:40:51.748 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:40:51.750 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:51.751 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:40:51.755 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:40:51.799 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:40:51.822 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:40:51.846 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:40:51.848 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:40:52.683 +05:30 [INF] Received HTTP response headers after 832.8167ms - 401
2025-08-27 11:40:52.685 +05:30 [INF] End processing HTTP request after 839.9612ms - 401
2025-08-27 11:40:52.708 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:40:52.715 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 958.9315ms
2025-08-27 11:40:52.717 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:40:52.718 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 969.1891ms
2025-08-27 11:40:52.731 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:40:52.733 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:40:52.734 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:40:52.735 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:40:52.742 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:40:52.744 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:40:52.746 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 9.3723ms
2025-08-27 11:40:52.747 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:40:52.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 16.6738ms
2025-08-27 11:41:01.324 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:41:01.326 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:01.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.5021ms
2025-08-27 11:41:01.331 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:41:01.333 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:01.334 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:41:01.335 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:41:01.339 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:41:01.344 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:41:01.346 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:41:01.347 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:41:01.642 +05:30 [INF] Received HTTP response headers after 294.1136ms - 401
2025-08-27 11:41:01.643 +05:30 [INF] End processing HTTP request after 297.3759ms - 401
2025-08-27 11:41:01.645 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:41:01.646 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 309.8301ms
2025-08-27 11:41:01.648 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:41:01.649 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 317.9811ms
2025-08-27 11:41:01.664 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:41:01.667 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:01.668 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.4188ms
2025-08-27 11:41:01.671 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:41:01.673 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:01.674 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:41:01.675 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:41:01.678 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:41:01.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:41:01.683 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 7.1862ms
2025-08-27 11:41:01.685 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:41:01.686 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 14.875ms
2025-08-27 11:41:18.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 11:41:18.761 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:18.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.6586ms
2025-08-27 11:41:18.766 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 11:41:18.770 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:18.772 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 11:41:18.777 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 11:41:18.785 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:41:18.790 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 11:41:18.799 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.0742ms
2025-08-27 11:41:18.800 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 11:41:18.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 36.1776ms
2025-08-27 11:41:53.817 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 11:41:53.819 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:53.820 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.6181ms
2025-08-27 11:41:53.830 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 553
2025-08-27 11:41:53.832 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:53.833 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 11:41:53.837 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 11:41:53.846 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 11:41:53.853 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 11:41:53.908 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPcZBNh40TiCubNnZAwS1GQLoGjoOEGW9JtfSxjjbID4y7wPvcFiX5UaoLaZALIZCQk9WpNR6ZAGT6uJbkN2U2ZBMZCBE4jp7If0AfcxHTmabfL0LqSX1oaeCspZAGs6XPO1pF7tbmBn8ZCuvIOMssUxx0T9jZAnldWliHZC1zhDrmOsU9ei6l8hhQ5BEFWjI0uYA2FrhNmMIIE7yktVHdyWtr3iAHbq0PEMDSBxOVGn7pZBwua5LkpqCzwZDZD' (Nullable = false), @p1='2025-08-27T06:11:53.8572708Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 11:41:53.918 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:41:53.920 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 81.834ms
2025-08-27 11:41:53.921 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 11:41:53.922 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 92.573ms
2025-08-27 11:41:54.597 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 11:41:54.600 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:54.600 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 2.9893ms
2025-08-27 11:41:54.603 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 385
2025-08-27 11:41:54.605 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:41:54.606 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 11:41:54.610 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 11:41:54.616 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 11:41:54.617 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 11:41:55.525 +05:30 [INF] Received HTTP response headers after 906.7481ms - 200
2025-08-27 11:41:55.526 +05:30 [INF] End processing HTTP request after 910.1682ms - 200
2025-08-27 11:41:55.530 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:41:55.532 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 919.9414ms
2025-08-27 11:41:55.533 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 11:41:55.534 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 931.3098ms
2025-08-27 11:42:00.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:42:00.080 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:00.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 4.1018ms
2025-08-27 11:42:00.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:42:00.088 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:00.090 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:42:00.091 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:42:00.097 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:42:00.101 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:42:00.103 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 9.4145ms
2025-08-27 11:42:00.104 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:42:00.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 21.4077ms
2025-08-27 11:42:02.006 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:42:02.009 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:02.010 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.594ms
2025-08-27 11:42:02.028 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:42:02.030 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:02.031 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:42:02.032 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:42:02.037 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:42:02.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:42:02.044 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:42:02.044 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:42:02.823 +05:30 [INF] Received HTTP response headers after 777.5109ms - 200
2025-08-27 11:42:02.825 +05:30 [INF] End processing HTTP request after 781.0365ms - 200
2025-08-27 11:42:02.982 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:42:03.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:42:03.029 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:42:03.056 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='9dc08b5b-90bb-480f-bf03-17faebce4090', @p0='2025-08-27T06:12:02.0407254Z' (DbType = DateTime), @p1='2025-08-27T06:12:02.0407254Z' (DbType = DateTime), @p6='d3af80fd-8671-4871-87f0-3d5676c92913', @p3='2025-08-27T06:12:02.0407254Z' (DbType = DateTime), @p4='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwEmlZ6V&_nc_oc=AdlGJpui2wamDs7UOBrgZDdYhB9ivMLI-Rw8zVXK_dtjcMu2XesOqVWRZNdOdgq6WGuHZZZfn7iuT584Ywtkf_di&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=W5mPVIfhSFX3xCLq8TwCPA&oh=01_Q5Aa2QHh3FVcVsV3wB2G0YwtQIq2V3bwPw0x1TYhn58fBBa2ug&oe=68D60E8F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p5='2025-08-27T06:12:02.0407254Z' (DbType = DateTime), @p9='f9aa5606-ac62-4e91-bdcd-764f2ec3bf2f', @p7='2025-08-27T06:12:02.0407254Z' (DbType = DateTime), @p8='2025-08-27T06:12:02.0407254Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p3, "RawJson" = @p4, "UpdatedAt" = @p5
WHERE "Id" = @p6;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p7, "UpdatedAt" = @p8
WHERE "Id" = @p9;
2025-08-27 11:42:03.069 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:42:03.070 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1036.0499ms
2025-08-27 11:42:03.071 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:42:03.072 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1043.8064ms
2025-08-27 11:42:03.084 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:42:03.086 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:03.087 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:42:03.088 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:42:03.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:42:03.095 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:42:03.096 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.3653ms
2025-08-27 11:42:03.097 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:42:03.098 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 13.8342ms
2025-08-27 11:42:05.764 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:42:05.767 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:05.768 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:42:05.769 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:42:05.774 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:42:05.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:42:05.781 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 11:42:05.784 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:42:05.785 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 14.0067ms
2025-08-27 11:42:05.786 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:42:05.787 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 23.1063ms
2025-08-27 11:42:05.801 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:42:05.804 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:05.804 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.2253ms
2025-08-27 11:42:05.807 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:42:05.809 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:42:05.810 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:42:05.811 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:42:05.816 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:42:05.818 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:42:05.819 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 7.279ms
2025-08-27 11:42:05.820 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:42:05.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 14.338ms
2025-08-27 11:43:08.474 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 11:43:08.477 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:43:08.478 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.2356ms
2025-08-27 11:43:08.485 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 11:43:08.487 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:43:08.489 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 11:43:08.490 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 11:43:08.496 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:43:08.500 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 11:43:08.501 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 9.2892ms
2025-08-27 11:43:08.502 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 11:43:08.504 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 18.5692ms
2025-08-27 11:43:34.397 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 11:43:34.403 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:43:34.404 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 7.1111ms
2025-08-27 11:43:34.411 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 553
2025-08-27 11:43:34.413 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:43:34.414 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 11:43:34.415 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 11:43:34.417 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 11:43:34.419 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 11:43:34.424 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='2025-08-27T06:13:34.4232042Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-08-27 11:43:34.426 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:43:34.428 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 11.543ms
2025-08-27 11:43:34.429 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 11:43:34.430 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 19.0111ms
2025-08-27 11:43:35.120 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 11:43:35.122 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:43:35.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 2.9579ms
2025-08-27 11:43:35.128 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 385
2025-08-27 11:43:35.130 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:43:35.131 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 11:43:35.133 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 11:43:35.135 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 11:43:35.135 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 11:43:36.686 +05:30 [INF] Received HTTP response headers after 1549.8551ms - 200
2025-08-27 11:43:36.688 +05:30 [INF] End processing HTTP request after 1553.1736ms - 200
2025-08-27 11:43:36.689 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:43:36.690 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1556.3208ms
2025-08-27 11:43:36.692 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 11:43:36.693 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1564.8614ms
2025-08-27 11:45:21.671 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:45:21.705 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:21.706 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 35.0236ms
2025-08-27 11:45:21.710 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:45:21.717 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:21.718 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:45:21.718 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:45:21.783 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:45:21.785 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:45:21.786 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 66.2543ms
2025-08-27 11:45:21.787 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:45:21.788 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 78.1247ms
2025-08-27 11:45:24.292 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:45:24.294 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:24.295 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 2.8093ms
2025-08-27 11:45:24.298 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:45:24.299 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:24.300 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:45:24.301 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:45:24.305 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:45:24.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:45:24.312 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 11:45:24.312 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:45:24.313 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 10.9615ms
2025-08-27 11:45:24.315 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:45:24.315 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 17.9166ms
2025-08-27 11:45:24.330 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:45:24.332 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:24.333 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:45:24.334 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:45:24.337 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:45:24.340 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:45:24.341 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.2564ms
2025-08-27 11:45:24.342 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:45:24.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 13.5929ms
2025-08-27 11:45:52.119 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:45:52.122 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:52.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.0567ms
2025-08-27 11:45:52.128 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:45:52.130 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:52.131 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:45:52.131 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:45:52.135 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:45:52.139 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:45:52.140 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:45:52.141 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:45:53.195 +05:30 [INF] Received HTTP response headers after 1052.6858ms - 200
2025-08-27 11:45:53.196 +05:30 [INF] End processing HTTP request after 1055.661ms - 200
2025-08-27 11:45:53.203 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:45:53.223 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:45:53.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:45:53.240 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3f42cc55-fb76-4031-9590-0ce2a093e6a1', @p1='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p4='UTILITY', @p5='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p6='817241660991962', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p11='account_creation_confirmation_3' (Nullable = false), @p12='2', @p13='meta_cloud' (Nullable = false), @p14='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p17='b06bc2ea-d5ae-44b9-9346-0ab3bd75ea32', @p18='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[]' (Nullable = false), @p21='UTILITY', @p22='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p23='617143187619824', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p28='hello_world' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p34='ef894ce3-24d2-4f85-b343-5fb22a55398c', @p35='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p38='MARKETING', @p39='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p40='1100798472016654', @p41='True', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-27T06:15:52.1379165Z' (DbType = DateTime), @p45='shoe_launch_offer' (Nullable = false), @p46='1', @p47='meta_cloud' (Nullable = false), @p48='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwEmlZ6V&_nc_oc=AdlGJpui2wamDs7UOBrgZDdYhB9ivMLI-Rw8zVXK_dtjcMu2XesOqVWRZNdOdgq6WGuHZZZfn7iuT584Ywtkf_di&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=j6ddftio9sqox4hHGkJZvQ&oh=01_Q5Aa2QFo2sSHiORIzOWXru8SaTAoUox5aoTDjDQA04a-k3JtpA&oe=68D60E8F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-27T06:15:52.1379165Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 11:45:53.243 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:45:53.244 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1111.6029ms
2025-08-27 11:45:53.245 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:45:53.246 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1117.9247ms
2025-08-27 11:45:53.256 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:45:53.258 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:53.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 2.4604ms
2025-08-27 11:45:53.261 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:45:53.263 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:45:53.264 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:45:53.264 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:45:53.268 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:45:53.270 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:45:53.272 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.2117ms
2025-08-27 11:45:53.273 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:45:53.273 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 12.1548ms
2025-08-27 11:48:41.000 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:48:41.007 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:41.008 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 8.0542ms
2025-08-27 11:48:41.015 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:48:41.017 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:41.019 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:48:41.019 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:48:41.023 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:48:41.028 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:48:41.030 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 11:48:41.031 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:48:41.032 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 11.2612ms
2025-08-27 11:48:41.033 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:48:41.034 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 19.7126ms
2025-08-27 11:48:41.050 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:48:41.056 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:41.057 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 7.4835ms
2025-08-27 11:48:41.061 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:48:41.064 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:41.066 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:48:41.068 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:48:41.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:48:41.076 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:48:41.077 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 7.3678ms
2025-08-27 11:48:41.079 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:48:41.080 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 18.7514ms
2025-08-27 11:48:46.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:48:46.922 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:46.924 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.2632ms
2025-08-27 11:48:46.928 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:48:46.931 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:46.933 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:48:46.934 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:48:46.938 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:48:46.942 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:48:46.944 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9843ms
2025-08-27 11:48:46.945 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:48:46.946 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2875ms
2025-08-27 11:48:47.014 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:48:47.017 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:47.019 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:48:47.020 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:48:47.025 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:48:47.030 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:48:47.032 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.1006ms
2025-08-27 11:48:47.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:48:47.035 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.9288ms
2025-08-27 11:48:47.068 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:48:47.074 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:48:47.080 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:47.084 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:47.085 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 17.3877ms
2025-08-27 11:48:47.088 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:48:47.092 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:48:47.095 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:48:47.098 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:48:47.105 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:48:47.105 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:48:47.115 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:48:47.121 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:48:47.125 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.795ms
2025-08-27 11:48:47.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:48:47.130 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:48:47.133 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:48:47.134 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 60.4746ms
2025-08-27 11:48:47.135 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 12.4527ms
2025-08-27 11:48:47.141 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:48:47.142 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 50.4523ms
2025-08-27 11:49:13.361 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:49:13.363 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.364 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8081ms
2025-08-27 11:49:13.369 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:49:13.379 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.381 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.382 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:49:13.386 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:49:13.397 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.399 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.7598ms
2025-08-27 11:49:13.401 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.402 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.4745ms
2025-08-27 11:49:13.414 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:49:13.417 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.418 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.419 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:49:13.423 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:49:13.426 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.428 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8577ms
2025-08-27 11:49:13.429 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.0315ms
2025-08-27 11:49:13.455 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:49:13.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:49:13.458 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.460 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.461 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 5.9899ms
2025-08-27 11:49:13.462 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.465 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:49:13.466 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:49:13.469 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.472 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:49:13.474 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:49:13.475 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:49:13.486 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.489 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.2557ms
2025-08-27 11:49:13.491 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.493 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.4937ms
2025-08-27 11:49:13.551 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:49:13.553 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.555 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 72.9171ms
2025-08-27 11:49:13.556 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:49:13.558 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 92.462ms
2025-08-27 11:49:13.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:49:13.787 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.788 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.790 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:49:13.795 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:49:13.799 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.800 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6309ms
2025-08-27 11:49:13.801 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.2647ms
2025-08-27 11:49:13.815 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:49:13.818 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.819 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.820 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:49:13.826 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:49:13.830 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.843 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.8392ms
2025-08-27 11:49:13.845 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.846 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.6175ms
2025-08-27 11:49:13.878 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:49:13.878 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:49:13.880 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.883 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:13.884 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:49:13.884 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.885 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:49:13.886 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:49:13.891 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:49:13.895 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:49:13.898 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.900 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:13.901 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 13.1828ms
2025-08-27 11:49:13.902 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.4991ms
2025-08-27 11:49:13.903 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:49:13.904 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:49:13.905 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 27.1523ms
2025-08-27 11:49:13.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.0886ms
2025-08-27 11:49:15.684 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:49:15.687 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:15.688 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.4131ms
2025-08-27 11:49:15.691 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:49:15.694 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:15.695 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:49:15.696 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:49:15.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:49:15.705 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:49:15.707 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:49:15.708 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 11:49:16.765 +05:30 [INF] Received HTTP response headers after 1055.8636ms - 200
2025-08-27 11:49:16.767 +05:30 [INF] End processing HTTP request after 1059.5749ms - 200
2025-08-27 11:49:16.771 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:49:16.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:49:16.778 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:49:16.783 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='5ddf9a86-e3a0-4f53-9755-4923df082afa', @p1='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p4='MARKETING', @p5='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p6='1100798472016654', @p7='True', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p11='shoe_launch_offer' (Nullable = false), @p12='1', @p13='meta_cloud' (Nullable = false), @p14='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwEmlZ6V&_nc_oc=AdlGJpui2wamDs7UOBrgZDdYhB9ivMLI-Rw8zVXK_dtjcMu2XesOqVWRZNdOdgq6WGuHZZZfn7iuT584Ywtkf_di&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=Zn-xkRnOssTwf8jgOB3ilQ&oh=01_Q5Aa2QEbLcHGpjzHrEdtzLuDttazX4ThwOWy74cdbmWV-GiT2g&oe=68D60E8F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p17='7d1a8891-6e00-41cc-8c72-cb9152bdfb2d', @p18='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p21='UTILITY', @p22='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p23='817241660991962', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p28='account_creation_confirmation_3' (Nullable = false), @p29='2', @p30='meta_cloud' (Nullable = false), @p31='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p34='bea8618c-b0d1-42ec-9fd8-502ab6db0347', @p35='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[]' (Nullable = false), @p38='UTILITY', @p39='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p40='617143187619824', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-27T06:19:15.7036581Z' (DbType = DateTime), @p45='hello_world' (Nullable = false), @p46='0', @p47='meta_cloud' (Nullable = false), @p48='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-27T06:19:15.7036581Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 11:49:16.786 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:49:16.788 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1090.3107ms
2025-08-27 11:49:16.789 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:49:16.790 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1098.4602ms
2025-08-27 11:49:16.804 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:49:16.806 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:49:16.807 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:49:16.808 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:49:16.811 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:49:16.815 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:49:16.816 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.3578ms
2025-08-27 11:49:16.817 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:49:16.818 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 14.8122ms
2025-08-27 11:50:00.083 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 11:50:00.088 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:00.089 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.8662ms
2025-08-27 11:50:00.096 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 11:50:00.098 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:00.099 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:50:00.100 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 11:50:00.109 +05:30 [INF] 🔑 Login attempt for email: test@test.com
2025-08-27 11:50:00.113 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@test.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 11:50:00.120 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 11:50:00.127 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='b2ad27f9-6ad9-4a1e-8beb-f0e0520adb5f'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 11:50:00.129 +05:30 [INF] ✅ Token generated for: test@test.com
2025-08-27 11:50:00.130 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 11:50:00.131 +05:30 [INF] ✅ Login successful for test@test.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 11:50:00.132 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:50:00.133 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 31.3762ms
2025-08-27 11:50:00.135 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:50:00.136 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 39.7584ms
2025-08-27 11:50:00.139 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:50:00.141 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:00.142 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9606ms
2025-08-27 11:50:00.144 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:50:00.146 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:00.147 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.148 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:50:00.152 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:50:00.156 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:50:00.157 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3239ms
2025-08-27 11:50:00.159 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.160 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4495ms
2025-08-27 11:50:00.172 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:50:00.175 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:00.176 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.177 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:50:00.180 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:50:00.185 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:50:00.186 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0191ms
2025-08-27 11:50:00.188 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.189 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:50:00.194 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.6316ms
2025-08-27 11:50:00.198 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:00.202 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.203 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:50:00.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:50:00.211 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:50:00.213 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9825ms
2025-08-27 11:50:00.215 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.216 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.438ms
2025-08-27 11:50:00.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:50:00.265 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:00.266 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.268 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:50:00.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:50:00.277 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:50:00.278 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8417ms
2025-08-27 11:50:00.280 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:50:00.281 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.0366ms
2025-08-27 11:50:05.431 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-27 11:50:05.434 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:05.435 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 204 null null 4.2535ms
2025-08-27 11:50:05.438 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-27 11:50:05.442 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:05.443 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:50:05.445 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:50:05.449 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:50:05.453 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:50:05.454 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 7.7993ms
2025-08-27 11:50:05.456 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:50:05.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 18.6012ms
2025-08-27 11:50:06.937 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null null
2025-08-27 11:50:06.939 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:06.940 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 204 null null 3.3773ms
2025-08-27 11:50:06.943 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - null 0
2025-08-27 11:50:06.945 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:06.946 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:50:06.947 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:50:06.952 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:50:06.956 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:50:06.965 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-27 11:50:06.967 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-08-27 11:50:08.333 +05:30 [INF] Received HTTP response headers after 1365.946ms - 200
2025-08-27 11:50:08.335 +05:30 [INF] End processing HTTP request after 1369.4832ms - 200
2025-08-27 11:50:08.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='flash_sale_earbuds_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:50:08.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='new_feature_announcement', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:50:08.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='automation_builder_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:50:08.367 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='testing_1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:50:08.370 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='test_msg', @__it_Language_3='en_GB'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:50:08.373 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__8__locals1_providerKey_1='pinnacle', @__it_Name_2='tempalte_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:50:08.377 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='3d70730c-605d-4fe6-ab57-0a0d21a05023', @p1='test msg' (Nullable = false), @p2='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p3='[]' (Nullable = false), @p4='MARKETING', @p5='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p6='422342703560510', @p7='False', @p8='True', @p9='en_GB' (Nullable = false), @p10='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p11='test_msg' (Nullable = false), @p12='0', @p13='pinnacle' (Nullable = false), @p14='{"name":"test_msg","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello"},{"type":"BODY","text":"test msg"}],"language":"en_GB","status":"APPROVED","category":"MARKETING","id":"422342703560510"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p17='76afb80e-58f5-4d7e-be9b-d1c3d8729a66', @p18='Hi {{1}},
For the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.

Use your personal discount code at checkout: {{2}}

This offer ends tomorrow!' (Nullable = false), @p19='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p20='[{"Type":"URL","Text":"Shop Aura Buds Pro","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"Watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p23='626833550179663', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p28='flash_sale_earbuds_v1' (Nullable = false), @p29='2', @p30='pinnacle' (Nullable = false), @p31='{"name":"flash_sale_earbuds_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hi {{1}},\nFor the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.\n\nUse your personal discount code at checkout: {{2}}\n\nThis offer ends tomorrow!","example":{"body_text":[["Gorsila","DEIMS"]]}},{"type":"FOOTER","text":"Sale ends in 24 hours."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Aura Buds Pro","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/"]},{"type":"URL","text":"Watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.mindsmiratus.com/"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","id":"626833550179663"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p34='ad1f5007-515b-4137-a1a3-c959f564be68', @p35='Dear {{1}},
The Sale is live Now!!!!!!' (Nullable = false), @p36='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p37='[]' (Nullable = false), @p38='MARKETING', @p39='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p40='865429905017848', @p41='True', @p42='True', @p43='en' (Nullable = false), @p44='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p45='tempalte_v1' (Nullable = false), @p46='1', @p47='pinnacle' (Nullable = false), @p48='{"name":"tempalte_v1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/389521422_865429908351181_4208520018935703846_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=HqMXtoxlchEQ7kNvwFRKxLr&_nc_oc=Adl5GldyWoa6MyD_fvBTWiiS_pl0AvQSJg1bipv08owEIzz4zWY5u6vZq_s_PJjs6eM&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=UjJHGYpzeucgKVFgDh0KHA&oh=01_Q5Aa2QHcqcnm16-Q0mh4ilm1OelwPBA7yPDh9Ns_PW7adWv5AA&oe=68D60ABD"]}},{"type":"BODY","text":"Dear {{1}},\r\nThe Sale is live Now!!!!!!","example":{"body_text":[["name"]]}}],"language":"en","status":"APPROVED","category":"MARKETING","id":"865429905017848"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p51='b7936b05-b2dc-4340-9b59-deee9dda8db7', @p52='Dear User,
Testing' (Nullable = false), @p53='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p54='[]' (Nullable = false), @p55='MARKETING', @p56='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p57='817759340478776', @p58='True', @p59='True', @p60='en' (Nullable = false), @p61='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p62='testing_1' (Nullable = false), @p63='0', @p64='pinnacle' (Nullable = false), @p65='{"name":"testing_1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/434020495_817759347145442_7459011205631203997_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=VUWTYFbh_iMQ7kNvwErWoWV&_nc_oc=AdlYwPN5yNGNyzF2iywEd8Lt6769EQj5dSq1kqTTRclS7YYyEFkQPrC3hU94AvGX3Dg&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=UjJHGYpzeucgKVFgDh0KHA&oh=01_Q5Aa2QE5z-BtgRLZ_ztET_6nWg3NOAGvykUehBanJdLMPBOF5A&oe=68D62F99"]}},{"type":"BODY","text":"Dear User,\r\nTesting"}],"language":"en","status":"APPROVED","category":"MARKETING","id":"817759340478776"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p68='eac5a92f-5477-41be-8807-ff6bbd0e8340', @p69='Hi {{1}}, 
Great news! The new {{2}} feature you've been waiting for is now live.

You can now [describe the core benefit of the feature, e.g., "collaborate with your team in real-time on projects"]. We built this based on your feedback, and we're excited for you to experience it.

Click below to try it now or watch a quick tutorial.' (Nullable = false), @p70='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p71='[{"Type":"URL","Text":"Try Now","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"Watch Video","SubType":"url","Index":1,"ParameterValue":"http://wati.io/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p72='MARKETING', @p73='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p74='4029843250610380', @p75='False', @p76='True', @p77='en' (Nullable = false), @p78='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p79='new_feature_announcement' (Nullable = false), @p80='2', @p81='pinnacle' (Nullable = false), @p82='{"name":"new_feature_announcement","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hi {{1}}, \nGreat news! The new {{2}} feature you've been waiting for is now live.\n\nYou can now [describe the core benefit of the feature, e.g., \"collaborate with your team in real-time on projects\"]. We built this based on your feedback, and we're excited for you to experience it.\n\nClick below to try it now or watch a quick tutorial.","example":{"body_text":[["Sam","AI Based Bot Integration"]]}},{"type":"FOOTER","text":"Team Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Try Now","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/"]},{"type":"URL","text":"Watch Video","url":"http://wati.io/{{1}}","example":["https://www.mindsmiratus.com/"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"4029843250610380"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p85='fd52f961-d9e6-420e-99d2-3d4bbbc3ad90', @p86='Hi {{1}}, exciting news from Mindsmiratus ! ✨

Our new Automation Flow Builder is now live, designed to help you nurture leads and boost sales 24/7.

Ready to see how you can set up your first automated campaign in under 5 minutes?' (Nullable = false), @p87='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @p88='[{"Type":"URL","Text":"Explore the Feature","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/"},{"Type":"URL","Text":"Book a Demo","SubType":"url","Index":1,"ParameterValue":"https://www.mindsmiratus.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p89='MARKETING', @p90='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p91='1104667477832305', @p92='False', @p93='True', @p94='en_US' (Nullable = false), @p95='2025-08-27T06:20:06.9553201Z' (DbType = DateTime), @p96='automation_builder_launch' (Nullable = false), @p97='1', @p98='pinnacle' (Nullable = false), @p99='{"name":"automation_builder_launch","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hi {{1}}, exciting news from Mindsmiratus ! ✨\n\nOur new Automation Flow Builder is now live, designed to help you nurture leads and boost sales 24/7.\n\nReady to see how you can set up your first automated campaign in under 5 minutes?","example":{"body_text":[["Hi Sam, exciting news from Mindsmiratus ! ✨  Our new Automation Flow Builder is now live, designed to help you nurture leads and boost sales 24/7."]]}},{"type":"FOOTER","text":"Team Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore the Feature","url":"https://www.mindsmiratus.com/"},{"type":"URL","text":"Book a Demo","url":"https://www.mindsmiratus.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","id":"1104667477832305"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-08-27T06:20:06.9553201Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
2025-08-27 11:50:08.380 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:50:08.382 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1432.3435ms
2025-08-27 11:50:08.383 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:50:08.384 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d - 200 null application/json; charset=utf-8 1440.6083ms
2025-08-27 11:50:08.395 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - null null
2025-08-27 11:50:08.397 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:50:08.398 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:50:08.399 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:50:08.403 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='1fd4aee7-d6b6-4aa6-9c78-76e7e592341d', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:50:08.406 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:50:08.407 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.2431ms
2025-08-27 11:50:08.408 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:50:08.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/1fd4aee7-d6b6-4aa6-9c78-76e7e592341d?status=APPROVED - 200 null application/json; charset=utf-8 14.2308ms
2025-08-27 11:51:46.316 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 11:51:46.322 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:46.323 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.3522ms
2025-08-27 11:51:46.329 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 11:51:46.331 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:46.332 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:51:46.333 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 11:51:46.336 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-27 11:51:46.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 11:51:46.344 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 11:51:46.352 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 11:51:46.355 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-27 11:51:46.356 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 11:51:46.357 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 11:51:46.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:51:46.360 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 25.1689ms
2025-08-27 11:51:46.361 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 11:51:46.362 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 32.6344ms
2025-08-27 11:51:46.364 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:51:46.366 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:46.367 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1521ms
2025-08-27 11:51:46.370 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:51:46.372 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:46.373 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.374 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:51:46.377 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:51:46.380 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:51:46.381 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.6754ms
2025-08-27 11:51:46.382 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.383 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.6538ms
2025-08-27 11:51:46.398 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:51:46.402 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:46.403 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.405 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:51:46.409 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:51:46.413 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:51:46.415 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.8861ms
2025-08-27 11:51:46.416 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:51:46.416 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.419 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:46.420 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.1148ms
2025-08-27 11:51:46.421 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.424 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:51:46.428 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:51:46.432 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:51:46.433 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2941ms
2025-08-27 11:51:46.435 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.1798ms
2025-08-27 11:51:46.498 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:51:46.501 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:46.502 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.503 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:51:46.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:51:46.510 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:51:46.512 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.9701ms
2025-08-27 11:51:46.513 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:51:46.514 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.4944ms
2025-08-27 11:51:50.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:51:50.209 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:50.210 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.8369ms
2025-08-27 11:51:50.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:51:50.216 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:50.217 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:51:50.218 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:51:50.222 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:51:50.225 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:51:50.227 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 7.7307ms
2025-08-27 11:51:50.229 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:51:50.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 16.9716ms
2025-08-27 11:51:54.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 11:51:54.828 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:54.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.5619ms
2025-08-27 11:51:54.832 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 11:51:54.834 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:51:54.835 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 11:51:54.836 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 11:51:54.841 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:51:54.845 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 11:51:54.846 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 8.6434ms
2025-08-27 11:51:54.848 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 11:51:54.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 17.0212ms
2025-08-27 11:55:16.807 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:55:16.820 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:16.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 13.4701ms
2025-08-27 11:55:16.852 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:55:16.854 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:16.855 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:16.856 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:55:16.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:55:16.863 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:55:16.865 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.9393ms
2025-08-27 11:55:16.866 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:16.868 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 16.196ms
2025-08-27 11:55:18.679 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:55:18.681 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:18.682 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.3879ms
2025-08-27 11:55:18.685 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:55:18.687 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:18.688 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:55:18.689 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:55:18.693 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:55:18.697 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:55:18.699 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 11:55:18.700 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:55:18.702 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 10.7015ms
2025-08-27 11:55:18.703 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:55:18.704 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 19.4534ms
2025-08-27 11:55:18.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:55:18.722 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:18.723 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:18.724 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:55:18.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:55:18.729 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:55:18.731 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 5.822ms
2025-08-27 11:55:18.732 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:18.733 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 14.0239ms
2025-08-27 11:55:22.778 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:55:22.781 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:22.782 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7168ms
2025-08-27 11:55:22.785 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:55:22.787 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:22.788 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:55:22.789 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:55:22.871 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:55:22.873 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:55:22.875 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 84.6006ms
2025-08-27 11:55:22.876 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:55:22.877 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 92.5985ms
2025-08-27 11:55:22.884 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:55:22.887 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:22.888 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:55:22.889 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:55:22.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:55:22.901 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:55:22.902 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8039ms
2025-08-27 11:55:22.903 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:55:22.904 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.0192ms
2025-08-27 11:55:22.934 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:55:22.934 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 11:55:22.937 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:22.939 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:22.939 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 5.1411ms
2025-08-27 11:55:22.940 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:55:22.943 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:55:22.944 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 11:55:22.946 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:22.949 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:22.950 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 11:55:22.952 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:55:22.954 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:55:22.957 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5989ms
2025-08-27 11:55:22.958 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:55:22.960 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 11:55:22.962 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:55:22.965 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.7045ms
2025-08-27 11:55:22.967 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.3153ms
2025-08-27 11:55:22.971 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:22.973 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 29.5491ms
2025-08-27 11:55:25.080 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:55:25.082 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:25.083 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 2.7549ms
2025-08-27 11:55:25.086 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:55:25.087 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:25.089 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:55:25.090 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:55:25.094 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:55:25.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:55:25.100 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 11:55:25.101 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:55:25.102 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 10.8019ms
2025-08-27 11:55:25.103 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:55:25.104 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 18.4992ms
2025-08-27 11:55:25.118 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:55:25.121 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:55:25.121 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:25.122 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:55:25.125 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:55:25.128 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:55:25.130 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 5.8691ms
2025-08-27 11:55:25.131 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:55:25.132 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 13.162ms
2025-08-27 11:56:37.376 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 11:56:37.381 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:56:37.382 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 5.9957ms
2025-08-27 11:56:37.389 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 11:56:37.391 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:56:37.392 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:56:37.393 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:56:37.396 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:56:37.401 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 11:56:37.403 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=100
2025-08-27 11:56:37.404 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=100
2025-08-27 11:56:38.489 +05:30 [INF] Received HTTP response headers after 1083.5229ms - 200
2025-08-27 11:56:38.490 +05:30 [INF] End processing HTTP request after 1087.3823ms - 200
2025-08-27 11:56:38.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='flash_sale_earbuds_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:56:38.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='launch_offer_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:56:38.535 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoes_launch_offer_1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:56:38.538 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='artisan_promo_1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:56:38.543 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:56:38.546 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='appointment_scheduling_address', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:56:38.549 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 11:56:38.555 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='1eb4acb2-0125-4aae-aa2c-c31925215887', @p1='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[]' (Nullable = false), @p4='UTILITY', @p5='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p6='2004415289964481', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p11='hello_world' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"2004415289964481"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p17='3a3b3798-e5e4-42f0-9464-2dc9bca8ca05', @p18='Hi , we’re excited to announce our new !

Tap a button below to explore or talk to us.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"View Collection","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/r/%7B%7B1%7D%7D{{1}}"},{"Type":"URL","Text":"Try Demo","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/r/%7B%7B1%7D%7D{{1}}"}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p23='1153750766594048', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p28='launch_offer_v1' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"launch_offer_v1","message_send_ttl_seconds":604800,"parameter_format":"NAMED","components":[{"type":"BODY","text":"Hi , we’re excited to announce our new !\n\nTap a button below to explore or talk to us."},{"type":"FOOTER","text":"Powered by XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"View Collection","url":"https://www.mindsmiratus.com/r/%7B%7B1%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"Try Demo","url":"https://www.youtube.com/r/%7B%7B1%7D%7D{{1}}","example":["https://www.youtube.com/"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1153750766594048"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p34='3ff0aa51-997a-4dba-b107-f9d6e64fc777', @p35='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.raplmple.com/"}]' (Nullable = false), @p38='UTILITY', @p39='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p40='741467298672501', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p45='account_creation_confirmation' (Nullable = false), @p46='2', @p47='meta_cloud' (Nullable = false), @p48='{"name":"account_creation_confirmation","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.raplmple.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"741467298672501"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p51='6f7475cb-2ce2-4b73-ad08-98ea26d7801c', @p52='Hi {{1}}, we're scheduling a technician visit to {{2}} on {{3}} between {{4}} and {{5}}. Please confirm if this time slot works for you.' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"QUICK_REPLY","Text":"Confirm","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Reschedule","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p55='UTILITY', @p56='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p57='1297929731693275', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p62='appointment_scheduling_address' (Nullable = false), @p63='5', @p64='meta_cloud' (Nullable = false), @p65='{"name":"appointment_scheduling_address","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Technician visit"},{"type":"BODY","text":"Hi {{1}}, we're scheduling a technician visit to {{2}} on {{3}} between {{4}} and {{5}}. Please confirm if this time slot works for you.","example":{"body_text":[["John","123 Maple St","2025-12-31","10:00 AM","2:00 PM"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Confirm"},{"type":"QUICK_REPLY","text":"Reschedule"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"appointment_scheduling_address","id":"1297929731693275"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p68='7e19c00a-0779-406d-b915-5f8e952c46d1', @p69='Hello {{}},
We are excited to announce the opening of our new shoe showroom! 👟🎉  

On this special occasion, enjoy an exclusive **20% discount for early birds**.  

Visit us today and step into style with comfort.' (Nullable = false), @p70='c13be597-6ae2-42bb-9d43-925815f24ff8', @p71='[{"Type":"URL","Text":"Shop Now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"URL","Text":"More","SubType":"url","Index":1,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call Us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p72='MARKETING', @p73='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p74='1452966502681662', @p75='True', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p79='shoes_launch_offer_1' (Nullable = false), @p80='1', @p81='meta_cloud' (Nullable = false), @p82='{"name":"shoes_launch_offer_1","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534417848_1452966506014995_7388461144063042716_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=pniXxrT9KjUQ7kNvwGEx8N7&_nc_oc=AdlSh5pmUIKJlPzTXkpZSr7N3LJbcBeXqKKP-8ac_EoxqamhRikI_Qt51wgLWI0ceNKZKE3_hVmguARQ3bTdbzSy&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=rAJQkVLq7emWJr7yVMfASw&oh=01_Q5Aa2QHicntpU1fY1F4qMq_nyN0B9dxEgZHlflvVo4lz7Ym4BA&oe=68D61754"]}},{"type":"BODY","text":"Hello {{}},\nWe are excited to announce the opening of our new shoe showroom! 👟🎉  \n\nOn this special occasion, enjoy an exclusive **20% discount for early birds**.  \n\nVisit us today and step into style with comfort."},{"type":"FOOTER","text":"Offer valid for a limited time only."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https://xplorebytesolutions.com/"},{"type":"URL","text":"More","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1452966502681662"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p85='8edbd311-2552-4885-85cc-ff3a325f47d2', @p86='⚡️ Flash Sale Alert! ⚡️
Hi {{}},
For the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.

Use your personal discount code at checkout: {{}}
This offer ends tomorrow!!' (Nullable = false), @p87='c13be597-6ae2-42bb-9d43-925815f24ff8', @p88='[{"Type":"URL","Text":"Shop Aura Buds Pro","SubType":"url","Index":0,"ParameterValue":"https://www.boat-lifestyle.com/?srsltid=AfmBOoqt5eV70tCS56Dl_bVtstdrLUN3LqdyL1iBWMcD9UppE1NyAtC5%2F{{1}}"},{"Type":"URL","Text":"Watch review","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7B1%7D%7D{{1}}"}]' (Nullable = false), @p89='MARKETING', @p90='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p91='664951736015563', @p92='False', @p93='True', @p94='en' (Nullable = false), @p95='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p96='flash_sale_earbuds_v1' (Nullable = false), @p97='2', @p98='meta_cloud' (Nullable = false), @p99='{"name":"flash_sale_earbuds_v1","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Flash Sale Alert! ⚡️\nHi {{}},\nFor the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.\n\nUse your personal discount code at checkout: {{}}\nThis offer ends tomorrow!!"},{"type":"FOOTER","text":"Powerd by XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Aura Buds Pro","url":"https://www.boat-lifestyle.com/?srsltid=AfmBOoqt5eV70tCS56Dl_bVtstdrLUN3LqdyL1iBWMcD9UppE1NyAtC5%2F{{1}}","example":["https://www.boat-lifestyle.com/collections/wired-headphones"]},{"type":"URL","text":"Watch review","url":"https://www.youtube.com/%7B%7B1%7D%7D{{1}}","example":["https://www.youtube.com/watch?v=mJML5skKR_o"]}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"664951736015563"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p102='9c6417e9-1325-4492-9d35-e924fbcbb8c5', @p103='Hello {{}},
✨ Discover the beauty of handmade treasures crafted by local artisans.  

Every purchase supports a family and keeps our culture alive.
🛍️ Explore our special collection here: https://xplorebytesolutions.com' (Nullable = false), @p104='c13be597-6ae2-42bb-9d43-925815f24ff8', @p105='[{"Type":"URL","Text":"View Collection","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p106='MARKETING', @p107='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p108='1105855798280099', @p109='True', @p110='True', @p111='en_US' (Nullable = false), @p112='2025-08-27T06:26:37.3995020Z' (DbType = DateTime), @p113='artisan_promo_1' (Nullable = false), @p114='1', @p115='meta_cloud' (Nullable = false), @p116='{"name":"artisan_promo_1","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534417284_1105855801613432_1966860460699549043_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=mSYBxuVyy-UQ7kNvwGy-Fat&_nc_oc=AdmugJwGueUo22GxMiwvpgvzOyp2Ri45dNP4HfFJfFcxCRLlxLYpGAJFAjvj_klEZIDWhGTh1g6eAYaTrKGvHaUr&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=rAJQkVLq7emWJr7yVMfASw&oh=01_Q5Aa2QE6rqF-e4Q5fctpCGboWnpJAEfQ_spOv1dMAaojZA2lBQ&oe=68D5FA3C"]}},{"type":"BODY","text":"Hello {{}},\n✨ Discover the beauty of handmade treasures crafted by local artisans.  \n\nEvery purchase supports a family and keeps our culture alive.\n🛍️ Explore our special collection here: https://xplorebytesolutions.com"},{"type":"FOOTER","text":"Reply YES to know more"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"View Collection","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1105855798280099"}' (Nullable = false), @p117='APPROVED' (Nullable = false), @p118='2025-08-27T06:26:37.3995020Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118);
2025-08-27 11:56:38.559 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 11:56:38.560 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1166.1371ms
2025-08-27 11:56:38.561 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 11:56:38.562 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1173.1094ms
2025-08-27 11:56:38.578 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:56:38.580 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:56:38.581 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 2.8877ms
2025-08-27 11:56:38.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 11:56:38.585 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:56:38.586 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:56:38.587 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:56:38.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 11:56:38.593 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:56:38.595 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.0826ms
2025-08-27 11:56:38.596 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 11:56:38.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 13.3271ms
2025-08-27 11:56:54.872 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - null null
2025-08-27 11:56:54.874 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:56:54.875 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - 204 null null 3.3364ms
2025-08-27 11:56:54.878 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - null null
2025-08-27 11:56:54.880 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:56:54.881 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 11:56:54.885 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:56:54.910 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='flash_sale_earbuds_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 11:56:54.913 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:56:54.916 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 29.3808ms
2025-08-27 11:56:54.917 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 11:56:54.918 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - 200 null application/json; charset=utf-8 40.4659ms
2025-08-27 11:57:43.337 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation - null null
2025-08-27 11:57:43.342 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:57:43.343 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation - 204 null null 6.5255ms
2025-08-27 11:57:43.349 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation - null null
2025-08-27 11:57:43.352 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:57:43.353 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 11:57:43.354 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 11:57:43.359 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='account_creation_confirmation'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 11:57:43.361 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:57:43.362 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 6.5532ms
2025-08-27 11:57:43.364 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 11:57:43.365 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation - 200 null application/json; charset=utf-8 15.4948ms
2025-08-27 11:58:14.148 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-27 11:58:14.148 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 11:58:14.156 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:58:14.159 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:58:14.161 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 13.4905ms
2025-08-27 11:58:14.166 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 18.0612ms
2025-08-27 11:58:14.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-27 11:58:14.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 11:58:14.178 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:58:14.181 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 11:58:14.181 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:58:14.183 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 11:58:14.185 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 11:58:14.186 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-27 11:58:14.191 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-27 11:58:14.204 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-27 11:58:14.207 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:58:14.214 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 26.0493ms
2025-08-27 11:58:14.214 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 11:58:14.216 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 11:58:14.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 43.0208ms
2025-08-27 11:58:14.249 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 11:58:14.302 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 11:58:14.308 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 121.6425ms
2025-08-27 11:58:14.310 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 11:58:14.311 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 137.211ms
2025-08-27 11:58:22.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-27 11:58:22.194 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:58:22.195 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 4.1397ms
2025-08-27 11:58:22.198 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 61
2025-08-27 11:58:22.201 +05:30 [INF] CORS policy execution successful.
2025-08-27 11:58:22.203 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 11:58:22.207 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-27 11:58:22.218 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-27 11:58:22.225 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-27 11:58:22.228 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-27 11:58:22.232 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 11:58:22.239 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 11:58:22.241 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 11:58:23.943 +05:30 [INF] Received HTTP response headers after 1701.328ms - 200
2025-08-27 11:58:23.944 +05:30 [INF] End processing HTTP request after 1705.0164ms - 200
2025-08-27 11:58:24.001 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='ea7b86c1-a577-4c0a-8e3f-1b9bc5deb5c4', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:28:23.9494890Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='sdvgsdfsd' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='sdvgsdfsd', @p16='2025-08-27T06:28:23.9495241Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-27 11:58:24.005 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 11:58:24.008 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1798.7387ms
2025-08-27 11:58:24.009 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 11:58:24.010 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1811.7536ms
2025-08-27 11:58:26.667 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-27 11:58:26.667 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-08-27 11:58:26.670 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 11:58:26.673 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 11:58:26.674 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 11:58:26.675 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 11:58:26.682 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"sent","timestamp":"1756276104","recipient_id":"918974005240","conversation":{"id":"a26c481053c93984332b4333e3c490f8","expiration_timestamp":"1756276104","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 11:58:26.682 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"delivered","timestamp":"1756276104","recipient_id":"918974005240","conversation":{"id":"a26c481053c93984332b4333e3c490f8","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 11:58:26.685 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 11:58:26.685 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 11:58:26.686 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:58:26.687 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 11:58:26.689 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 12.6828ms
2025-08-27 11:58:26.689 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.588ms
2025-08-27 11:58:26.690 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 11:58:26.691 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 11:58:26.692 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.8227ms
2025-08-27 11:58:26.693 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.6558ms
2025-08-27 11:58:26.876 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"sent","timestamp":"1756276104","recipient_id":"918974005240","conversation":{"id":"a26c481053c93984332b4333e3c490f8","expiration_timestamp":"1756276104","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 11:58:26.877 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 11:58:26.879 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"sent","timestamp":"1756276104","recipient_id":"918974005240","conversation":{"id":"a26c481053c93984332b4333e3c490f8","expiration_timestamp":"1756276104","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 11:58:26.908 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 11:58:26.912 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==
2025-08-27 11:58:26.913 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==
2025-08-27 11:58:26.917 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"delivered","timestamp":"1756276104","recipient_id":"918974005240","conversation":{"id":"a26c481053c93984332b4333e3c490f8","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 11:58:26.919 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 11:58:26.919 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"delivered","timestamp":"1756276104","recipient_id":"918974005240","conversation":{"id":"a26c481053c93984332b4333e3c490f8","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 11:58:26.922 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 11:58:26.924 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==
2025-08-27 11:58:26.924 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==
2025-08-27 12:01:53.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:01:53.069 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:01:53.070 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 10.8812ms
2025-08-27 12:01:53.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:01:53.081 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:01:53.082 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:01:53.083 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:01:53.265 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:01:53.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:01:53.269 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 184.1528ms
2025-08-27 12:01:53.270 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:01:53.271 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 197.3496ms
2025-08-27 12:01:55.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - null null
2025-08-27 12:01:55.765 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:01:55.766 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - 204 null null 3.608ms
2025-08-27 12:01:55.769 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - null null
2025-08-27 12:01:55.772 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:01:55.773 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 12:01:55.774 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:01:55.777 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='flash_sale_earbuds_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 12:01:55.780 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:01:55.781 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 6.1674ms
2025-08-27 12:01:55.782 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 12:01:55.784 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/flash_sale_earbuds_v1 - 200 null application/json; charset=utf-8 14.3462ms
2025-08-27 12:07:54.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 12:07:54.080 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:54.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 6.451ms
2025-08-27 12:07:54.087 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 529
2025-08-27 12:07:54.091 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:54.092 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 12:07:54.096 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:07:54.209 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:07:54.211 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:07:54.213 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:07:56.273 +05:30 [INF] Received HTTP response headers after 2058.9113ms - 200
2025-08-27 12:07:56.274 +05:30 [INF] End processing HTTP request after 2062.8592ms - 200
2025-08-27 12:07:56.361 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d2cfac25-2054-43f6-831a-57c3c36a798a', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T06:37:56.2958816Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='⚡️ Flash Sale Alert! ⚡️
Hi {{}},
For the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.

Use your personal discount code at checkout: {{}}
This offer ends tomorrow!!', @p14='flash_sale_earbuds_v1' (Nullable = false), @p15='Flash_Sale' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='flash_sale_earbuds_v1', @p20='["GorJuliya Costa","COSTA50"]', @p21='2025-08-27T06:37:56.2959452Z' (DbType = DateTime), @p22='32f1b1e0-0449-420a-acc1-8a9abce56f41', @p23='d2cfac25-2054-43f6-831a-57c3c36a798a', @p24='True', @p25='2', @p26='Watch review' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.youtube.com/%7B%7B1%7D%7D{{1}}' (Nullable = false), @p29='dced6935-0d6a-470d-ad08-3d258cdc6857', @p30='d2cfac25-2054-43f6-831a-57c3c36a798a', @p31='True', @p32='1', @p33='Shop Aura Buds Pro' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.boat-lifestyle.com/?srsltid=AfmBOoqt5eV70tCS56Dl_bVtstdrLUN3LqdyL1iBWMcD9UppE1NyAtC5%2F{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 12:07:56.365 +05:30 [INF] ✅ Campaign 'Flash_Sale' created with 0 recipients, 0 user buttons, 2 template buttons and 2 template parameters
2025-08-27 12:07:56.368 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:07:56.371 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2273.0676ms
2025-08-27 12:07:56.372 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 12:07:56.373 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2285.4778ms
2025-08-27 12:07:56.440 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 12:07:56.441 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null null
2025-08-27 12:07:56.442 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 12:07:56.446 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 12:07:56.447 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.448 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.450 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.452 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 12.6283ms
2025-08-27 12:07:56.453 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 204 null null 12.785ms
2025-08-27 12:07:56.454 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 12.3914ms
2025-08-27 12:07:56.455 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 9.1628ms
2025-08-27 12:07:56.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null null
2025-08-27 12:07:56.466 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 12:07:56.469 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 12:07:56.471 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.472 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.474 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 12:07:56.476 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:07:56.476 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:07:56.479 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 12:07:56.480 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 12:07:56.481 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:07:56.481 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 12:07:56.487 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 12:07:56.493 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 12:07:56.499 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:07:56.501 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 19.5888ms
2025-08-27 12:07:56.502 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:07:56.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 34.8017ms
2025-08-27 12:07:56.517 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d2cfac25-2054-43f6-831a-57c3c36a798a', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 12:07:56.527 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 12:07:56.532 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 48.1566ms
2025-08-27 12:07:56.534 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 12:07:56.535 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 200 null application/json; charset=utf-8 71.045ms
2025-08-27 12:07:56.558 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 12:07:56.560 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:07:56.566 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 83.2195ms
2025-08-27 12:07:56.567 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:07:56.567 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 12:07:56.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 101.7427ms
2025-08-27 12:07:56.570 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:07:56.573 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:07:56.574 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 12:07:56.578 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 12:07:56.581 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:07:56.582 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 6.5529ms
2025-08-27 12:07:56.583 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:07:56.584 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 17.325ms
2025-08-27 12:08:04.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a/assign-contacts - null null
2025-08-27 12:08:04.079 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:04.080 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a/assign-contacts - 204 null null 3.2544ms
2025-08-27 12:08:04.083 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a/assign-contacts - application/json 55
2025-08-27 12:08:04.086 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:04.086 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 12:08:04.091 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:08:04.131 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='d2cfac25-2054-43f6-831a-57c3c36a798a', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 12:08:04.160 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d7a4698a-125c-4dec-abf5-b5e4a2503e30', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='d2cfac25-2054-43f6-831a-57c3c36a798a', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T06:38:04.1365429Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T06:38:04.1366170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 12:08:04.162 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:08:04.163 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 70.4922ms
2025-08-27 12:08:04.164 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 12:08:04.165 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/d2cfac25-2054-43f6-831a-57c3c36a798a/assign-contacts - 200 null application/json; charset=utf-8 82.4869ms
2025-08-27 12:08:06.795 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:08:06.798 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:06.799 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.2099ms
2025-08-27 12:08:06.803 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:08:06.807 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:06.808 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:08:06.813 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:08:06.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 12:08:06.840 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:08:06.844 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 29.108ms
2025-08-27 12:08:06.846 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:08:06.847 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 43.6831ms
2025-08-27 12:08:11.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null null
2025-08-27 12:08:11.114 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:11.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 204 null null 3.1685ms
2025-08-27 12:08:11.117 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null 0
2025-08-27 12:08:11.120 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:11.121 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:08:11.124 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:08:12.913 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 12:08:12.922 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d2cfac25-2054-43f6-831a-57c3c36a798a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:08:12.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:08:12.935 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:08:12.937 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:08:12.938 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:08:13.874 +05:30 [INF] Received HTTP response headers after 934.4848ms - 200
2025-08-27 12:08:13.876 +05:30 [INF] End processing HTTP request after 938.388ms - 200
2025-08-27 12:08:13.897 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:08:13.910 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:08:13.912 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:08:17.597 +05:30 [INF] Received HTTP response headers after 3684.3779ms - 404
2025-08-27 12:08:17.598 +05:30 [INF] End processing HTTP request after 3687.962ms - 404
2025-08-27 12:08:17.600 +05:30 [WRN] MetaCloud send failed (HTTP 404): {"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AOqFNbk0j_THaBGnCoN_5q9"}}
2025-08-27 12:08:17.658 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='1c14c5b0-9fb7-4e55-a0c5-7d443a23dcf2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='d2cfac25-2054-43f6-831a-57c3c36a798a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:38:17.6022300Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='flash_sale_earbuds_v1' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AOqFNbk0j_THaBGnCoN_5q9"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='20de1a10-d45a-4b39-8d3a-4e3e09d33501', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='d2cfac25-2054-43f6-831a-57c3c36a798a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T06:38:17.6051702Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='⚡️ Flash Sale Alert! ⚡️
Hi {{}},
For the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.

Use your personal discount code at checkout: {{}}
This offer ends tomorrow!!' (Nullable = false), @p41=NULL, @p42='1c14c5b0-9fb7-4e55-a0c5-7d443a23dcf2' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='d7a4698a-125c-4dec-abf5-b5e4a2503e30', @p45='0', @p46='Failed', @p47='2025-08-27T06:38:17.6052286Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='flash_sale_earbuds_v1', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 12:08:17.663 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:08:17.664 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6537.7759ms
2025-08-27 12:08:17.665 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:08:17.666 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 200 null application/json; charset=utf-8 6548.6203ms
2025-08-27 12:08:32.484 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:08:32.486 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:08:32.487 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:08:32.490 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"read","timestamp":"1756276711","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:08:32.491 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:08:32.492 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:08:32.494 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0126ms
2025-08-27 12:08:32.495 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:08:32.496 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.9839ms
2025-08-27 12:08:32.498 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"read","timestamp":"1756276711","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:08:32.500 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:08:32.501 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==","status":"read","timestamp":"1756276711","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:08:32.506 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:08:32.508 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==
2025-08-27 12:08:32.509 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEZDQTg2QTAwNjUxMDVBRDE3AA==
2025-08-27 12:08:53.336 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null null
2025-08-27 12:08:53.338 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:53.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 204 null null 2.6731ms
2025-08-27 12:08:53.345 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null 0
2025-08-27 12:08:53.347 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:08:53.347 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:08:53.348 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:08:54.751 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='d2cfac25-2054-43f6-831a-57c3c36a798a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:08:54.756 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:08:54.759 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:08:54.760 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:08:54.762 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:08:55.998 +05:30 [INF] Received HTTP response headers after 1235.4717ms - 200
2025-08-27 12:08:55.999 +05:30 [INF] End processing HTTP request after 1238.7627ms - 200
2025-08-27 12:08:56.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:08:56.004 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:08:56.005 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:08:56.628 +05:30 [INF] Received HTTP response headers after 621.2635ms - 404
2025-08-27 12:08:56.629 +05:30 [INF] End processing HTTP request after 624.6958ms - 404
2025-08-27 12:08:56.630 +05:30 [WRN] MetaCloud send failed (HTTP 404): {"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AdFSNGOOV1IQpFcBK_VNvzF"}}
2025-08-27 12:08:56.635 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='32d528e3-58fc-4c07-9f02-ea05bbb581a5', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='d2cfac25-2054-43f6-831a-57c3c36a798a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:38:56.6320418Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='flash_sale_earbuds_v1' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AdFSNGOOV1IQpFcBK_VNvzF"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='a84d6434-ea78-4312-9745-a9b20e399ed2', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='d2cfac25-2054-43f6-831a-57c3c36a798a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T06:38:56.6323447Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='⚡️ Flash Sale Alert! ⚡️
Hi {{}},
For the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.

Use your personal discount code at checkout: {{}}
This offer ends tomorrow!!' (Nullable = false), @p41=NULL, @p42='32d528e3-58fc-4c07-9f02-ea05bbb581a5' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='d7a4698a-125c-4dec-abf5-b5e4a2503e30', @p45='0', @p46='Failed', @p47='2025-08-27T06:38:56.6323448Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='flash_sale_earbuds_v1', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 12:08:56.638 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:08:56.639 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3289.934ms
2025-08-27 12:08:56.640 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:08:56.641 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 200 null application/json; charset=utf-8 3296.9013ms
2025-08-27 12:13:22.362 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:13:22.379 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:22.380 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 19.0087ms
2025-08-27 12:13:22.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:13:22.410 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:22.412 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:13:22.414 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:13:22.555 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:13:22.559 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 12:13:22.562 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 145.7924ms
2025-08-27 12:13:22.564 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:13:22.566 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 165.5919ms
2025-08-27 12:13:49.513 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 12:13:49.519 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:49.520 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 6.7824ms
2025-08-27 12:13:49.535 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 551
2025-08-27 12:13:49.540 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:49.541 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 12:13:49.542 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:13:49.546 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 12:13:49.555 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 12:13:49.569 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPag58s3UUntdzhMlBrZA0Xc5eRJediACpzqVhxK9LPIxxGumS7VTGkxjYpkf1CTfuvuipj7bTVemqZCOzzRh6pfit6qSpeCRQ4VfrklS0vt1r47imQ6jgEcF4NVWzEZBCmKrd3ZAcl9H2BGwml9KXyJnQKVQmZB3ImA1sUvyeCsz0G9wxSk6TS1AOmLoQGjDDSx7XhtdOZBVRvV5uamvuY9m9Ej411ZBYom31hgZC8tuZAV4WZC3vMVbkZD' (Nullable = false), @p1='2025-08-27T06:43:49.5644111Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 12:13:49.574 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:13:49.576 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 30.8324ms
2025-08-27 12:13:49.578 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 12:13:49.580 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 44.7232ms
2025-08-27 12:13:50.600 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 12:13:50.604 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:50.605 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 5.4562ms
2025-08-27 12:13:50.609 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-27 12:13:50.615 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:50.616 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:13:50.618 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:13:50.622 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:13:50.623 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:13:52.199 +05:30 [INF] Received HTTP response headers after 1574.1691ms - 200
2025-08-27 12:13:52.201 +05:30 [INF] End processing HTTP request after 1579.3947ms - 200
2025-08-27 12:13:52.203 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:13:52.205 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1584.1567ms
2025-08-27 12:13:52.207 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:13:52.208 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1599.2595ms
2025-08-27 12:13:54.914 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:13:54.919 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:54.920 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.2089ms
2025-08-27 12:13:54.926 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:13:54.930 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:54.932 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:13:54.933 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:13:54.944 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:13:54.947 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:13:54.950 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 14.0652ms
2025-08-27 12:13:54.952 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:13:54.954 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 28.8133ms
2025-08-27 12:13:58.126 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:13:58.131 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:58.133 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.9225ms
2025-08-27 12:13:58.139 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:13:58.145 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:58.146 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:13:58.148 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:13:58.161 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 12:13:58.164 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:13:58.166 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 16.031ms
2025-08-27 12:13:58.168 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:13:58.170 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 31.3763ms
2025-08-27 12:13:59.527 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null null
2025-08-27 12:13:59.533 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:59.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 204 null null 6.705ms
2025-08-27 12:13:59.541 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null 0
2025-08-27 12:13:59.548 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:13:59.554 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:13:59.558 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:14:01.884 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='d2cfac25-2054-43f6-831a-57c3c36a798a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:14:01.890 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:14:01.895 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:14:01.898 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:14:01.900 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:14:02.761 +05:30 [INF] Received HTTP response headers after 859.4388ms - 200
2025-08-27 12:14:02.764 +05:30 [INF] End processing HTTP request after 865.7702ms - 200
2025-08-27 12:14:02.768 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:14:02.772 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:02.774 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:07.867 +05:30 [INF] Received HTTP response headers after 5092.0381ms - 404
2025-08-27 12:14:07.870 +05:30 [INF] End processing HTTP request after 5097.8545ms - 404
2025-08-27 12:14:07.872 +05:30 [WRN] MetaCloud send failed (HTTP 404): {"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AHgMo34ma8u6gemU9gBEajX"}}
2025-08-27 12:14:07.901 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@p0='c448cb8f-4902-4fb9-a9d7-bc6fd29f58c9', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='d2cfac25-2054-43f6-831a-57c3c36a798a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:44:07.8740946Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='flash_sale_earbuds_v1' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AHgMo34ma8u6gemU9gBEajX"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='5ce4a1e9-544a-42d5-bec3-697f5deb90d3', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='d2cfac25-2054-43f6-831a-57c3c36a798a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T06:44:07.8744731Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='⚡️ Flash Sale Alert! ⚡️
Hi {{}},
For the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.

Use your personal discount code at checkout: {{}}
This offer ends tomorrow!!' (Nullable = false), @p41=NULL, @p42='c448cb8f-4902-4fb9-a9d7-bc6fd29f58c9' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='d7a4698a-125c-4dec-abf5-b5e4a2503e30', @p45='0', @p46='Failed', @p47='2025-08-27T06:44:07.8744732Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='flash_sale_earbuds_v1', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 12:14:07.907 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:14:07.909 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8344.7237ms
2025-08-27 12:14:07.911 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:14:07.912 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 200 null application/json; charset=utf-8 8370.4172ms
2025-08-27 12:14:20.551 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-27 12:14:20.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 12:14:20.595 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:20.598 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:20.599 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 48.3033ms
2025-08-27 12:14:20.600 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 46.1241ms
2025-08-27 12:14:20.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 12:14:20.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-27 12:14:20.627 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:20.630 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:20.631 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 12:14:20.632 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:14:20.634 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-27 12:14:20.635 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 12:14:20.640 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-27 12:14:20.647 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-27 12:14:20.652 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:20.655 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 17.5918ms
2025-08-27 12:14:20.658 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 12:14:20.661 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 45.8019ms
2025-08-27 12:14:20.804 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 12:14:20.817 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 12:14:20.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:14:20.825 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 185.4885ms
2025-08-27 12:14:20.827 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:14:20.828 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 206.8973ms
2025-08-27 12:14:30.040 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-27 12:14:30.044 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:30.046 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 5.4802ms
2025-08-27 12:14:30.051 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 60
2025-08-27 12:14:30.054 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:30.056 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 12:14:30.058 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-27 12:14:30.062 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-27 12:14:30.067 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-27 12:14:30.072 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-27 12:14:30.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:14:30.080 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:30.082 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:31.418 +05:30 [INF] Received HTTP response headers after 1334.044ms - 200
2025-08-27 12:14:31.421 +05:30 [INF] End processing HTTP request after 1340.1486ms - 200
2025-08-27 12:14:31.437 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='d69976d2-c5d3-4417-ae20-64da3b43ca5a', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:44:31.4232359Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='fdgdfgdf' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='fdgdfgdf', @p16='2025-08-27T06:44:31.4232361Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-27 12:14:31.442 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:14:31.444 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1383.3296ms
2025-08-27 12:14:31.446 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 12:14:31.447 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1396.4589ms
2025-08-27 12:14:33.177 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-08-27 12:14:33.182 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:33.184 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:14:33.187 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"sent","timestamp":"1756277071","recipient_id":"918974005240","conversation":{"id":"cc4c13cd6ed31337b9719c9c14e9b788","expiration_timestamp":"1756277071","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:33.189 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:14:33.189 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"sent","timestamp":"1756277071","recipient_id":"918974005240","conversation":{"id":"cc4c13cd6ed31337b9719c9c14e9b788","expiration_timestamp":"1756277071","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:33.190 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:33.192 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:14:33.194 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.7098ms
2025-08-27 12:14:33.196 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"sent","timestamp":"1756277071","recipient_id":"918974005240","conversation":{"id":"cc4c13cd6ed31337b9719c9c14e9b788","expiration_timestamp":"1756277071","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:33.198 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:33.201 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.9067ms
2025-08-27 12:14:33.201 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:14:33.210 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==
2025-08-27 12:14:33.211 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==
2025-08-27 12:14:34.056 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-27 12:14:34.060 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:34.061 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:14:34.064 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"delivered","timestamp":"1756277072","recipient_id":"918974005240","conversation":{"id":"cc4c13cd6ed31337b9719c9c14e9b788","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:34.066 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:14:34.067 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"delivered","timestamp":"1756277072","recipient_id":"918974005240","conversation":{"id":"cc4c13cd6ed31337b9719c9c14e9b788","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:34.067 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:34.069 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:14:34.071 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.3604ms
2025-08-27 12:14:34.073 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"delivered","timestamp":"1756277072","recipient_id":"918974005240","conversation":{"id":"cc4c13cd6ed31337b9719c9c14e9b788","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:34.074 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:34.080 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:14:34.080 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.2384ms
2025-08-27 12:14:34.083 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==
2025-08-27 12:14:34.089 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==
2025-08-27 12:14:43.058 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-27 12:14:43.062 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:43.064 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 5.4465ms
2025-08-27 12:14:43.071 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 60
2025-08-27 12:14:43.076 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:43.077 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 12:14:43.079 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-27 12:14:43.082 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-27 12:14:43.086 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-27 12:14:43.092 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-27 12:14:43.095 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:14:43.100 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:43.102 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:43.963 +05:30 [INF] Received HTTP response headers after 859.0382ms - 200
2025-08-27 12:14:43.965 +05:30 [INF] End processing HTTP request after 865.6642ms - 200
2025-08-27 12:14:43.971 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='60c74727-18ed-48ad-93af-3eac6acf5155', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:44:43.9680397Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='fdgdfgdf' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='fdgdfgdf', @p16='2025-08-27T06:44:43.9680399Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-27 12:14:43.975 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:14:43.977 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 895.7145ms
2025-08-27 12:14:43.980 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 12:14:43.982 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 910.4002ms
2025-08-27 12:14:45.146 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-08-27 12:14:45.149 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:45.150 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:14:45.153 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"sent","timestamp":"1756277083","recipient_id":"918974005240","conversation":{"id":"2f985ed3c394513ac290c9d6fe402142","expiration_timestamp":"1756277083","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:45.155 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:14:45.156 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:45.156 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"sent","timestamp":"1756277083","recipient_id":"918974005240","conversation":{"id":"2f985ed3c394513ac290c9d6fe402142","expiration_timestamp":"1756277083","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:45.157 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.1568ms
2025-08-27 12:14:45.160 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:14:45.161 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:45.162 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"sent","timestamp":"1756277083","recipient_id":"918974005240","conversation":{"id":"2f985ed3c394513ac290c9d6fe402142","expiration_timestamp":"1756277083","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:45.163 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.7665ms
2025-08-27 12:14:45.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:14:45.177 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==
2025-08-27 12:14:45.178 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==
2025-08-27 12:14:45.466 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-27 12:14:45.469 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:45.470 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:14:45.472 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"delivered","timestamp":"1756277084","recipient_id":"918974005240","conversation":{"id":"2f985ed3c394513ac290c9d6fe402142","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:45.474 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:14:45.474 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"delivered","timestamp":"1756277084","recipient_id":"918974005240","conversation":{"id":"2f985ed3c394513ac290c9d6fe402142","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:45.475 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:45.477 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:14:45.478 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.585ms
2025-08-27 12:14:45.480 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"delivered","timestamp":"1756277084","recipient_id":"918974005240","conversation":{"id":"2f985ed3c394513ac290c9d6fe402142","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:45.482 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:45.485 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:14:45.485 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 19.0112ms
2025-08-27 12:14:45.487 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==
2025-08-27 12:14:45.491 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==
2025-08-27 12:14:56.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-27 12:14:56.267 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:56.268 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 6.4116ms
2025-08-27 12:14:56.273 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 60
2025-08-27 12:14:56.277 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:14:56.279 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 12:14:56.281 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-27 12:14:56.284 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-27 12:14:56.289 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-27 12:14:56.295 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-27 12:14:56.299 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:14:56.318 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:56.320 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:14:57.238 +05:30 [INF] Received HTTP response headers after 916.8047ms - 200
2025-08-27 12:14:57.241 +05:30 [INF] End processing HTTP request after 923.1839ms - 200
2025-08-27 12:14:57.263 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='e4ef1037-f5e0-4c5a-8f58-8c82812a737e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:44:57.2438886Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='fdgdfgdf' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='fdgdfgdf', @p16='2025-08-27T06:44:57.2438888Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-27 12:14:57.266 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:14:57.268 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 985.0811ms
2025-08-27 12:14:57.270 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 12:14:57.272 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 998.2733ms
2025-08-27 12:14:58.585 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-08-27 12:14:58.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:58.591 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:14:58.594 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"sent","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","expiration_timestamp":"1756277097","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.596 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:14:58.597 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"sent","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","expiration_timestamp":"1756277097","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.597 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:58.600 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:14:58.602 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.9603ms
2025-08-27 12:14:58.604 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"sent","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","expiration_timestamp":"1756277097","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.606 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:58.609 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.7242ms
2025-08-27 12:14:58.611 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:14:58.619 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:14:58.620 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:14:58.773 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-27 12:14:58.778 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:58.779 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:14:58.783 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"delivered","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.785 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:14:58.786 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"delivered","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.787 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:58.789 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:14:58.790 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.1248ms
2025-08-27 12:14:58.791 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"delivered","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.793 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:58.797 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.9197ms
2025-08-27 12:14:58.797 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:14:58.806 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:14:58.807 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:14:58.968 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-27 12:14:58.972 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:58.973 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:14:58.977 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"delivered","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.979 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:14:58.980 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"delivered","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.981 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:14:58.982 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:14:58.985 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.1122ms
2025-08-27 12:14:58.987 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"delivered","timestamp":"1756277097","recipient_id":"918974005240","conversation":{"id":"78c11eddd7d62a99c54f4eeff011fc8a","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:14:58.989 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:14:58.992 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.0849ms
2025-08-27 12:14:59.015 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:14:59.019 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:14:59.022 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:15:05.629 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:15:05.632 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:15:05.633 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:15:05.636 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.638 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:15:05.638 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.639 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:15:05.640 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:15:05.642 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.139ms
2025-08-27 12:15:05.644 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:15:05.643 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.645 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.0047ms
2025-08-27 12:15:05.650 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:15:05.659 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==
2025-08-27 12:15:05.661 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDIyNDZENzY4MDM0RkMxQjVBAA==
2025-08-27 12:15:05.680 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:15:05.683 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:15:05.687 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:15:05.690 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.692 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:15:05.693 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.693 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:15:05.695 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:15:05.696 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.2737ms
2025-08-27 12:15:05.699 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.700 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:15:05.705 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:15:05.705 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.2167ms
2025-08-27 12:15:05.707 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==
2025-08-27 12:15:05.713 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREJFQzVCNDk1NEU1OTJGMzMzAA==
2025-08-27 12:15:05.933 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:15:05.937 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:15:05.940 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:15:05.944 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.946 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:15:05.946 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.947 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:15:05.949 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:15:05.953 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==","status":"read","timestamp":"1756277104","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:15:05.952 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.8494ms
2025-08-27 12:15:05.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:15:05.957 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:15:05.960 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:15:05.962 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 28.8412ms
2025-08-27 12:15:05.963 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzRENTY4M0ZGMUNBQzlBRDc0AA==
2025-08-27 12:15:15.876 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:15:15.886 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:15.888 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 11.8041ms
2025-08-27 12:15:15.893 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:15:15.901 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:15.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:15:15.905 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:15:15.914 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 12:15:15.918 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:15:15.920 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.9864ms
2025-08-27 12:15:15.923 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:15:15.924 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 30.9068ms
2025-08-27 12:15:17.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-27 12:15:17.859 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:17.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 5.1129ms
2025-08-27 12:15:17.865 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-27 12:15:17.869 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:17.871 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:15:17.872 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:15:19.318 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:15:19.327 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:15:19.332 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:15:19.336 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:15:19.337 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:15:20.460 +05:30 [INF] Received HTTP response headers after 1121.0366ms - 200
2025-08-27 12:15:20.462 +05:30 [INF] End processing HTTP request after 1126.5234ms - 200
2025-08-27 12:15:20.468 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:15:20.472 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2597.9909ms
2025-08-27 12:15:20.478 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:15:20.480 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 400 null application/json; charset=utf-8 2614.9509ms
2025-08-27 12:15:26.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:15:26.916 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:26.917 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.1381ms
2025-08-27 12:15:26.934 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:15:26.941 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:26.943 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:15:26.944 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:15:26.950 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:15:26.956 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 12:15:26.959 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 11.7157ms
2025-08-27 12:15:26.961 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:15:26.962 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 28.602ms
2025-08-27 12:15:29.455 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 12:15:29.461 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:29.462 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 7.0871ms
2025-08-27 12:15:29.467 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-27 12:15:29.471 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:29.474 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:15:29.475 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:15:29.479 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:15:29.481 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:15:30.709 +05:30 [INF] Received HTTP response headers after 1227.0615ms - 200
2025-08-27 12:15:30.711 +05:30 [INF] End processing HTTP request after 1232.5998ms - 200
2025-08-27 12:15:30.713 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:15:30.715 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1237.5627ms
2025-08-27 12:15:30.717 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:15:30.719 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1251.4968ms
2025-08-27 12:15:33.104 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 12:15:33.108 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:33.110 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.3902ms
2025-08-27 12:15:33.118 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 551
2025-08-27 12:15:33.122 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:33.124 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 12:15:33.125 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:15:33.128 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 12:15:33.136 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 12:15:33.143 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='2025-08-27T06:45:33.1409143Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-08-27 12:15:33.147 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:15:33.151 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 23.2151ms
2025-08-27 12:15:33.153 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 12:15:33.155 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 37.3376ms
2025-08-27 12:15:34.105 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-27 12:15:34.110 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:34.111 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:15:34.117 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:15:34.122 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:15:34.124 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:15:35.137 +05:30 [INF] Received HTTP response headers after 1010.545ms - 200
2025-08-27 12:15:35.139 +05:30 [INF] End processing HTTP request after 1017.3278ms - 200
2025-08-27 12:15:35.141 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:15:35.143 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1023.1662ms
2025-08-27 12:15:35.146 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:15:35.148 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1042.8969ms
2025-08-27 12:15:48.110 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:15:48.117 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:48.123 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 12.966ms
2025-08-27 12:15:48.130 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:15:48.134 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:48.143 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:15:48.145 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:15:48.161 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 12:15:48.165 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:15:48.167 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.5341ms
2025-08-27 12:15:48.170 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:15:48.171 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 41.7136ms
2025-08-27 12:15:50.225 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-27 12:15:50.229 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:50.230 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 5.033ms
2025-08-27 12:15:50.235 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-27 12:15:50.239 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:15:50.241 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:15:50.243 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:15:51.799 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:15:51.809 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:15:51.813 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:15:51.817 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:15:51.818 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:15:52.739 +05:30 [INF] Received HTTP response headers after 918.8218ms - 200
2025-08-27 12:15:52.741 +05:30 [INF] End processing HTTP request after 924.4081ms - 200
2025-08-27 12:15:52.829 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:15:52.835 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2589.8004ms
2025-08-27 12:15:52.845 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:15:52.852 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 400 null application/json; charset=utf-8 2617.3512ms
2025-08-27 12:16:04.750 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null null
2025-08-27 12:16:04.755 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:16:04.757 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 204 null null 6.6209ms
2025-08-27 12:16:04.762 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null 0
2025-08-27 12:16:04.766 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:16:04.768 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:16:04.770 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:16:08.611 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='d2cfac25-2054-43f6-831a-57c3c36a798a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:16:08.619 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:16:08.625 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:16:08.628 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:16:08.633 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/1036613254900678/message_templates?limit=200
2025-08-27 12:16:09.623 +05:30 [INF] Received HTTP response headers after 987.8542ms - 200
2025-08-27 12:16:09.625 +05:30 [INF] End processing HTTP request after 997.29ms - 200
2025-08-27 12:16:09.631 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:16:09.636 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:16:09.638 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:16:13.567 +05:30 [INF] Received HTTP response headers after 3926.6039ms - 404
2025-08-27 12:16:13.569 +05:30 [INF] End processing HTTP request after 3933.2405ms - 404
2025-08-27 12:16:13.571 +05:30 [WRN] MetaCloud send failed (HTTP 404): {"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AopZ6uuFIwX7VXr6mSlk09p"}}
2025-08-27 12:16:13.579 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='106070cd-e730-4064-9186-0b38c87b5a21', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='d2cfac25-2054-43f6-831a-57c3c36a798a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:46:13.5733568Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='flash_sale_earbuds_v1' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#132001) Template name does not exist in the translation","type":"OAuthException","code":132001,"error_data":{"messaging_product":"whatsapp","details":"template name (flash_sale_earbuds_v1) does not exist in en"},"fbtrace_id":"AopZ6uuFIwX7VXr6mSlk09p"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='81d4cba6-0e5a-4deb-8f0f-708863b7ab34', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='d2cfac25-2054-43f6-831a-57c3c36a798a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T06:46:13.5738781Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='⚡️ Flash Sale Alert! ⚡️
Hi {{}},
For the next 24 hours, get an exclusive 20% OFF our brand new Aura Buds Pro.

Use your personal discount code at checkout: {{}}
This offer ends tomorrow!!' (Nullable = false), @p41=NULL, @p42='106070cd-e730-4064-9186-0b38c87b5a21' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='d7a4698a-125c-4dec-abf5-b5e4a2503e30', @p45='0', @p46='Failed', @p47='2025-08-27T06:46:13.5738782Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='flash_sale_earbuds_v1', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 12:16:13.586 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:16:13.587 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8815.0577ms
2025-08-27 12:16:13.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:16:13.591 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 200 null application/json; charset=utf-8 8828.4654ms
2025-08-27 12:17:14.644 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null null
2025-08-27 12:17:14.655 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:17:14.656 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 204 null null 12.3598ms
2025-08-27 12:17:14.681 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - null 0
2025-08-27 12:17:14.686 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:17:14.688 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:17:14.690 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:17:16.084 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8e73a439-6515-4df0-b7d6-3eedafb396cc'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:17:16.092 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:16.101 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:17:16.105 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:17:16.107 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:17:17.767 +05:30 [INF] Received HTTP response headers after 1658.3947ms - 200
2025-08-27 12:17:17.769 +05:30 [INF] End processing HTTP request after 1663.5205ms - 200
2025-08-27 12:17:17.795 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:17.802 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:17.804 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:18.337 +05:30 [INF] Received HTTP response headers after 531.4499ms - 400
2025-08-27 12:17:18.339 +05:30 [INF] End processing HTTP request after 537.1423ms - 400
2025-08-27 12:17:18.341 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AXhzpuEHzFxUghCOA-Tk2kP"}}
2025-08-27 12:17:18.345 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:18.348 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:18.350 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:19.004 +05:30 [INF] Received HTTP response headers after 652.0767ms - 200
2025-08-27 12:17:19.020 +05:30 [INF] End processing HTTP request after 671.9584ms - 200
2025-08-27 12:17:19.024 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:19.028 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:19.030 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:19.859 +05:30 [INF] Received HTTP response headers after 826.8373ms - 400
2025-08-27 12:17:19.861 +05:30 [INF] End processing HTTP request after 833.6059ms - 400
2025-08-27 12:17:19.863 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AoF85YLWt6-4zhObA5JKcFz"}}
2025-08-27 12:17:19.868 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:19.870 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:19.872 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:20.528 +05:30 [INF] Received HTTP response headers after 654.8772ms - 200
2025-08-27 12:17:20.530 +05:30 [INF] End processing HTTP request after 659.4755ms - 200
2025-08-27 12:17:20.544 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='4dd4c5c8-8251-41d6-8af3-905ee87a815e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p5='8aac7c57-6699-4511-897b-4121b407eb1c' (Nullable = true), @p6='2025-08-27T06:47:20.5322948Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='account_creation_confirmation_3' (Nullable = false), @p11='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+917082156227","wa_id":"917082156227"}],"messages":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA==","message_status":"accepted"}]}', @p13='+917082156227' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T06:47:20.5322951Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='5fcf7144-cd5e-4d14-89eb-d2a5ded62dfa', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p24='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac' (Nullable = true), @p25='2025-08-27T06:47:18.3427634Z' (DbType = DateTime), @p26='❌ WhatsApp API returned an error.', @p27='False', @p28=NULL, @p29='account_creation_confirmation_3' (Nullable = false), @p30=NULL, @p31='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AXhzpuEHzFxUghCOA-Tk2kP"}}', @p32='1234567890' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35=NULL (DbType = DateTime), @p36='campaign', @p37='Failed' (Nullable = false), @p38='6b1ca4eb-4110-4abc-87c9-6851f78d6957', @p39='c13be597-6ae2-42bb-9d43-925815f24ff8', @p40=NULL (DbType = Guid), @p41=NULL (DbType = Guid), @p42='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p43='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p44='2025-08-27T06:47:19.0226443Z' (DbType = DateTime), @p45=NULL, @p46='False', @p47=NULL, @p48='account_creation_confirmation_3' (Nullable = false), @p49='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==', @p50='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","message_status":"accepted"}]}', @p51='+918974005240' (Nullable = false), @p52=NULL (DbType = Guid), @p53=NULL, @p54='2025-08-27T06:47:19.0226447Z' (Nullable = true) (DbType = DateTime), @p55='campaign', @p56='Sent' (Nullable = false), @p57='dd01743c-b337-4290-b1bd-8f969362ee83', @p58='c13be597-6ae2-42bb-9d43-925815f24ff8', @p59=NULL (DbType = Guid), @p60=NULL (DbType = Guid), @p61='8e73a439-6515-4df0-b7d6-3eedafb396cc' (Nullable = true), @p62='80c43c6a-508b-47ff-9360-201bfd5521d3' (Nullable = true), @p63='2025-08-27T06:47:19.8655583Z' (DbType = DateTime), @p64='❌ WhatsApp API returned an error.', @p65='False', @p66=NULL, @p67='account_creation_confirmation_3' (Nullable = false), @p68=NULL, @p69='{"error":{"message":"(#131030) Recipient phone number not in allowed list","type":"OAuthException","code":131030,"error_data":{"messaging_product":"whatsapp","details":"Recipient phone number not in allowed list: Add recipient phone number to recipient list and try again."},"fbtrace_id":"AoF85YLWt6-4zhObA5JKcFz"}}', @p70='447543746206' (Nullable = false), @p71=NULL (DbType = Guid), @p72=NULL, @p73=NULL (DbType = DateTime), @p74='campaign', @p75='Failed' (Nullable = false), @p76='07d913fb-092a-4b94-9fc8-0de5e4459c61', @p77='True', @p78=NULL, @p79='c13be597-6ae2-42bb-9d43-925815f24ff8', @p80='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p81=NULL, @p82=NULL, @p83=NULL (DbType = DateTime), @p84='8aac7c57-6699-4511-897b-4121b407eb1c', @p85=NULL, @p86='2025-08-27T06:47:20.5326296Z' (DbType = DateTime), @p87='system', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91=NULL, @p92=NULL, @p93='False', @p94=NULL (DbType = DateTime), @p95=NULL, @p96=NULL, @p97='account_creation_confirmation_3' (Nullable = false), @p98='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA==', @p99='4dd4c5c8-8251-41d6-8af3-905ee87a815e' (Nullable = true), @p100=NULL (DbType = DateTime), @p101='da480a6b-140e-4232-8b76-4c8b951d0732', @p102='0', @p103='Sent', @p104='2025-08-27T06:47:20.5326297Z' (Nullable = true) (DbType = DateTime), @p105=NULL, @p106='account_creation_confirmation_3', @p107=NULL (DbType = Guid), @p108='4f7e31e9-7f3c-40ab-9bbb-497707e80c44', @p109='True', @p110=NULL, @p111='c13be597-6ae2-42bb-9d43-925815f24ff8', @p112='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p113=NULL, @p114=NULL, @p115=NULL (DbType = DateTime), @p116='bf3cf7cf-c327-42d1-b7f5-0c9fb85024ac', @p117=NULL, @p118='2025-08-27T06:47:18.3432977Z' (DbType = DateTime), @p119='system', @p120=NULL (DbType = DateTime), @p121=NULL, @p122=NULL, @p123='❌ WhatsApp API returned an error.', @p124=NULL, @p125='False', @p126=NULL (DbType = DateTime), @p127=NULL, @p128=NULL, @p129='account_creation_confirmation_3' (Nullable = false), @p130=NULL, @p131='5fcf7144-cd5e-4d14-89eb-d2a5ded62dfa' (Nullable = true), @p132=NULL (DbType = DateTime), @p133='4ec881bf-8c87-4b70-b608-b85d7333cb5c', @p134='0', @p135='Failed', @p136='2025-08-27T06:47:18.3432978Z' (Nullable = true) (DbType = DateTime), @p137=NULL, @p138='account_creation_confirmation_3', @p139=NULL (DbType = Guid), @p140='5c4c1249-f542-49ee-a44b-f98226394212', @p141='True', @p142=NULL, @p143='c13be597-6ae2-42bb-9d43-925815f24ff8', @p144='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p145=NULL, @p146=NULL, @p147=NULL (DbType = DateTime), @p148='26b8b9a2-5624-40ed-a659-65de71d03d20', @p149=NULL, @p150='2025-08-27T06:47:19.0228800Z' (DbType = DateTime), @p151='system', @p152=NULL (DbType = DateTime), @p153=NULL, @p154=NULL, @p155=NULL, @p156=NULL, @p157='False', @p158=NULL (DbType = DateTime), @p159=NULL, @p160=NULL, @p161='account_creation_confirmation_3' (Nullable = false), @p162='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==', @p163='6b1ca4eb-4110-4abc-87c9-6851f78d6957' (Nullable = true), @p164=NULL (DbType = DateTime), @p165='5f025339-a66b-4fab-8ef0-535fb3ac1a8a', @p166='0', @p167='Sent', @p168='2025-08-27T06:47:19.0228800Z' (Nullable = true) (DbType = DateTime), @p169=NULL, @p170='account_creation_confirmation_3', @p171=NULL (DbType = Guid), @p172='c363afc9-8d2b-4cd0-960f-f879126c4385', @p173='True', @p174=NULL, @p175='c13be597-6ae2-42bb-9d43-925815f24ff8', @p176='8e73a439-6515-4df0-b7d6-3eedafb396cc', @p177=NULL, @p178=NULL, @p179=NULL (DbType = DateTime), @p180='80c43c6a-508b-47ff-9360-201bfd5521d3', @p181=NULL, @p182='2025-08-27T06:47:19.8658585Z' (DbType = DateTime), @p183='system', @p184=NULL (DbType = DateTime), @p185=NULL, @p186=NULL, @p187='❌ WhatsApp API returned an error.', @p188=NULL, @p189='False', @p190=NULL (DbType = DateTime), @p191=NULL, @p192=NULL, @p193='account_creation_confirmation_3' (Nullable = false), @p194=NULL, @p195='dd01743c-b337-4290-b1bd-8f969362ee83' (Nullable = true), @p196=NULL (DbType = DateTime), @p197='985eb57b-c8eb-41e2-98a1-96a2da4f72de', @p198='0', @p199='Failed', @p200='2025-08-27T06:47:19.8658586Z' (Nullable = true) (DbType = DateTime), @p201=NULL, @p202='account_creation_confirmation_3', @p203=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135, @p136, @p137, @p138, @p139);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169, @p170, @p171);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203);
2025-08-27 12:17:20.550 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:17:20.552 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5858.7988ms
2025-08-27 12:17:20.554 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:17:20.555 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8e73a439-6515-4df0-b7d6-3eedafb396cc - 200 null application/json; charset=utf-8 5873.756ms
2025-08-27 12:17:27.551 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-08-27 12:17:27.554 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-27 12:17:27.555 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:27.558 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:27.559 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:17:27.560 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:17:27.563 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"sent","timestamp":"1756277245","recipient_id":"918974005240","conversation":{"id":"fde127193ecf9a22e143a3953dd2b514","expiration_timestamp":"1756277245","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:17:27.566 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"delivered","timestamp":"1756277246","recipient_id":"918974005240","conversation":{"id":"fde127193ecf9a22e143a3953dd2b514","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:17:27.567 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:17:27.570 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:17:27.569 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:17:27.568 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"sent","timestamp":"1756277245","recipient_id":"918974005240","conversation":{"id":"fde127193ecf9a22e143a3953dd2b514","expiration_timestamp":"1756277245","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:17:27.571 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.0631ms
2025-08-27 12:17:27.574 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:17:27.576 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:17:27.583 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:27.585 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 19.2521ms
2025-08-27 12:17:27.586 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"sent","timestamp":"1756277245","recipient_id":"918974005240","conversation":{"id":"fde127193ecf9a22e143a3953dd2b514","expiration_timestamp":"1756277245","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:17:27.587 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 35.716ms
2025-08-27 12:17:27.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:27.595 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:17:27.604 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 50.3128ms
2025-08-27 12:17:27.620 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__logId_Value_0='5c4c1249-f542-49ee-a44b-f98226394212'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:17:27.623 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA== → sent
2025-08-27 12:17:27.626 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"delivered","timestamp":"1756277246","recipient_id":"918974005240","conversation":{"id":"fde127193ecf9a22e143a3953dd2b514","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:17:27.628 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:17:27.629 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"delivered","timestamp":"1756277246","recipient_id":"918974005240","conversation":{"id":"fde127193ecf9a22e143a3953dd2b514","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 12:17:27.633 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:17:27.638 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='5c4c1249-f542-49ee-a44b-f98226394212'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:17:27.644 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='5c4c1249-f542-49ee-a44b-f98226394212', @p0='2025-08-27T06:47:26.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:17:27.647 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA== → delivered
2025-08-27 12:17:28.782 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 598
2025-08-27 12:17:28.786 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:28.787 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:17:28.790 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA==","status":"sent","timestamp":"1756277247","recipient_id":"917082156227","conversation":{"id":"4ce36c7cd3d7fbdb10a8f904e62107e6","expiration_timestamp":"1756277247","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:28.793 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:17:28.793 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA==","status":"sent","timestamp":"1756277247","recipient_id":"917082156227","conversation":{"id":"4ce36c7cd3d7fbdb10a8f904e62107e6","expiration_timestamp":"1756277247","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:28.794 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:17:28.796 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:17:28.801 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.2008ms
2025-08-27 12:17:28.808 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA==","status":"sent","timestamp":"1756277247","recipient_id":"917082156227","conversation":{"id":"4ce36c7cd3d7fbdb10a8f904e62107e6","expiration_timestamp":"1756277247","origin":{"type":"utility"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"utility","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:28.809 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:28.812 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.6927ms
2025-08-27 12:17:28.814 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:17:28.833 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='07d913fb-092a-4b94-9fc8-0de5e4459c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:17:28.837 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNzI3ODM0MTVGNkI1M0ZEREE2AA== → sent
2025-08-27 12:17:29.369 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null null
2025-08-27 12:17:29.374 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:17:29.375 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 204 null null 6.1346ms
2025-08-27 12:17:29.379 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - null 0
2025-08-27 12:17:29.382 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:17:29.390 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:17:29.392 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:17:30.736 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='aef7b2fa-1966-404c-bb5b-6f180fa7116c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:17:30.742 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:30.746 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:17:30.749 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:17:30.750 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:17:34.318 +05:30 [INF] Received HTTP response headers after 3566.3351ms - 200
2025-08-27 12:17:34.320 +05:30 [INF] End processing HTTP request after 3571.1574ms - 200
2025-08-27 12:17:34.328 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:34.335 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:34.336 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:17:35.025 +05:30 [INF] Received HTTP response headers after 687.492ms - 200
2025-08-27 12:17:35.029 +05:30 [INF] End processing HTTP request after 694.0599ms - 200
2025-08-27 12:17:35.035 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='522a6fc8-801c-4f52-988e-6abeafc65b5a', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='aef7b2fa-1966-404c-bb5b-6f180fa7116c' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T06:47:35.0306971Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9='https://picsum.photos/seed/picsum/200/300', @p10='shoe_launch_offer' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T06:47:35.0306974Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='8fd2d786-886b-493f-8467-ec67c53f5c1c', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='aef7b2fa-1966-404c-bb5b-6f180fa7116c', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T06:47:35.0312315Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==', @p42='522a6fc8-801c-4f52-988e-6abeafc65b5a' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='2f01a3ad-8c8d-418b-add3-2ca29d7afa8c', @p45='0', @p46='Sent', @p47='2025-08-27T06:47:35.0312318Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='shoe_launch_offer', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 12:17:35.039 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:17:35.041 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5646.5301ms
2025-08-27 12:17:35.043 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:17:35.044 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/aef7b2fa-1966-404c-bb5b-6f180fa7116c - 200 null application/json; charset=utf-8 5664.9768ms
2025-08-27 12:17:48.880 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 12:17:48.885 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:48.886 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:17:48.889 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"sent","timestamp":"1756277267","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","expiration_timestamp":"1756277267","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:48.891 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:17:48.892 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"sent","timestamp":"1756277267","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","expiration_timestamp":"1756277267","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:48.892 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:17:48.894 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:17:48.895 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1136ms
2025-08-27 12:17:48.896 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"sent","timestamp":"1756277267","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","expiration_timestamp":"1756277267","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:48.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:48.903 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.7732ms
2025-08-27 12:17:48.903 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:17:48.914 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__logId_Value_0='8fd2d786-886b-493f-8467-ec67c53f5c1c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:17:48.918 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA== → sent
2025-08-27 12:17:49.267 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 12:17:49.271 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:49.272 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:17:49.276 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"delivered","timestamp":"1756277268","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:49.278 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:17:49.278 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"delivered","timestamp":"1756277268","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:49.279 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:17:49.281 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:17:49.282 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.2602ms
2025-08-27 12:17:49.283 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"delivered","timestamp":"1756277268","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:49.285 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:49.289 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:17:49.289 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.9275ms
2025-08-27 12:17:49.296 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='8fd2d786-886b-493f-8467-ec67c53f5c1c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:17:49.303 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='8fd2d786-886b-493f-8467-ec67c53f5c1c', @p0='2025-08-27T06:47:48.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:17:49.306 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA== → delivered
2025-08-27 12:17:49.364 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 12:17:49.367 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:49.369 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:17:49.373 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"delivered","timestamp":"1756277268","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:49.375 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:17:49.375 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"delivered","timestamp":"1756277268","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:49.376 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:17:49.377 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:17:49.379 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.4451ms
2025-08-27 12:17:49.380 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"delivered","timestamp":"1756277268","recipient_id":"918974005240","conversation":{"id":"1708127809ad3411c9f5031db265a58e","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:17:49.382 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:17:49.385 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.5592ms
2025-08-27 12:17:49.386 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:17:49.395 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='8fd2d786-886b-493f-8467-ec67c53f5c1c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:17:49.398 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA== → delivered
2025-08-27 12:17:49.735 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null null
2025-08-27 12:17:49.739 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:17:49.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 204 null null 4.7191ms
2025-08-27 12:17:49.744 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - null 0
2025-08-27 12:17:49.748 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:17:49.751 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:17:49.754 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:17:51.609 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d2cfac25-2054-43f6-831a-57c3c36a798a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:17:51.615 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:17:51.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:17:51.624 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:17:51.625 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:17:52.458 +05:30 [INF] Received HTTP response headers after 831.3824ms - 200
2025-08-27 12:17:52.462 +05:30 [INF] End processing HTTP request after 837.8105ms - 200
2025-08-27 12:17:52.465 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:17:52.467 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2706.8661ms
2025-08-27 12:17:52.469 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:17:52.470 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2cfac25-2054-43f6-831a-57c3c36a798a - 400 null application/json; charset=utf-8 2726.8037ms
2025-08-27 12:27:32.740 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 343
2025-08-27 12:27:32.776 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:27:32.777 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:27:32.781 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756277851, "changes": [{"value": {"event": "REJECTED", "message_template_id": 779041341377782, "message_template_name": "flash_sale_earbuds_v3", "message_template_language": "en_US", "reason": "INVALID_FORMAT"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 12:27:32.782 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:27:32.783 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756277851, "changes": [{"value": {"event": "REJECTED", "message_template_id": 779041341377782, "message_template_name": "flash_sale_earbuds_v3", "message_template_language": "en_US", "reason": "INVALID_FORMAT"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 12:27:32.784 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:27:32.785 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-27 12:27:32.787 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.3802ms
2025-08-27 12:27:32.790 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:27:32.791 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 50.8466ms
2025-08-27 12:32:31.890 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:32:31.895 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:32:31.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:32:31.906 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:32:31.908 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:32:31.909 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:32:31.913 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"read","timestamp":"1756278150","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:32:31.916 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"read","timestamp":"1756278150","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:32:31.917 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:32:31.918 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"read","timestamp":"1756278150","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:32:31.919 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:32:31.920 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:32:31.922 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:32:31.925 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.1768ms
2025-08-27 12:32:31.923 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:32:31.931 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA==","status":"read","timestamp":"1756278150","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:32:31.936 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:32:31.938 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 22.8528ms
2025-08-27 12:32:31.943 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 53.2147ms
2025-08-27 12:32:31.951 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:32:31.973 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 78.1848ms
2025-08-27 12:32:32.045 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:32:32.052 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='8fd2d786-886b-493f-8467-ec67c53f5c1c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:32:32.059 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='8fd2d786-886b-493f-8467-ec67c53f5c1c', @p0='2025-08-27T07:02:30.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:32:32.063 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjU1RkFBRkM5MTBDNjgzNzdEAA== → read
2025-08-27 12:32:32.065 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"read","timestamp":"1756278150","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:32:32.067 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:32:32.069 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA==","status":"read","timestamp":"1756278150","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:32:32.083 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:32:32.090 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='5c4c1249-f542-49ee-a44b-f98226394212'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:32:32.096 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='5c4c1249-f542-49ee-a44b-f98226394212', @p0='2025-08-27T07:02:30.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:32:32.099 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjU1NDI2RUM5RTM2NjIwNDQ1AA== → read
2025-08-27 12:34:36.854 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 323
2025-08-27 12:34:36.863 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:34:36.864 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:34:36.868 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756278275, "changes": [{"value": {"event": "APPROVED", "message_template_id": 3255438291278546, "message_template_name": "bot_launch", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 12:34:36.871 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:34:36.871 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756278275, "changes": [{"value": {"event": "APPROVED", "message_template_id": 3255438291278546, "message_template_name": "bot_launch", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 12:34:36.872 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:34:36.873 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-27 12:34:36.875 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.891ms
2025-08-27 12:34:36.877 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:34:36.879 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.951ms
2025-08-27 12:34:49.901 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:34:49.930 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:34:49.931 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 30.5457ms
2025-08-27 12:34:49.936 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:34:49.939 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:34:49.941 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:34:49.944 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:34:49.952 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:34:49.956 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 12:34:49.959 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 11.9276ms
2025-08-27 12:34:49.961 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:34:49.963 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 27.1267ms
2025-08-27 12:34:51.886 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 12:34:51.891 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:34:51.893 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 6.9903ms
2025-08-27 12:34:51.911 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-27 12:34:51.915 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:34:51.917 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:34:51.919 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:34:51.951 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:34:51.953 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:34:54.505 +05:30 [INF] Received HTTP response headers after 2550.8188ms - 200
2025-08-27 12:34:54.507 +05:30 [INF] End processing HTTP request after 2555.9782ms - 200
2025-08-27 12:34:54.509 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:34:54.511 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 2589.0021ms
2025-08-27 12:34:54.513 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:34:54.514 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 2602.6357ms
2025-08-27 12:34:59.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:34:59.338 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:34:59.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 22.9663ms
2025-08-27 12:34:59.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:34:59.356 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:34:59.357 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:34:59.360 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:34:59.369 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:34:59.373 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:34:59.375 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 12.9654ms
2025-08-27 12:34:59.378 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:34:59.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 29.5531ms
2025-08-27 12:35:04.455 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 12:35:04.461 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:04.463 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 7.7078ms
2025-08-27 12:35:04.468 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 12:35:04.472 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:04.474 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:35:04.475 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:35:04.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:35:04.492 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 12:35:04.495 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 12:35:04.497 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:35:04.502 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 23.981ms
2025-08-27 12:35:04.505 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:35:04.506 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 37.9109ms
2025-08-27 12:35:04.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:35:04.535 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:04.536 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.0302ms
2025-08-27 12:35:04.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:35:04.545 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:04.547 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:35:04.549 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:35:04.555 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:35:04.560 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:35:04.562 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.289ms
2025-08-27 12:35:04.565 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:35:04.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 25.3531ms
2025-08-27 12:35:20.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 12:35:20.475 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:20.476 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 5.4125ms
2025-08-27 12:35:20.481 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 12:35:20.485 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:20.487 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:35:20.488 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:35:20.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:35:20.520 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 12:35:20.524 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 12:35:20.525 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 12:35:21.336 +05:30 [INF] Received HTTP response headers after 808.8528ms - 200
2025-08-27 12:35:21.338 +05:30 [INF] End processing HTTP request after 814.1329ms - 200
2025-08-27 12:35:21.352 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:35:21.359 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:35:21.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:35:21.372 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:35:21.380 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='4eb60563-847a-40b2-a0da-dbcd170a5c83', @p1='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p4='UTILITY', @p5='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p6='817241660991962', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p11='account_creation_confirmation_3' (Nullable = false), @p12='2', @p13='meta_cloud' (Nullable = false), @p14='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p17='7e9875f8-8f5a-4405-b39a-530d714d0c4e', @p18='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[]' (Nullable = false), @p21='UTILITY', @p22='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p23='617143187619824', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p28='hello_world' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p34='8faf45db-64c7-4838-bd1e-8fb8c1133f9b', @p35='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p38='MARKETING', @p39='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p40='1100798472016654', @p41='True', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p45='shoe_launch_offer' (Nullable = false), @p46='1', @p47='meta_cloud' (Nullable = false), @p48='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwEmlZ6V&_nc_oc=AdlGJpui2wamDs7UOBrgZDdYhB9ivMLI-Rw8zVXK_dtjcMu2XesOqVWRZNdOdgq6WGuHZZZfn7iuT584Ywtkf_di&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=nANF59VEcx4TExIwWyHUqg&oh=01_Q5Aa2QF-5bclVQFtz5Hx7cRWG35FweOqTHRZ22xmizf22Ff9Nw&oe=68D60E8F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p51='c632d9f0-b36d-465f-84f2-3f1cb61391f3', @p52='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p55='MARKETING', @p56='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p57='3255438291278546', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-27T07:05:20.5183535Z' (DbType = DateTime), @p62='bot_launch' (Nullable = false), @p63='0', @p64='meta_cloud' (Nullable = false), @p65='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-27T07:05:20.5183535Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
2025-08-27 12:35:21.386 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:35:21.387 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 896.7405ms
2025-08-27 12:35:21.390 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:35:21.391 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 910.6825ms
2025-08-27 12:35:21.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:35:21.422 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:21.423 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.0985ms
2025-08-27 12:35:21.429 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:35:21.434 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:21.436 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:35:21.438 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:35:21.445 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:35:21.450 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:35:21.453 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.4773ms
2025-08-27 12:35:21.456 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:35:21.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 28.525ms
2025-08-27 12:35:23.928 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/bot_launch - null null
2025-08-27 12:35:23.933 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:23.934 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/bot_launch - 204 null null 6.8065ms
2025-08-27 12:35:23.940 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/bot_launch - null null
2025-08-27 12:35:23.944 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:35:23.945 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 12:35:23.947 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:35:23.975 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='bot_launch'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 12:35:23.980 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:35:23.983 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 30.6391ms
2025-08-27 12:35:23.985 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 12:35:23.987 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/bot_launch - 200 null application/json; charset=utf-8 47.2029ms
2025-08-27 12:36:08.198 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 12:36:08.202 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:08.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 5.0887ms
2025-08-27 12:36:08.207 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 467
2025-08-27 12:36:08.211 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:08.242 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 12:36:08.244 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:36:08.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:36:08.260 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:36:08.262 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:36:08.953 +05:30 [INF] Received HTTP response headers after 687.3572ms - 200
2025-08-27 12:36:08.955 +05:30 [INF] End processing HTTP request after 695.27ms - 200
2025-08-27 12:36:08.984 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T07:06:08.9578906Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.', @p14='bot_launch' (Nullable = false), @p15='Bot_launch' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='bot_launch', @p20='[]', @p21='2025-08-27T07:06:08.9578907Z' (DbType = DateTime), @p22='760f9555-3af5-4820-ab07-55fd166bab40', @p23='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @p24='True', @p25='1', @p26='Visit website' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}' (Nullable = false), @p29='ee390a1c-c980-4404-b925-cea17c21fff0', @p30='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @p31='True', @p32='2', @p33='View Tutorials' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.youtube.com/%7B%7Bi%7D%7D{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 12:36:08.990 +05:30 [INF] ✅ Campaign 'Bot_launch' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-27 12:36:08.993 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:08.996 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 747.5119ms
2025-08-27 12:36:08.998 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 12:36:09.000 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 792.4481ms
2025-08-27 12:36:09.090 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 12:36:09.092 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - null null
2025-08-27 12:36:09.093 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 12:36:09.093 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 12:36:09.113 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.116 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.119 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.122 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.123 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 33.1896ms
2025-08-27 12:36:09.124 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - 204 null null 31.5865ms
2025-08-27 12:36:09.125 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 31.7241ms
2025-08-27 12:36:09.126 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 32.7788ms
2025-08-27 12:36:09.140 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 12:36:09.144 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - null null
2025-08-27 12:36:09.149 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 12:36:09.152 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.155 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.158 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.159 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:36:09.160 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 12:36:09.161 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:36:09.163 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 12:36:09.164 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:36:09.165 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 12:36:09.174 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 12:36:09.175 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 12:36:09.187 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:36:09.193 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 12:36:09.193 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 25.4819ms
2025-08-27 12:36:09.197 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 12:36:09.201 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:36:09.203 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 12:36:09.204 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:09.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 65.2851ms
2025-08-27 12:36:09.210 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:36:09.210 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:36:09.218 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 44.1215ms
2025-08-27 12:36:09.219 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 12:36:09.221 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:36:09.226 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 77.3003ms
2025-08-27 12:36:09.228 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 12:36:09.236 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:36:09.238 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.8388ms
2025-08-27 12:36:09.240 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:36:09.242 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 45.4266ms
2025-08-27 12:36:09.324 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 12:36:09.329 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 12:36:09.332 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 161.8722ms
2025-08-27 12:36:09.334 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 12:36:09.335 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - 200 null application/json; charset=utf-8 191.4301ms
2025-08-27 12:36:21.222 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e/assign-contacts - null null
2025-08-27 12:36:21.229 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:21.230 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e/assign-contacts - 204 null null 7.8891ms
2025-08-27 12:36:21.238 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e/assign-contacts - application/json 94
2025-08-27 12:36:21.243 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:21.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 12:36:21.246 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:36:21.255 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 12:36:21.266 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='1314ab57-75db-410c-a193-b46dbd34133c', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @p4=NULL, @p5=NULL, @p6='a307d00b-239b-4c7b-bb16-77838875fbec', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T07:06:21.2614848Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T07:06:21.2614850Z' (DbType = DateTime), @p13='a68d2117-11ad-4fc4-86fc-a2e030260442', @p14=NULL, @p15='c13be597-6ae2-42bb-9d43-925815f24ff8', @p16='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @p17=NULL, @p18=NULL, @p19='26b8b9a2-5624-40ed-a659-65de71d03d20', @p20='False', @p21=NULL, @p22=NULL, @p23='2025-08-27T07:06:21.2609596Z' (Nullable = true) (DbType = DateTime), @p24='Pending' (Nullable = false), @p25='2025-08-27T07:06:21.2609603Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-27 12:36:21.277 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:21.279 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 30.7827ms
2025-08-27 12:36:21.282 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 12:36:21.283 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e/assign-contacts - 200 null application/json; charset=utf-8 44.6462ms
2025-08-27 12:36:25.942 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:36:25.962 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:25.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 20.937ms
2025-08-27 12:36:25.969 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:36:25.978 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:25.983 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:36:25.985 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:36:25.994 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 12:36:26.000 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:36:26.002 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.6864ms
2025-08-27 12:36:26.004 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:36:26.006 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 36.56ms
2025-08-27 12:36:34.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - null null
2025-08-27 12:36:34.616 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:34.617 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - 204 null null 5.9029ms
2025-08-27 12:36:34.622 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - null 0
2025-08-27 12:36:34.626 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:36:34.628 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:36:34.630 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:36:36.413 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='9f24d1a4-312c-4ae0-9b4e-033dee83f36e'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:36:36.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:36:36.425 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:36:36.428 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:36:36.430 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:36:37.321 +05:30 [INF] Received HTTP response headers after 889.7958ms - 200
2025-08-27 12:36:37.324 +05:30 [INF] End processing HTTP request after 895.3402ms - 200
2025-08-27 12:36:37.328 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:36:37.344 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:36:37.347 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:36:38.649 +05:30 [INF] Received HTTP response headers after 1301.1091ms - 200
2025-08-27 12:36:38.651 +05:30 [INF] End processing HTTP request after 1307.1737ms - 200
2025-08-27 12:36:38.658 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:36:38.661 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:36:38.663 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:36:39.528 +05:30 [INF] Received HTTP response headers after 864.009ms - 200
2025-08-27 12:36:39.530 +05:30 [INF] End processing HTTP request after 869.1187ms - 200
2025-08-27 12:36:39.545 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='744d933a-bcce-4f8e-9fcc-eac0771c1ef7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='9f24d1a4-312c-4ae0-9b4e-033dee83f36e' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T07:06:39.5326978Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='bot_launch' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T07:06:39.5326985Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='af716ac6-603a-46a6-b252-4584ad334ac4', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='9f24d1a4-312c-4ae0-9b4e-033dee83f36e' (Nullable = true), @p24='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true), @p25='2025-08-27T07:06:38.6544483Z' (DbType = DateTime), @p26=NULL, @p27='False', @p28=NULL, @p29='bot_launch' (Nullable = false), @p30='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==', @p31='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","message_status":"accepted"}]}', @p32='918974005240' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35='2025-08-27T07:06:38.6544487Z' (Nullable = true) (DbType = DateTime), @p36='campaign', @p37='Sent' (Nullable = false), @p38='41ac0e05-01ed-4828-95bd-5e869b09cafa', @p39='True', @p40=NULL, @p41='c13be597-6ae2-42bb-9d43-925815f24ff8', @p42='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @p43=NULL, @p44=NULL, @p45=NULL (DbType = DateTime), @p46='26b8b9a2-5624-40ed-a659-65de71d03d20', @p47=NULL, @p48='2025-08-27T07:06:39.5330681Z' (DbType = DateTime), @p49='system', @p50=NULL (DbType = DateTime), @p51=NULL, @p52=NULL, @p53=NULL, @p54=NULL, @p55='False', @p56=NULL (DbType = DateTime), @p57=NULL, @p58=NULL, @p59='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p60='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==', @p61='744d933a-bcce-4f8e-9fcc-eac0771c1ef7' (Nullable = true), @p62=NULL (DbType = DateTime), @p63='a68d2117-11ad-4fc4-86fc-a2e030260442', @p64='0', @p65='Sent', @p66='2025-08-27T07:06:39.5330684Z' (Nullable = true) (DbType = DateTime), @p67=NULL, @p68='bot_launch', @p69=NULL (DbType = Guid), @p70='d5fa42ff-6b9c-48ae-8d53-c9dd3453ed84', @p71='True', @p72=NULL, @p73='c13be597-6ae2-42bb-9d43-925815f24ff8', @p74='9f24d1a4-312c-4ae0-9b4e-033dee83f36e', @p75=NULL, @p76=NULL, @p77=NULL (DbType = DateTime), @p78='a307d00b-239b-4c7b-bb16-77838875fbec', @p79=NULL, @p80='2025-08-27T07:06:38.6548647Z' (DbType = DateTime), @p81='system', @p82=NULL (DbType = DateTime), @p83=NULL, @p84=NULL, @p85=NULL, @p86=NULL, @p87='False', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p92='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==', @p93='af716ac6-603a-46a6-b252-4584ad334ac4' (Nullable = true), @p94=NULL (DbType = DateTime), @p95='1314ab57-75db-410c-a193-b46dbd34133c', @p96='0', @p97='Sent', @p98='2025-08-27T07:06:38.6548649Z' (Nullable = true) (DbType = DateTime), @p99=NULL, @p100='bot_launch', @p101=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
2025-08-27 12:36:39.550 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:36:39.552 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4919.6575ms
2025-08-27 12:36:39.554 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:36:39.558 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/9f24d1a4-312c-4ae0-9b4e-033dee83f36e - 200 null application/json; charset=utf-8 4936.7015ms
2025-08-27 12:36:46.511 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 12:36:46.515 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:46.517 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:36:46.520 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"sent","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"74e7a2cbae4cd4522b5d3a9eac17c4f7","expiration_timestamp":"1756278405","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:46.522 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:36:46.523 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:46.523 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"sent","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"74e7a2cbae4cd4522b5d3a9eac17c4f7","expiration_timestamp":"1756278405","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:46.525 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.0408ms
2025-08-27 12:36:46.528 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:36:46.529 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:46.530 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"sent","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"74e7a2cbae4cd4522b5d3a9eac17c4f7","expiration_timestamp":"1756278405","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:46.532 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.7342ms
2025-08-27 12:36:46.537 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:36:46.545 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='d5fa42ff-6b9c-48ae-8d53-c9dd3453ed84'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:36:46.549 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA== → sent
2025-08-27 12:36:47.151 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 12:36:47.155 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.156 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:36:47.160 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"sent","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","expiration_timestamp":"1756278405","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.163 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:36:47.163 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"sent","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","expiration_timestamp":"1756278405","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.164 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:47.166 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:36:47.168 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.1792ms
2025-08-27 12:36:47.170 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"sent","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","expiration_timestamp":"1756278405","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.171 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.176 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:36:47.175 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.7823ms
2025-08-27 12:36:47.181 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='41ac0e05-01ed-4828-95bd-5e869b09cafa'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:36:47.187 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA== → sent
2025-08-27 12:36:47.700 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 12:36:47.705 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.707 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:36:47.710 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"delivered","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"74e7a2cbae4cd4522b5d3a9eac17c4f7","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.712 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:36:47.712 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"delivered","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"74e7a2cbae4cd4522b5d3a9eac17c4f7","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.713 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:47.715 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:36:47.716 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.9353ms
2025-08-27 12:36:47.717 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"delivered","timestamp":"1756278405","recipient_id":"918974005240","conversation":{"id":"74e7a2cbae4cd4522b5d3a9eac17c4f7","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.719 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.722 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.3387ms
2025-08-27 12:36:47.724 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:36:47.732 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d5fa42ff-6b9c-48ae-8d53-c9dd3453ed84'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:36:47.756 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p2='d5fa42ff-6b9c-48ae-8d53-c9dd3453ed84', @p0='2025-08-27T07:06:45.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:36:47.759 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA== → delivered
2025-08-27 12:36:47.869 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 12:36:47.874 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 12:36:47.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.878 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.880 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:36:47.881 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:36:47.885 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"delivered","timestamp":"1756278406","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.886 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"delivered","timestamp":"1756278406","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.888 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:36:47.889 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"delivered","timestamp":"1756278406","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.890 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:36:47.891 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:47.894 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:36:47.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:47.897 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.7839ms
2025-08-27 12:36:47.898 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"delivered","timestamp":"1756278406","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.900 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.7087ms
2025-08-27 12:36:47.902 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.906 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:36:47.906 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:47.913 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='41ac0e05-01ed-4828-95bd-5e869b09cafa'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:36:47.908 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.4559ms
2025-08-27 12:36:47.918 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='41ac0e05-01ed-4828-95bd-5e869b09cafa', @p0='2025-08-27T07:06:46.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:36:47.913 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.1546ms
2025-08-27 12:36:47.923 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA== → delivered
2025-08-27 12:36:47.930 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"delivered","timestamp":"1756278406","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.932 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:36:47.933 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"delivered","timestamp":"1756278406","recipient_id":"918974005240","conversation":{"id":"2bfa1afa892ff35ea263bcb163794dfb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:36:47.938 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:36:47.942 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='41ac0e05-01ed-4828-95bd-5e869b09cafa'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:36:47.946 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA== → delivered
2025-08-27 12:36:49.814 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:36:49.815 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:36:49.818 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:49.821 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:49.823 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:36:49.824 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:36:49.827 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"read","timestamp":"1756278408","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:36:49.829 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"read","timestamp":"1756278408","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:36:49.831 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:36:49.831 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"read","timestamp":"1756278408","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:36:49.833 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:36:49.834 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:49.836 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:36:49.838 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:36:49.840 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.5121ms
2025-08-27 12:36:49.841 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA==","status":"read","timestamp":"1756278408","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:36:49.843 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.2415ms
2025-08-27 12:36:49.845 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:49.849 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:36:49.850 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:36:49.852 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 37.1247ms
2025-08-27 12:36:49.858 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='d5fa42ff-6b9c-48ae-8d53-c9dd3453ed84'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:36:49.858 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 43.5739ms
2025-08-27 12:36:49.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='d5fa42ff-6b9c-48ae-8d53-c9dd3453ed84', @p0='2025-08-27T07:06:48.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:36:49.876 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDM3NTlBNjJDOUFFOTZEODEwAA== → read
2025-08-27 12:36:49.878 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"read","timestamp":"1756278408","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:36:49.880 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:36:49.881 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA==","status":"read","timestamp":"1756278408","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:36:49.885 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:36:49.891 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='41ac0e05-01ed-4828-95bd-5e869b09cafa'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:36:49.896 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='41ac0e05-01ed-4828-95bd-5e869b09cafa', @p0='2025-08-27T07:06:48.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:36:49.900 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDA4NzBCRkExRUIwNjZDRTYyAA== → read
2025-08-27 12:51:13.783 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 324
2025-08-27 12:51:13.794 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:51:13.795 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:51:13.798 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756279272, "changes": [{"value": {"event": "APPROVED", "message_template_id": 663456696777015, "message_template_name": "offer_aiboat", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 12:51:13.800 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:51:13.800 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756279272, "changes": [{"value": {"event": "APPROVED", "message_template_id": 663456696777015, "message_template_name": "offer_aiboat", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 12:51:13.801 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:13.803 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-27 12:51:13.804 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.8437ms
2025-08-27 12:51:13.812 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:51:13.813 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.0989ms
2025-08-27 12:51:14.045 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:51:14.055 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:14.056 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 11.4379ms
2025-08-27 12:51:14.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:51:14.068 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:14.070 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:51:14.072 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:51:14.194 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:51:14.198 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:14.201 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 125.5085ms
2025-08-27 12:51:14.203 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:51:14.205 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 141.0621ms
2025-08-27 12:51:17.883 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:51:17.889 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:17.892 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 8.8731ms
2025-08-27 12:51:17.910 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:51:17.914 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:17.916 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:51:17.918 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:51:17.945 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:51:17.948 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 12:51:17.950 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 27.2277ms
2025-08-27 12:51:17.952 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:51:17.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 44.8494ms
2025-08-27 12:51:19.008 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 12:51:19.012 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:19.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 5.3079ms
2025-08-27 12:51:19.018 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-27 12:51:19.022 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:19.024 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:51:19.025 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:51:19.029 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:51:19.031 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:51:20.653 +05:30 [INF] Received HTTP response headers after 1620.0261ms - 200
2025-08-27 12:51:20.655 +05:30 [INF] End processing HTTP request after 1626.3344ms - 200
2025-08-27 12:51:20.657 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:20.660 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1632.1529ms
2025-08-27 12:51:20.662 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:51:20.664 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1646.2181ms
2025-08-27 12:51:25.865 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:51:25.870 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:25.871 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.3303ms
2025-08-27 12:51:25.889 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:51:25.893 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:25.895 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:51:25.896 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:51:25.903 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:51:25.908 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:25.910 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.5776ms
2025-08-27 12:51:25.912 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:51:25.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 24.8389ms
2025-08-27 12:51:27.618 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 12:51:27.623 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:27.624 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 6.0949ms
2025-08-27 12:51:27.629 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 12:51:27.637 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:27.638 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:51:27.640 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:51:27.644 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:51:27.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 12:51:27.663 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 12:51:27.666 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:51:27.667 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 25.1057ms
2025-08-27 12:51:27.669 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:51:27.670 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 41.0167ms
2025-08-27 12:51:27.699 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:51:27.703 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:27.704 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:51:27.706 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:51:27.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:51:27.717 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:27.720 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.4515ms
2025-08-27 12:51:27.721 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:51:27.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 41.7713ms
2025-08-27 12:51:46.788 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 12:51:46.792 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:46.794 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 6.2367ms
2025-08-27 12:51:46.798 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 12:51:46.803 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:46.811 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '27-08-2025 07:21:46 AM', Current time (UTC): '27-08-2025 07:21:46 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-27 12:51:46.893 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '27-08-2025 07:21:46 AM', Current time (UTC): '27-08-2025 07:21:46 AM'.
2025-08-27 12:51:46.897 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-27 12:51:46.964 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Http.DefaultHttpResponse.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 811
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-27 12:51:46.994 +05:30 [ERR] Response has already started, unable to write error response for path: /api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8
2025-08-27 12:51:46.995 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 401 null application/json 196.8498ms
2025-08-27 12:51:55.097 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 12:51:55.102 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:55.103 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.405ms
2025-08-27 12:51:55.109 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 12:51:55.113 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:55.115 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 12:51:55.117 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 12:51:55.121 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-27 12:51:55.144 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 12:51:55.152 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 12:51:55.166 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 12:51:55.170 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-27 12:51:55.172 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 12:51:55.174 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 12:51:55.176 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:55.178 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 59.4983ms
2025-08-27 12:51:55.180 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 12:51:55.182 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 73.3501ms
2025-08-27 12:51:55.189 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 12:51:55.193 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:55.195 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.9002ms
2025-08-27 12:51:55.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 12:51:55.211 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:55.213 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.215 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 12:51:55.222 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-27 12:51:55.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 12:51:55.233 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:55.235 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.4651ms
2025-08-27 12:51:55.237 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.0538ms
2025-08-27 12:51:55.264 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 12:51:55.268 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:55.270 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.271 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 12:51:55.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 12:51:55.285 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:55.287 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.925ms
2025-08-27 12:51:55.291 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 12:51:55.293 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.0517ms
2025-08-27 12:51:55.296 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:55.307 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.309 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 12:51:55.315 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 12:51:55.320 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:55.322 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.8927ms
2025-08-27 12:51:55.326 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.327 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.1608ms
2025-08-27 12:51:55.361 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 12:51:55.365 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:51:55.367 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.369 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 12:51:55.375 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 12:51:55.381 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:51:55.383 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3032ms
2025-08-27 12:51:55.385 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 12:51:55.387 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.4417ms
2025-08-27 12:52:00.907 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:52:00.911 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:00.912 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.4589ms
2025-08-27 12:52:00.925 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 12:52:00.930 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:00.931 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:52:00.933 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:52:00.940 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:52:00.945 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 12:52:00.947 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 10.2693ms
2025-08-27 12:52:00.949 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 12:52:00.951 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 25.3779ms
2025-08-27 12:52:02.096 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 12:52:02.100 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:02.101 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.9478ms
2025-08-27 12:52:02.106 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-27 12:52:02.109 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:02.111 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:52:02.113 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 12:52:02.117 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:52:02.119 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 12:52:03.322 +05:30 [INF] Received HTTP response headers after 1201.7872ms - 200
2025-08-27 12:52:03.325 +05:30 [INF] End processing HTTP request after 1207.8058ms - 200
2025-08-27 12:52:03.326 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:52:03.328 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1212.5909ms
2025-08-27 12:52:03.330 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 12:52:03.332 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1225.7273ms
2025-08-27 12:52:07.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:52:07.210 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:07.213 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 10.9398ms
2025-08-27 12:52:07.225 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:52:07.229 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:07.232 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:52:07.236 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:52:07.242 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:52:07.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:52:07.250 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.2847ms
2025-08-27 12:52:07.253 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:52:07.254 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 29.5911ms
2025-08-27 12:52:09.780 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 12:52:09.786 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:09.787 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 7.5782ms
2025-08-27 12:52:09.792 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 12:52:09.796 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:09.799 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:52:09.800 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:52:09.805 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:52:09.812 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 12:52:09.816 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 12:52:09.818 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 12:52:11.499 +05:30 [INF] Received HTTP response headers after 1679.3121ms - 200
2025-08-27 12:52:11.501 +05:30 [INF] End processing HTTP request after 1684.9249ms - 200
2025-08-27 12:52:11.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:52:11.531 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:52:11.543 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:52:11.550 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:52:11.556 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 12:52:11.564 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='0d7929cc-1288-4e09-91b1-8836d821d45f', @p1='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[]' (Nullable = false), @p4='UTILITY', @p5='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p6='617143187619824', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p11='hello_world' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p17='1772b771-6055-4978-98ec-c07eb79602ae', @p18='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p23='1100798472016654', @p24='True', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p28='shoe_launch_offer' (Nullable = false), @p29='1', @p30='meta_cloud' (Nullable = false), @p31='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwEmlZ6V&_nc_oc=AdlGJpui2wamDs7UOBrgZDdYhB9ivMLI-Rw8zVXK_dtjcMu2XesOqVWRZNdOdgq6WGuHZZZfn7iuT584Ywtkf_di&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=sbyUTX1d-YUQjioBR_v4eg&oh=01_Q5Aa2QHEAqEpH3GzKph_5AXUZkKvXlgzqmBy1041Kto77VkyzA&oe=68D60E8F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p34='50273de4-dd67-4203-a7a5-b7c4dd80c576', @p35='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p38='MARKETING', @p39='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p40='663456696777015', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p45='offer_aiboat' (Nullable = false), @p46='0', @p47='meta_cloud' (Nullable = false), @p48='{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p51='c6126674-64b9-4e3d-9eb3-6180001a3429', @p52='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p55='UTILITY', @p56='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p57='817241660991962', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p62='account_creation_confirmation_3' (Nullable = false), @p63='2', @p64='meta_cloud' (Nullable = false), @p65='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p68='c7dd6ab2-ec32-441a-b780-ca109e1bb962', @p69='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p70='c13be597-6ae2-42bb-9d43-925815f24ff8', @p71='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p72='MARKETING', @p73='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p74='3255438291278546', @p75='False', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-08-27T07:22:09.8107690Z' (DbType = DateTime), @p79='bot_launch' (Nullable = false), @p80='0', @p81='meta_cloud' (Nullable = false), @p82='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-27T07:22:09.8107690Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
2025-08-27 12:52:11.570 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:52:11.572 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1769.7097ms
2025-08-27 12:52:11.575 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 12:52:11.576 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1784.0142ms
2025-08-27 12:52:11.598 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 12:52:11.602 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:11.603 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:52:11.605 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:52:11.611 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 12:52:11.616 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:52:11.618 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.1947ms
2025-08-27 12:52:11.620 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 12:52:11.621 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 23.3676ms
2025-08-27 12:52:17.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 12:52:17.204 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:17.207 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 6.9883ms
2025-08-27 12:52:17.214 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 12:52:17.218 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:17.219 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 12:52:17.221 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 12:52:17.227 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 12:52:17.232 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:52:17.234 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 10.4027ms
2025-08-27 12:52:17.236 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 12:52:17.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 23.5686ms
2025-08-27 12:52:51.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 12:52:51.764 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:51.765 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 5.9132ms
2025-08-27 12:52:51.808 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 464
2025-08-27 12:52:51.811 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:51.813 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 12:52:51.814 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:52:51.822 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:52:51.826 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:52:51.828 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:52:53.310 +05:30 [INF] Received HTTP response headers after 1480.5428ms - 200
2025-08-27 12:52:53.317 +05:30 [INF] End processing HTTP request after 1491.1291ms - 200
2025-08-27 12:52:53.340 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T07:22:53.3319448Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hello

Please check our newaly launched Ai Boat.', @p14='offer_aiboat' (Nullable = false), @p15='AiBoat' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T07:22:53.3319449Z' (DbType = DateTime), @p22='959f15e9-032d-4b1d-bb50-cb50e98853a3', @p23='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @p24='True', @p25='2', @p26='watch Video' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.youtube.com/{{1}}' (Nullable = false), @p29='d68d6dc4-f84c-43c4-aa27-634a2414d2d2', @p30='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @p31='True', @p32='1', @p33='Visit website' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 12:52:53.363 +05:30 [INF] ✅ Campaign 'AiBoat' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-27 12:52:53.367 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:52:53.369 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1551.6186ms
2025-08-27 12:52:53.371 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 12:52:53.373 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1564.5222ms
2025-08-27 12:52:53.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 12:52:53.479 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 12:52:53.484 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.473 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - null null
2025-08-27 12:52:53.490 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.492 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 19.1467ms
2025-08-27 12:52:53.506 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 27.2735ms
2025-08-27 12:52:53.505 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.476 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 12:52:53.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 12:52:53.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 12:52:53.527 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - 204 null null 53.2828ms
2025-08-27 12:52:53.530 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.534 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.536 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.541 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - null null
2025-08-27 12:52:53.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 66.0264ms
2025-08-27 12:52:53.544 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:52:53.545 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:52:53.549 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.555 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 12:52:53.557 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 12:52:53.559 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 12:52:53.568 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 12:52:53.566 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 12:52:53.588 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:52:53.599 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:52:53.611 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 48.9323ms
2025-08-27 12:52:53.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 12:52:53.615 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:52:53.617 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 12:52:53.619 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:53.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 100.7052ms
2025-08-27 12:52:53.625 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 12:52:53.626 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:52:53.632 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 23.8983ms
2025-08-27 12:52:53.633 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 12:52:53.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 12:52:53.640 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - 200 null application/json; charset=utf-8 98.8019ms
2025-08-27 12:52:53.642 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 12:52:53.651 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:52:53.653 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.5782ms
2025-08-27 12:52:53.655 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 12:52:53.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 43.7793ms
2025-08-27 12:52:53.727 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 12:52:53.735 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 12:52:53.740 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:52:53.742 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 175.4091ms
2025-08-27 12:52:53.745 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 12:52:53.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 221.6194ms
2025-08-27 12:52:59.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77/assign-contacts - null null
2025-08-27 12:52:59.577 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:59.578 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77/assign-contacts - 204 null null 6.1979ms
2025-08-27 12:52:59.583 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77/assign-contacts - application/json 94
2025-08-27 12:52:59.586 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:52:59.588 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 12:52:59.589 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:52:59.598 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 12:52:59.604 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='606728a5-73c4-4b7f-913d-50e8649e60e5', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T07:22:59.6018402Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T07:22:59.6018407Z' (DbType = DateTime), @p13='ce6439e7-ef8f-41a4-9825-a5890489732c', @p14=NULL, @p15='c13be597-6ae2-42bb-9d43-925815f24ff8', @p16='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @p17=NULL, @p18=NULL, @p19='a307d00b-239b-4c7b-bb16-77838875fbec', @p20='False', @p21=NULL, @p22=NULL, @p23='2025-08-27T07:22:59.6019564Z' (Nullable = true) (DbType = DateTime), @p24='Pending' (Nullable = false), @p25='2025-08-27T07:22:59.6019565Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-27 12:52:59.626 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:52:59.629 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 36.4436ms
2025-08-27 12:52:59.631 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 12:52:59.633 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77/assign-contacts - 200 null application/json; charset=utf-8 50.0996ms
2025-08-27 12:53:04.256 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:53:04.261 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:53:04.263 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.6371ms
2025-08-27 12:53:04.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 12:53:04.272 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:53:04.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:53:04.276 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:53:04.301 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 12:53:04.305 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 12:53:04.307 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 28.9725ms
2025-08-27 12:53:04.310 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 12:53:04.311 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 43.8433ms
2025-08-27 12:53:06.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - null null
2025-08-27 12:53:06.249 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:53:06.251 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - 204 null null 8.3089ms
2025-08-27 12:53:06.257 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - null 0
2025-08-27 12:53:06.261 +05:30 [INF] CORS policy execution successful.
2025-08-27 12:53:06.262 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:53:06.263 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 12:53:07.490 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d2c77f94-0a9b-46f3-8ed7-8316736cbe77'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 12:53:07.496 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:53:07.501 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 12:53:07.505 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:53:07.506 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 12:53:08.774 +05:30 [INF] Received HTTP response headers after 1265.7243ms - 200
2025-08-27 12:53:08.776 +05:30 [INF] End processing HTTP request after 1271.0687ms - 200
2025-08-27 12:53:08.780 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:53:08.784 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:53:08.786 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:53:10.316 +05:30 [INF] Received HTTP response headers after 1527.1078ms - 200
2025-08-27 12:53:10.319 +05:30 [INF] End processing HTTP request after 1534.7019ms - 200
2025-08-27 12:53:10.324 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 12:53:10.328 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:53:10.330 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 12:53:11.127 +05:30 [INF] Received HTTP response headers after 795.5148ms - 200
2025-08-27 12:53:11.132 +05:30 [INF] End processing HTTP request after 804.382ms - 200
2025-08-27 12:53:11.143 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='541c5f2f-ed0a-447e-ad76-2351b74345af', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='d2c77f94-0a9b-46f3-8ed7-8316736cbe77' (Nullable = true), @p5='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true), @p6='2025-08-27T07:23:11.1348710Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='offer_aiboat' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","message_status":"accepted"}]}', @p13='918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T07:23:11.1348714Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='e0044a6a-2e7a-47af-af8e-60cdad5430f4', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='d2c77f94-0a9b-46f3-8ed7-8316736cbe77' (Nullable = true), @p24='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p25='2025-08-27T07:23:10.3214033Z' (DbType = DateTime), @p26=NULL, @p27='False', @p28=NULL, @p29='offer_aiboat' (Nullable = false), @p30='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==', @p31='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","message_status":"accepted"}]}', @p32='+918974005240' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35='2025-08-27T07:23:10.3214036Z' (Nullable = true) (DbType = DateTime), @p36='campaign', @p37='Sent' (Nullable = false), @p38='6bde8c6e-23e3-4330-93a7-b44ef6c92d45', @p39='True', @p40=NULL, @p41='c13be597-6ae2-42bb-9d43-925815f24ff8', @p42='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @p43=NULL, @p44=NULL, @p45=NULL (DbType = DateTime), @p46='26b8b9a2-5624-40ed-a659-65de71d03d20', @p47=NULL, @p48='2025-08-27T07:23:10.3217341Z' (DbType = DateTime), @p49='system', @p50=NULL (DbType = DateTime), @p51=NULL, @p52=NULL, @p53=NULL, @p54=NULL, @p55='False', @p56=NULL (DbType = DateTime), @p57=NULL, @p58=NULL, @p59='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p60='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==', @p61='e0044a6a-2e7a-47af-af8e-60cdad5430f4' (Nullable = true), @p62=NULL (DbType = DateTime), @p63='606728a5-73c4-4b7f-913d-50e8649e60e5', @p64='0', @p65='Sent', @p66='2025-08-27T07:23:10.3217342Z' (Nullable = true) (DbType = DateTime), @p67=NULL, @p68='offer_aiboat', @p69=NULL (DbType = Guid), @p70='b6f2cf87-46b9-40c1-8b3c-8eafcfd00434', @p71='True', @p72=NULL, @p73='c13be597-6ae2-42bb-9d43-925815f24ff8', @p74='d2c77f94-0a9b-46f3-8ed7-8316736cbe77', @p75=NULL, @p76=NULL, @p77=NULL (DbType = DateTime), @p78='a307d00b-239b-4c7b-bb16-77838875fbec', @p79=NULL, @p80='2025-08-27T07:23:11.1351158Z' (DbType = DateTime), @p81='system', @p82=NULL (DbType = DateTime), @p83=NULL, @p84=NULL, @p85=NULL, @p86=NULL, @p87='False', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p92='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==', @p93='541c5f2f-ed0a-447e-ad76-2351b74345af' (Nullable = true), @p94=NULL (DbType = DateTime), @p95='ce6439e7-ef8f-41a4-9825-a5890489732c', @p96='0', @p97='Sent', @p98='2025-08-27T07:23:11.1351160Z' (Nullable = true) (DbType = DateTime), @p99=NULL, @p100='offer_aiboat', @p101=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
2025-08-27 12:53:11.149 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 12:53:11.152 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4883.765ms
2025-08-27 12:53:11.154 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 12:53:11.156 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d2c77f94-0a9b-46f3-8ed7-8316736cbe77 - 200 null application/json; charset=utf-8 4899.556ms
2025-08-27 12:53:18.201 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 12:53:18.206 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:18.207 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:53:18.212 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"sent","timestamp":"1756279396","recipient_id":"918974005240","conversation":{"id":"1cb50826827b6f18735f05c2b199f9c0","expiration_timestamp":"1756279396","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:18.216 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:53:18.217 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"sent","timestamp":"1756279396","recipient_id":"918974005240","conversation":{"id":"1cb50826827b6f18735f05c2b199f9c0","expiration_timestamp":"1756279396","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:18.221 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:53:18.217 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:53:18.234 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 22.9754ms
2025-08-27 12:53:18.238 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:18.245 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 43.8825ms
2025-08-27 12:53:18.229 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"sent","timestamp":"1756279396","recipient_id":"918974005240","conversation":{"id":"1cb50826827b6f18735f05c2b199f9c0","expiration_timestamp":"1756279396","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:18.264 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:53:18.277 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__logId_Value_0='6bde8c6e-23e3-4330-93a7-b44ef6c92d45'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:53:18.280 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA== → sent
2025-08-27 12:53:19.015 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 12:53:19.019 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.020 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:53:19.023 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"delivered","timestamp":"1756279397","recipient_id":"918974005240","conversation":{"id":"1cb50826827b6f18735f05c2b199f9c0","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.025 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:53:19.026 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"delivered","timestamp":"1756279397","recipient_id":"918974005240","conversation":{"id":"1cb50826827b6f18735f05c2b199f9c0","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.027 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:53:19.029 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:53:19.030 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.1511ms
2025-08-27 12:53:19.031 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"delivered","timestamp":"1756279397","recipient_id":"918974005240","conversation":{"id":"1cb50826827b6f18735f05c2b199f9c0","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.033 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.037 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:53:19.037 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.6197ms
2025-08-27 12:53:19.045 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='6bde8c6e-23e3-4330-93a7-b44ef6c92d45'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:53:19.053 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='6bde8c6e-23e3-4330-93a7-b44ef6c92d45', @p0='2025-08-27T07:23:17.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:53:19.056 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA== → delivered
2025-08-27 12:53:19.131 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 12:53:19.135 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.136 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:53:19.139 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"sent","timestamp":"1756279397","recipient_id":"918974005240","conversation":{"id":"5573d2b2461bf2f6774eadf3e4002782","expiration_timestamp":"1756279397","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.142 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:53:19.142 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"sent","timestamp":"1756279397","recipient_id":"918974005240","conversation":{"id":"5573d2b2461bf2f6774eadf3e4002782","expiration_timestamp":"1756279397","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.143 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:53:19.145 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:53:19.147 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.0432ms
2025-08-27 12:53:19.149 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"sent","timestamp":"1756279397","recipient_id":"918974005240","conversation":{"id":"5573d2b2461bf2f6774eadf3e4002782","expiration_timestamp":"1756279397","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.150 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.154 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:53:19.154 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.3061ms
2025-08-27 12:53:19.159 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='b6f2cf87-46b9-40c1-8b3c-8eafcfd00434'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:53:19.166 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA== → sent
2025-08-27 12:53:19.220 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 12:53:19.223 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.224 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:53:19.227 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"delivered","timestamp":"1756279398","recipient_id":"918974005240","conversation":{"id":"5573d2b2461bf2f6774eadf3e4002782","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.230 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:53:19.231 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"delivered","timestamp":"1756279398","recipient_id":"918974005240","conversation":{"id":"5573d2b2461bf2f6774eadf3e4002782","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.231 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:53:19.233 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:53:19.234 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.3249ms
2025-08-27 12:53:19.235 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"delivered","timestamp":"1756279398","recipient_id":"918974005240","conversation":{"id":"5573d2b2461bf2f6774eadf3e4002782","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 12:53:19.237 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.240 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:53:19.241 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.1624ms
2025-08-27 12:53:19.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='b6f2cf87-46b9-40c1-8b3c-8eafcfd00434'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:53:19.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='b6f2cf87-46b9-40c1-8b3c-8eafcfd00434', @p0='2025-08-27T07:23:18.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:53:19.258 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA== → delivered
2025-08-27 12:53:19.828 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:53:19.832 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.834 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:53:19.837 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"read","timestamp":"1756279398","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:53:19.839 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:53:19.842 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:53:19.839 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"read","timestamp":"1756279398","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:53:19.844 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.3721ms
2025-08-27 12:53:19.845 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:53:19.847 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:19.848 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA==","status":"read","timestamp":"1756279398","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:53:19.849 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.1451ms
2025-08-27 12:53:19.853 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:53:19.863 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='b6f2cf87-46b9-40c1-8b3c-8eafcfd00434'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:53:19.887 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p2='b6f2cf87-46b9-40c1-8b3c-8eafcfd00434', @p0='2025-08-27T07:23:18.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:53:19.890 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDZCNkI3REUxNjY2ODE2NjRFAA== → read
2025-08-27 12:53:20.010 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 12:53:20.014 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:20.016 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 12:53:20.019 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"read","timestamp":"1756279398","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:53:20.021 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 12:53:20.021 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"read","timestamp":"1756279398","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:53:20.022 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 12:53:20.026 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 12:53:20.028 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.7761ms
2025-08-27 12:53:20.030 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA==","status":"read","timestamp":"1756279398","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 12:53:20.032 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 12:53:20.034 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.3143ms
2025-08-27 12:53:20.036 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 12:53:20.048 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='6bde8c6e-23e3-4330-93a7-b44ef6c92d45'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 12:53:20.054 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='6bde8c6e-23e3-4330-93a7-b44ef6c92d45', @p0='2025-08-27T07:23:18.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 12:53:20.058 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM3QkYzOEQzMDUzRDU2RDYwAA== → read
2025-08-27 13:04:18.431 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 13:04:18.530 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 13:04:18.562 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 13:04:20.000 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 13:04:20.955 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 13:04:21.225 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 13:04:21.273 +05:30 [INF] Executed DbCommand (100ms) [Parameters=[@__cutoff_0='2025-08-20T07:34:18.8154512Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 13:04:21.289 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 13:04:21.291 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 13:04:21.292 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 13:04:21.294 +05:30 [INF] Hosting environment: Development
2025-08-27 13:04:21.295 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 13:04:22.331 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 13:04:23.441 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 1121.297ms
2025-08-27 13:04:23.513 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 13:04:23.531 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 18.2883ms
2025-08-27 13:04:23.531 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 13:04:23.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 76.5771ms
2025-08-27 13:04:23.780 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 13:04:23.986 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.864ms
2025-08-27 13:04:32.997 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:04:33.026 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 13:04:33.114 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:04:33.120 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 123.2111ms
2025-08-27 13:04:33.127 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:04:33.143 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:04:33.401 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:04:33.436 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:04:33.622 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:04:33.664 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:04:33.700 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 256.3777ms
2025-08-27 13:04:33.704 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:04:33.714 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 587.1428ms
2025-08-27 13:05:04.049 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:05:04.058 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:04.062 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 13.298ms
2025-08-27 13:05:04.078 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:05:04.083 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:04.089 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:05:04.099 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:05:04.159 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:05:04.172 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:05:04.179 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 76.7777ms
2025-08-27 13:05:04.181 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:05:04.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 105.6994ms
2025-08-27 13:05:37.202 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:05:37.209 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:37.211 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 9.8061ms
2025-08-27 13:05:37.216 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 467
2025-08-27 13:05:37.226 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:37.231 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:05:37.240 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:05:37.390 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:05:37.481 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:05:37.488 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:05:39.338 +05:30 [INF] Received HTTP response headers after 1844.8838ms - 200
2025-08-27 13:05:39.340 +05:30 [INF] End processing HTTP request after 1860.8448ms - 200
2025-08-27 13:05:39.980 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p0='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T07:35:39.6140653Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='offer_aiboat' (Nullable = false), @p15='Ai_Bot_v1' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T07:35:39.6140657Z' (DbType = DateTime), @p22='b09efdc2-7ec5-4fc5-9c75-a3ac3730a7de', @p23='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @p24='True', @p25='1', @p26='Visit website' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.mindsmiratus.com/{{1}}' (Nullable = false), @p29='ddaef1a6-b5ab-4d5d-b4f0-284aa751febf', @p30='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @p31='True', @p32='2', @p33='watch Video' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.youtube.com/{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 13:05:40.030 +05:30 [INF] ✅ Campaign 'Ai_Bot_v1' created successfully.
2025-08-27 13:05:40.036 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:05:40.044 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2801.2918ms
2025-08-27 13:05:40.046 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:05:40.048 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2831.6142ms
2025-08-27 13:05:40.129 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:05:40.135 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:05:40.131 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - null null
2025-08-27 13:05:40.135 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:05:40.141 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.144 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.148 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.153 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.155 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 20.3688ms
2025-08-27 13:05:40.156 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - 204 null null 25.062ms
2025-08-27 13:05:40.154 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 25.118ms
2025-08-27 13:05:40.161 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 26.0572ms
2025-08-27 13:05:40.168 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:05:40.171 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - null null
2025-08-27 13:05:40.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:05:40.183 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.186 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.190 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.192 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:05:40.193 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:05:40.194 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:05:40.199 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:05:40.201 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:05:40.202 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:05:40.215 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:05:40.226 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:05:40.234 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:05:40.252 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 49.9433ms
2025-08-27 13:05:40.253 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:05:40.254 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:05:40.258 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:40.259 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 91.868ms
2025-08-27 13:05:40.261 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:05:40.278 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:05:40.290 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:05:40.298 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:05:40.298 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:05:40.301 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 19.4814ms
2025-08-27 13:05:40.309 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:05:40.312 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 58.6314ms
2025-08-27 13:05:40.378 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:05:40.378 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:05:40.403 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:05:40.417 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 212.7074ms
2025-08-27 13:05:40.420 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:05:40.423 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - 200 null application/json; charset=utf-8 251.4845ms
2025-08-27 13:05:40.496 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:05:40.511 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 302.6949ms
2025-08-27 13:05:40.514 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:05:40.516 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 340.1125ms
2025-08-27 13:05:47.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757/assign-contacts - null null
2025-08-27 13:05:47.223 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:47.225 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757/assign-contacts - 204 null null 5.3195ms
2025-08-27 13:05:47.230 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757/assign-contacts - application/json 94
2025-08-27 13:05:47.235 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:47.237 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:05:47.243 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:05:47.289 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 13:05:47.352 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='4a95bd0b-276a-46c3-87cd-3e2f380b9f5e', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T07:35:47.3006602Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T07:35:47.3007586Z' (DbType = DateTime), @p13='8636a5a4-58ec-45e6-af0f-307e39ad7118', @p14=NULL, @p15='c13be597-6ae2-42bb-9d43-925815f24ff8', @p16='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @p17=NULL, @p18=NULL, @p19='a307d00b-239b-4c7b-bb16-77838875fbec', @p20='False', @p21=NULL, @p22=NULL, @p23='2025-08-27T07:35:47.3386152Z' (Nullable = true) (DbType = DateTime), @p24='Pending' (Nullable = false), @p25='2025-08-27T07:35:47.3386162Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-27 13:05:47.379 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:05:47.384 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 138.3548ms
2025-08-27 13:05:47.386 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:05:47.388 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757/assign-contacts - 200 null application/json; charset=utf-8 158.0871ms
2025-08-27 13:05:53.442 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:05:53.447 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:53.449 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.9546ms
2025-08-27 13:05:53.457 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:05:53.464 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:53.467 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:05:53.476 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:05:53.517 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 13:05:53.526 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 13:05:53.532 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 51.4926ms
2025-08-27 13:05:53.534 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:05:53.536 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 78.843ms
2025-08-27 13:05:55.957 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - null null
2025-08-27 13:05:55.962 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:55.964 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - 204 null null 6.9037ms
2025-08-27 13:05:55.969 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - null 0
2025-08-27 13:05:55.975 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:05:55.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:05:55.984 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:06:20.999 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 13:06:21.015 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 13:06:21.031 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:06:21.040 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:06:21.043 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:06:21.044 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:06:22.027 +05:30 [INF] Received HTTP response headers after 981.0786ms - 200
2025-08-27 13:06:22.030 +05:30 [INF] End processing HTTP request after 987.8396ms - 200
2025-08-27 13:06:22.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:06:22.088 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:06:22.090 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:06:23.821 +05:30 [INF] Received HTTP response headers after 1730.4342ms - 200
2025-08-27 13:06:23.823 +05:30 [INF] End processing HTTP request after 1735.4886ms - 200
2025-08-27 13:06:23.975 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:06:23.991 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:06:23.992 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:06:25.046 +05:30 [INF] Received HTTP response headers after 1052.8236ms - 200
2025-08-27 13:06:25.049 +05:30 [INF] End processing HTTP request after 1057.7207ms - 200
2025-08-27 13:06:25.108 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='1bd42b04-4c2f-44d8-82b9-9c90e59cc896', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757' (Nullable = true), @p5='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true), @p6='2025-08-27T07:36:25.0525631Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='offer_aiboat' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","message_status":"accepted"}]}', @p13='918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T07:36:25.0525634Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='50eb5cb0-5e6d-443a-b096-19e20769f59d', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757' (Nullable = true), @p24='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p25='2025-08-27T07:36:23.8491270Z' (DbType = DateTime), @p26=NULL, @p27='False', @p28=NULL, @p29='offer_aiboat' (Nullable = false), @p30='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==', @p31='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","message_status":"accepted"}]}', @p32='+918974005240' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35='2025-08-27T07:36:23.8491661Z' (Nullable = true) (DbType = DateTime), @p36='campaign', @p37='Sent' (Nullable = false), @p38='499e654f-ca2b-4476-8120-2393a3d5c24a', @p39='True', @p40=NULL, @p41='c13be597-6ae2-42bb-9d43-925815f24ff8', @p42='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @p43=NULL, @p44=NULL, @p45=NULL (DbType = DateTime), @p46='a307d00b-239b-4c7b-bb16-77838875fbec', @p47=NULL, @p48='2025-08-27T07:36:25.0529880Z' (DbType = DateTime), @p49='system', @p50=NULL (DbType = DateTime), @p51=NULL, @p52=NULL, @p53=NULL, @p54=NULL, @p55='False', @p56=NULL (DbType = DateTime), @p57=NULL, @p58=NULL, @p59='offer_aiboat' (Nullable = false), @p60='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==', @p61='1bd42b04-4c2f-44d8-82b9-9c90e59cc896' (Nullable = true), @p62=NULL (DbType = DateTime), @p63='8636a5a4-58ec-45e6-af0f-307e39ad7118', @p64='0', @p65='Sent', @p66='2025-08-27T07:36:25.0529881Z' (Nullable = true) (DbType = DateTime), @p67=NULL, @p68='offer_aiboat', @p69=NULL (DbType = Guid), @p70='50fc0316-5d84-4a76-85ee-70a5fc77ad84', @p71='True', @p72=NULL, @p73='c13be597-6ae2-42bb-9d43-925815f24ff8', @p74='c73bae3a-f6fa-4d5e-a63f-0031b1b5f757', @p75=NULL, @p76=NULL, @p77=NULL (DbType = DateTime), @p78='26b8b9a2-5624-40ed-a659-65de71d03d20', @p79=NULL, @p80='2025-08-27T07:36:23.8955583Z' (DbType = DateTime), @p81='system', @p82=NULL (DbType = DateTime), @p83=NULL, @p84=NULL, @p85=NULL, @p86=NULL, @p87='False', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91='offer_aiboat' (Nullable = false), @p92='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==', @p93='50eb5cb0-5e6d-443a-b096-19e20769f59d' (Nullable = true), @p94=NULL (DbType = DateTime), @p95='4a95bd0b-276a-46c3-87cd-3e2f380b9f5e', @p96='0', @p97='Sent', @p98='2025-08-27T07:36:23.8956331Z' (Nullable = true) (DbType = DateTime), @p99=NULL, @p100='offer_aiboat', @p101=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
2025-08-27 13:06:25.118 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:06:25.121 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 29134.8186ms
2025-08-27 13:06:25.124 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:06:25.126 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c73bae3a-f6fa-4d5e-a63f-0031b1b5f757 - 200 null application/json; charset=utf-8 29156.4089ms
2025-08-27 13:06:31.795 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 13:06:31.801 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:31.806 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 13:06:31.818 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"sent","timestamp":"1756280190","recipient_id":"918974005240","conversation":{"id":"6dd2971e2898823d22dc2b6805c28b2d","expiration_timestamp":"1756280190","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:31.823 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 13:06:31.827 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:06:31.831 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 21.7732ms
2025-08-27 13:06:31.834 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:31.836 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 41.5764ms
2025-08-27 13:06:32.028 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"sent","timestamp":"1756280190","recipient_id":"918974005240","conversation":{"id":"6dd2971e2898823d22dc2b6805c28b2d","expiration_timestamp":"1756280190","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.030 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 13:06:32.032 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"sent","timestamp":"1756280190","recipient_id":"918974005240","conversation":{"id":"6dd2971e2898823d22dc2b6805c28b2d","expiration_timestamp":"1756280190","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.050 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 13:06:32.067 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='50fc0316-5d84-4a76-85ee-70a5fc77ad84'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 13:06:32.070 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA== → sent
2025-08-27 13:06:32.646 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 13:06:32.652 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 13:06:32.673 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:32.681 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:32.684 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 13:06:32.686 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 13:06:32.696 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"sent","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"b4bfb582080bc9de4c5d352a0bc28968","expiration_timestamp":"1756280191","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.720 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 13:06:32.704 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"delivered","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"6dd2971e2898823d22dc2b6805c28b2d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.728 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"sent","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"b4bfb582080bc9de4c5d352a0bc28968","expiration_timestamp":"1756280191","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.737 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 13:06:32.725 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:06:32.754 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 13:06:32.759 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:06:32.773 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 78.3647ms
2025-08-27 13:06:32.774 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"sent","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"b4bfb582080bc9de4c5d352a0bc28968","expiration_timestamp":"1756280191","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.776 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 75.4009ms
2025-08-27 13:06:32.779 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:32.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:32.786 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 13:06:32.787 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 141.8613ms
2025-08-27 13:06:32.789 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 137.5866ms
2025-08-27 13:06:32.801 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__logId_Value_0='499e654f-ca2b-4476-8120-2393a3d5c24a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 13:06:32.817 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA== → sent
2025-08-27 13:06:32.828 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"delivered","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"6dd2971e2898823d22dc2b6805c28b2d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.831 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 13:06:32.832 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"delivered","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"6dd2971e2898823d22dc2b6805c28b2d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:32.838 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 13:06:32.844 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='50fc0316-5d84-4a76-85ee-70a5fc77ad84'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 13:06:32.860 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='50fc0316-5d84-4a76-85ee-70a5fc77ad84', @p0='2025-08-27T07:36:31.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 13:06:32.863 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA== → delivered
2025-08-27 13:06:33.051 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 13:06:33.061 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:33.062 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 13:06:33.065 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"delivered","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"b4bfb582080bc9de4c5d352a0bc28968","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:33.067 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 13:06:33.067 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"delivered","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"b4bfb582080bc9de4c5d352a0bc28968","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:33.068 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:06:33.070 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 13:06:33.071 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.8734ms
2025-08-27 13:06:33.072 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"delivered","timestamp":"1756280191","recipient_id":"918974005240","conversation":{"id":"b4bfb582080bc9de4c5d352a0bc28968","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 13:06:33.073 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:33.076 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.291ms
2025-08-27 13:06:33.077 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 13:06:33.088 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='499e654f-ca2b-4476-8120-2393a3d5c24a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 13:06:33.095 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='499e654f-ca2b-4476-8120-2393a3d5c24a', @p0='2025-08-27T07:36:31.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 13:06:33.098 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA== → delivered
2025-08-27 13:06:33.855 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 13:06:33.859 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:33.860 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 13:06:33.863 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"read","timestamp":"1756280192","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 13:06:33.864 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 13:06:33.865 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"read","timestamp":"1756280192","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 13:06:33.865 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:06:33.867 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 13:06:33.868 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.9295ms
2025-08-27 13:06:33.869 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA==","status":"read","timestamp":"1756280192","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 13:06:33.871 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:33.874 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 19.3799ms
2025-08-27 13:06:33.875 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 13:06:33.885 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='50fc0316-5d84-4a76-85ee-70a5fc77ad84'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 13:06:33.891 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='50fc0316-5d84-4a76-85ee-70a5fc77ad84', @p0='2025-08-27T07:36:32.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 13:06:33.894 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTA3QUNGOTlEQTc3MDlDMzUyAA== → read
2025-08-27 13:06:33.960 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 13:06:33.964 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:33.965 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 13:06:33.968 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"read","timestamp":"1756280192","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 13:06:33.970 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 13:06:33.970 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"read","timestamp":"1756280192","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 13:06:33.971 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:06:33.973 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 13:06:33.975 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.5717ms
2025-08-27 13:06:33.976 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA==","status":"read","timestamp":"1756280192","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 13:06:33.978 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 13:06:33.981 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.4351ms
2025-08-27 13:06:33.983 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 13:06:33.991 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='499e654f-ca2b-4476-8120-2393a3d5c24a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 13:06:34.002 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='499e654f-ca2b-4476-8120-2393a3d5c24a', @p0='2025-08-27T07:36:32.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 13:06:34.005 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUM3REQ1OUIxQjJBNEU5QTg5AA== → read
2025-08-27 13:15:44.816 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:15:44.837 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:15:44.839 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 22.3549ms
2025-08-27 13:15:44.851 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:15:44.858 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:15:44.863 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:15:44.865 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:15:45.022 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:15:45.026 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:15:45.028 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 159.4054ms
2025-08-27 13:15:45.030 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:15:45.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 180.4502ms
2025-08-27 13:15:48.847 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:15:48.851 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:15:48.853 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 5.1683ms
2025-08-27 13:15:48.857 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:15:48.861 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:15:48.863 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:15:48.864 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:15:48.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:15:48.874 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:15:48.876 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 10.5522ms
2025-08-27 13:15:48.877 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:15:48.880 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 22.4228ms
2025-08-27 13:15:50.394 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-27 13:15:50.399 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:15:50.400 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 204 null null 6.0261ms
2025-08-27 13:15:50.404 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-27 13:15:50.408 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:15:50.410 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:15:50.411 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:15:50.423 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='account_creation_confirmation_3'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:15:50.434 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:15:50.437 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 19.5871ms
2025-08-27 13:15:50.440 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:15:50.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 200 null application/json; charset=utf-8 37.5974ms
2025-08-27 13:16:03.462 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:16:03.466 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:16:03.468 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 6.0752ms
2025-08-27 13:16:03.475 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:16:03.479 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:16:03.481 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:16:03.482 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:16:03.488 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:16:03.493 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:16:03.495 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 10.7986ms
2025-08-27 13:16:03.497 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:16:03.499 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 24.3087ms
2025-08-27 13:16:18.228 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:16:18.234 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:16:18.235 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 7.515ms
2025-08-27 13:16:18.243 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 467
2025-08-27 13:16:18.247 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:16:18.249 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:16:18.250 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:20:31.311 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-27 13:20:31.312 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:20:31.327 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:31.331 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:20:31.331 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 204 null null 20.7032ms
2025-08-27 13:20:31.333 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:20:31.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-27 13:20:31.346 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:31.348 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:20:31.350 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:20:31.356 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='account_creation_confirmation_3'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:20:31.363 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:20:31.365 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 12.716ms
2025-08-27 13:20:31.368 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:20:31.369 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 200 null application/json; charset=utf-8 31.3217ms
2025-08-27 13:20:32.835 +05:30 [INF] Received HTTP response headers after 1495.6318ms - 200
2025-08-27 13:20:32.837 +05:30 [INF] End processing HTTP request after 1505.9871ms - 200
2025-08-27 13:20:32.847 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='cf674c10-b67e-4563-a420-a317ec7b661b', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T07:50:32.8405860Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='offer_aiboat' (Nullable = false), @p15='ai_bot_v3' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T07:50:32.8405863Z' (DbType = DateTime), @p22='22170e42-1beb-4b94-bcb9-7ea528766582', @p23='cf674c10-b67e-4563-a420-a317ec7b661b', @p24='True', @p25='2', @p26='watch Video' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.youtube.com/{{1}}' (Nullable = false), @p29='d710c266-06bd-4e81-b5b4-8f24ad2d5277', @p30='cf674c10-b67e-4563-a420-a317ec7b661b', @p31='True', @p32='1', @p33='Visit website' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 13:20:32.852 +05:30 [INF] ✅ Campaign 'ai_bot_v3' created successfully.
2025-08-27 13:20:32.854 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:20:32.856 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 254603.1584ms
2025-08-27 13:20:32.858 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:20:32.859 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 254616.6094ms
2025-08-27 13:20:32.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:20:32.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b - null null
2025-08-27 13:20:32.922 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:20:32.946 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:20:32.948 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:32.951 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:32.954 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:32.958 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:32.959 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 40.0006ms
2025-08-27 13:20:32.961 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 38.62ms
2025-08-27 13:20:32.960 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b - 204 null null 36.8792ms
2025-08-27 13:20:32.962 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 15.6386ms
2025-08-27 13:20:32.976 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b - null null
2025-08-27 13:20:32.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:20:32.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:20:32.987 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:32.991 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:32.994 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:32.995 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:20:32.996 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:20:32.998 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:20:32.999 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:20:33.001 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:20:33.002 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:20:33.012 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='cf674c10-b67e-4563-a420-a317ec7b661b', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:20:33.015 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:20:33.026 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:20:33.030 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 23.5522ms
2025-08-27 13:20:33.031 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:20:33.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:20:33.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b - 200 null application/json; charset=utf-8 62.8585ms
2025-08-27 13:20:33.041 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:20:33.047 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:20:33.049 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 35.2718ms
2025-08-27 13:20:33.051 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:20:33.053 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 69.1074ms
2025-08-27 13:20:33.114 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:20:33.117 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:20:33.120 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 111.0059ms
2025-08-27 13:20:33.121 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:20:33.122 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:20:33.125 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:33.126 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 146.0232ms
2025-08-27 13:20:33.128 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:20:33.133 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:20:33.138 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:20:33.144 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:20:33.146 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 10.5669ms
2025-08-27 13:20:33.148 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:20:33.149 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 28.3511ms
2025-08-27 13:20:40.645 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b/assign-contacts - null null
2025-08-27 13:20:40.649 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:40.651 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b/assign-contacts - 204 null null 5.4179ms
2025-08-27 13:20:40.655 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b/assign-contacts - application/json 55
2025-08-27 13:20:40.658 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:40.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:20:40.661 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:20:40.671 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='cf674c10-b67e-4563-a420-a317ec7b661b', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 13:20:40.679 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='eee3ee56-3867-4961-bcb4-57f40eac4dcb', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='cf674c10-b67e-4563-a420-a317ec7b661b', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T07:50:40.6751876Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T07:50:40.6751880Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 13:20:40.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:20:40.684 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 20.96ms
2025-08-27 13:20:40.688 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:20:40.690 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/cf674c10-b67e-4563-a420-a317ec7b661b/assign-contacts - 200 null application/json; charset=utf-8 35.1106ms
2025-08-27 13:20:48.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:20:48.198 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:48.200 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 7.3228ms
2025-08-27 13:20:48.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:20:48.222 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:48.224 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:20:48.228 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:20:48.240 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:20:48.245 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:20:48.251 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 17.8178ms
2025-08-27 13:20:48.254 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:20:48.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 43.0605ms
2025-08-27 13:20:50.816 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-27 13:20:50.820 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:50.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 204 null null 4.9145ms
2025-08-27 13:20:50.828 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - null null
2025-08-27 13:20:50.833 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:20:50.834 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:20:50.836 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:20:50.842 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='account_creation_confirmation_3'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:20:50.846 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:20:50.848 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 10.1807ms
2025-08-27 13:20:50.850 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:20:50.851 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/account_creation_confirmation_3 - 200 null application/json; charset=utf-8 23.6109ms
2025-08-27 13:21:13.904 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:21:13.908 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:13.909 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 5.0351ms
2025-08-27 13:21:13.926 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 372
2025-08-27 13:21:13.930 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:13.932 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:21:13.933 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:21:16.065 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:21:16.076 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:21:16.077 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:21:17.587 +05:30 [INF] Received HTTP response headers after 1508.5003ms - 200
2025-08-27 13:21:17.589 +05:30 [INF] End processing HTTP request after 1513.7481ms - 200
2025-08-27 13:21:17.616 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='c4e76d63-402d-49ad-8b98-d928bfa61f41', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T07:51:17.5947222Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='account_creation_confirmation_3' (Nullable = false), @p15='check static url' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='account_creation_confirmation_3', @p20='["dasd","sdad"]', @p21='2025-08-27T07:51:17.5947223Z' (DbType = DateTime), @p22='66f21557-064d-4f60-8644-876eacb15179', @p23='c4e76d63-402d-49ad-8b98-d928bfa61f41', @p24='True', @p25='1', @p26='Verify account' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.qwexample.com/' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-08-27 13:21:17.619 +05:30 [INF] ✅ Campaign 'check static url' created successfully.
2025-08-27 13:21:17.621 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:21:17.623 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3687.0209ms
2025-08-27 13:21:17.625 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:21:17.626 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3700.0412ms
2025-08-27 13:21:17.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:21:17.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41 - null null
2025-08-27 13:21:17.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:21:17.704 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:21:17.715 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.718 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.726 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 23.3269ms
2025-08-27 13:21:17.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41 - 204 null null 27.9261ms
2025-08-27 13:21:17.722 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.725 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.738 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:21:17.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41 - null null
2025-08-27 13:21:17.748 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.743 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 39.3852ms
2025-08-27 13:21:17.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 39.6018ms
2025-08-27 13:21:17.757 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.758 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:21:17.765 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:21:17.766 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:21:17.767 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:21:17.771 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.772 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:21:17.776 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:21:17.779 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:21:17.782 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:21:17.787 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='c4e76d63-402d-49ad-8b98-d928bfa61f41', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:21:17.789 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:21:17.791 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:21:17.794 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:21:17.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:21:17.800 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:21:17.801 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 20.0252ms
2025-08-27 13:21:17.805 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:17.795 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 20.7375ms
2025-08-27 13:21:17.809 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:21:17.810 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:21:17.811 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:21:17.812 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:21:17.813 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41 - 200 null application/json; charset=utf-8 71.4203ms
2025-08-27 13:21:17.816 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:21:17.817 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:21:17.818 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 80.3654ms
2025-08-27 13:21:17.824 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 33.4009ms
2025-08-27 13:21:17.829 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:21:17.833 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:21:17.836 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:21:17.837 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 72.4593ms
2025-08-27 13:21:17.839 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 12.9204ms
2025-08-27 13:21:17.845 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:21:17.846 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 49.7521ms
2025-08-27 13:21:22.088 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41/assign-contacts - null null
2025-08-27 13:21:22.093 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:22.094 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41/assign-contacts - 204 null null 6.0914ms
2025-08-27 13:21:22.101 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41/assign-contacts - application/json 55
2025-08-27 13:21:22.105 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:21:22.107 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:21:22.109 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:21:22.117 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='c4e76d63-402d-49ad-8b98-d928bfa61f41', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 13:21:22.125 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='3519929d-126b-4547-be27-b4ed7e0167d3', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='c4e76d63-402d-49ad-8b98-d928bfa61f41', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T07:51:22.1220093Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T07:51:22.1220124Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 13:21:22.129 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:21:22.131 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 19.507ms
2025-08-27 13:21:22.133 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:21:22.135 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/c4e76d63-402d-49ad-8b98-d928bfa61f41/assign-contacts - 200 null application/json; charset=utf-8 34.4267ms
2025-08-27 13:24:01.690 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:24:01.696 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:24:01.697 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.9499ms
2025-08-27 13:24:01.701 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:24:01.704 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:24:01.707 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:24:01.709 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:24:01.715 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:24:01.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:24:01.729 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 18.9167ms
2025-08-27 13:24:01.730 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:24:01.732 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 30.5807ms
2025-08-27 13:24:56.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:24:56.571 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:24:56.572 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.3497ms
2025-08-27 13:24:56.575 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:24:56.577 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:24:56.578 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:24:56.579 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:24:56.652 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:24:56.654 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:24:56.656 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 74.9164ms
2025-08-27 13:24:56.657 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:24:56.658 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 83.615ms
2025-08-27 13:30:16.565 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:30:16.570 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:16.571 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.3074ms
2025-08-27 13:30:16.577 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:30:16.579 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:16.580 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:30:16.581 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:30:16.657 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:30:16.659 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:30:16.660 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 77.5482ms
2025-08-27 13:30:16.661 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:30:16.662 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 85.3071ms
2025-08-27 13:30:24.637 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:30:24.640 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:24.640 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 3.6942ms
2025-08-27 13:30:24.643 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:30:24.646 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:24.647 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:30:24.648 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:30:24.652 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:30:24.655 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:30:24.657 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 7.5948ms
2025-08-27 13:30:24.658 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:30:24.660 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 16.1631ms
2025-08-27 13:30:48.595 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:30:48.601 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:48.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 7.4444ms
2025-08-27 13:30:48.609 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 456
2025-08-27 13:30:48.611 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:48.612 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:30:48.613 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:30:53.937 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:30:53.940 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:30:53.941 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:30:54.939 +05:30 [INF] Received HTTP response headers after 996.6413ms - 401
2025-08-27 13:30:54.940 +05:30 [INF] End processing HTTP request after 1000.3395ms - 401
2025-08-27 13:30:54.942 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Wednesday, 27-Aug-25 01:00:00 PDT. The current time is Wednesday, 27-Aug-25 01:00:54 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AGUTmpEQ-1QUsWC72_hMOic"}}
2025-08-27 13:30:54.944 +05:30 [WRN] Could not find template metadata for offer_aiboat
2025-08-27 13:30:54.951 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='e92cabcb-3866-4d8c-87c1-dcd42ee18153', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T08:00:54.9461155Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='offer_aiboat' (Nullable = false), @p15='ofer-boat' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T08:00:54.9461156Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-08-27 13:30:54.953 +05:30 [INF] ✅ Campaign 'ofer-boat' created successfully.
2025-08-27 13:30:54.955 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:30:54.956 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 6341.82ms
2025-08-27 13:30:54.958 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:30:54.959 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 6349.8597ms
2025-08-27 13:30:55.026 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:30:55.031 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:30:55.032 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153 - null null
2025-08-27 13:30:55.041 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 14.5155ms
2025-08-27 13:30:55.040 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:30:55.052 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:30:55.053 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 22.1312ms
2025-08-27 13:30:55.049 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.055 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.061 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:30:55.064 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153 - 204 null null 34.3422ms
2025-08-27 13:30:55.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 34.9206ms
2025-08-27 13:30:55.066 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:30:55.068 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.073 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153 - null null
2025-08-27 13:30:55.073 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:30:55.074 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:30:55.076 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.078 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:30:55.080 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:30:55.080 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:30:55.083 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:30:55.084 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:30:55.084 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:30:55.089 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:30:55.087 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 9.9889ms
2025-08-27 13:30:55.089 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:30:55.098 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:30:55.099 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:30:55.105 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:55.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 53.7166ms
2025-08-27 13:30:55.108 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:30:55.109 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:30:55.114 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 31.7126ms
2025-08-27 13:30:55.115 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:30:55.116 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:30:55.118 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 54.6662ms
2025-08-27 13:30:55.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:30:55.126 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:30:55.127 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 9.7467ms
2025-08-27 13:30:55.128 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:30:55.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 41.1085ms
2025-08-27 13:30:55.173 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e92cabcb-3866-4d8c-87c1-dcd42ee18153', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:30:55.176 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:30:55.177 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 86.6439ms
2025-08-27 13:30:55.178 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:30:55.179 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153 - 200 null application/json; charset=utf-8 106.7249ms
2025-08-27 13:30:58.994 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153/assign-contacts - null null
2025-08-27 13:30:58.996 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:58.997 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153/assign-contacts - 204 null null 2.8273ms
2025-08-27 13:30:59.000 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153/assign-contacts - application/json 55
2025-08-27 13:30:59.002 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:30:59.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:30:59.004 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:30:59.009 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e92cabcb-3866-4d8c-87c1-dcd42ee18153', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 13:30:59.016 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='b9f50be4-e227-4f86-a880-383e73be5f52', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='e92cabcb-3866-4d8c-87c1-dcd42ee18153', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T08:00:59.0122341Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T08:00:59.0122344Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 13:30:59.018 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:30:59.019 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 13.5112ms
2025-08-27 13:30:59.020 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:30:59.021 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/e92cabcb-3866-4d8c-87c1-dcd42ee18153/assign-contacts - 200 null application/json; charset=utf-8 21.6275ms
2025-08-27 13:31:02.882 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:31:02.885 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:31:02.885 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.2118ms
2025-08-27 13:31:02.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:31:02.891 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:31:02.892 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:31:02.893 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:31:02.897 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 13:31:02.900 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 13:31:02.902 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.3406ms
2025-08-27 13:31:02.903 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:31:02.903 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 15.1751ms
2025-08-27 13:33:09.196 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:33:09.204 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:09.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 8.6464ms
2025-08-27 13:33:09.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:33:09.214 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:09.216 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:33:09.217 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:33:09.222 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:33:09.224 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:33:09.226 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 7.8917ms
2025-08-27 13:33:09.227 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:33:09.228 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 16.5575ms
2025-08-27 13:33:11.519 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:33:11.521 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:11.522 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 3.4113ms
2025-08-27 13:33:11.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:33:11.527 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:11.528 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:33:11.529 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:33:11.532 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:33:11.535 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:33:11.537 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 6.4925ms
2025-08-27 13:33:11.538 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:33:11.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 13.5525ms
2025-08-27 13:33:38.713 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:33:38.716 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:38.717 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.3523ms
2025-08-27 13:33:38.723 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 464
2025-08-27 13:33:38.725 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:38.726 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:33:38.727 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:33:39.956 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:33:39.961 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:33:39.962 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:33:40.541 +05:30 [INF] Received HTTP response headers after 577.0444ms - 401
2025-08-27 13:33:40.543 +05:30 [INF] End processing HTTP request after 582.1904ms - 401
2025-08-27 13:33:40.544 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Wednesday, 27-Aug-25 01:00:00 PDT. The current time is Wednesday, 27-Aug-25 01:03:39 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AMO6rM0m3AFHOZKVUrutYZd"}}
2025-08-27 13:33:40.546 +05:30 [WRN] Could not find template metadata for offer_aiboat
2025-08-27 13:33:40.552 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='013fcb51-c413-454d-8a61-68671d89070e', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T08:03:40.5479910Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='offer_aiboat' (Nullable = false), @p15='Ofer_bot_v34' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T08:03:40.5479910Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-08-27 13:33:40.690 +05:30 [INF] ✅ Campaign 'Ofer_bot_v34' created successfully.
2025-08-27 13:33:40.692 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:33:40.695 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1967.1239ms
2025-08-27 13:33:40.698 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:33:40.700 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1976.5801ms
2025-08-27 13:33:40.788 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:33:40.790 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:33:40.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:33:40.788 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e - null null
2025-08-27 13:33:40.805 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.810 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.814 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.818 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.820 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 30.4966ms
2025-08-27 13:33:40.819 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 31.6268ms
2025-08-27 13:33:40.821 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 30.2572ms
2025-08-27 13:33:40.824 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e - 204 null null 35.873ms
2025-08-27 13:33:40.835 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:33:40.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:33:40.846 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e - null null
2025-08-27 13:33:40.848 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.851 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.853 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.854 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:33:40.855 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:33:40.856 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:33:40.857 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:33:40.858 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:33:40.864 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:33:40.859 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:33:40.866 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:33:40.868 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:33:40.874 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='013fcb51-c413-454d-8a61-68671d89070e', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:33:40.876 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.8884ms
2025-08-27 13:33:40.879 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:33:40.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:33:40.893 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:33:40.894 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:33:40.899 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:33:40.901 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:40.903 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 33.0011ms
2025-08-27 13:33:40.905 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 70.0991ms
2025-08-27 13:33:40.908 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:33:40.909 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:33:40.910 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:33:40.915 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 50.5595ms
2025-08-27 13:33:40.916 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:33:40.918 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e - 200 null application/json; charset=utf-8 72.3893ms
2025-08-27 13:33:40.920 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:33:40.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:33:40.930 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 87.9064ms
2025-08-27 13:33:40.932 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:33:40.937 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 15.0737ms
2025-08-27 13:33:40.939 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:33:40.940 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 61.5978ms
2025-08-27 13:33:46.297 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e/assign-contacts - null null
2025-08-27 13:33:46.299 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:46.300 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e/assign-contacts - 204 null null 2.5722ms
2025-08-27 13:33:46.302 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e/assign-contacts - application/json 94
2025-08-27 13:33:46.303 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:33:46.304 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:33:46.305 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:33:46.309 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='013fcb51-c413-454d-8a61-68671d89070e', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 13:33:46.313 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='086d1686-7850-41ed-ad45-fa251f945b9b', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='013fcb51-c413-454d-8a61-68671d89070e', @p4=NULL, @p5=NULL, @p6='a307d00b-239b-4c7b-bb16-77838875fbec', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T08:03:46.3118666Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T08:03:46.3118668Z' (DbType = DateTime), @p13='df9ef13d-b29b-492c-86b0-82a5db67d7d5', @p14=NULL, @p15='c13be597-6ae2-42bb-9d43-925815f24ff8', @p16='013fcb51-c413-454d-8a61-68671d89070e', @p17=NULL, @p18=NULL, @p19='26b8b9a2-5624-40ed-a659-65de71d03d20', @p20='False', @p21=NULL, @p22=NULL, @p23='2025-08-27T08:03:46.3119661Z' (Nullable = true) (DbType = DateTime), @p24='Pending' (Nullable = false), @p25='2025-08-27T08:03:46.3119662Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25);
2025-08-27 13:33:46.316 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:33:46.317 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 10.5032ms
2025-08-27 13:33:46.318 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:33:46.319 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/013fcb51-c413-454d-8a61-68671d89070e/assign-contacts - 200 null application/json; charset=utf-8 16.8313ms
2025-08-27 13:34:37.501 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:34:37.504 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:37.506 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 5.0566ms
2025-08-27 13:34:37.518 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:34:37.521 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:37.522 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:34:37.524 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:34:37.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:34:37.536 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:34:37.538 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 12.2535ms
2025-08-27 13:34:37.539 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:34:37.540 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 22.885ms
2025-08-27 13:34:43.089 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:34:43.092 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:43.092 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 3.0183ms
2025-08-27 13:34:43.095 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:34:43.097 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:43.097 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:34:43.098 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:34:43.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:34:43.122 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:34:43.123 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 23.3705ms
2025-08-27 13:34:43.124 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:34:43.125 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 30.0822ms
2025-08-27 13:34:53.501 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:34:53.503 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:53.504 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 2.9988ms
2025-08-27 13:34:53.506 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 462
2025-08-27 13:34:53.508 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:53.508 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:34:53.509 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:34:55.722 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:34:55.725 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:34:55.725 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:34:56.384 +05:30 [INF] Received HTTP response headers after 658.0979ms - 401
2025-08-27 13:34:56.386 +05:30 [INF] End processing HTTP request after 660.9328ms - 401
2025-08-27 13:34:56.387 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Wednesday, 27-Aug-25 01:00:00 PDT. The current time is Wednesday, 27-Aug-25 01:04:55 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AhRmhtIHaVT23x3m-xIb_3R"}}
2025-08-27 13:34:56.388 +05:30 [WRN] Could not find template metadata for offer_aiboat
2025-08-27 13:34:56.406 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@p0='56cfee31-42d2-478d-88f0-d6ce74e2668d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T08:04:56.3892303Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='offer_aiboat' (Nullable = false), @p15='v234' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T08:04:56.3892304Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
2025-08-27 13:34:56.408 +05:30 [INF] ✅ Campaign 'v234' created successfully.
2025-08-27 13:34:56.408 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:34:56.409 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2899.0931ms
2025-08-27 13:34:56.411 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:34:56.411 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2905.5866ms
2025-08-27 13:34:56.471 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:34:56.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:34:56.471 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/56cfee31-42d2-478d-88f0-d6ce74e2668d - null null
2025-08-27 13:34:56.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:34:56.476 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.478 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.480 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.481 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.482 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 11.1ms
2025-08-27 13:34:56.482 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 10.8884ms
2025-08-27 13:34:56.483 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/56cfee31-42d2-478d-88f0-d6ce74e2668d - 204 null null 12.1366ms
2025-08-27 13:34:56.484 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 12.1316ms
2025-08-27 13:34:56.489 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/56cfee31-42d2-478d-88f0-d6ce74e2668d - null null
2025-08-27 13:34:56.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:34:56.493 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:34:56.496 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.498 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.500 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.501 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:34:56.501 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:34:56.502 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:34:56.503 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:34:56.503 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:34:56.504 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:34:56.507 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:34:56.511 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:34:56.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='56cfee31-42d2-478d-88f0-d6ce74e2668d', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:34:56.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:34:56.517 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:34:56.518 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 9.1425ms
2025-08-27 13:34:56.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:34:56.519 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 14.2013ms
2025-08-27 13:34:56.520 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:34:56.522 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:34:56.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:34:56.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 30.1545ms
2025-08-27 13:34:56.524 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:34:56.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/56cfee31-42d2-478d-88f0-d6ce74e2668d - 200 null application/json; charset=utf-8 35.556ms
2025-08-27 13:34:56.527 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:34:56.533 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:34:56.535 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:34:56.536 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 5.6767ms
2025-08-27 13:34:56.537 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:34:56.538 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 19.0335ms
2025-08-27 13:34:56.577 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:34:56.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:34:56.583 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:34:56.584 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 77.2801ms
2025-08-27 13:34:56.585 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:34:56.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 95.7954ms
2025-08-27 13:35:28.109 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:35:28.112 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:35:28.112 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.4392ms
2025-08-27 13:35:28.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:35:28.118 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:35:28.119 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:35:28.120 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:35:28.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 13:35:28.128 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 13:35:28.129 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.7717ms
2025-08-27 13:35:28.131 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:35:28.132 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.1035ms
2025-08-27 13:35:32.331 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - null null
2025-08-27 13:35:32.334 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:35:32.335 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - 204 null null 3.4739ms
2025-08-27 13:35:32.338 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - null 0
2025-08-27 13:35:32.340 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:35:32.341 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:35:32.341 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:35:34.898 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='013fcb51-c413-454d-8a61-68671d89070e'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 13:35:34.905 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:35:34.908 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:35:34.910 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:35:34.911 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:35:35.513 +05:30 [INF] Received HTTP response headers after 600.9833ms - 401
2025-08-27 13:35:35.515 +05:30 [INF] End processing HTTP request after 604.2655ms - 401
2025-08-27 13:35:35.522 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Wednesday, 27-Aug-25 01:00:00 PDT. The current time is Wednesday, 27-Aug-25 01:05:34 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AAVwq5wuKKvXqD5Tf4sLcnS"}}
2025-08-27 13:35:35.538 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:35:35.545 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3202.2564ms
2025-08-27 13:35:35.547 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:35:35.556 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - 400 null application/json; charset=utf-8 3218.3659ms
2025-08-27 13:35:46.519 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 13:35:46.525 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:35:46.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.2907ms
2025-08-27 13:35:46.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 13:35:46.540 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:35:46.544 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 13:35:46.566 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 13:35:46.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:35:46.584 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 13:35:46.597 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 30.0407ms
2025-08-27 13:35:46.599 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 13:35:46.599 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 63.5729ms
2025-08-27 13:36:06.179 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 13:36:06.181 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:06.182 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.1416ms
2025-08-27 13:36:06.184 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 555
2025-08-27 13:36:06.186 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:06.187 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 13:36:06.198 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 13:36:06.225 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 13:36:06.252 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 13:36:06.262 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPYbKuewKr4GLhInfpytqM3PD97fLAfDOTgZCM6qHgsULQs20nFgFg46Kfd5GI6YOilZCgnjBMbBMfscgqXZBbnQqZAfqg6m7ZAOpcW7WCkAYqLiQBEant3ZCZA3z9NLVHn56jGXHnXttlQZBFAAQZCSrtgmFaA4rLjJWNRd2j0TK0APgedtzr8AJQHXfGXQjZAmMp3mn4pZC8xZC9Gu0kWaUJvcpe1mGodzXxZBgfZB9DX2nC7eJAlndeeEgZDZD' (Nullable = false), @p1='2025-08-27T08:06:06.2563316Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 13:36:06.265 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:36:06.266 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 66.4912ms
2025-08-27 13:36:06.267 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 13:36:06.268 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 84.1648ms
2025-08-27 13:36:06.898 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 13:36:06.900 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:06.901 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.1093ms
2025-08-27 13:36:06.904 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 387
2025-08-27 13:36:06.906 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:06.907 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 13:36:06.913 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 13:36:06.923 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 13:36:06.924 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 13:36:07.790 +05:30 [INF] Received HTTP response headers after 864.9192ms - 200
2025-08-27 13:36:07.792 +05:30 [INF] End processing HTTP request after 868.974ms - 200
2025-08-27 13:36:07.822 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:36:07.823 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 908.4939ms
2025-08-27 13:36:07.825 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 13:36:07.826 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 922.1737ms
2025-08-27 13:36:10.086 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:36:10.088 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:10.089 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6755ms
2025-08-27 13:36:10.104 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:36:10.108 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:10.110 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:36:10.111 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:36:10.117 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 13:36:10.121 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 13:36:10.123 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.3433ms
2025-08-27 13:36:10.125 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:36:10.126 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 21.7624ms
2025-08-27 13:36:11.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - null null
2025-08-27 13:36:11.972 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:11.973 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - 204 null null 3.0236ms
2025-08-27 13:36:11.977 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - null 0
2025-08-27 13:36:11.980 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:36:11.981 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:36:11.982 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:36:13.245 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='013fcb51-c413-454d-8a61-68671d89070e'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 13:36:13.250 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:36:13.253 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:36:13.255 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:36:13.256 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:36:14.175 +05:30 [INF] Received HTTP response headers after 917.3811ms - 200
2025-08-27 13:36:14.176 +05:30 [INF] End processing HTTP request after 920.8141ms - 200
2025-08-27 13:36:14.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:36:14.362 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:36:14.364 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:36:15.584 +05:30 [INF] Received HTTP response headers after 1219.4142ms - 400
2025-08-27 13:36:15.586 +05:30 [INF] End processing HTTP request after 1223.8197ms - 400
2025-08-27 13:36:15.588 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"Ad5_8JZWiJn5kdZIGkSToV7"}}
2025-08-27 13:36:15.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:36:15.597 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:36:15.598 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 13:36:16.702 +05:30 [INF] Received HTTP response headers after 1103.4966ms - 400
2025-08-27 13:36:16.704 +05:30 [INF] End processing HTTP request after 1106.8252ms - 400
2025-08-27 13:36:16.705 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AfZg-L-LoPucVK764ukKZXN"}}
2025-08-27 13:36:16.737 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='13a3ea78-774a-47cc-83d9-39dfe78aa042', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='013fcb51-c413-454d-8a61-68671d89070e' (Nullable = true), @p5='a307d00b-239b-4c7b-bb16-77838875fbec' (Nullable = true), @p6='2025-08-27T08:06:15.5905637Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='offer_aiboat' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"Ad5_8JZWiJn5kdZIGkSToV7"}}', @p13='918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='7d6fffa4-6b4e-4187-bf68-2f147f5413f3', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='013fcb51-c413-454d-8a61-68671d89070e' (Nullable = true), @p24='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p25='2025-08-27T08:06:16.7066996Z' (DbType = DateTime), @p26='❌ WhatsApp API returned an error.', @p27='False', @p28=NULL, @p29='offer_aiboat' (Nullable = false), @p30=NULL, @p31='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AfZg-L-LoPucVK764ukKZXN"}}', @p32='+918974005240' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35=NULL (DbType = DateTime), @p36='campaign', @p37='Failed' (Nullable = false), @p38='142d6f55-d594-4230-ad8b-201a63da0b13', @p39='True', @p40=NULL, @p41='c13be597-6ae2-42bb-9d43-925815f24ff8', @p42='013fcb51-c413-454d-8a61-68671d89070e', @p43=NULL, @p44=NULL, @p45=NULL (DbType = DateTime), @p46='a307d00b-239b-4c7b-bb16-77838875fbec', @p47=NULL, @p48='2025-08-27T08:06:15.5917992Z' (DbType = DateTime), @p49='system', @p50=NULL (DbType = DateTime), @p51=NULL, @p52=NULL, @p53='❌ WhatsApp API returned an error.', @p54=NULL, @p55='False', @p56=NULL (DbType = DateTime), @p57=NULL, @p58=NULL, @p59='offer_aiboat' (Nullable = false), @p60=NULL, @p61='13a3ea78-774a-47cc-83d9-39dfe78aa042' (Nullable = true), @p62=NULL (DbType = DateTime), @p63='086d1686-7850-41ed-ad45-fa251f945b9b', @p64='0', @p65='Failed', @p66='2025-08-27T08:06:15.5917993Z' (Nullable = true) (DbType = DateTime), @p67=NULL, @p68='offer_aiboat', @p69=NULL (DbType = Guid), @p70='973e99af-9fcd-411b-a31e-4db5854f14b0', @p71='True', @p72=NULL, @p73='c13be597-6ae2-42bb-9d43-925815f24ff8', @p74='013fcb51-c413-454d-8a61-68671d89070e', @p75=NULL, @p76=NULL, @p77=NULL (DbType = DateTime), @p78='26b8b9a2-5624-40ed-a659-65de71d03d20', @p79=NULL, @p80='2025-08-27T08:06:16.7069042Z' (DbType = DateTime), @p81='system', @p82=NULL (DbType = DateTime), @p83=NULL, @p84=NULL, @p85='❌ WhatsApp API returned an error.', @p86=NULL, @p87='False', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91='offer_aiboat' (Nullable = false), @p92=NULL, @p93='7d6fffa4-6b4e-4187-bf68-2f147f5413f3' (Nullable = true), @p94=NULL (DbType = DateTime), @p95='df9ef13d-b29b-492c-86b0-82a5db67d7d5', @p96='0', @p97='Failed', @p98='2025-08-27T08:06:16.7069043Z' (Nullable = true) (DbType = DateTime), @p99=NULL, @p100='offer_aiboat', @p101=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
2025-08-27 13:36:16.742 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:36:16.744 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4759.4904ms
2025-08-27 13:36:16.745 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:36:16.745 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/013fcb51-c413-454d-8a61-68671d89070e - 200 null application/json; charset=utf-8 4768.0628ms
2025-08-27 13:39:42.737 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 13:39:42.775 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 13:39:42.791 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 13:39:43.549 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 13:39:44.104 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 13:39:44.343 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 13:39:44.344 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 13:39:44.346 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 13:39:44.347 +05:30 [INF] Hosting environment: Development
2025-08-27 13:39:44.348 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 13:39:44.352 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 13:39:44.375 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__cutoff_0='2025-08-20T08:09:42.9045768Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 13:39:46.346 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 13:39:46.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 193.0163ms
2025-08-27 13:39:46.562 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 13:39:46.570 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.9235ms
2025-08-27 13:39:46.636 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 13:39:46.674 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.1024ms
2025-08-27 13:39:46.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 13:39:47.079 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 215.1643ms
2025-08-27 13:39:56.158 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:39:56.164 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 13:39:56.221 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:39:56.225 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 67.2031ms
2025-08-27 13:39:56.230 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:39:56.240 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:39:56.387 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:39:56.404 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:39:56.490 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:39:56.513 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:39:56.532 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 123.3766ms
2025-08-27 13:39:56.534 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:39:56.539 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 308.6676ms
2025-08-27 13:39:58.626 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:39:58.630 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:39:58.631 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 4.7167ms
2025-08-27 13:39:58.634 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:39:58.636 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:39:58.640 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:39:58.645 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:39:58.669 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:39:58.675 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:39:58.680 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 33.2252ms
2025-08-27 13:39:58.681 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:39:58.682 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 48.0824ms
2025-08-27 13:40:10.739 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:40:10.742 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:10.743 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.8571ms
2025-08-27 13:40:10.745 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 461
2025-08-27 13:40:10.749 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:10.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:40:10.757 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:40:26.268 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:40:26.321 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:40:26.323 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:40:27.381 +05:30 [INF] Received HTTP response headers after 1056.0052ms - 200
2025-08-27 13:40:27.383 +05:30 [INF] End processing HTTP request after 1062.9425ms - 200
2025-08-27 13:40:47.449 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@p0='cff123a3-a843-4956-b08c-39741a0c8c65', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T08:10:29.6378536Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hello

Please check our newaly launched Ai Boat.', @p14='offer_aiboat' (Nullable = false), @p15='c23' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T08:10:29.6447435Z' (DbType = DateTime), @p22='10ab2e52-612b-4414-84ad-8e9de44512d0', @p23='cff123a3-a843-4956-b08c-39741a0c8c65', @p24='True', @p25='2', @p26='watch Video' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.youtube.com/{{1}}' (Nullable = false), @p29='b79b2f17-f325-43df-987b-4a24f3494b97', @p30='cff123a3-a843-4956-b08c-39741a0c8c65', @p31='True', @p32='1', @p33='Visit website' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 13:40:48.778 +05:30 [INF] ✅ Campaign 'c23' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-27 13:40:48.782 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:40:48.787 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 38028.6423ms
2025-08-27 13:40:48.788 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:40:48.789 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 38043.8748ms
2025-08-27 13:40:48.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:40:48.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65 - null null
2025-08-27 13:40:48.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:40:48.851 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:40:48.855 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.858 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.860 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.861 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.862 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 13.8084ms
2025-08-27 13:40:48.863 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65 - 204 null null 11.0411ms
2025-08-27 13:40:48.863 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 10.8755ms
2025-08-27 13:40:48.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 12.8651ms
2025-08-27 13:40:48.872 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:40:48.874 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65 - null null
2025-08-27 13:40:48.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:40:48.878 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.879 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.881 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.881 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:40:48.882 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:40:48.882 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:40:48.885 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:40:48.885 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:40:48.886 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:40:48.890 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:40:48.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:40:48.905 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:40:48.915 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 26.0104ms
2025-08-27 13:40:48.916 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:40:48.916 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:40:48.918 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:48.919 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 43.2567ms
2025-08-27 13:40:48.920 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:40:48.923 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:40:48.926 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:40:48.933 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:40:48.936 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:40:48.937 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 12.2809ms
2025-08-27 13:40:48.939 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:40:48.940 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 24.3523ms
2025-08-27 13:40:48.972 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='cff123a3-a843-4956-b08c-39741a0c8c65', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:40:48.972 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:40:48.984 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:40:48.991 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 103.4188ms
2025-08-27 13:40:48.993 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:40:48.994 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65 - 200 null application/json; charset=utf-8 120.7042ms
2025-08-27 13:40:49.032 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:40:49.039 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 152.965ms
2025-08-27 13:40:49.041 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:40:49.042 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 170.1216ms
2025-08-27 13:40:54.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65/assign-contacts - null null
2025-08-27 13:40:54.237 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:54.238 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65/assign-contacts - 204 null null 3.1493ms
2025-08-27 13:40:54.240 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65/assign-contacts - application/json 55
2025-08-27 13:40:54.243 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:40:54.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:40:54.248 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:40:54.274 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='cff123a3-a843-4956-b08c-39741a0c8c65', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 13:40:54.307 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='2245bad6-c3c7-447e-aa60-18571a01ff9f', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='cff123a3-a843-4956-b08c-39741a0c8c65', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T08:10:54.2786827Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T08:10:54.2787625Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 13:40:54.310 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:40:54.312 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 63.2292ms
2025-08-27 13:40:54.313 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:40:54.314 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/cff123a3-a843-4956-b08c-39741a0c8c65/assign-contacts - 200 null application/json; charset=utf-8 73.9666ms
2025-08-27 13:41:51.483 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:41:51.486 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:41:51.487 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.6784ms
2025-08-27 13:41:51.497 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:41:51.499 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:41:51.504 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:41:51.505 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:41:51.513 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:41:51.519 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:41:51.521 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 14.3455ms
2025-08-27 13:41:51.523 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:41:51.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 26.8931ms
2025-08-27 13:41:56.297 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:41:56.299 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:41:56.300 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 3.7928ms
2025-08-27 13:41:56.303 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:41:56.305 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:41:56.306 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:41:56.307 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:41:56.312 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:41:56.315 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:41:56.317 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 7.8752ms
2025-08-27 13:41:56.318 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:41:56.319 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 15.805ms
2025-08-27 13:42:11.091 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:42:11.094 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:11.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.2818ms
2025-08-27 13:42:11.097 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 455
2025-08-27 13:42:11.099 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:11.100 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:42:11.101 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:42:12.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:42:12.342 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:42:12.344 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:42:13.483 +05:30 [INF] Received HTTP response headers after 1138.5866ms - 200
2025-08-27 13:42:13.484 +05:30 [INF] End processing HTTP request after 1142.125ms - 200
2025-08-27 13:42:13.490 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='662a138e-3568-4a97-8531-6a0e4a9d21ad', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T08:12:13.4869375Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hello

Please check our newaly launched Ai Boat.', @p14='offer_aiboat' (Nullable = false), @p15='vfg' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T08:12:13.4869375Z' (DbType = DateTime), @p22='12b4b087-3a52-4436-a993-26f6608ddb28', @p23='662a138e-3568-4a97-8531-6a0e4a9d21ad', @p24='True', @p25='1', @p26='Visit website' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.mindsmiratus.com/{{1}}' (Nullable = false), @p29='7377a31f-d5ec-46c7-b6ec-a523fb2573d7', @p30='662a138e-3568-4a97-8531-6a0e4a9d21ad', @p31='True', @p32='2', @p33='watch Video' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.youtube.com/{{1}}' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 13:42:13.493 +05:30 [INF] ✅ Campaign 'vfg' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-27 13:42:13.495 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:42:13.496 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2393.1654ms
2025-08-27 13:42:13.497 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:42:13.498 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2400.4608ms
2025-08-27 13:42:13.524 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:42:13.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/662a138e-3568-4a97-8531-6a0e4a9d21ad - null null
2025-08-27 13:42:13.529 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.532 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:42:13.532 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:42:13.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 18.4446ms
2025-08-27 13:42:13.545 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.542 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.554 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:42:13.559 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 27.1416ms
2025-08-27 13:42:13.560 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/662a138e-3568-4a97-8531-6a0e4a9d21ad - 204 null null 32.5096ms
2025-08-27 13:42:13.565 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 29.3984ms
2025-08-27 13:42:13.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:42:13.574 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:42:13.577 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/662a138e-3568-4a97-8531-6a0e4a9d21ad - null null
2025-08-27 13:42:13.580 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.581 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:42:13.585 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.586 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:42:13.588 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:42:13.589 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:42:13.592 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:42:13.590 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:42:13.595 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:42:13.597 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:42:13.603 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='662a138e-3568-4a97-8531-6a0e4a9d21ad', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:42:13.605 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 18.1565ms
2025-08-27 13:42:13.607 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:42:13.607 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:42:13.611 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:42:13.611 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:42:13.616 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:42:13.617 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:42:13.619 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 19.7854ms
2025-08-27 13:42:13.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 61.4081ms
2025-08-27 13:42:13.624 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:42:13.624 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:42:13.625 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:42:13.630 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:42:13.633 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 37.8905ms
2025-08-27 13:42:13.635 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/662a138e-3568-4a97-8531-6a0e4a9d21ad - 200 null application/json; charset=utf-8 58.0192ms
2025-08-27 13:42:13.643 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:42:13.646 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:42:13.652 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:42:13.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 82.3794ms
2025-08-27 13:42:13.656 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 18.9261ms
2025-08-27 13:42:13.662 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:42:13.663 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 56.5705ms
2025-08-27 13:53:55.559 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 13:53:55.616 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 13:53:55.636 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 13:53:56.599 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 13:53:57.201 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 13:53:57.452 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 13:53:57.453 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 13:53:57.454 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 13:53:57.455 +05:30 [INF] Hosting environment: Development
2025-08-27 13:53:57.456 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 13:53:57.459 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 13:53:57.481 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__cutoff_0='2025-08-20T08:23:55.7881950Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 13:53:59.442 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 13:53:59.632 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 201.2146ms
2025-08-27 13:53:59.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 13:53:59.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.4979ms
2025-08-27 13:53:59.782 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 13:53:59.818 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.6152ms
2025-08-27 13:54:00.000 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 13:54:00.219 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 218.7734ms
2025-08-27 13:54:05.488 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:54:05.494 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 13:54:05.551 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:05.556 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 68.007ms
2025-08-27 13:54:05.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:54:05.571 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:05.701 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '27-08-2025 08:21:55 AM', Current time (UTC): '27-08-2025 08:24:05 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-27 13:54:05.742 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '27-08-2025 08:21:55 AM', Current time (UTC): '27-08-2025 08:24:05 AM'.
2025-08-27 13:54:05.746 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-27 13:54:05.796 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 811
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-27 13:54:05.806 +05:30 [ERR] Response has already started, unable to write error response for path: /api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8
2025-08-27 13:54:05.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 401 null application/json 247.4313ms
2025-08-27 13:54:15.318 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 13:54:15.322 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:15.323 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.6639ms
2025-08-27 13:54:15.327 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 13:54:15.330 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:15.333 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 13:54:15.349 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 13:54:15.419 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-27 13:54:15.482 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 13:54:15.570 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 13:54:15.668 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 13:54:15.677 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-27 13:54:15.686 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 13:54:15.687 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 13:54:15.692 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:15.699 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 346.2276ms
2025-08-27 13:54:15.700 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 13:54:15.704 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 377.5782ms
2025-08-27 13:54:15.707 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 13:54:15.710 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:15.711 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7031ms
2025-08-27 13:54:15.716 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 13:54:15.718 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:15.728 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.732 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 13:54:15.745 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-27 13:54:15.780 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 13:54:15.785 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:15.796 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 62.3832ms
2025-08-27 13:54:15.798 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 83.3083ms
2025-08-27 13:54:15.826 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 13:54:15.831 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:15.835 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.837 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 13:54:15.850 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 13:54:15.855 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:15.857 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.5055ms
2025-08-27 13:54:15.859 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.860 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 13:54:15.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.214ms
2025-08-27 13:54:15.864 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:15.869 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.870 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 13:54:15.880 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 13:54:15.885 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:15.886 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.613ms
2025-08-27 13:54:15.888 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.7877ms
2025-08-27 13:54:15.912 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 13:54:15.917 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:15.919 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.920 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 13:54:15.929 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 13:54:15.935 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:15.938 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.1858ms
2025-08-27 13:54:15.940 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 13:54:15.943 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.2494ms
2025-08-27 13:54:19.508 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:54:19.512 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:19.513 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 5.0856ms
2025-08-27 13:54:19.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 13:54:19.520 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:19.521 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:54:19.529 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:54:19.560 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 13:54:19.564 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:19.570 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 39.4869ms
2025-08-27 13:54:19.572 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 13:54:19.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 57.3341ms
2025-08-27 13:54:24.087 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:54:24.089 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:24.090 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 3.3996ms
2025-08-27 13:54:24.093 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 13:54:24.095 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:24.096 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:54:24.100 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 13:54:24.113 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 13:54:24.117 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:24.120 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 17.7109ms
2025-08-27 13:54:24.121 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 13:54:24.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 29.1176ms
2025-08-27 13:54:38.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 13:54:38.891 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:38.892 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 4.2533ms
2025-08-27 13:54:38.894 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 457
2025-08-27 13:54:38.898 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:38.899 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:54:38.904 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:54:41.561 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 13:54:41.583 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:54:41.585 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 13:54:47.011 +05:30 [INF] Received HTTP response headers after 5422.4129ms - 200
2025-08-27 13:54:47.012 +05:30 [INF] End processing HTTP request after 5430.5602ms - 200
2025-08-27 13:54:47.290 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL, @p4='2025-08-27T08:24:47.1388298Z' (DbType = DateTime), @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='offer_aiboat' (Nullable = false), @p15='wdasd' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T08:24:47.1388582Z' (DbType = DateTime), @p22='ce1c3289-1412-422e-a11a-ccba66a8f809', @p23='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p24='True', @p25='2', @p26='watch Video' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.youtube.com/shorts/FEM_cUVqjs0' (Nullable = false), @p29='cf1dce5a-8260-46d9-b16e-652086dbff4a', @p30='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p31='True', @p32='1', @p33='Visit website' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/software-development' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 13:54:47.309 +05:30 [INF] ✅ Campaign 'wdasd' created successfully.
2025-08-27 13:54:47.310 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:54:47.313 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 8405.4992ms
2025-08-27 13:54:47.314 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 13:54:47.315 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 8420.1154ms
2025-08-27 13:54:47.371 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:54:47.374 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 13:54:47.374 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:54:47.380 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.371 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 13:54:47.382 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.384 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.385 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 13.8719ms
2025-08-27 13:54:47.386 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.387 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 13.0047ms
2025-08-27 13:54:47.387 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 13.4131ms
2025-08-27 13:54:47.389 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:54:47.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 18.2654ms
2025-08-27 13:54:47.393 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 13:54:47.395 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.397 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 13:54:47.398 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.399 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:54:47.401 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.402 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:54:47.403 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:54:47.405 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:54:47.407 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 13:54:47.407 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:54:47.413 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 13:54:47.416 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:54:47.421 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:54:47.429 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 22.0832ms
2025-08-27 13:54:47.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 13:54:47.430 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:54:47.432 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:54:47.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 43.9263ms
2025-08-27 13:54:47.435 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 13:54:47.434 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:54:47.441 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 13:54:47.445 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 13:54:47.447 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:54:47.448 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 6.2924ms
2025-08-27 13:54:47.450 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 13:54:47.452 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 22.3966ms
2025-08-27 13:54:47.452 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 13:54:47.466 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 13:54:47.469 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 13:54:47.476 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 66.2681ms
2025-08-27 13:54:47.477 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 13:54:47.478 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 200 null application/json; charset=utf-8 80.8861ms
2025-08-27 13:54:47.521 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:54:47.527 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 118.9899ms
2025-08-27 13:54:47.529 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 13:54:47.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 136.0731ms
2025-08-27 13:55:04.644 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/assign-contacts - null null
2025-08-27 13:55:04.646 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:04.647 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/assign-contacts - 204 null null 3.0027ms
2025-08-27 13:55:04.650 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/assign-contacts - application/json 55
2025-08-27 13:55:04.653 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:04.654 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:55:04.657 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:55:04.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 13:55:04.713 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='1cbf8564-3103-428e-a6e4-06cb67eac801', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T08:25:04.6881649Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T08:25:04.6882150Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 13:55:04.716 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:55:04.718 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 59.0335ms
2025-08-27 13:55:04.719 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 13:55:04.720 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b/assign-contacts - 200 null application/json; charset=utf-8 70.0812ms
2025-08-27 13:55:07.772 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:55:07.778 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:07.780 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.1855ms
2025-08-27 13:55:07.785 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:55:07.791 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:07.793 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:55:07.799 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:55:07.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 13:55:07.825 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 13:55:07.829 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 27.6924ms
2025-08-27 13:55:07.830 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:55:07.831 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 46.5413ms
2025-08-27 13:55:09.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 13:55:09.030 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:09.030 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 3.6771ms
2025-08-27 13:55:09.035 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 13:55:09.039 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:09.040 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:55:09.044 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:55:10.509 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 13:55:10.516 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 13:55:10.520 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:55:10.521 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 1474.9084ms
2025-08-27 13:55:10.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:55:10.523 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 1488.4923ms
2025-08-27 13:55:14.448 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 13:55:14.451 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:14.452 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.0407ms
2025-08-27 13:55:14.469 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 13:55:14.473 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:14.475 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 13:55:14.478 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 13:55:14.489 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 13:55:14.494 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 13:55:14.500 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.6196ms
2025-08-27 13:55:14.501 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 13:55:14.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 34.1852ms
2025-08-27 13:55:16.286 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 13:55:16.288 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:16.289 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.4376ms
2025-08-27 13:55:16.292 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 387
2025-08-27 13:55:16.295 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:16.297 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 13:55:16.303 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 13:55:16.318 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 13:55:16.320 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 13:55:18.000 +05:30 [INF] Received HTTP response headers after 1679.0312ms - 200
2025-08-27 13:55:18.001 +05:30 [INF] End processing HTTP request after 1682.7953ms - 200
2025-08-27 13:55:18.011 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:55:18.012 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1707.5325ms
2025-08-27 13:55:18.014 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 13:55:18.014 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1722.2096ms
2025-08-27 13:55:26.845 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 13:55:26.847 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:26.848 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.4732ms
2025-08-27 13:55:26.851 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 387
2025-08-27 13:55:26.854 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:26.855 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 13:55:26.856 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 13:55:26.859 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 13:55:26.860 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 13:55:28.179 +05:30 [INF] Received HTTP response headers after 1318.0665ms - 200
2025-08-27 13:55:28.180 +05:30 [INF] End processing HTTP request after 1321.9088ms - 200
2025-08-27 13:55:28.182 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 13:55:28.183 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1325.7248ms
2025-08-27 13:55:28.184 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 13:55:28.185 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1334.0978ms
2025-08-27 13:55:30.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:55:30.620 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:30.621 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.6023ms
2025-08-27 13:55:30.634 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 13:55:30.638 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:30.640 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:55:30.642 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:55:30.649 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 13:55:30.653 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 13:55:30.656 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.3316ms
2025-08-27 13:55:30.657 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 13:55:30.659 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 25.2636ms
2025-08-27 13:55:32.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 13:55:32.053 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:32.054 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 2.8475ms
2025-08-27 13:55:32.061 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 13:55:32.063 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:32.064 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:55:32.066 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:55:34.076 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 13:55:34.080 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:55:34.081 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2014.1042ms
2025-08-27 13:55:34.083 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:55:34.084 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 2022.8192ms
2025-08-27 13:55:51.550 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 13:55:51.552 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:51.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 2.9876ms
2025-08-27 13:55:51.556 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 13:55:51.558 +05:30 [INF] CORS policy execution successful.
2025-08-27 13:55:51.560 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:55:51.561 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 13:55:56.015 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 13:55:56.018 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 13:55:56.019 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4455.7429ms
2025-08-27 13:55:56.021 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 13:55:56.021 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 4465.5616ms
2025-08-27 14:05:40.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 14:05:40.841 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:05:40.841 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 8.5427ms
2025-08-27 14:05:40.849 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 14:05:40.851 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:05:40.852 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:05:40.853 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 14:05:42.152 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 14:05:42.155 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 14:05:42.156 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 1301.5433ms
2025-08-27 14:05:42.157 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:05:42.158 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 1309.3496ms
2025-08-27 14:06:16.671 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 14:06:16.673 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:06:16.674 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 3.1239ms
2025-08-27 14:06:16.676 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 14:06:16.683 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:06:16.685 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:06:16.685 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 14:06:17.925 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 14:06:17.928 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 14:06:17.929 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 1242.3853ms
2025-08-27 14:06:17.931 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:06:17.931 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 1255.2717ms
2025-08-27 14:10:12.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 14:10:12.208 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:12.210 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 9.9908ms
2025-08-27 14:10:12.214 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 14:10:12.218 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:12.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:10:12.220 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 14:10:13.594 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 14:10:13.597 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 14:10:13.598 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 1375.2513ms
2025-08-27 14:10:13.599 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:10:13.600 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 1386.2157ms
2025-08-27 14:10:26.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 14:10:26.290 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:26.291 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 3.2033ms
2025-08-27 14:10:26.293 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 14:10:26.296 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:26.296 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:10:26.297 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 14:10:27.560 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 14:10:27.564 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 14:10:27.565 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 1266.617ms
2025-08-27 14:10:27.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:10:27.568 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 1274.4758ms
2025-08-27 14:10:34.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:10:34.265 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:34.266 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9788ms
2025-08-27 14:10:34.269 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:10:34.272 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:34.273 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:10:34.274 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:10:34.281 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:10:34.288 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:10:34.289 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.4963ms
2025-08-27 14:10:34.291 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:10:34.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.0338ms
2025-08-27 14:10:34.342 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:10:34.346 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:34.348 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:10:34.350 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:10:34.357 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:10:34.363 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:10:34.365 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2174ms
2025-08-27 14:10:34.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:10:34.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.3657ms
2025-08-27 14:10:34.416 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:10:34.416 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 14:10:34.421 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:34.424 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:34.426 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:10:34.427 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.5694ms
2025-08-27 14:10:34.429 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:10:34.433 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 14:10:34.439 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:10:34.442 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:10:34.446 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:10:34.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 14:10:34.448 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.3671ms
2025-08-27 14:10:34.449 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 14:10:34.451 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:10:34.454 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.7567ms
2025-08-27 14:10:34.460 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 14:10:34.465 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 14:10:34.468 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.7912ms
2025-08-27 14:10:34.469 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 14:10:34.471 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 37.6027ms
2025-08-27 14:23:21.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.a945ec1d786485843601.hot-update.json - null null
2025-08-27 14:23:21.080 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.a945ec1d786485843601.hot-update.json - 404 0 null 21.7145ms
2025-08-27 14:23:21.108 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.a945ec1d786485843601.hot-update.json, Response status code: 404
2025-08-27 14:23:21.247 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/main.a945ec1d786485843601.hot-update.json - null null
2025-08-27 14:23:21.257 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/main.a945ec1d786485843601.hot-update.json - 404 0 null 10.2953ms
2025-08-27 14:23:21.262 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/main.a945ec1d786485843601.hot-update.json, Response status code: 404
2025-08-27 14:23:22.089 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:22.093 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:22.095 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.3332ms
2025-08-27 14:23:22.100 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:22.104 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:22.107 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:22.108 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:22.301 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:22.304 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:22.306 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 195.7362ms
2025-08-27 14:23:22.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:22.309 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 209.3707ms
2025-08-27 14:23:22.337 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:22.342 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:22.345 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:22.346 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:22.353 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:22.358 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:22.360 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.1345ms
2025-08-27 14:23:22.362 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:22.364 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.7013ms
2025-08-27 14:23:23.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:23.526 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:23.528 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:23.530 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:23.540 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:23.546 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:23.551 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.756ms
2025-08-27 14:23:23.556 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:23.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.8645ms
2025-08-27 14:23:23.740 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:23.746 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:23.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:23.757 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:23.766 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:23.772 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:23.774 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.4649ms
2025-08-27 14:23:23.776 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:23.778 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.8132ms
2025-08-27 14:23:23.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 14:23:23.971 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:23.983 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:23.998 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:24.000 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 34.1908ms
2025-08-27 14:23:24.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:24.010 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:24.019 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:24.026 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:24.029 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.6079ms
2025-08-27 14:23:24.032 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:24.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:24.035 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 64.3678ms
2025-08-27 14:23:24.039 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:24.045 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:24.048 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:24.058 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:24.064 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:24.068 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.3252ms
2025-08-27 14:23:24.070 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:24.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.7985ms
2025-08-27 14:23:24.199 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:24.202 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:24.204 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:24.206 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:24.213 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:24.218 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:24.221 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.4308ms
2025-08-27 14:23:24.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:24.225 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.7316ms
2025-08-27 14:23:48.053 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 14:23:48.056 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:48.058 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.552ms
2025-08-27 14:23:48.064 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 14:23:48.066 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:48.068 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 14:23:48.069 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 14:23:48.086 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-27 14:23:48.107 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 14:23:48.118 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 14:23:48.139 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 14:23:48.143 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-27 14:23:48.151 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 14:23:48.152 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 14:23:48.153 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:48.154 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 83.6175ms
2025-08-27 14:23:48.155 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 14:23:48.156 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 92.4228ms
2025-08-27 14:23:48.159 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:48.162 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:48.163 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2911ms
2025-08-27 14:23:48.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:48.169 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:48.171 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:48.172 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:48.177 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:48.181 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:48.183 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7095ms
2025-08-27 14:23:48.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:48.186 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.369ms
2025-08-27 14:23:48.210 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:48.213 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:48.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:48.216 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:48.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:48.225 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:48.227 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.0032ms
2025-08-27 14:23:48.229 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:48.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.5126ms
2025-08-27 14:23:48.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 14:23:48.341 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:48.343 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:48.344 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 14:23:48.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 14:23:48.353 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 14:23:48.354 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.1499ms
2025-08-27 14:23:48.355 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 14:23:48.357 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.5387ms
2025-08-27 14:23:53.162 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 14:23:53.165 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:53.166 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6475ms
2025-08-27 14:23:53.170 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 14:23:53.172 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:53.173 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 14:23:53.175 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 14:23:53.188 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 14:23:53.189 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 14:23:53.191 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.1915ms
2025-08-27 14:23:53.192 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 14:23:53.193 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 23.6323ms
2025-08-27 14:23:54.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 14:23:54.440 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:54.440 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 3.2161ms
2025-08-27 14:23:54.443 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 14:23:54.445 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:23:54.446 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:23:54.447 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 14:24:05.009 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 14:24:05.012 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 14:24:05.013 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 10564.7446ms
2025-08-27 14:24:05.015 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:24:05.016 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 10572.5169ms
2025-08-27 14:46:36.127 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 14:46:36.130 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:46:36.131 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 3.7881ms
2025-08-27 14:46:36.137 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 14:46:36.139 +05:30 [INF] CORS policy execution successful.
2025-08-27 14:46:36.141 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 14:46:36.142 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:00:43.270 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 15:00:43.319 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 15:00:43.335 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 15:00:44.158 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 15:00:44.676 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 15:00:44.921 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 15:00:44.922 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 15:00:44.926 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 15:00:44.927 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 15:00:44.928 +05:30 [INF] Hosting environment: Development
2025-08-27 15:00:44.929 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 15:00:44.940 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__cutoff_0='2025-08-20T09:30:43.4447489Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 15:00:46.882 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 15:00:47.061 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 190.3679ms
2025-08-27 15:00:47.078 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 15:00:47.086 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.3061ms
2025-08-27 15:00:47.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 15:00:47.187 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.7048ms
2025-08-27 15:00:47.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 15:00:47.552 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 202.1186ms
2025-08-27 15:00:52.646 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 15:00:52.650 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 15:00:52.694 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:00:52.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 51.7687ms
2025-08-27 15:00:52.702 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 15:00:52.714 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:00:52.863 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:00:52.881 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:00:56.232 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 15:00:56.258 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:00:56.416 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:00:56.432 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3546.8361ms
2025-08-27 15:00:56.434 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:00:56.439 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 3737.3168ms
2025-08-27 15:02:42.801 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 15:02:42.805 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:02:42.807 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 6.1494ms
2025-08-27 15:02:42.817 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 15:02:42.821 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:02:42.824 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:02:42.826 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:02:53.501 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:05:05.805 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:05:05.836 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 143007.609ms
2025-08-27 15:05:05.838 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:05:05.840 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 400 null application/json; charset=utf-8 143022.8304ms
2025-08-27 15:05:11.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 15:05:11.924 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:05:11.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 6.872ms
2025-08-27 15:05:11.930 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 15:05:11.935 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:05:11.939 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:05:11.941 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:05:21.679 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:17:50.542 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 15:17:50.639 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 15:17:50.676 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 15:17:51.600 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 15:17:52.364 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 15:17:52.612 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 15:17:52.613 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 15:17:52.614 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 15:17:52.615 +05:30 [INF] Hosting environment: Development
2025-08-27 15:17:52.616 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 15:17:52.618 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 15:17:52.643 +05:30 [INF] Executed DbCommand (56ms) [Parameters=[@__cutoff_0='2025-08-20T09:47:50.8808726Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 15:17:52.689 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 15:17:52.716 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 15:17:52.754 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:17:52.761 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 75.7424ms
2025-08-27 15:17:52.766 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 15:17:52.779 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:17:52.929 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 15:17:52.948 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 15:17:53.028 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 15:17:53.074 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:17:53.196 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 15:17:53.235 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 280.5215ms
2025-08-27 15:17:53.238 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 15:17:53.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 212.0974ms
2025-08-27 15:17:53.246 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 479.9431ms
2025-08-27 15:17:53.421 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 15:17:53.421 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 15:17:53.432 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.865ms
2025-08-27 15:17:53.472 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.8359ms
2025-08-27 15:17:53.716 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 15:17:53.994 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 278.1668ms
2025-08-27 15:17:56.578 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 15:17:56.581 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:17:56.583 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.3439ms
2025-08-27 15:17:56.586 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 387
2025-08-27 15:17:56.588 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:17:56.592 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 15:17:56.600 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 15:17:56.637 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 15:17:56.640 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 15:18:00.305 +05:30 [INF] Received HTTP response headers after 3661.4062ms - 200
2025-08-27 15:18:00.306 +05:30 [INF] End processing HTTP request after 3670.3512ms - 200
2025-08-27 15:18:00.312 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:18:00.315 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 3712.361ms
2025-08-27 15:18:00.316 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 15:18:00.317 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 3731.2979ms
2025-08-27 15:18:02.605 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 15:18:02.607 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:18:02.608 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.4053ms
2025-08-27 15:18:02.611 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 555
2025-08-27 15:18:02.613 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:18:02.616 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 15:18:02.621 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 15:18:02.629 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 15:18:02.640 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 15:18:02.724 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p1='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='2025-08-27T09:48:02.6452295Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-08-27 15:18:02.734 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:18:02.736 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 113.4202ms
2025-08-27 15:18:02.737 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 15:18:02.738 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 127.269ms
2025-08-27 15:18:06.685 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 15:18:06.688 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:18:06.690 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.4292ms
2025-08-27 15:18:06.701 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 15:18:06.706 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:18:06.708 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 15:18:06.714 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:18:06.841 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 15:18:06.845 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 15:18:06.852 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 136.1476ms
2025-08-27 15:18:06.853 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 15:18:06.854 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 153.5728ms
2025-08-27 15:18:08.150 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 15:18:08.155 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:18:08.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 6.3007ms
2025-08-27 15:18:08.160 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 15:18:08.165 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:18:08.167 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:18:08.173 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:18:17.669 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 15:18:17.690 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:18:25.903 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:18:38.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 15:18:40.180 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:18:40.181 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:18:40.952 +05:30 [INF] Received HTTP response headers after 770.2436ms - 200
2025-08-27 15:18:40.954 +05:30 [INF] End processing HTTP request after 773.7987ms - 200
2025-08-27 15:18:41.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:18:41.070 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:18:41.071 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:18:42.488 +05:30 [INF] Received HTTP response headers after 1416.2491ms - 200
2025-08-27 15:18:42.490 +05:30 [INF] End processing HTTP request after 1419.372ms - 200
2025-08-27 15:18:42.644 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p1='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p0='text', @p2='a60b6416-8e3f-4872-b1b6-3911d5a232bd', @p3='c13be597-6ae2-42bb-9d43-925815f24ff8', @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='e94a7146-c8b9-4f39-9c82-07b0581cf74b' (Nullable = true), @p7='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p8='2025-08-27T09:48:42.4946514Z' (DbType = DateTime), @p9=NULL, @p10='False', @p11=NULL, @p12='offer_aiboat' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='2025-08-27T09:48:42.4946782Z' (Nullable = true) (DbType = DateTime), @p19='campaign', @p20='Sent' (Nullable = false), @p21='c661e3e1-8cf3-4048-91d8-2c7e37794cca', @p22='True', @p23=NULL, @p24='c13be597-6ae2-42bb-9d43-925815f24ff8', @p25='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='26b8b9a2-5624-40ed-a659-65de71d03d20', @p30=NULL, @p31='2025-08-27T09:48:42.5328101Z' (DbType = DateTime), @p32=NULL, @p33=NULL (DbType = DateTime), @p34=NULL, @p35=NULL, @p36=NULL, @p37=NULL, @p38='False', @p39=NULL (DbType = DateTime), @p40=NULL, @p41=NULL, @p42='offer_aiboat' (Nullable = false), @p43='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA==', @p44='a60b6416-8e3f-4872-b1b6-3911d5a232bd' (Nullable = true), @p45=NULL (DbType = DateTime), @p46='1cbf8564-3103-428e-a6e4-06cb67eac801', @p47='0', @p48='Sent', @p49='2025-08-27T09:48:42.5328487Z' (Nullable = true) (DbType = DateTime), @p50=NULL, @p51='offer_aiboat', @p52=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Campaigns" SET "CampaignType" = @p0
WHERE "Id" = @p1;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52);
2025-08-27 15:18:46.116 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:18:46.122 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 37947.0249ms
2025-08-27 15:18:46.124 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:18:46.125 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 200 null application/json; charset=utf-8 37963.9762ms
2025-08-27 15:18:49.271 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 562
2025-08-27 15:18:49.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:18:49.276 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:18:49.283 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA==","status":"failed","timestamp":"1756288127","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:18:49.285 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:18:49.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:18:49.288 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.8787ms
2025-08-27 15:18:49.289 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:18:49.290 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 18.6701ms
2025-08-27 15:18:49.376 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA==","status":"failed","timestamp":"1756288127","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:18:49.378 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:18:49.379 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA==","status":"failed","timestamp":"1756288127","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:18:49.392 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:18:49.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='c661e3e1-8cf3-4048-91d8-2c7e37794cca'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:18:49.402 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDYyQzlEN0Q2RkQxN0EwOTczAA== → failed
2025-08-27 15:19:06.115 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 15:19:06.119 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:06.120 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 4.7968ms
2025-08-27 15:19:06.123 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 15:19:06.126 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:06.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:19:06.128 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:19:09.611 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:19:09.617 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:19:09.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 15:19:09.622 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:19:09.623 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:19:10.541 +05:30 [INF] Received HTTP response headers after 916.4844ms - 200
2025-08-27 15:19:10.543 +05:30 [INF] End processing HTTP request after 920.1037ms - 200
2025-08-27 15:19:10.606 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:19:10.609 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:19:10.610 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:19:11.370 +05:30 [INF] Received HTTP response headers after 758.1811ms - 200
2025-08-27 15:19:11.372 +05:30 [INF] End processing HTTP request after 762.9311ms - 200
2025-08-27 15:19:11.378 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='d03abef2-63a5-4b7f-a148-c509ceb60239', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='e94a7146-c8b9-4f39-9c82-07b0581cf74b' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T09:49:11.3734233Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='offer_aiboat' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T09:49:11.3734234Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='3e0665e0-54ae-4173-ac41-4d0a2230842c', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T09:49:11.3738662Z' (DbType = DateTime), @p30=NULL, @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='offer_aiboat' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA==', @p42='d03abef2-63a5-4b7f-a148-c509ceb60239' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='1cbf8564-3103-428e-a6e4-06cb67eac801', @p45='0', @p46='Sent', @p47='2025-08-27T09:49:11.3738663Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='offer_aiboat', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 15:19:12.224 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:19:12.225 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6095.2826ms
2025-08-27 15:19:12.227 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:19:12.228 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 200 null application/json; charset=utf-8 6104.5743ms
2025-08-27 15:19:18.237 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 562
2025-08-27 15:19:18.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:19:18.241 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:19:18.244 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA==","status":"failed","timestamp":"1756288156","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:19:18.245 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:19:18.245 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:19:18.246 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA==","status":"failed","timestamp":"1756288156","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:19:18.246 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.2077ms
2025-08-27 15:19:18.247 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:19:18.248 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:19:18.248 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA==","status":"failed","timestamp":"1756288156","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:19:18.249 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.8269ms
2025-08-27 15:19:18.252 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:19:18.256 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='3e0665e0-54ae-4173-ac41-4d0a2230842c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:19:18.259 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkFBMzFDRjBCMDg4OTUzN0U0AA== → failed
2025-08-27 15:19:26.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 15:19:26.826 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:26.827 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 3.3441ms
2025-08-27 15:19:26.830 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 15:19:26.832 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:26.833 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:19:26.834 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:19:27.516 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:19:27.522 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:19:27.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 15:19:27.528 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:19:27.529 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:19:28.608 +05:30 [INF] Received HTTP response headers after 1078.1786ms - 200
2025-08-27 15:19:28.609 +05:30 [INF] End processing HTTP request after 1081.5076ms - 200
2025-08-27 15:19:28.613 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:19:28.616 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:19:28.617 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:19:29.418 +05:30 [INF] Received HTTP response headers after 799.9712ms - 200
2025-08-27 15:19:29.419 +05:30 [INF] End processing HTTP request after 803.5187ms - 200
2025-08-27 15:19:29.423 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3cb5b542-4c2b-4d9b-8c3c-6ba64e2c80b2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='e94a7146-c8b9-4f39-9c82-07b0581cf74b' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T09:49:29.4207245Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='offer_aiboat' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T09:49:29.4207246Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='08dcc451-2fd4-45df-b6eb-051cefbb9709', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T09:49:29.4209420Z' (DbType = DateTime), @p30=NULL, @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='offer_aiboat' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA==', @p42='3cb5b542-4c2b-4d9b-8c3c-6ba64e2c80b2' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='1cbf8564-3103-428e-a6e4-06cb67eac801', @p45='0', @p46='Sent', @p47='2025-08-27T09:49:29.4209420Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='offer_aiboat', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 15:19:31.343 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:19:31.345 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4509.4107ms
2025-08-27 15:19:31.346 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:19:31.347 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 200 null application/json; charset=utf-8 4517.5021ms
2025-08-27 15:19:36.904 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 562
2025-08-27 15:19:36.906 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:19:36.907 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:19:36.910 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA==","status":"failed","timestamp":"1756288175","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:19:36.911 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:19:36.912 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:19:36.913 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.2325ms
2025-08-27 15:19:36.914 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:19:36.915 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.574ms
2025-08-27 15:19:36.917 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA==","status":"failed","timestamp":"1756288175","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:19:36.919 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:19:36.919 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA==","status":"failed","timestamp":"1756288175","recipient_id":"918974005240","errors":[{"code":131000,"title":"Something went wrong","message":"Something went wrong","error_data":{"details":"Application does not have permission for this action"}}]}]},"field":"messages"}]}]}
2025-08-27 15:19:36.922 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:19:36.925 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='08dcc451-2fd4-45df-b6eb-051cefbb9709'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:19:36.927 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTg5NjE4RjE3ODc1QTc4RUEzAA== → failed
2025-08-27 15:19:48.053 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-27 15:19:48.055 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 15:19:48.063 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:48.066 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:48.066 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 12.6836ms
2025-08-27 15:19:48.067 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 11.9361ms
2025-08-27 15:19:48.077 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-27 15:19:48.078 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 15:19:48.080 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:48.084 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 15:19:48.084 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:48.087 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 15:19:48.090 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 15:19:48.092 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-27 15:19:48.095 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-27 15:19:48.110 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 15:19:48.118 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-27 15:19:48.124 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:19:48.129 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 35.2351ms
2025-08-27 15:19:48.130 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 15:19:48.132 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 54.2212ms
2025-08-27 15:19:48.148 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 15:19:48.181 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:19:48.187 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 95.3601ms
2025-08-27 15:19:48.188 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 15:19:48.189 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 111.8887ms
2025-08-27 15:19:53.225 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-27 15:19:53.227 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:53.228 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.8894ms
2025-08-27 15:19:53.231 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 58
2025-08-27 15:19:53.235 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:19:53.236 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 15:19:53.240 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-27 15:19:53.249 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-27 15:19:53.258 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-27 15:19:53.261 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-27 15:19:53.264 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:19:53.269 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:19:53.270 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:19:54.678 +05:30 [INF] Received HTTP response headers after 1406.8065ms - 400
2025-08-27 15:19:54.680 +05:30 [INF] End processing HTTP request after 1411.0238ms - 400
2025-08-27 15:19:54.681 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#10) Application does not have permission for this action","type":"OAuthException","code":10,"error_data":{"messaging_product":"whatsapp","details":"There was a problem with the access token or permissions you are using for the API call."},"fbtrace_id":"A7jYKy7WOsAqm7-K1vM_yRB"}}
2025-08-27 15:19:54.687 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='b6ce39ec-7c28-4acf-bfae-0dcf3cd41208', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T09:49:54.6834946Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='dsdfgs' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#10) Application does not have permission for this action","type":"OAuthException","code":10,"error_data":{"messaging_product":"whatsapp","details":"There was a problem with the access token or permissions you are using for the API call."},"fbtrace_id":"A7jYKy7WOsAqm7-K1vM_yRB"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='dsdfgs', @p16='2025-08-27T09:49:54.6834947Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-27 15:19:54.689 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:19:54.693 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1451.5104ms
2025-08-27 15:19:54.694 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 15:19:54.695 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1463.8315ms
2025-08-27 15:20:35.871 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 15:20:35.876 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:20:35.877 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.4238ms
2025-08-27 15:20:35.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 15:20:35.896 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:20:35.898 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 15:20:35.899 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 15:20:35.906 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:20:35.911 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 15:20:35.913 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 11.2444ms
2025-08-27 15:20:35.916 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 15:20:35.918 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 26.0065ms
2025-08-27 15:20:54.473 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 15:20:54.476 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:20:54.477 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.3817ms
2025-08-27 15:20:54.480 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 558
2025-08-27 15:20:54.482 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:20:54.482 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 15:20:54.483 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 15:20:54.485 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 15:20:54.488 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 15:20:54.493 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPRKghWH1VW2OFZAuTRpeEKiMWTDDsh2tMVFl7lSPR5p8bz9tLZAB3dVykB61U0wIifbeMZB1c9sPZClQjjTuCTRlzb2WOuHJgMYorZABMkhVHH0pSsLZBN0ZCGZBZBGTTyddVUaZA84XNeLBiuWJoM6I73Ie6EkkYTLtuosl8yPQ0ZCyM5X9c5igBfq2fwM4Fuw6xxEZA4YRZApQQRhA1aZADImQQeZBXZAFISODKFxjIDHihbHgN3ZBJMUQvQQZDZD' (Nullable = false), @p1='2025-08-27T09:50:54.4917179Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 15:20:54.496 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:20:54.497 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 12.2761ms
2025-08-27 15:20:54.498 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 15:20:54.499 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 19.6692ms
2025-08-27 15:20:55.373 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 15:20:55.376 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:20:55.378 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.4379ms
2025-08-27 15:20:55.382 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 390
2025-08-27 15:20:55.385 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:20:55.387 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 15:20:55.388 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 15:20:55.391 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 15:20:55.393 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 15:20:58.541 +05:30 [INF] Received HTTP response headers after 3146.7342ms - 200
2025-08-27 15:20:58.543 +05:30 [INF] End processing HTTP request after 3151.2844ms - 200
2025-08-27 15:20:58.544 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:20:58.545 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 3155.0318ms
2025-08-27 15:20:58.547 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 15:20:58.548 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 3165.7829ms
2025-08-27 15:21:01.003 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-08-27 15:21:01.004 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 15:21:01.005 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:01.008 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:01.008 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 5.8986ms
2025-08-27 15:21:01.009 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 4.9493ms
2025-08-27 15:21:01.019 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-08-27 15:21:01.019 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-08-27 15:21:01.021 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:01.023 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:01.025 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 15:21:01.025 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 15:21:01.026 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 15:21:01.027 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-08-27 15:21:01.030 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=25
2025-08-27 15:21:01.036 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 15:21:01.042 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-08-27 15:21:01.048 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:01.048 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 15:21:01.049 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 18.0089ms
2025-08-27 15:21:01.053 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:21:01.053 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-08-27 15:21:01.054 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 25.1392ms
2025-08-27 15:21:01.055 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 36.4475ms
2025-08-27 15:21:01.057 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 15:21:01.062 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 43.7139ms
2025-08-27 15:21:06.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-27 15:21:06.086 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:06.087 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.0381ms
2025-08-27 15:21:06.090 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 56
2025-08-27 15:21:06.092 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:06.093 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 15:21:06.094 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-27 15:21:06.096 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-27 15:21:06.099 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-27 15:21:06.102 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-27 15:21:06.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:21:06.107 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:21:06.108 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:21:07.714 +05:30 [INF] Received HTTP response headers after 1605.0159ms - 200
2025-08-27 15:21:07.715 +05:30 [INF] End processing HTTP request after 1608.3552ms - 200
2025-08-27 15:21:07.737 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='f36f3bef-1138-4d0f-8e10-01db905b7f06', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T09:51:07.7171185Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='ssfd' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='ssfd', @p16='2025-08-27T09:51:07.7171187Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-27 15:21:07.740 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:21:07.742 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1646.7104ms
2025-08-27 15:21:07.743 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 15:21:07.744 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 1654.3924ms
2025-08-27 15:21:09.752 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 715
2025-08-27 15:21:09.754 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:09.755 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:21:09.757 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA==","status":"failed","timestamp":"1756288267","recipient_id":"918974005240","errors":[{"code":131047,"title":"Re-engagement message","message":"Re-engagement message","error_data":{"details":"Message failed to send because more than 24 hours have passed since the customer last replied to this number."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-27 15:21:09.758 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:21:09.759 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA==","status":"failed","timestamp":"1756288267","recipient_id":"918974005240","errors":[{"code":131047,"title":"Re-engagement message","message":"Re-engagement message","error_data":{"details":"Message failed to send because more than 24 hours have passed since the customer last replied to this number."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-27 15:21:09.759 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:09.760 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:21:09.762 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6625ms
2025-08-27 15:21:09.762 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA==","status":"failed","timestamp":"1756288267","recipient_id":"918974005240","errors":[{"code":131047,"title":"Re-engagement message","message":"Re-engagement message","error_data":{"details":"Message failed to send because more than 24 hours have passed since the customer last replied to this number."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-08-27 15:21:09.763 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:09.766 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.1617ms
2025-08-27 15:21:09.766 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:21:09.772 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA==
2025-08-27 15:21:09.773 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDY5OTA4RDUxNUZENkM1N0UwAA==
2025-08-27 15:21:21.306 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 470
2025-08-27 15:21:21.309 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:21.310 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:21:21.312 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDZCNEU2RjMxMEY4QUE3NjY1QQA=","timestamp":"1756288279","text":{"body":"dfdsf"},"type":"text"}]},"field":"messages"}]}]}
2025-08-27 15:21:21.313 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:21:21.314 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDZCNEU2RjMxMEY4QUE3NjY1QQA=","timestamp":"1756288279","text":{"body":"dfdsf"},"type":"text"}]},"field":"messages"}]}]}
2025-08-27 15:21:21.314 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:21.316 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-08-27 15:21:21.317 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.1478ms
2025-08-27 15:21:21.318 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:21.319 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.1455ms
2025-08-27 15:21:21.331 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-08-27 15:21:21.333 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-08-27 15:21:26.724 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - null null
2025-08-27 15:21:26.727 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:26.728 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-text - 204 null null 3.2415ms
2025-08-27 15:21:26.730 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - application/json 60
2025-08-27 15:21:26.732 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:26.733 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 15:21:26.734 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-08-27 15:21:26.736 +05:30 [INF] FindOrCreateAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", phoneNumber=+918974005240
2025-08-27 15:21:26.741 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__phoneNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__phoneNumber_1
LIMIT 1
2025-08-27 15:21:26.743 +05:30 [INF] Contact already exists: contactId="26b8b9a2-5624-40ed-a659-65de71d03d20"
2025-08-27 15:21:26.746 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:21:26.748 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:21:26.749 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:21:27.715 +05:30 [INF] Received HTTP response headers after 964.7024ms - 200
2025-08-27 15:21:27.716 +05:30 [INF] End processing HTTP request after 968.2632ms - 200
2025-08-27 15:21:27.720 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='f2ca526b-3ecf-4667-bfe1-cd210229fd10', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T09:51:27.7181019Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='ssfdsdad' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA=="}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15='ssfdsdad', @p16='2025-08-27T09:51:27.7181020Z' (Nullable = true) (DbType = DateTime), @p17=NULL, @p18='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-08-27 15:21:27.723 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:21:27.724 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 988.353ms
2025-08-27 15:21:27.725 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-08-27 15:21:27.727 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-text - 200 null application/json; charset=utf-8 996.4481ms
2025-08-27 15:21:28.967 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-08-27 15:21:28.969 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:28.970 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:21:28.972 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"sent","timestamp":"1756288287","recipient_id":"918974005240","conversation":{"id":"210caf6cbececbbebef7e53f323e5e2f","expiration_timestamp":"1756288287","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 15:21:28.974 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:21:28.974 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"sent","timestamp":"1756288287","recipient_id":"918974005240","conversation":{"id":"210caf6cbececbbebef7e53f323e5e2f","expiration_timestamp":"1756288287","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 15:21:28.974 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:28.975 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:21:28.977 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8228ms
2025-08-27 15:21:28.977 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"sent","timestamp":"1756288287","recipient_id":"918974005240","conversation":{"id":"210caf6cbececbbebef7e53f323e5e2f","expiration_timestamp":"1756288287","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 15:21:28.978 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:28.980 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.4007ms
2025-08-27 15:21:28.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:21:28.985 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==
2025-08-27 15:21:28.987 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==
2025-08-27 15:21:29.296 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-08-27 15:21:29.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:29.300 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:21:29.303 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"delivered","timestamp":"1756288287","recipient_id":"918974005240","conversation":{"id":"210caf6cbececbbebef7e53f323e5e2f","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 15:21:29.304 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:21:29.304 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"delivered","timestamp":"1756288287","recipient_id":"918974005240","conversation":{"id":"210caf6cbececbbebef7e53f323e5e2f","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 15:21:29.305 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:29.306 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:21:29.307 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.7233ms
2025-08-27 15:21:29.308 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"delivered","timestamp":"1756288287","recipient_id":"918974005240","conversation":{"id":"210caf6cbececbbebef7e53f323e5e2f","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-08-27 15:21:29.309 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:29.312 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.311ms
2025-08-27 15:21:29.313 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:21:29.320 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==
2025-08-27 15:21:29.321 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==
2025-08-27 15:21:33.311 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 15:21:33.314 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:33.315 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.5709ms
2025-08-27 15:21:33.320 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 15:21:33.323 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:33.324 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 15:21:33.325 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:21:33.331 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 15:21:33.334 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 15:21:33.336 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.2451ms
2025-08-27 15:21:33.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 15:21:33.339 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.599ms
2025-08-27 15:21:34.524 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null null
2025-08-27 15:21:34.527 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:34.527 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 204 null null 3.0749ms
2025-08-27 15:21:34.530 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - null 0
2025-08-27 15:21:34.532 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:21:34.533 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:21:34.534 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:21:35.956 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e94a7146-c8b9-4f39-9c82-07b0581cf74b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:21:35.961 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:21:35.965 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 15:21:35.967 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:21:35.968 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:21:37.109 +05:30 [INF] Received HTTP response headers after 1140.5072ms - 200
2025-08-27 15:21:37.111 +05:30 [INF] End processing HTTP request after 1143.6341ms - 200
2025-08-27 15:21:37.279 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:21:37.282 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:21:37.283 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:21:39.494 +05:30 [INF] Received HTTP response headers after 2209.9354ms - 200
2025-08-27 15:21:39.496 +05:30 [INF] End processing HTTP request after 2213.94ms - 200
2025-08-27 15:21:39.500 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='da06e341-3b1e-472a-a9b0-dec6f01199c7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='e94a7146-c8b9-4f39-9c82-07b0581cf74b' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T09:51:39.4974583Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='offer_aiboat' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T09:51:39.4974584Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='db95f18a-9464-43e6-966d-466ac9e971e9', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='e94a7146-c8b9-4f39-9c82-07b0581cf74b', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T09:51:39.4976516Z' (DbType = DateTime), @p30=NULL, @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='offer_aiboat' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==', @p42='da06e341-3b1e-472a-a9b0-dec6f01199c7' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='1cbf8564-3103-428e-a6e4-06cb67eac801', @p45='0', @p46='Sent', @p47='2025-08-27T09:51:39.4976517Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='offer_aiboat', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 15:21:41.179 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:21:41.180 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6644.8345ms
2025-08-27 15:21:41.181 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:21:41.182 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e94a7146-c8b9-4f39-9c82-07b0581cf74b - 200 null application/json; charset=utf-8 6652.0255ms
2025-08-27 15:21:47.194 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 15:21:47.197 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:47.198 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:21:47.199 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"sent","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","expiration_timestamp":"1756288305","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.200 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:21:47.201 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"sent","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","expiration_timestamp":"1756288305","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.201 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:47.202 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:21:47.204 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5377ms
2025-08-27 15:21:47.204 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"sent","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","expiration_timestamp":"1756288305","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.205 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:47.207 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.7939ms
2025-08-27 15:21:47.208 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:21:47.214 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='db95f18a-9464-43e6-966d-466ac9e971e9'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:21:47.216 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA== → sent
2025-08-27 15:21:47.354 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 15:21:47.356 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:47.357 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:21:47.358 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"delivered","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.359 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:21:47.360 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"delivered","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.360 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:47.361 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:21:47.362 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8276ms
2025-08-27 15:21:47.362 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"delivered","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.363 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:47.365 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.3616ms
2025-08-27 15:21:47.365 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:21:47.371 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='db95f18a-9464-43e6-966d-466ac9e971e9'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:21:47.374 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='db95f18a-9464-43e6-966d-466ac9e971e9', @p0='2025-08-27T09:51:45.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 15:21:47.376 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA== → delivered
2025-08-27 15:21:47.427 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 15:21:47.429 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:47.430 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:21:47.432 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"delivered","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.433 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:21:47.433 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"delivered","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.433 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:21:47.434 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:21:47.435 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.7292ms
2025-08-27 15:21:47.436 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"delivered","timestamp":"1756288305","recipient_id":"918974005240","conversation":{"id":"c46aeb1c9317ce2c2a56fd2f36c96a76","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:21:47.436 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:21:47.438 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10.9644ms
2025-08-27 15:21:47.439 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:21:47.444 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='db95f18a-9464-43e6-966d-466ac9e971e9'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:21:47.446 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA== → delivered
2025-08-27 15:27:16.098 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 15:27:16.118 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 20.545ms
2025-08-27 15:27:16.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 15:27:16.193 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 15:27:16.200 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.8943ms
2025-08-27 15:27:16.214 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.1219ms
2025-08-27 15:27:16.606 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 15:27:16.695 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.5589ms
2025-08-27 15:27:43.664 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 15:27:43.702 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 15:27:43.714 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 15:27:44.355 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 15:27:44.786 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 15:27:44.969 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 15:27:44.970 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 15:27:44.971 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 15:27:44.972 +05:30 [INF] Hosting environment: Development
2025-08-27 15:27:44.972 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 15:27:44.987 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 15:27:45.002 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[@__cutoff_0='2025-08-20T09:57:43.8013348Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 15:27:47.281 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 15:27:47.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 162.6319ms
2025-08-27 15:27:47.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 15:27:47.456 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.5085ms
2025-08-27 15:27:47.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 15:27:47.569 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.2845ms
2025-08-27 15:27:47.772 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 15:27:47.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.3654ms
2025-08-27 15:27:53.562 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 15:27:53.567 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 15:27:53.617 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:27:53.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 58.3754ms
2025-08-27 15:27:53.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 15:27:53.632 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:27:53.761 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '27-08-2025 09:53:48 AM', Current time (UTC): '27-08-2025 09:57:53 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-27 15:27:53.801 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '27-08-2025 09:53:48 AM', Current time (UTC): '27-08-2025 09:57:53 AM'.
2025-08-27 15:27:53.805 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-27 15:27:53.856 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 811
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-27 15:27:53.870 +05:30 [ERR] Response has already started, unable to write error response for path: /api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8
2025-08-27 15:27:53.871 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 401 null application/json 246.7867ms
2025-08-27 15:28:00.135 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 15:28:00.138 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:00.139 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.1976ms
2025-08-27 15:28:00.143 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 15:28:00.147 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:00.150 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 15:28:00.167 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 15:28:00.239 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-27 15:28:00.304 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 15:28:00.384 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 15:28:00.488 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 15:28:00.497 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-27 15:28:00.505 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 15:28:00.506 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 15:28:00.511 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:00.517 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 346.1816ms
2025-08-27 15:28:00.519 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 15:28:00.523 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 379.9477ms
2025-08-27 15:28:00.526 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 15:28:00.528 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:00.529 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3073ms
2025-08-27 15:28:00.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 15:28:00.534 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:00.545 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 15:28:00.550 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 15:28:00.566 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-27 15:28:00.595 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 15:28:00.598 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:00.608 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 55.6112ms
2025-08-27 15:28:00.609 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 15:28:00.610 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 78.7185ms
2025-08-27 15:28:00.626 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 15:28:00.630 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:00.633 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 15:28:00.635 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 15:28:00.645 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 15:28:00.649 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:00.651 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.9175ms
2025-08-27 15:28:00.653 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 15:28:00.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.0424ms
2025-08-27 15:28:00.735 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 15:28:00.739 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:00.741 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 15:28:00.743 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 15:28:00.753 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 15:28:00.758 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:00.760 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6629ms
2025-08-27 15:28:00.761 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 15:28:00.762 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.3933ms
2025-08-27 15:28:06.296 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 15:28:06.300 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:06.303 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 5.411ms
2025-08-27 15:28:06.309 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 15:28:06.313 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:06.315 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 15:28:06.326 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 15:28:06.363 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 15:28:06.367 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:06.376 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 45.8905ms
2025-08-27 15:28:06.378 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 15:28:06.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 70.3675ms
2025-08-27 15:28:10.139 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 15:28:10.142 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:10.143 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 204 null null 3.7256ms
2025-08-27 15:28:10.146 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - null null
2025-08-27 15:28:10.148 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:10.149 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 15:28:10.154 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 15:28:10.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='offer_aiboat'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 15:28:10.171 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:10.174 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 18.4877ms
2025-08-27 15:28:10.175 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 15:28:10.176 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/offer_aiboat - 200 null application/json; charset=utf-8 30.0181ms
2025-08-27 15:28:43.093 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 15:28:43.102 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:43.103 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 10.8965ms
2025-08-27 15:28:43.108 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 457
2025-08-27 15:28:43.113 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:43.115 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 15:28:43.121 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:28:44.717 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 15:28:44.737 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:28:44.740 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:28:45.905 +05:30 [INF] Received HTTP response headers after 1162.8413ms - 200
2025-08-27 15:28:45.907 +05:30 [INF] End processing HTTP request after 1170.4623ms - 200
2025-08-27 15:28:46.259 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p0='11986c38-28c5-40c1-83cf-0a97b103edb2', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T09:58:46.0622495Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13=NULL, @p14='offer_aiboat' (Nullable = false), @p15='sdad' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='offer_aiboat', @p20='[]', @p21='2025-08-27T09:58:46.0622991Z' (DbType = DateTime), @p22='b6b966f8-ca95-47e9-982c-be96fd747595', @p23='11986c38-28c5-40c1-83cf-0a97b103edb2', @p24='True', @p25='2', @p26='watch Video' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.youtube.com/watch?v=L8YZBze6r6w' (Nullable = false), @p29='c63507d0-9097-4e48-9097-a1c22a12bc49', @p30='11986c38-28c5-40c1-83cf-0a97b103edb2', @p31='True', @p32='1', @p33='Visit website' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/software-development' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 15:28:46.284 +05:30 [INF] ✅ Campaign 'sdad' created successfully.
2025-08-27 15:28:46.287 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:46.291 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3167.7175ms
2025-08-27 15:28:46.292 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 15:28:46.294 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3185.5053ms
2025-08-27 15:28:46.363 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 15:28:46.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - null null
2025-08-27 15:28:46.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 15:28:46.375 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 15:28:46.376 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.379 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.383 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.387 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - 204 null null 21.4308ms
2025-08-27 15:28:46.389 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 25.1142ms
2025-08-27 15:28:46.391 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 22.8293ms
2025-08-27 15:28:46.393 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 17.8377ms
2025-08-27 15:28:46.402 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 15:28:46.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - null null
2025-08-27 15:28:46.413 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 15:28:46.416 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.419 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.422 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.423 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 15:28:46.424 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 15:28:46.424 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 15:28:46.429 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 15:28:46.430 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:28:46.431 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 15:28:46.441 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 15:28:46.444 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 15:28:46.451 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:28:46.467 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 36.4493ms
2025-08-27 15:28:46.468 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 15:28:46.469 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 15:28:46.472 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:46.475 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 72.7695ms
2025-08-27 15:28:46.477 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 15:28:46.476 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 15:28:46.485 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 15:28:46.491 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 15:28:46.498 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:28:46.499 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='11986c38-28c5-40c1-83cf-0a97b103edb2', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 15:28:46.502 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.1304ms
2025-08-27 15:28:46.506 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 15:28:46.508 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 39.6929ms
2025-08-27 15:28:46.521 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 15:28:46.524 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 15:28:46.549 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 115.9893ms
2025-08-27 15:28:46.551 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 15:28:46.552 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - 200 null application/json; charset=utf-8 142.4672ms
2025-08-27 15:28:46.637 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:28:46.648 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 213.2126ms
2025-08-27 15:28:46.650 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 15:28:46.652 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 238.9759ms
2025-08-27 15:28:50.760 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - null null
2025-08-27 15:28:50.762 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:50.763 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - 204 null null 2.8645ms
2025-08-27 15:28:50.765 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - application/json 55
2025-08-27 15:28:50.769 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:28:50.770 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 15:28:50.773 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:28:50.803 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='11986c38-28c5-40c1-83cf-0a97b103edb2', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 15:28:50.846 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='2dfb28d4-19ef-496f-ba0b-2f5c1d3d8a58', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='11986c38-28c5-40c1-83cf-0a97b103edb2', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T09:58:50.8184258Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T09:58:50.8184744Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 15:28:50.849 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:28:50.851 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 77.038ms
2025-08-27 15:28:50.853 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 15:28:50.854 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - 200 null application/json; charset=utf-8 88.6041ms
2025-08-27 15:29:34.028 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - null null
2025-08-27 15:29:34.039 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:29:34.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - 204 null null 11.4549ms
2025-08-27 15:29:34.042 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - application/json 55
2025-08-27 15:29:34.044 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:29:34.045 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 15:29:34.046 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:29:34.051 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='11986c38-28c5-40c1-83cf-0a97b103edb2', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 15:29:34.069 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d02dfed0-7551-4e76-8165-0c9bbfbe0932', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='11986c38-28c5-40c1-83cf-0a97b103edb2', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T09:59:34.0660704Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T09:59:34.0660710Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 15:29:34.071 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:29:34.072 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 24.6253ms
2025-08-27 15:29:34.073 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 15:29:34.074 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/11986c38-28c5-40c1-83cf-0a97b103edb2/assign-contacts - 200 null application/json; charset=utf-8 31.6284ms
2025-08-27 15:29:38.598 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 15:29:38.601 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:29:38.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.7989ms
2025-08-27 15:29:38.605 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 15:29:38.606 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:29:38.607 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 15:29:38.611 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:29:38.627 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 15:29:38.631 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 15:29:38.635 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 22.8974ms
2025-08-27 15:29:38.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 15:29:38.637 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 32.8355ms
2025-08-27 15:29:40.175 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - null null
2025-08-27 15:29:40.177 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:29:40.178 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - 204 null null 3.8262ms
2025-08-27 15:29:40.181 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - null 0
2025-08-27 15:29:40.184 +05:30 [INF] CORS policy execution successful.
2025-08-27 15:29:40.185 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:29:40.188 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 15:29:46.578 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 15:29:46.588 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='11986c38-28c5-40c1-83cf-0a97b103edb2'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 15:30:00.828 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:30:00.834 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 15:30:00.836 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:30:00.837 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 15:30:01.847 +05:30 [INF] Received HTTP response headers after 1009.5227ms - 200
2025-08-27 15:30:01.848 +05:30 [INF] End processing HTTP request after 1012.215ms - 200
2025-08-27 15:30:01.867 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:30:01.882 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:30:01.883 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:30:02.823 +05:30 [INF] Received HTTP response headers after 938.9657ms - 200
2025-08-27 15:30:02.824 +05:30 [INF] End processing HTTP request after 942.4716ms - 200
2025-08-27 15:30:02.893 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 15:30:02.895 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:30:02.896 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 15:30:03.602 +05:30 [INF] Received HTTP response headers after 704.7287ms - 200
2025-08-27 15:30:03.603 +05:30 [INF] End processing HTTP request after 707.4807ms - 200
2025-08-27 15:30:03.631 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='a02f125d-c046-466c-b7e5-79c55b82af9d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='11986c38-28c5-40c1-83cf-0a97b103edb2' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T10:00:02.8298117Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='offer_aiboat' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T10:00:02.8298395Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='d9408c1e-2f55-453f-8c41-d9038abd42ec', @p20='c13be597-6ae2-42bb-9d43-925815f24ff8', @p21=NULL (DbType = Guid), @p22=NULL (DbType = Guid), @p23='11986c38-28c5-40c1-83cf-0a97b103edb2' (Nullable = true), @p24='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p25='2025-08-27T10:00:03.6044930Z' (DbType = DateTime), @p26=NULL, @p27='False', @p28=NULL, @p29='offer_aiboat' (Nullable = false), @p30='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==', @p31='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","message_status":"accepted"}]}', @p32='+918974005240' (Nullable = false), @p33=NULL (DbType = Guid), @p34=NULL, @p35='2025-08-27T10:00:03.6044932Z' (Nullable = true) (DbType = DateTime), @p36='campaign', @p37='Sent' (Nullable = false), @p38='c8ffe77d-f016-4338-af3d-c4ba19730213', @p39='True', @p40=NULL, @p41='c13be597-6ae2-42bb-9d43-925815f24ff8', @p42='11986c38-28c5-40c1-83cf-0a97b103edb2', @p43=NULL, @p44=NULL, @p45=NULL (DbType = DateTime), @p46='26b8b9a2-5624-40ed-a659-65de71d03d20', @p47=NULL, @p48='2025-08-27T10:00:02.8569069Z' (DbType = DateTime), @p49='system', @p50=NULL (DbType = DateTime), @p51=NULL, @p52=NULL, @p53=NULL, @p54=NULL, @p55='False', @p56=NULL (DbType = DateTime), @p57=NULL, @p58=NULL, @p59='offer_aiboat' (Nullable = false), @p60='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==', @p61='a02f125d-c046-466c-b7e5-79c55b82af9d' (Nullable = true), @p62=NULL (DbType = DateTime), @p63='2dfb28d4-19ef-496f-ba0b-2f5c1d3d8a58', @p64='0', @p65='Sent', @p66='2025-08-27T10:00:02.8569454Z' (Nullable = true) (DbType = DateTime), @p67=NULL, @p68='offer_aiboat', @p69=NULL (DbType = Guid), @p70='d1ae6789-5f64-4895-9a4b-fa51ac0ec92e', @p71='True', @p72=NULL, @p73='c13be597-6ae2-42bb-9d43-925815f24ff8', @p74='11986c38-28c5-40c1-83cf-0a97b103edb2', @p75=NULL, @p76=NULL, @p77=NULL (DbType = DateTime), @p78='26b8b9a2-5624-40ed-a659-65de71d03d20', @p79=NULL, @p80='2025-08-27T10:00:03.6047367Z' (DbType = DateTime), @p81='system', @p82=NULL (DbType = DateTime), @p83=NULL, @p84=NULL, @p85=NULL, @p86=NULL, @p87='False', @p88=NULL (DbType = DateTime), @p89=NULL, @p90=NULL, @p91='offer_aiboat' (Nullable = false), @p92='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==', @p93='d9408c1e-2f55-453f-8c41-d9038abd42ec' (Nullable = true), @p94=NULL (DbType = DateTime), @p95='d02dfed0-7551-4e76-8165-0c9bbfbe0932', @p96='0', @p97='Sent', @p98='2025-08-27T10:00:03.6047368Z' (Nullable = true) (DbType = DateTime), @p99=NULL, @p100='offer_aiboat', @p101=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
2025-08-27 15:30:04.842 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 15:30:04.844 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 24654.5424ms
2025-08-27 15:30:04.845 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 15:30:04.846 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/11986c38-28c5-40c1-83cf-0a97b103edb2 - 200 null application/json; charset=utf-8 24664.4818ms
2025-08-27 15:30:11.164 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 15:30:11.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.169 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:30:11.175 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"sent","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a556be68c7942959489b2975fb7c87df","expiration_timestamp":"1756288809","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.184 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:30:11.191 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:30:11.193 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 22.9617ms
2025-08-27 15:30:11.194 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.195 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.9357ms
2025-08-27 15:30:11.292 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"sent","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a556be68c7942959489b2975fb7c87df","expiration_timestamp":"1756288809","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.293 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:30:11.294 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"sent","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a556be68c7942959489b2975fb7c87df","expiration_timestamp":"1756288809","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.304 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:30:11.311 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='c8ffe77d-f016-4338-af3d-c4ba19730213'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:30:11.313 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA== → sent
2025-08-27 15:30:11.322 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 15:30:11.325 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.326 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:30:11.328 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"delivered","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a556be68c7942959489b2975fb7c87df","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.329 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:30:11.330 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:30:11.330 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"delivered","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a556be68c7942959489b2975fb7c87df","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.331 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.4866ms
2025-08-27 15:30:11.332 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:30:11.333 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.333 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"delivered","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a556be68c7942959489b2975fb7c87df","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.334 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.9422ms
2025-08-27 15:30:11.337 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:30:11.339 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 15:30:11.347 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='c8ffe77d-f016-4338-af3d-c4ba19730213'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:30:11.348 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.350 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:30:11.353 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"sent","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a4b37c5456f1187572181f846db47abf","expiration_timestamp":"1756288809","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.354 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:30:11.356 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:30:11.357 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.6003ms
2025-08-27 15:30:11.358 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='c8ffe77d-f016-4338-af3d-c4ba19730213', @p0='2025-08-27T10:00:09.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 15:30:11.358 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.361 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA== → delivered
2025-08-27 15:30:11.361 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.0564ms
2025-08-27 15:30:11.367 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"sent","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a4b37c5456f1187572181f846db47abf","expiration_timestamp":"1756288809","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.369 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:30:11.369 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"sent","timestamp":"1756288809","recipient_id":"918974005240","conversation":{"id":"a4b37c5456f1187572181f846db47abf","expiration_timestamp":"1756288809","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.372 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:30:11.375 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d1ae6789-5f64-4895-9a4b-fa51ac0ec92e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:30:11.377 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA== → sent
2025-08-27 15:30:11.502 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 15:30:11.505 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.506 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:30:11.507 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"delivered","timestamp":"1756288810","recipient_id":"918974005240","conversation":{"id":"a4b37c5456f1187572181f846db47abf","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.509 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:30:11.509 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"delivered","timestamp":"1756288810","recipient_id":"918974005240","conversation":{"id":"a4b37c5456f1187572181f846db47abf","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.509 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:30:11.510 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:30:11.511 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8306ms
2025-08-27 15:30:11.511 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"delivered","timestamp":"1756288810","recipient_id":"918974005240","conversation":{"id":"a4b37c5456f1187572181f846db47abf","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 15:30:11.512 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:30:11.514 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.2693ms
2025-08-27 15:30:11.515 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:30:11.520 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d1ae6789-5f64-4895-9a4b-fa51ac0ec92e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:30:11.523 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='d1ae6789-5f64-4895-9a4b-fa51ac0ec92e', @p0='2025-08-27T10:00:10.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 15:30:11.524 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA== → delivered
2025-08-27 15:47:23.953 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 15:47:23.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:23.960 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:47:23.962 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:23.963 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:47:23.963 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:23.963 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:47:23.964 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:47:23.965 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8879ms
2025-08-27 15:47:23.966 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:23.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:23.971 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.2972ms
2025-08-27 15:47:24.042 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:47:24.047 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__logId_Value_0='c8ffe77d-f016-4338-af3d-c4ba19730213'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:47:24.055 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p2='c8ffe77d-f016-4338-af3d-c4ba19730213', @p0='2025-08-27T10:17:22.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 15:47:24.057 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNEQ4QjUzNDE2NURCQzA1MzM3AA== → read
2025-08-27 15:47:24.273 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 15:47:24.275 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 15:47:24.274 +05:30 [INF] Request starting HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 15:47:24.279 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:24.281 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:24.283 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:24.284 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:47:24.284 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:47:24.285 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 15:47:24.287 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.288 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.289 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.289 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:47:24.290 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.290 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:47:24.291 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 15:47:24.291 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:47:24.292 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:47:24.293 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:47:24.293 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 15:47:24.294 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.7753ms
2025-08-27 15:47:24.295 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.296 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.0294ms
2025-08-27 15:47:24.300 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:47:24.300 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:24.297 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9215ms
2025-08-27 15:47:24.298 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:24.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d1ae6789-5f64-4895-9a4b-fa51ac0ec92e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:47:24.306 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.6532ms
2025-08-27 15:47:24.311 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='d1ae6789-5f64-4895-9a4b-fa51ac0ec92e', @p0='2025-08-27T10:17:22.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 15:47:24.307 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 15:47:24.308 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.7951ms
2025-08-27 15:47:24.314 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTBDMDlDNjQwMzVFMDk4NUUzAA== → read
2025-08-27 15:47:24.315 +05:30 [INF] Request finished HTTP/1.1 POST http://ab438a60f8e9.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 41.412ms
2025-08-27 15:47:24.318 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.322 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:47:24.322 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.325 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:47:24.327 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==
2025-08-27 15:47:24.328 +05:30 [WRN] ⚠️ No matching CampaignSendLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkM1QUIyRDA4Q0JCRTkxMEYyAA==
2025-08-27 15:47:24.329 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.330 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 15:47:24.330 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA==","status":"read","timestamp":"1756289842","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 15:47:24.332 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 15:47:24.335 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='db95f18a-9464-43e6-966d-466ac9e971e9'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 15:47:24.339 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='db95f18a-9464-43e6-966d-466ac9e971e9', @p0='2025-08-27T10:17:22.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 15:47:24.341 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjc0MjQ4QUIxOThFMjU0Qjc0AA== → read
2025-08-27 19:42:03.731 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 19:42:03.795 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 19:42:03.820 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 19:42:05.166 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 19:42:06.044 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 19:42:06.420 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 19:42:06.429 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 19:42:06.436 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 19:42:06.454 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 19:42:06.474 +05:30 [INF] Hosting environment: Development
2025-08-27 19:42:06.476 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 19:42:06.478 +05:30 [INF] Executed DbCommand (125ms) [Parameters=[@__cutoff_0='2025-08-20T14:12:04.0021944Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 19:42:06.809 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 19:42:07.120 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 322.427ms
2025-08-27 19:42:07.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 19:42:07.159 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.1264ms
2025-08-27 19:42:07.239 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 19:42:07.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.4873ms
2025-08-27 19:42:08.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 19:42:09.514 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 705.6949ms
2025-08-27 19:42:41.677 +05:30 [INF] Request starting HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/index.html - null null
2025-08-27 19:42:41.690 +05:30 [INF] Request finished HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 13.2478ms
2025-08-27 19:42:42.331 +05:30 [INF] Request starting HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/swagger-ui.css - null null
2025-08-27 19:42:42.353 +05:30 [INF] Request starting HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - null null
2025-08-27 19:42:42.355 +05:30 [INF] Request starting HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/swagger-ui-bundle.js - null null
2025-08-27 19:42:42.353 +05:30 [INF] Request starting HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 19:42:42.375 +05:30 [INF] Request finished HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 19.671ms
2025-08-27 19:42:42.452 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-08-27 19:42:42.452 +05:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-08-27 19:42:42.456 +05:30 [INF] Request finished HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/swagger-ui.css - 200 152034 text/css 124.7972ms
2025-08-27 19:42:42.456 +05:30 [INF] Request finished HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 103.9001ms
2025-08-27 19:42:50.705 +05:30 [INF] Request starting HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/_vs/browserLink - null null
2025-08-27 19:42:50.727 +05:30 [INF] Request finished HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.3102ms
2025-08-27 19:42:59.226 +05:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-08-27 19:42:59.228 +05:30 [INF] Request finished HTTP/1.1 GET http://ab438a60f8e9.ngrok-free.app/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 16873.0285ms
2025-08-27 19:45:56.487 +05:30 [INF] Request starting HTTP/1.1 GET http://143ac1a8e7cf.ngrok-free.app/swagger/index.html - null null
2025-08-27 19:45:56.519 +05:30 [INF] Request finished HTTP/1.1 GET http://143ac1a8e7cf.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 33.0199ms
2025-08-27 19:48:05.739 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 19:48:05.793 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 19:48:05.810 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 19:48:06.720 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 19:48:07.284 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 19:48:07.518 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 19:48:07.519 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 19:48:07.521 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 19:48:07.522 +05:30 [INF] Hosting environment: Development
2025-08-27 19:48:07.523 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 19:48:07.532 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 19:48:07.549 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[@__cutoff_0='2025-08-20T14:18:05.9263736Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 19:48:09.499 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 19:48:09.796 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 315.1306ms
2025-08-27 19:48:09.847 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 19:48:09.860 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.6114ms
2025-08-27 19:48:09.946 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 19:48:09.999 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.4964ms
2025-08-27 19:48:10.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 19:48:10.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 292.2542ms
2025-08-27 19:55:48.776 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=786377996&hub.verify_token=xbytechat-secret-token - null null
2025-08-27 19:55:48.804 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 19:55:48.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 19:55:49.016 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 19:55:53.462 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-08-27 19:55:53.476 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-27 19:55:53.486 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 4461.4578ms
2025-08-27 19:55:53.489 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 19:55:53.492 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=786377996&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 4716.2774ms
2025-08-27 19:56:53.736 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=967549834&hub.verify_token=xbytechat-secret-token - null null
2025-08-27 19:56:53.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 19:56:53.754 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 19:57:00.785 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-08-27 19:57:02.481 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-27 19:57:02.485 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 8728.3236ms
2025-08-27 19:57:02.487 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 19:57:07.239 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=967549834&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 13502.2145ms
2025-08-27 21:09:55.315 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=591284085&hub.verify_token=xbytechat-secret-token - null null
2025-08-27 21:09:55.329 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 21:09:55.333 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:09:58.480 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-08-27 21:09:58.482 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-27 21:09:58.485 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 3147.828ms
2025-08-27 21:09:58.488 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-08-27 21:09:58.490 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=591284085&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 3178.5491ms
2025-08-27 21:10:31.729 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 21:10:31.814 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 85.5536ms
2025-08-27 21:10:31.920 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 21:10:31.927 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.4872ms
2025-08-27 21:10:31.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 21:10:32.053 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.7265ms
2025-08-27 21:10:32.271 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 21:10:32.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.1822ms
2025-08-27 21:11:20.210 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 21:11:20.230 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 21.2753ms
2025-08-27 21:11:20.280 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 21:11:20.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 21:11:20.296 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.8775ms
2025-08-27 21:11:20.313 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.1912ms
2025-08-27 21:11:20.401 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 21:11:20.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 117.8005ms
2025-08-27 21:11:31.627 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 21:11:31.652 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 25.0548ms
2025-08-27 21:11:31.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 21:11:32.083 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.4562ms
2025-08-27 21:15:11.131 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/health - null null
2025-08-27 21:15:11.158 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/health - 404 0 null 28.8015ms
2025-08-27 21:15:11.165 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/tracking/health, Response status code: 404
2025-08-27 21:17:02.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/HealthCheck/ping - null null
2025-08-27 21:17:02.638 +05:30 [INF] Executing endpoint 'xbytechat.api.Controllers.HealthCheckController.Ping (xbytechat.api)'
2025-08-27 21:17:02.696 +05:30 [INF] Route matched with {action = "Ping", controller = "HealthCheck"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Ping() on controller xbytechat.api.Controllers.HealthCheckController (xbytechat.api).
2025-08-27 21:17:02.708 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType17`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:17:02.760 +05:30 [INF] Executed action xbytechat.api.Controllers.HealthCheckController.Ping (xbytechat.api) in 61.4343ms
2025-08-27 21:17:02.763 +05:30 [INF] Executed endpoint 'xbytechat.api.Controllers.HealthCheckController.Ping (xbytechat.api)'
2025-08-27 21:17:02.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/HealthCheck/ping - 200 null application/json; charset=utf-8 136.7074ms
2025-08-27 21:17:42.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/HealthCheck - null null
2025-08-27 21:17:42.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Controllers.HealthCheckController.Get (xbytechat.api)'
2025-08-27 21:17:42.775 +05:30 [INF] Route matched with {action = "Get", controller = "HealthCheck"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller xbytechat.api.Controllers.HealthCheckController (xbytechat.api).
2025-08-27 21:17:42.778 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-27 21:17:42.781 +05:30 [INF] Executed action xbytechat.api.Controllers.HealthCheckController.Get (xbytechat.api) in 2.8959ms
2025-08-27 21:17:42.784 +05:30 [INF] Executed endpoint 'xbytechat.api.Controllers.HealthCheckController.Get (xbytechat.api)'
2025-08-27 21:17:42.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/HealthCheck - 200 null text/plain; charset=utf-8 26.8961ms
2025-08-27 21:18:58.395 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/HealthCheck - null null
2025-08-27 21:18:58.418 +05:30 [INF] Executing endpoint 'xbytechat.api.Controllers.HealthCheckController.Get (xbytechat.api)'
2025-08-27 21:18:58.420 +05:30 [INF] Route matched with {action = "Get", controller = "HealthCheck"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller xbytechat.api.Controllers.HealthCheckController (xbytechat.api).
2025-08-27 21:18:58.428 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-08-27 21:18:58.430 +05:30 [INF] Executed action xbytechat.api.Controllers.HealthCheckController.Get (xbytechat.api) in 7.7702ms
2025-08-27 21:18:58.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Controllers.HealthCheckController.Get (xbytechat.api)'
2025-08-27 21:18:58.434 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/api/HealthCheck - 200 null text/plain; charset=utf-8 39.1163ms
2025-08-27 21:18:58.894 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/favicon.ico - null null
2025-08-27 21:18:58.917 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:18:59.157 +05:30 [INF] Setting HTTP status code 400.
2025-08-27 21:18:59.162 +05:30 [INF] Writing value of type 'String' as Json.
2025-08-27 21:18:59.165 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:18:59.167 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/favicon.ico - 400 null application/json; charset=utf-8 273.3733ms
2025-08-27 21:24:47.347 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - null null
2025-08-27 21:24:47.356 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - null null
2025-08-27 21:24:47.367 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.371 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.433 +05:30 [INF] Setting HTTP status code 400.
2025-08-27 21:24:47.450 +05:30 [INF] Setting HTTP status code 400.
2025-08-27 21:24:47.453 +05:30 [INF] Writing value of type 'String' as Json.
2025-08-27 21:24:47.454 +05:30 [INF] Writing value of type 'String' as Json.
2025-08-27 21:24:47.456 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.458 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.460 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - 400 null application/json; charset=utf-8 112.5591ms
2025-08-27 21:24:47.461 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - 400 null application/json; charset=utf-8 105.4005ms
2025-08-27 21:24:47.660 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - null null
2025-08-27 21:24:47.666 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - null null
2025-08-27 21:24:47.669 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.672 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.708 +05:30 [INF] Setting HTTP status code 400.
2025-08-27 21:24:47.741 +05:30 [INF] Writing value of type 'String' as Json.
2025-08-27 21:24:47.741 +05:30 [INF] Setting HTTP status code 400.
2025-08-27 21:24:47.744 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.745 +05:30 [INF] Writing value of type 'String' as Json.
2025-08-27 21:24:47.747 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - 400 null application/json; charset=utf-8 86.8576ms
2025-08-27 21:24:47.748 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:24:47.754 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/robots.txt - 400 null application/json; charset=utf-8 88.3508ms
2025-08-27 21:27:38.586 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/ - null null
2025-08-27 21:27:38.610 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/ - 404 0 null 24.5623ms
2025-08-27 21:27:38.625 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/, Response status code: 404
2025-08-27 21:27:50.759 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 325
2025-08-27 21:27:50.766 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:27:50.782 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:27:50.845 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756310269, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1322949819198164, "message_template_name": "url_tracking", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 21:27:50.857 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:27:50.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:27:50.868 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 83.0256ms
2025-08-27 21:27:50.878 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:27:50.880 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 120.9212ms
2025-08-27 21:27:51.276 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756310269, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1322949819198164, "message_template_name": "url_tracking", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-27 21:27:51.279 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-27 21:28:03.541 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-27 21:28:03.553 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:03.558 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 17.3971ms
2025-08-27 21:28:03.569 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-27 21:28:03.576 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:03.578 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 21:28:03.589 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-27 21:28:03.745 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-27 21:28:04.148 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-27 21:28:04.355 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-27 21:28:04.552 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-27 21:28:04.571 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-27 21:28:04.694 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-27 21:28:04.697 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-27 21:28:04.705 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:04.709 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 1117.4135ms
2025-08-27 21:28:04.712 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-27 21:28:04.720 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 1151.4085ms
2025-08-27 21:28:04.725 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:28:04.731 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:04.732 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1226ms
2025-08-27 21:28:04.737 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:28:04.742 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:04.793 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:04.799 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:28:04.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-27 21:28:04.861 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:28:04.866 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:04.881 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 79.0621ms
2025-08-27 21:28:04.883 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:04.885 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 148.1213ms
2025-08-27 21:28:04.903 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:28:04.909 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:04.914 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:04.918 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:28:04.935 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:28:04.941 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:04.944 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.6308ms
2025-08-27 21:28:04.947 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:28:04.948 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:04.953 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:04.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 51.6851ms
2025-08-27 21:28:04.959 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:04.963 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:28:04.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:28:04.979 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:04.982 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.2319ms
2025-08-27 21:28:04.984 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:04.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.4885ms
2025-08-27 21:28:05.030 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:28:05.036 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:05.036 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:28:05.037 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:05.041 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:05.042 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:28:05.044 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.8728ms
2025-08-27 21:28:05.051 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:28:05.054 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:28:05.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:05.062 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.963ms
2025-08-27 21:28:05.063 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:05.064 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:05.064 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:28:05.073 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:28:05.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.945ms
2025-08-27 21:28:05.077 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:05.084 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:28:05.084 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:05.089 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:28:05.096 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:28:05.102 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:05.104 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6568ms
2025-08-27 21:28:05.107 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:28:05.110 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 45.0446ms
2025-08-27 21:28:05.174 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 21:28:05.180 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:28:05.197 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 110.5344ms
2025-08-27 21:28:05.200 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:28:05.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 147.8533ms
2025-08-27 21:28:10.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 21:28:10.864 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:10.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 8.2524ms
2025-08-27 21:28:10.871 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-27 21:28:10.876 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:10.878 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 21:28:10.884 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 21:28:10.909 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:28:10.942 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-27 21:28:10.950 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 63.0062ms
2025-08-27 21:28:10.952 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-27 21:28:10.954 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 82.6513ms
2025-08-27 21:28:54.798 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-27 21:28:54.810 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:54.812 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 13.96ms
2025-08-27 21:28:54.817 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 546
2025-08-27 21:28:54.822 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:54.824 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 21:28:54.833 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 21:28:54.860 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-27 21:28:54.877 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-27 21:28:55.046 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPTCFMBhV2XWpGM64kMcQP0ieRXNJ0ItZAphO8tof9XHT3U2k2685JkR5dZAxKTdutW3jMlvX9HUtoe3nW85PbCszRZCbBhcUrke2dc0YG9VFavwvybYOeHyQ1UyTlIdsyQlctKQZCuVmVDSKxxWng6Aj6um1OvUFILXP3tUd3cLiHkPMT2okcC4hrlhIrlW9xfDTxcIcLgf1BbkFSkCElHMutRkEytEuW7raLDd15resZCg6JdQZDZD' (Nullable = false), @p1='2025-08-27T15:58:54.8906204Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 21:28:55.067 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:55.071 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 234.6149ms
2025-08-27 21:28:55.074 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-27 21:28:55.075 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 259.041ms
2025-08-27 21:28:56.098 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-27 21:28:56.102 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:56.104 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 5.8456ms
2025-08-27 21:28:56.108 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 378
2025-08-27 21:28:56.112 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:28:56.114 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 21:28:56.120 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-27 21:28:56.139 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 21:28:56.143 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-27 21:28:59.919 +05:30 [INF] Received HTTP response headers after 3771.1117ms - 200
2025-08-27 21:28:59.922 +05:30 [INF] End processing HTTP request after 3785.2791ms - 200
2025-08-27 21:28:59.932 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:28:59.935 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 3811.8938ms
2025-08-27 21:28:59.937 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-27 21:28:59.939 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 3831.0586ms
2025-08-27 21:29:03.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:29:03.574 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:03.575 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.5076ms
2025-08-27 21:29:03.585 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:29:03.591 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:03.593 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:03.601 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:03.642 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 21:29:03.649 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:29:03.661 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 54.4408ms
2025-08-27 21:29:03.664 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:03.667 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 82.4676ms
2025-08-27 21:29:05.761 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 21:29:05.766 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:05.768 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 7.0139ms
2025-08-27 21:29:05.778 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 21:29:05.784 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:05.786 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 21:29:05.794 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:05.831 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:29:05.852 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 21:29:05.859 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 21:29:05.862 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:29:05.870 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 72.6113ms
2025-08-27 21:29:05.872 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 21:29:05.874 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 96.5547ms
2025-08-27 21:29:05.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:29:05.913 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:05.916 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:05.918 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:05.931 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 21:29:05.936 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:29:05.938 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 16.1479ms
2025-08-27 21:29:05.940 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:05.941 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 41.076ms
2025-08-27 21:29:21.531 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 21:29:21.534 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:21.535 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 4.4195ms
2025-08-27 21:29:21.540 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 21:29:21.544 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:21.546 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 21:29:21.548 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:21.574 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:29:21.586 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 21:29:21.593 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-27 21:29:21.595 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:29:21.599 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 30.4596ms
2025-08-27 21:29:21.603 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 21:29:21.605 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 65.1114ms
2025-08-27 21:29:21.635 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:29:21.639 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:21.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.0807ms
2025-08-27 21:29:21.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:29:21.650 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:21.652 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:21.654 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:21.660 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 21:29:21.664 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:29:21.668 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 12.6397ms
2025-08-27 21:29:21.670 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:21.672 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 26.644ms
2025-08-27 21:29:51.210 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-27 21:29:51.219 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:51.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 10.3535ms
2025-08-27 21:29:51.231 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-27 21:29:51.235 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:51.237 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 21:29:51.239 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:51.264 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:29:51.279 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-27 21:29:51.312 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 21:29:51.314 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-27 21:29:52.894 +05:30 [INF] Received HTTP response headers after 1578.9857ms - 200
2025-08-27 21:29:52.896 +05:30 [INF] End processing HTTP request after 1584.2414ms - 200
2025-08-27 21:29:53.270 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='url_tracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 21:29:53.381 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 21:29:53.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 21:29:53.392 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 21:29:53.398 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 21:29:53.403 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-27 21:29:53.465 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='1d9590ea-9e9b-4e76-b076-0fc86cc02a84', @p1='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[]' (Nullable = false), @p4='UTILITY', @p5='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p6='617143187619824', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p11='hello_world' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p17='5657fc90-9106-43a5-854a-1a82891a9f94', @p18='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"},{"Type":"URL","Text":"View Demo","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p23='1322949819198164', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p28='url_tracking' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/tutrials"]},{"type":"URL","text":"View Demo","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p34='6473c5bb-e383-45db-a162-98f10fd196a4', @p35='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p38='MARKETING', @p39='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p40='663456696777015', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p45='offer_aiboat' (Nullable = false), @p46='0', @p47='meta_cloud' (Nullable = false), @p48='{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p51='8227c242-b9a5-473f-87d2-b12d42dfa871', @p52='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p55='UTILITY', @p56='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p57='817241660991962', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p62='account_creation_confirmation_3' (Nullable = false), @p63='2', @p64='meta_cloud' (Nullable = false), @p65='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p68='8969697d-2d34-42cb-93b8-aeea3b44e149', @p69='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p70='c13be597-6ae2-42bb-9d43-925815f24ff8', @p71='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p72='MARKETING', @p73='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p74='3255438291278546', @p75='False', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p79='bot_launch' (Nullable = false), @p80='0', @p81='meta_cloud' (Nullable = false), @p82='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p85='e70c578e-73fb-4fd6-a70b-b49cf22b1ea5', @p86='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p87='c13be597-6ae2-42bb-9d43-925815f24ff8', @p88='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p89='MARKETING', @p90='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p91='1100798472016654', @p92='True', @p93='True', @p94='en_US' (Nullable = false), @p95='2025-08-27T15:59:51.2761288Z' (DbType = DateTime), @p96='shoe_launch_offer' (Nullable = false), @p97='1', @p98='meta_cloud' (Nullable = false), @p99='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwG2zZdx&_nc_oc=AdmQQF5ExwvGBfsxAmnY6n6bAKzW_J-Zl3mmNk7EUEZdKEGCzZiq8E_NaFU7KhaKUZltBH9OHQemgoJZ7HgIWiJ6&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=gFl3Qu-mmnOQSENLbY7VIA&oh=01_Q5Aa2QFGAabWLggTCYegDh8t23XbvzeHCC7jihuqUVkOmFAd0Q&oe=68D6B74F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-08-27T15:59:51.2761288Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
2025-08-27 21:29:53.493 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:29:53.495 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 2254.106ms
2025-08-27 21:29:53.498 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-27 21:29:53.500 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 2268.118ms
2025-08-27 21:29:53.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:29:53.533 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:53.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.3781ms
2025-08-27 21:29:53.540 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:29:53.545 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:53.548 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:53.550 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:53.558 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 21:29:53.566 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:29:53.569 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 15.8592ms
2025-08-27 21:29:53.571 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:29:53.573 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 32.561ms
2025-08-27 21:29:57.374 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/url_tracking - null null
2025-08-27 21:29:57.384 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:57.385 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/url_tracking - 204 null null 11.589ms
2025-08-27 21:29:57.395 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/url_tracking - null null
2025-08-27 21:29:57.398 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:29:57.400 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 21:29:57.407 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:29:57.425 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='url_tracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-27 21:29:57.431 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType144`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:29:57.436 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 26.8253ms
2025-08-27 21:29:57.440 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-27 21:29:57.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/url_tracking - 200 null application/json; charset=utf-8 47.1924ms
2025-08-27 21:30:51.085 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-27 21:30:51.098 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:51.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 14.3934ms
2025-08-27 21:30:51.111 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 468
2025-08-27 21:30:51.116 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:51.118 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 21:30:51.124 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:30:53.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 21:30:53.443 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 21:30:53.446 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 21:30:55.598 +05:30 [INF] Received HTTP response headers after 2150.6148ms - 200
2025-08-27 21:30:55.600 +05:30 [INF] End processing HTTP request after 2157.9173ms - 200
2025-08-27 21:30:55.764 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-27T16:00:55.6284393Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hello

This is used to check wheather url redirection is woking or not.', @p14='url_tracking' (Nullable = false), @p15='URL_tracking' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='url_tracking', @p20='[]', @p21='2025-08-27T16:00:55.6284888Z' (DbType = DateTime), @p22='e525d1f3-9f42-4919-8597-6db63487ae72', @p23='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @p24='True', @p25='1', @p26='Visit website' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p29='ece51b13-bf24-4db5-9d53-240152c46d6e', @p30='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @p31='True', @p32='2', @p33='View Demo' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.youtube.com/shorts/qBbWfwlIJdg' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-27 21:30:55.772 +05:30 [INF] ✅ Campaign 'URL_tracking' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-27 21:30:55.778 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType31`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:30:55.783 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 4656.162ms
2025-08-27 21:30:55.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-27 21:30:55.786 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 4675.4702ms
2025-08-27 21:30:55.880 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 21:30:55.895 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 21:30:55.884 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null null
2025-08-27 21:30:55.903 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-27 21:30:55.912 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:55.916 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:55.919 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:55.922 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:55.926 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 204 null null 42.8702ms
2025-08-27 21:30:55.934 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 30.8491ms
2025-08-27 21:30:55.925 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 30.2782ms
2025-08-27 21:30:55.924 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 43.9661ms
2025-08-27 21:30:55.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null null
2025-08-27 21:30:55.950 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 21:30:55.954 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-27 21:30:55.958 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:55.961 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:55.964 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:55.965 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 21:30:55.966 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 21:30:55.967 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 21:30:55.973 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:30:55.974 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 21:30:55.977 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-27 21:30:55.989 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-27 21:30:55.993 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 21:30:56.002 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 21:30:56.012 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-27 21:30:56.023 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 43.917ms
2025-08-27 21:30:56.026 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 21:30:56.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-27 21:30:56.028 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 77.8751ms
2025-08-27 21:30:56.032 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:30:56.039 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 21:30:56.041 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-27 21:30:56.048 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-27 21:30:56.053 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 21:30:56.060 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 15.7778ms
2025-08-27 21:30:56.068 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-27 21:30:56.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 46.0751ms
2025-08-27 21:30:56.156 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-27 21:30:56.175 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-27 21:30:56.187 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 210.3703ms
2025-08-27 21:30:56.189 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-27 21:30:56.190 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-27 21:30:56.192 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 200 null application/json; charset=utf-8 252.3419ms
2025-08-27 21:30:56.278 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 21:30:56.287 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 305.251ms
2025-08-27 21:30:56.289 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-27 21:30:56.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 338.5065ms
2025-08-27 21:31:02.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/assign-contacts - null null
2025-08-27 21:31:02.971 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:02.974 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/assign-contacts - 204 null null 10.2599ms
2025-08-27 21:31:02.983 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/assign-contacts - application/json 55
2025-08-27 21:31:02.991 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:02.994 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 21:31:03.003 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:31:03.041 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-27 21:31:03.102 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='bef51883-174d-48cf-be6c-16e60a913312', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-27T16:01:03.0515680Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-27T16:01:03.0516599Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-27 21:31:03.107 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:31:03.109 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 103.1435ms
2025-08-27 21:31:03.111 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-27 21:31:03.113 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/assign-contacts - 200 null application/json; charset=utf-8 130.1291ms
2025-08-27 21:31:06.900 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:31:06.910 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:06.912 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 12.1449ms
2025-08-27 21:31:06.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-27 21:31:06.922 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:06.924 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:31:06.926 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-27 21:31:06.936 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-27 21:31:06.940 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType76`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType143`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:31:06.942 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 13.8435ms
2025-08-27 21:31:06.944 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-27 21:31:06.946 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 27.7258ms
2025-08-27 21:31:11.527 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:31:11.536 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:11.538 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 11.0123ms
2025-08-27 21:31:11.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:31:11.548 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:11.550 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:31:11.552 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:31:11.560 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 21:31:11.570 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:31:11.572 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 16.7104ms
2025-08-27 21:31:11.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:31:11.575 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 33.0107ms
2025-08-27 21:31:13.287 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null null
2025-08-27 21:31:13.295 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:13.297 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 204 null null 9.9003ms
2025-08-27 21:31:13.304 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null 0
2025-08-27 21:31:13.309 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:31:13.312 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 21:31:13.318 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:31:16.320 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 21:31:16.334 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 21:31:16.353 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:31:16.359 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 21:31:16.363 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 21:31:16.365 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 21:31:17.934 +05:30 [INF] Received HTTP response headers after 1566.8643ms - 200
2025-08-27 21:31:17.937 +05:30 [INF] End processing HTTP request after 1574.1516ms - 200
2025-08-27 21:31:17.983 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:31:18.009 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 21:31:18.011 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 21:31:19.574 +05:30 [INF] Received HTTP response headers after 1561.7595ms - 200
2025-08-27 21:31:19.576 +05:30 [INF] End processing HTTP request after 1567.6836ms - 200
2025-08-27 21:31:19.782 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='4e1b5cac-c401-45d2-b173-7a63875fae00', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='8fdd3d73-d27b-4b0f-a242-7e16a74fd943' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T16:01:19.5868102Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='url_tracking' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T16:01:19.5869156Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='49541bd4-bf42-435c-91cb-7bafd7678ade', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T16:01:19.6371590Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==', @p42='4e1b5cac-c401-45d2-b173-7a63875fae00' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='bef51883-174d-48cf-be6c-16e60a913312', @p45='0', @p46='Sent', @p47='2025-08-27T16:01:19.6372153Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='url_tracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 21:31:19.792 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 21:31:19.796 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6475.3675ms
2025-08-27 21:31:19.798 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 21:31:19.799 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 200 null application/json; charset=utf-8 6494.9091ms
2025-08-27 21:31:29.046 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 21:31:29.051 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:29.053 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:31:29.056 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"delivered","timestamp":"1756310486","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:29.059 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:31:29.060 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:31:29.062 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"delivered","timestamp":"1756310486","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:29.062 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.8069ms
2025-08-27 21:31:29.066 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 21:31:29.068 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:29.071 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.4295ms
2025-08-27 21:31:29.081 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"delivered","timestamp":"1756310486","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:29.101 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 21:31:29.116 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__logId_Value_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 21:31:29.123 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='2025-08-27T16:01:26.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 21:31:29.128 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA== → delivered
2025-08-27 21:31:29.187 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 21:31:29.190 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:29.192 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:31:29.196 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"sent","timestamp":"1756310485","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","expiration_timestamp":"1756310485","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:29.198 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:31:29.199 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:31:29.201 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.1982ms
2025-08-27 21:31:29.203 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:29.205 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 18.321ms
2025-08-27 21:31:29.209 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"sent","timestamp":"1756310485","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","expiration_timestamp":"1756310485","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:29.212 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 21:31:29.213 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"sent","timestamp":"1756310485","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","expiration_timestamp":"1756310485","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:29.219 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 21:31:29.226 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 21:31:29.234 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='Sent'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-08-27 21:31:29.238 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA== → sent
2025-08-27 21:31:30.905 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 21:31:30.910 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:30.911 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:31:30.915 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"delivered","timestamp":"1756310486","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:30.918 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:31:30.918 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"delivered","timestamp":"1756310486","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:30.919 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:31:30.921 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 21:31:30.923 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.9266ms
2025-08-27 21:31:30.924 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"delivered","timestamp":"1756310486","recipient_id":"918974005240","conversation":{"id":"c34f23d8dae0eddd47e0c7310e199415","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:31:30.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:30.929 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.0822ms
2025-08-27 21:31:30.931 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 21:31:30.941 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 21:31:30.955 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p1='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-08-27 21:31:30.959 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA== → delivered
2025-08-27 21:31:36.360 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 21:31:36.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:36.366 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:31:36.369 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"read","timestamp":"1756310494","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 21:31:36.371 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:31:36.372 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"read","timestamp":"1756310494","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 21:31:36.373 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:31:36.374 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 21:31:36.377 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA==","status":"read","timestamp":"1756310494","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 21:31:36.376 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.3147ms
2025-08-27 21:31:36.381 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 21:31:36.382 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:31:36.387 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.9503ms
2025-08-27 21:31:36.388 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 21:31:36.398 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='2025-08-27T16:01:34.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 21:31:36.402 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA== → read
2025-08-27 21:31:39.428 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0 - null null
2025-08-27 21:31:39.440 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:31:39.470 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='49541bd4-bf42-435c-91cb-7bafd7678ade' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__get_Item_0
LIMIT 1
2025-08-27 21:31:39.480 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p5='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='View Demo', @p1='2025-08-27T16:01:39.4752984Z' (Nullable = true) (DbType = DateTime), @p2='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36', @p3='::1', @p4='True'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ClickType" = @p0, "ClickedAt" = @p1, "DeviceInfo" = @p2, "IpAddress" = @p3, "IsClicked" = @p4
WHERE "Id" = @p5;
2025-08-27 21:31:39.486 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/shorts/qBbWfwlIJdg.
2025-08-27 21:31:39.488 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:31:39.490 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0 - 302 0 null 62.227ms
2025-08-27 21:31:50.790 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ - null null
2025-08-27 21:31:50.798 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:31:50.805 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='49541bd4-bf42-435c-91cb-7bafd7678ade' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__get_Item_0
LIMIT 1
2025-08-27 21:31:50.817 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='Visit website', @p1='2025-08-27T16:01:50.8097647Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ClickType" = @p0, "ClickedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 21:31:50.821 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-27 21:31:50.822 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:31:50.824 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ - 302 0 null 34.1853ms
2025-08-27 21:42:31.977 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-27 21:42:32.029 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-27 21:42:32.052 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-27 21:42:33.171 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-27 21:42:33.843 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 21:42:34.073 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-27 21:42:34.106 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[@__cutoff_0='2025-08-20T16:12:32.2159739Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-27 21:42:34.130 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-27 21:42:34.131 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-27 21:42:34.132 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-27 21:42:34.133 +05:30 [INF] Hosting environment: Development
2025-08-27 21:42:34.135 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-27 21:42:35.790 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-27 21:42:36.018 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 237.5604ms
2025-08-27 21:42:36.117 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-27 21:42:36.117 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-27 21:42:36.123 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.2105ms
2025-08-27 21:42:36.163 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.1025ms
2025-08-27 21:42:37.354 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-27 21:42:37.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 247.3573ms
2025-08-27 21:42:45.344 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0 - null null
2025-08-27 21:42:45.358 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-27 21:42:45.525 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:42:45.550 +05:30 [INF] Redirect hit with token: eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0
2025-08-27 21:42:45.588 +05:30 [INF] Decoded payload: cid="49541bd4-bf42-435c-91cb-7bafd7678ade", btn=View Demo, to=https://www.youtube.com/shorts/qBbWfwlIJdg
2025-08-27 21:42:45.772 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__get_Item_0='49541bd4-bf42-435c-91cb-7bafd7678ade' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__get_Item_0
LIMIT 1
2025-08-27 21:42:46.101 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p2='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='View Demo', @p1='2025-08-27T16:12:45.9473479Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ClickType" = @p0, "ClickedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 21:42:46.123 +05:30 [INF] Updated send log "49541bd4-bf42-435c-91cb-7bafd7678ade"
2025-08-27 21:42:46.128 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/shorts/qBbWfwlIJdg.
2025-08-27 21:42:46.130 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:42:46.142 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0 - 302 0 null 797.8561ms
2025-08-27 21:43:02.790 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ - null null
2025-08-27 21:43:02.802 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:43:02.838 +05:30 [INF] Redirect hit with token: eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ
2025-08-27 21:43:02.845 +05:30 [INF] Decoded payload: cid="49541bd4-bf42-435c-91cb-7bafd7678ade", btn=Visit website, to=https://www.mindsmiratus.com/website-designing-services
2025-08-27 21:43:02.860 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='49541bd4-bf42-435c-91cb-7bafd7678ade' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__get_Item_0
LIMIT 1
2025-08-27 21:43:02.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='Visit website', @p1='2025-08-27T16:13:02.8647718Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ClickType" = @p0, "ClickedAt" = @p1
WHERE "Id" = @p2;
2025-08-27 21:43:02.874 +05:30 [INF] Updated send log "49541bd4-bf42-435c-91cb-7bafd7678ade"
2025-08-27 21:43:02.876 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-27 21:43:02.880 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:43:02.883 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ - 302 0 null 92.2513ms
2025-08-27 21:47:11.643 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:47:11.664 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:47:11.669 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 204 null null 26.7955ms
2025-08-27 21:47:11.675 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:47:11.691 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:47:11.848 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:47:11.887 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:47:11.985 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-27 21:47:12.014 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-27 21:47:12.035 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-27 21:47:12.060 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 163.7724ms
2025-08-27 21:47:12.063 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:47:12.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 200 null application/json; charset=utf-8 390.8886ms
2025-08-27 21:47:12.071 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:47:12.075 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:47:12.077 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 204 null null 5.2907ms
2025-08-27 21:47:12.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:47:12.088 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:47:12.091 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:47:12.104 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:47:12.144 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-27 21:47:12.208 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-27 21:47:12.217 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:47:12.249 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 141.2682ms
2025-08-27 21:47:12.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:47:12.254 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 171.303ms
2025-08-27 21:47:14.515 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:47:14.520 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:47:14.522 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 204 null null 6.9955ms
2025-08-27 21:47:14.526 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:47:14.533 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:47:14.536 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:47:14.542 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-27 21:47:14.788 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-27 21:47:14.807 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-27 21:47:14.829 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-27 21:47:14.834 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:47:14.841 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 294.8409ms
2025-08-27 21:47:14.844 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:47:14.847 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 200 null application/json; charset=utf-8 320.5565ms
2025-08-27 21:47:57.784 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ - null null
2025-08-27 21:47:57.818 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:47:57.827 +05:30 [INF] Redirect hit with token: eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ
2025-08-27 21:47:57.829 +05:30 [INF] Decoded payload: cid="49541bd4-bf42-435c-91cb-7bafd7678ade", btn=Visit website, to=https://www.mindsmiratus.com/website-designing-services
2025-08-27 21:47:57.945 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='49541bd4-bf42-435c-91cb-7bafd7678ade' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__get_Item_0
LIMIT 1
2025-08-27 21:47:57.952 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='49541bd4-bf42-435c-91cb-7bafd7678ade', @p0='2025-08-27T16:17:57.9491202Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ClickedAt" = @p0
WHERE "Id" = @p1;
2025-08-27 21:47:57.955 +05:30 [INF] Updated send log "49541bd4-bf42-435c-91cb-7bafd7678ade"
2025-08-27 21:47:57.956 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-27 21:47:57.958 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:47:57.960 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiI0OTU0MWJkNC1iZjQyLTQzNWMtOTFjYi03YmFmZDc2NzhhZGUiLCJidG5JbmRleCI6MSwiYnRuVGl0bGUiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwicGhvbmUiOiJcdTAwMkI5MTg5NzQwMDUyNDAifQ - 302 0 null 176.1494ms
2025-08-27 21:48:07.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:48:07.450 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:07.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 204 null null 21.7785ms
2025-08-27 21:48:07.465 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:48:07.472 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:07.474 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:48:07.477 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-27 21:48:07.485 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-27 21:48:07.492 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-27 21:48:07.498 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-27 21:48:07.502 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:48:07.504 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 23.8847ms
2025-08-27 21:48:07.506 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:48:07.508 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 200 null application/json; charset=utf-8 43.2641ms
2025-08-27 21:48:13.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:48:13.969 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:13.972 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.7088ms
2025-08-27 21:48:13.977 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:48:13.982 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:13.989 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:48:13.996 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:48:14.024 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-27 21:48:14.059 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:48:14.064 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:48:14.071 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 72.7009ms
2025-08-27 21:48:14.074 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:48:14.075 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 98.6501ms
2025-08-27 21:48:14.127 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:48:14.133 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:14.137 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:48:14.139 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:48:14.146 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:48:14.169 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:48:14.171 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 29.4937ms
2025-08-27 21:48:14.173 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:48:14.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 47.7773ms
2025-08-27 21:48:14.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:48:14.226 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:48:14.228 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:14.233 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:14.235 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 204 null null 9.1419ms
2025-08-27 21:48:14.236 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:48:14.240 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:48:14.241 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:48:14.245 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:14.249 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:48:14.251 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:48:14.253 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:48:14.260 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:48:14.264 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-27 21:48:14.266 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.6585ms
2025-08-27 21:48:14.269 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-27 21:48:14.271 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:48:14.274 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 17.5413ms
2025-08-27 21:48:14.277 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 53.6161ms
2025-08-27 21:48:14.289 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:48:14.295 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 200 null application/json; charset=utf-8 55.1473ms
2025-08-27 21:48:14.725 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:48:14.729 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:14.730 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 204 null null 6.11ms
2025-08-27 21:48:14.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:48:14.738 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:14.740 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:48:14.741 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:48:14.747 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-27 21:48:14.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-27 21:48:14.758 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:48:14.760 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 16.7328ms
2025-08-27 21:48:14.762 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:48:14.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 29.499ms
2025-08-27 21:48:15.976 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:48:15.981 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:15.982 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 204 null null 6.3789ms
2025-08-27 21:48:15.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:48:15.991 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:48:15.993 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:48:15.996 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-27 21:48:16.004 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-27 21:48:16.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-27 21:48:16.017 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-27 21:48:16.021 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:48:16.023 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 24.176ms
2025-08-27 21:48:16.025 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:48:16.027 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 200 null application/json; charset=utf-8 39.4226ms
2025-08-27 21:49:25.460 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:49:25.473 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:49:25.475 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 204 null null 15.2114ms
2025-08-27 21:49:25.490 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - null null
2025-08-27 21:49:25.495 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:49:25.497 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:49:25.499 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-27 21:49:25.506 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='49541bd4-bf42-435c-91cb-7bafd7678ade'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-27 21:49:25.514 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-27 21:49:25.520 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODdCQkNCQkEzNEJCNzI5OEE0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-27 21:49:25.532 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:49:25.534 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 32.1725ms
2025-08-27 21:49:25.536 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:49:25.538 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/49541bd4-bf42-435c-91cb-7bafd7678ade - 200 null application/json; charset=utf-8 47.6377ms
2025-08-27 21:52:45.357 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:52:45.363 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:52:45.376 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 18.553ms
2025-08-27 21:52:45.391 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:52:45.398 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:52:45.401 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:52:45.409 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:52:45.480 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 21:52:45.486 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:52:45.493 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 80.8609ms
2025-08-27 21:52:45.495 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:52:45.498 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 107.0182ms
2025-08-27 21:52:47.269 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null null
2025-08-27 21:52:47.276 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:52:47.277 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 204 null null 7.9995ms
2025-08-27 21:52:47.284 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null 0
2025-08-27 21:52:47.288 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:52:47.289 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 21:52:47.295 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:52:49.560 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-27 21:52:49.579 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-27 21:52:49.775 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:52:49.958 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-27 21:52:49.994 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 21:52:49.998 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-27 21:52:51.385 +05:30 [INF] Received HTTP response headers after 1382.8712ms - 200
2025-08-27 21:52:51.389 +05:30 [INF] End processing HTTP request after 1396.4361ms - 200
2025-08-27 21:52:51.593 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-27 21:52:51.650 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 21:52:51.653 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-27 21:52:53.407 +05:30 [INF] Received HTTP response headers after 1752.4185ms - 200
2025-08-27 21:52:53.409 +05:30 [INF] End processing HTTP request after 1759.0584ms - 200
2025-08-27 21:52:53.630 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p0='6cc0c718-a9af-414b-8f9b-6a8bf2c2a8d7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='8fdd3d73-d27b-4b0f-a242-7e16a74fd943' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-27T16:22:53.4361888Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='url_tracking' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-27T16:22:53.4362323Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='c413a6b2-fcf0-4985-8f22-1cf5f588af4c', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-27T16:22:53.4967684Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==', @p42='6cc0c718-a9af-414b-8f9b-6a8bf2c2a8d7' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='bef51883-174d-48cf-be6c-16e60a913312', @p45='0', @p46='Sent', @p47='2025-08-27T16:22:53.4968073Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='url_tracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-27 21:52:53.665 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-27 21:52:53.675 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6377.4208ms
2025-08-27 21:52:53.678 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-27 21:52:53.679 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 200 null application/json; charset=utf-8 6395.9526ms
2025-08-27 21:52:57.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:52:57.294 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:52:57.295 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.3826ms
2025-08-27 21:52:57.313 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-27 21:52:57.317 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:52:57.320 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:52:57.322 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-27 21:52:57.343 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-27 21:52:57.348 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:52:57.351 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 26.5749ms
2025-08-27 21:52:57.353 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-27 21:52:57.355 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 42.0716ms
2025-08-27 21:53:01.477 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-27 21:53:01.481 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:53:01.486 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:53:01.535 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"sent","timestamp":"1756311779","recipient_id":"918974005240","conversation":{"id":"979cd30232d83aa0015c6c6dda76c6f2","expiration_timestamp":"1756311779","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:53:01.540 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:53:01.543 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:01.548 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"sent","timestamp":"1756311779","recipient_id":"918974005240","conversation":{"id":"979cd30232d83aa0015c6c6dda76c6f2","expiration_timestamp":"1756311779","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:53:01.563 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 21:53:01.549 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 60.0848ms
2025-08-27 21:53:01.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:53:01.567 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"sent","timestamp":"1756311779","recipient_id":"918974005240","conversation":{"id":"979cd30232d83aa0015c6c6dda76c6f2","expiration_timestamp":"1756311779","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:53:01.569 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 92.8057ms
2025-08-27 21:53:01.758 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 21:53:01.775 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='c413a6b2-fcf0-4985-8f22-1cf5f588af4c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 21:53:01.779 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA== → sent
2025-08-27 21:53:02.249 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-27 21:53:02.257 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:53:02.259 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:53:02.263 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"delivered","timestamp":"1756311780","recipient_id":"918974005240","conversation":{"id":"979cd30232d83aa0015c6c6dda76c6f2","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:53:02.268 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:53:02.273 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"delivered","timestamp":"1756311780","recipient_id":"918974005240","conversation":{"id":"979cd30232d83aa0015c6c6dda76c6f2","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:53:02.274 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:02.276 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 21:53:02.278 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 16.1892ms
2025-08-27 21:53:02.283 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:53:02.278 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"delivered","timestamp":"1756311780","recipient_id":"918974005240","conversation":{"id":"979cd30232d83aa0015c6c6dda76c6f2","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-27 21:53:02.287 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 38.3063ms
2025-08-27 21:53:02.294 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 21:53:02.305 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='c413a6b2-fcf0-4985-8f22-1cf5f588af4c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 21:53:02.312 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='c413a6b2-fcf0-4985-8f22-1cf5f588af4c', @p0='2025-08-27T16:23:00.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 21:53:02.315 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA== → delivered
2025-08-27 21:53:07.776 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:53:07.783 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:07.784 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 204 null null 8.7928ms
2025-08-27 21:53:07.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:53:07.814 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:07.816 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:53:07.818 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:53:07.827 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-27 21:53:07.832 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-27 21:53:07.835 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 14.0956ms
2025-08-27 21:53:07.837 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:53:07.840 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 200 null application/json; charset=utf-8 32.0797ms
2025-08-27 21:53:08.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:53:08.248 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:08.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 204 null null 7.7287ms
2025-08-27 21:53:08.254 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:53:08.259 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:08.261 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:53:08.262 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:53:08.269 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-27 21:53:08.279 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-27 21:53:08.284 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:53:08.286 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 20.8209ms
2025-08-27 21:53:08.289 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:53:08.291 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 36.5414ms
2025-08-27 21:53:29.189 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-27 21:53:29.200 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:53:29.202 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-27 21:53:29.206 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"read","timestamp":"1756311807","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 21:53:29.208 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-27 21:53:29.210 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType85`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:29.212 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9402ms
2025-08-27 21:53:29.220 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-27 21:53:29.222 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"read","timestamp":"1756311807","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 21:53:29.222 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.73ms
2025-08-27 21:53:29.224 +05:30 [INF] 📦 Routing to Status Processor
2025-08-27 21:53:29.231 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA==","status":"read","timestamp":"1756311807","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-27 21:53:29.236 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-27 21:53:29.242 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='c413a6b2-fcf0-4985-8f22-1cf5f588af4c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-27 21:53:29.250 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='c413a6b2-fcf0-4985-8f22-1cf5f588af4c', @p0='2025-08-27T16:23:27.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-27 21:53:29.253 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA== → read
2025-08-27 21:53:36.032 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:36.036 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.038 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.1991ms
2025-08-27 21:53:36.044 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:36.047 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.050 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:36.051 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:53:36.060 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:53:36.063 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:36.065 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8216ms
2025-08-27 21:53:36.067 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:36.069 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.8224ms
2025-08-27 21:53:36.175 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:36.181 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.184 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:36.186 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:53:36.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:53:36.201 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:36.204 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6949ms
2025-08-27 21:53:36.206 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:36.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.9289ms
2025-08-27 21:53:36.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:53:36.266 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:36.275 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.279 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.280 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 204 null null 16.8841ms
2025-08-27 21:53:36.282 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:36.285 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:53:36.287 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:53:36.291 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.295 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:53:36.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:53:36.300 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:53:36.303 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:36.309 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.4264ms
2025-08-27 21:53:36.311 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-27 21:53:36.314 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:36.318 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-27 21:53:36.332 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 66.207ms
2025-08-27 21:53:36.334 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 27.3952ms
2025-08-27 21:53:36.340 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:53:36.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 200 null application/json; charset=utf-8 57.1771ms
2025-08-27 21:53:36.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:53:36.764 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.765 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 204 null null 6.3683ms
2025-08-27 21:53:36.770 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:53:36.774 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:36.776 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:53:36.777 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:53:36.784 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-27 21:53:36.793 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-27 21:53:36.796 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:53:36.798 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 18.2547ms
2025-08-27 21:53:36.801 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:53:36.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 32.5182ms
2025-08-27 21:53:51.184 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJjNDEzYTZiMi1mY2YwLTQ5ODUtOGYyMi0xY2Y1ZjU4OGFmNGMiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0 - null null
2025-08-27 21:53:51.196 +05:30 [INF] Executing endpoint 'HTTP: GET /{token}'
2025-08-27 21:53:51.198 +05:30 [INF] Redirect hit with token: eyJjaWQiOiJjNDEzYTZiMi1mY2YwLTQ5ODUtOGYyMi0xY2Y1ZjU4OGFmNGMiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0
2025-08-27 21:53:51.199 +05:30 [INF] Decoded payload: cid="c413a6b2-fcf0-4985-8f22-1cf5f588af4c", btn=View Demo, to=https://www.youtube.com/shorts/qBbWfwlIJdg
2025-08-27 21:53:51.204 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='c413a6b2-fcf0-4985-8f22-1cf5f588af4c' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__get_Item_0
LIMIT 1
2025-08-27 21:53:51.211 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p5='c413a6b2-fcf0-4985-8f22-1cf5f588af4c', @p0='View Demo', @p1='2025-08-27T16:23:51.2088195Z' (Nullable = true) (DbType = DateTime), @p2='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36', @p3='::1', @p4='True'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ClickType" = @p0, "ClickedAt" = @p1, "DeviceInfo" = @p2, "IpAddress" = @p3, "IsClicked" = @p4
WHERE "Id" = @p5;
2025-08-27 21:53:51.217 +05:30 [INF] Updated send log "c413a6b2-fcf0-4985-8f22-1cf5f588af4c"
2025-08-27 21:53:51.219 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/shorts/qBbWfwlIJdg.
2025-08-27 21:53:51.220 +05:30 [INF] Executed endpoint 'HTTP: GET /{token}'
2025-08-27 21:53:51.222 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJjNDEzYTZiMi1mY2YwLTQ5ODUtOGYyMi0xY2Y1ZjU4OGFmNGMiLCJidG5JbmRleCI6MCwiYnRuVGl0bGUiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsInBob25lIjoiXHUwMDJCOTE4OTc0MDA1MjQwIn0 - 302 0 null 37.5966ms
2025-08-27 21:53:59.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:59.769 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:59.771 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.6351ms
2025-08-27 21:53:59.775 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:59.779 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:59.781 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:59.783 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:53:59.789 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:53:59.795 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:59.798 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.4629ms
2025-08-27 21:53:59.800 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:59.801 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.9359ms
2025-08-27 21:53:59.825 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:59.833 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:59.864 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:59.866 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:53:59.873 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:53:59.878 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:59.880 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6474ms
2025-08-27 21:53:59.882 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:59.884 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 58.6835ms
2025-08-27 21:53:59.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:53:59.911 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-27 21:53:59.915 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:59.919 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:59.920 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 204 null null 9.2807ms
2025-08-27 21:53:59.922 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:59.927 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - null null
2025-08-27 21:53:59.928 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-27 21:53:59.932 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:53:59.935 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:53:59.937 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-27 21:53:59.940 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:53:59.943 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType25`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-27 21:53:59.949 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-27 21:53:59.950 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.8859ms
2025-08-27 21:53:59.962 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-27 21:53:59.963 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-27 21:53:59.965 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 20.3615ms
2025-08-27 21:53:59.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 55.9039ms
2025-08-27 21:53:59.968 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-27 21:53:59.974 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943/summary - 200 null application/json; charset=utf-8 46.6435ms
2025-08-27 21:54:00.413 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:54:00.418 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:54:00.419 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 204 null null 6.5454ms
2025-08-27 21:54:00.425 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - null null
2025-08-27 21:54:00.430 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:54:00.431 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:54:00.433 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-27 21:54:00.440 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-27 21:54:00.449 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-27 21:54:00.455 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:54:00.458 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 22.3079ms
2025-08-27 21:54:00.460 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-27 21:54:00.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 37.7751ms
2025-08-27 21:54:12.837 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - null null
2025-08-27 21:54:12.843 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:54:12.845 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - 204 null null 7.5765ms
2025-08-27 21:54:12.852 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - null null
2025-08-27 21:54:12.856 +05:30 [INF] CORS policy execution successful.
2025-08-27 21:54:12.858 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:54:12.859 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-27 21:54:12.866 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='c413a6b2-fcf0-4985-8f22-1cf5f588af4c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-27 21:54:12.874 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-27 21:54:12.881 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0RFQUZGRjdBODM1OTlGMzY1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-27 21:54:12.885 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-27 21:54:12.887 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 24.5881ms
2025-08-27 21:54:12.889 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-27 21:54:12.891 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/c413a6b2-fcf0-4985-8f22-1cf5f588af4c - 200 null application/json; charset=utf-8 38.5669ms
