2025-08-28 09:13:10.517 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 09:13:11.220 +05:30 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 09:13:11.240 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-08-28 09:13:11.318 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 09:13:11.398 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 09:13:11.399 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-08-28 09:13:11.414 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-08-28 09:13:33.582 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 09:13:51.260 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 09:13:51.795 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 09:13:51.809 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-08-28 09:13:51.891 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 09:13:51.955 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 09:13:51.956 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-08-28 09:13:51.965 +05:30 [INF] Applying migration '20250828034334_AddCampaignClickLogstbl'.
2025-08-28 09:13:52.101 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '13313cfb-9000-4382-b9a9-784ffdc77070';
2025-08-28 09:13:52.101 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '1a0fab7f-c9e0-411b-8156-b6c8308dab35';
2025-08-28 09:13:52.102 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '388a0b39-6799-46c0-a407-5a1bc26895a2';
2025-08-28 09:13:52.102 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '4bcafbd2-f965-45f0-b0d2-c79a40bdb721';
2025-08-28 09:13:52.102 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '4cd72ffb-1c0b-4629-a962-2218c34e4443';
2025-08-28 09:13:52.103 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '5ec974c0-7262-4725-b5fb-0bc60e91d870';
2025-08-28 09:13:52.103 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '78481725-46ae-4ab8-8c30-cab6f0ea736d';
2025-08-28 09:13:52.103 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '849d8282-0636-4588-b01e-f17eb38d2f1b';
2025-08-28 09:13:52.103 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '8f6118e3-51e8-4aa6-aa08-b292d075c1a7';
2025-08-28 09:13:52.104 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'a10fca4f-d5e2-4e33-9509-0cbd5c6fa6e3';
2025-08-28 09:13:52.104 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'b21a3c29-a737-4430-8710-4dc78f1ebdec';
2025-08-28 09:13:52.104 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'b88e4968-db52-40ed-bfc7-933b741366ca';
2025-08-28 09:13:52.105 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'bf2a6dcc-72c0-4e80-9ef8-9a78c1a5210f';
2025-08-28 09:13:52.105 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'ce6bf6df-8f3b-4044-a1a5-3a9c32a45dd7';
2025-08-28 09:13:52.105 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'e8f4a680-feb8-484b-a897-b6baceae3ab9';
2025-08-28 09:13:52.106 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'edd9c61b-3e4e-4d93-877d-2f1a25b3ee73';
2025-08-28 09:13:52.106 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'fd6d06ce-9e22-47e9-ae76-414b2a076cc8';
2025-08-28 09:13:52.133 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignClickDailyAgg" (
    "Id" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "Day" date NOT NULL,
    "ButtonIndex" integer NOT NULL,
    "Clicks" bigint NOT NULL,
    CONSTRAINT "PK_CampaignClickDailyAgg" PRIMARY KEY ("Id")
);
2025-08-28 09:13:52.139 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignClickLogs" (
    "Id" uuid NOT NULL,
    "CampaignSendLogId" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "ContactId" uuid,
    "ButtonIndex" integer NOT NULL,
    "ButtonTitle" character varying(120) NOT NULL,
    "Destination" character varying(2048) NOT NULL,
    "Ip" character varying(64) NOT NULL,
    "UserAgent" character varying(512) NOT NULL,
    "ClickedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_CampaignClickLogs" PRIMARY KEY ("Id")
);
2025-08-28 09:13:52.142 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968671Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000000';
2025-08-28 09:13:52.143 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968672Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000001';
2025-08-28 09:13:52.143 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968672Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000002';
2025-08-28 09:13:52.143 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968672Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000003';
2025-08-28 09:13:52.144 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968677Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000004';
2025-08-28 09:13:52.144 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968677Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000005';
2025-08-28 09:13:52.144 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968678Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000006';
2025-08-28 09:13:52.145 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968678Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000007';
2025-08-28 09:13:52.145 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968678Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000008';
2025-08-28 09:13:52.145 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968678Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000009';
2025-08-28 09:13:52.145 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968678Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000010';
2025-08-28 09:13:52.154 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('003b2812-380b-4a58-9f2d-9577ab36ad76', TIMESTAMPTZ '2025-08-28T03:43:33.968732Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000000', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('07e64791-e560-40ce-8a9b-126a992a120b', TIMESTAMPTZ '2025-08-28T03:43:33.968736Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('19e2e6a3-a550-452f-ae36-37ec40e0a283', TIMESTAMPTZ '2025-08-28T03:43:33.968739Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('1b8b28ef-e6f9-4690-86aa-f80d5460b07e', TIMESTAMPTZ '2025-08-28T03:43:33.968737Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('445a92bb-19db-4352-9aa4-5914955c97a1', TIMESTAMPTZ '2025-08-28T03:43:33.968735Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('489ef7d5-b71d-4a02-b3a4-7bf12a13b1e5', TIMESTAMPTZ '2025-08-28T03:43:33.968739Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('572f5c50-07f4-4c6d-bc2d-0fddc6f61195', TIMESTAMPTZ '2025-08-28T03:43:33.968734Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('7354d012-cf16-4483-b962-bfe8303390ca', TIMESTAMPTZ '2025-08-28T03:43:33.968735Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('77f6d854-dd7e-4f4f-9c25-b5c997a5da59', TIMESTAMPTZ '2025-08-28T03:43:33.968734Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('9825c18c-79a3-4497-9b88-cde86dac53bc', TIMESTAMPTZ '2025-08-28T03:43:33.968738Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000000', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('a963d99a-e0f0-4227-a23b-6b8102a42e85', TIMESTAMPTZ '2025-08-28T03:43:33.968737Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('d38ad21b-fe63-4f08-88f3-46ff18dc79bf', TIMESTAMPTZ '2025-08-28T03:43:33.968736Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('dfe0750e-e8d3-440e-aca2-5f91a544bfa5', TIMESTAMPTZ '2025-08-28T03:43:33.968739Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('e1ffdfc3-f696-4e41-9e04-5ed1277c20f9', TIMESTAMPTZ '2025-08-28T03:43:33.968737Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('ef4d7145-7602-46db-978b-631bdaffd701', TIMESTAMPTZ '2025-08-28T03:43:33.968735Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('f6c9b11f-e746-472c-bfb1-0cbf76edf4e1', TIMESTAMPTZ '2025-08-28T03:43:33.96874Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000000', '00000000-0000-0000-0000-000000000005');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('fdfafbdb-20b2-47b7-9f91-9a7e0669921d', TIMESTAMPTZ '2025-08-28T03:43:33.96874Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000005');
2025-08-28 09:13:52.155 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968603Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000001';
2025-08-28 09:13:52.155 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968603Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000002';
2025-08-28 09:13:52.155 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968603Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000003';
2025-08-28 09:13:52.156 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968603Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000004';
2025-08-28 09:13:52.156 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T03:43:33.968603Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000005';
2025-08-28 09:13:52.158 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_CampaignClickDailyAgg_CampaignId_Day_ButtonIndex" ON "CampaignClickDailyAgg" ("CampaignId", "Day", "ButtonIndex");
2025-08-28 09:13:52.160 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignClickLogs_CampaignId_ButtonIndex" ON "CampaignClickLogs" ("CampaignId", "ButtonIndex");
2025-08-28 09:13:52.163 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignClickLogs_CampaignId_ClickedAt" ON "CampaignClickLogs" ("CampaignId", "ClickedAt");
2025-08-28 09:13:52.165 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignClickLogs_CampaignId_ContactId" ON "CampaignClickLogs" ("CampaignId", "ContactId");
2025-08-28 09:13:52.167 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250828034334_AddCampaignClickLogstbl', '8.0.18');
2025-08-28 09:24:17.309 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 09:24:17.352 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 09:24:17.366 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 09:24:18.226 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 09:24:33.318 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 09:24:33.351 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 09:24:33.362 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 09:24:34.033 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 09:24:34.521 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 09:24:34.757 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 09:24:34.790 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 09:24:34.791 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 09:24:34.792 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 09:24:34.793 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__cutoff_0='2025-08-21T03:54:33.4494780Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 09:24:34.793 +05:30 [INF] Hosting environment: Development
2025-08-28 09:24:34.795 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 09:24:40.273 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-28 09:24:40.303 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 09:24:40.348 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:40.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 93.8828ms
2025-08-28 09:24:40.363 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-28 09:24:40.375 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:40.433 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 09:24:40.457 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-28 09:24:40.530 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-28 09:24:40.613 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-28 09:24:40.734 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-28 09:24:40.896 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-28 09:24:40.914 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-28 09:24:40.946 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 09:24:41.026 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-28 09:24:41.029 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-28 09:24:41.049 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:41.069 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 605.5221ms
2025-08-28 09:24:41.073 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 09:24:41.084 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 720.5397ms
2025-08-28 09:24:41.090 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:24:41.095 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.097 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.8155ms
2025-08-28 09:24:41.109 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:24:41.116 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.167 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.172 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 225.9392ms
2025-08-28 09:24:41.174 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:24:41.195 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 09:24:41.233 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 09:24:41.243 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:24:41.246 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.1078ms
2025-08-28 09:24:41.250 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:41.274 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 95.2455ms
2025-08-28 09:24:41.277 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 169.7655ms
2025-08-28 09:24:41.302 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:24:41.305 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.312 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.313 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 09:24:41.314 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:24:41.336 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:24:41.343 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:41.345 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.4078ms
2025-08-28 09:24:41.348 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.351 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 49.5189ms
2025-08-28 09:24:41.376 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.1926ms
2025-08-28 09:24:41.395 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:24:41.399 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.403 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.405 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:24:41.414 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:24:41.419 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:41.421 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.1984ms
2025-08-28 09:24:41.423 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.8073ms
2025-08-28 09:24:41.468 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:24:41.473 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.473 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 09:24:41.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.477 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.478 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:24:41.479 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.1163ms
2025-08-28 09:24:41.486 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:24:41.489 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 09:24:41.493 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:41.499 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.499 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.4919ms
2025-08-28 09:24:41.501 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 09:24:41.503 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.506 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.9875ms
2025-08-28 09:24:41.510 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:24:41.615 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 09:24:41.621 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 09:24:41.629 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 09:24:41.661 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:24:41.666 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:41.663 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 149.5134ms
2025-08-28 09:24:41.668 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.671 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 09:24:41.673 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:24:41.675 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 186.0989ms
2025-08-28 09:24:41.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:24:41.688 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:41.691 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.0374ms
2025-08-28 09:24:41.693 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:24:41.695 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.131ms
2025-08-28 09:24:41.991 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 376.6428ms
2025-08-28 09:24:48.652 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:24:48.656 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:48.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 5.7476ms
2025-08-28 09:24:48.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:24:48.668 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:48.670 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:24:48.675 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:24:48.701 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 09:24:48.704 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType82`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType151`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:48.711 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 33.2467ms
2025-08-28 09:24:48.712 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:24:48.713 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 49.9391ms
2025-08-28 09:24:54.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-28 09:24:54.851 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:54.852 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 4.2139ms
2025-08-28 09:24:54.856 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-28 09:24:54.859 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:54.860 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 09:24:54.864 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:24:54.898 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:24:54.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-28 09:24:54.935 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-28 09:24:54.937 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType150`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 09:24:54.942 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 75.3966ms
2025-08-28 09:24:54.943 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 09:24:54.944 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 88.2726ms
2025-08-28 09:24:54.958 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:24:54.961 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:54.962 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.8062ms
2025-08-28 09:24:54.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:24:54.967 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:24:54.968 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:24:54.969 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:24:54.977 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 09:24:54.980 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType82`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType151`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:24:54.982 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.9129ms
2025-08-28 09:24:54.983 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:24:54.984 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 19.3646ms
2025-08-28 09:25:15.462 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 09:25:15.466 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:15.468 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.6471ms
2025-08-28 09:25:15.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 09:25:15.478 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:15.480 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 09:25:15.485 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 09:25:15.497 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:25:15.502 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-28 09:25:15.509 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 20.3921ms
2025-08-28 09:25:15.511 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 09:25:15.512 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 40.2013ms
2025-08-28 09:25:19.377 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-28 09:25:19.379 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:19.380 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.3777ms
2025-08-28 09:25:19.383 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 550
2025-08-28 09:25:19.385 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:19.386 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-28 09:25:19.390 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 09:25:19.400 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-28 09:25:19.408 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-28 09:25:19.494 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPdDCTwxELf6LL9A4eYqpYc06jw2jdWraQSyaRFJyVU78SYZBsuZCCSQ3ysmh0fwkZBZBlKSlQwHCdTndzrzKuWqQ34hKX71ZCNdUM1AfMUhpk4E7ha0pcMLWRS4opjvb6nrvAK0VFpnwbfar3FyhIN4B5XWi8wJxjjP86QSTZBqdqKCwyKLZC2xU8UlDj4ZBrry5lTb91P8dsLJRwZCIfB6NwUg82FZAVRWgCSXnbplY5Dv7BR2qxoZBa3Q' (Nullable = false), @p1='2025-08-28T03:55:19.4126912Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-28 09:25:19.508 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:25:19.511 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 119.0383ms
2025-08-28 09:25:19.512 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-28 09:25:19.514 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 130.7671ms
2025-08-28 09:25:20.368 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-28 09:25:20.371 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:20.372 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 4.2536ms
2025-08-28 09:25:20.376 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-28 09:25:20.378 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:20.380 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 09:25:20.383 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 09:25:20.396 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 09:25:20.398 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 09:25:22.028 +05:30 [INF] Received HTTP response headers after 1626.4017ms - 200
2025-08-28 09:25:22.030 +05:30 [INF] End processing HTTP request after 1635.4881ms - 200
2025-08-28 09:25:22.035 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:25:22.036 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1650.3241ms
2025-08-28 09:25:22.037 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 09:25:22.038 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1662.6222ms
2025-08-28 09:25:25.476 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:25:25.481 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:25.483 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 6.42ms
2025-08-28 09:25:25.499 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:25:25.503 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:25.505 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:25:25.506 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:25:25.513 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 09:25:25.518 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType82`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType151`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:25:25.520 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.6177ms
2025-08-28 09:25:25.522 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:25:25.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 25.1403ms
2025-08-28 09:25:27.069 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-28 09:25:27.071 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:27.072 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.7563ms
2025-08-28 09:25:27.075 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-28 09:25:27.078 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:27.079 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 09:25:27.080 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:25:27.084 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:25:27.089 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-28 09:25:27.091 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-28 09:25:27.092 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType150`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 09:25:27.093 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 11.5232ms
2025-08-28 09:25:27.094 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 09:25:27.096 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 20.2583ms
2025-08-28 09:25:27.109 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:25:27.112 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:27.113 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:25:27.114 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:25:27.119 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 09:25:27.123 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType82`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType151`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:25:27.125 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 9.2165ms
2025-08-28 09:25:27.126 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:25:27.127 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 18.0819ms
2025-08-28 09:25:58.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-28 09:25:58.519 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:58.520 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.3983ms
2025-08-28 09:25:58.523 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-28 09:25:58.525 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:58.526 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 09:25:58.527 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:25:58.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:25:58.536 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-28 09:25:58.561 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-28 09:25:58.562 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-28 09:25:59.277 +05:30 [INF] Received HTTP response headers after 714.4896ms - 200
2025-08-28 09:25:59.278 +05:30 [INF] End processing HTTP request after 717.4666ms - 200
2025-08-28 09:25:59.472 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='build_urltracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 09:25:59.528 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='url_tracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 09:25:59.540 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 09:25:59.543 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 09:25:59.546 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 09:25:59.550 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 09:25:59.553 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 09:25:59.591 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='4b312c07-929d-4eb5-8d59-082399e2389b', @p1='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p4='MARKETING', @p5='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p6='663456696777015', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p11='offer_aiboat' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p17='53a0dbb4-1065-4765-9aed-7830a125a15c', @p18='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p21='UTILITY', @p22='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p23='817241660991962', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p28='account_creation_confirmation_3' (Nullable = false), @p29='2', @p30='meta_cloud' (Nullable = false), @p31='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p34='6baeba61-e994-45a5-b95b-e362589ea47b', @p35='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p38='MARKETING', @p39='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p40='3255438291278546', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p45='bot_launch' (Nullable = false), @p46='0', @p47='meta_cloud' (Nullable = false), @p48='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p51='79142e91-b3a5-4a04-924e-150aa731b846', @p52='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"},{"Type":"URL","Text":"View Demo","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"}]' (Nullable = false), @p55='MARKETING', @p56='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p57='1322949819198164', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p62='url_tracking' (Nullable = false), @p63='0', @p64='meta_cloud' (Nullable = false), @p65='{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/tutrials"]},{"type":"URL","text":"View Demo","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p68='a53e89b9-0d9b-4a22-a36f-4dec142bbf5f', @p69='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p70='c13be597-6ae2-42bb-9d43-925815f24ff8', @p71='[]' (Nullable = false), @p72='UTILITY', @p73='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p74='617143187619824', @p75='False', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p79='hello_world' (Nullable = false), @p80='0', @p81='meta_cloud' (Nullable = false), @p82='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p85='bb94e707-e68c-4ecc-a77c-e54df21d6c35', @p86='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p87='c13be597-6ae2-42bb-9d43-925815f24ff8', @p88='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p89='MARKETING', @p90='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p91='1100798472016654', @p92='True', @p93='True', @p94='en_US' (Nullable = false), @p95='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p96='shoe_launch_offer' (Nullable = false), @p97='1', @p98='meta_cloud' (Nullable = false), @p99='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwF8ug1t&_nc_oc=AdmBKg1tVuX10_gk1iDPuMU2xK4juuv-P31_2ieUryyO3pDnQYslJMba_UE7Hoea9q4sbUkbOv4WqRblpRwVcWp0&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=BYd2DdA_Xnn1G9p2ZVZWng&oh=01_Q5Aa2QGXoJBaHZM2cn0kwDaqFNowsbwnK44igino1Wm7TvYH0Q&oe=68D7600F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p102='eeab59a8-7995-4e29-a4f2-4d617be5dbb4', @p103='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p104='c13be597-6ae2-42bb-9d43-925815f24ff8', @p105='[{"Type":"URL","Text":"Shop Now","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Explore More","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p106='MARKETING', @p107='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p108='788214393726841', @p109='False', @p110='True', @p111='en_US' (Nullable = false), @p112='2025-08-28T03:55:58.5351387Z' (DbType = DateTime), @p113='build_urltracking' (Nullable = false), @p114='0', @p115='meta_cloud' (Nullable = false), @p116='{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/softwaredev"]},{"type":"URL","text":"Explore More","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"}' (Nullable = false), @p117='APPROVED' (Nullable = false), @p118='2025-08-28T03:55:58.5351387Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118);
2025-08-28 09:25:59.605 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType150`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 09:25:59.607 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1078.1407ms
2025-08-28 09:25:59.608 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 09:25:59.609 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1086.0535ms
2025-08-28 09:25:59.625 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:25:59.628 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:59.628 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 3.3927ms
2025-08-28 09:25:59.631 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 09:25:59.633 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:25:59.635 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:25:59.636 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:25:59.641 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 09:25:59.645 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType82`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType151`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:25:59.646 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 8.3647ms
2025-08-28 09:25:59.648 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 09:25:59.649 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 17.2969ms
2025-08-28 09:26:02.586 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/build_urltracking - null null
2025-08-28 09:26:02.588 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:02.589 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/build_urltracking - 204 null null 2.9869ms
2025-08-28 09:26:02.592 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/build_urltracking - null null
2025-08-28 09:26:02.594 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:02.595 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-28 09:26:02.600 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 09:26:02.611 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='build_urltracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-28 09:26:02.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType152`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:26:02.619 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 16.8645ms
2025-08-28 09:26:02.620 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-28 09:26:02.621 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/build_urltracking - 200 null application/json; charset=utf-8 29.4213ms
2025-08-28 09:26:46.965 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-28 09:26:46.968 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:46.969 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.8221ms
2025-08-28 09:26:46.971 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 563
2025-08-28 09:26:46.973 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:46.974 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-28 09:26:46.978 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:26:48.478 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 09:26:48.483 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:26:48.484 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:26:49.568 +05:30 [INF] Received HTTP response headers after 1083.0971ms - 200
2025-08-28 09:26:49.570 +05:30 [INF] End processing HTTP request after 1086.9224ms - 200
2025-08-28 09:26:49.666 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='f647c2fb-958c-4695-b51c-d4401cb1741d', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-28T03:56:49.5884719Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hello 

This is the test message to check wheather redirecting url is working or not.', @p14='build_urltracking' (Nullable = false), @p15='Build_Tracking_Newv1' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='build_urltracking', @p20='[]', @p21='2025-08-28T03:56:49.5885268Z' (DbType = DateTime), @p22='5787e052-294e-462c-81d6-f83b2f9cf0f8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24='True', @p25='2', @p26='Explore More' (Nullable = false), @p27='URL' (Nullable = false), @p28='https://www.youtube.com/watch?v=mbCsdfd-N4E' (Nullable = false), @p29='68ec819b-ad38-4c3c-b46f-5f1604e3e3c2', @p30='f647c2fb-958c-4695-b51c-d4401cb1741d', @p31='True', @p32='1', @p33='Shop Now' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p36='ec169165-d633-4835-a0ad-f47b638eeec8', @p37='f647c2fb-958c-4695-b51c-d4401cb1741d', @p38='True', @p39='3', @p40='Call us' (Nullable = false), @p41='PHONE_NUMBER' (Nullable = false), @p42='+917082156227' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-08-28 09:26:49.670 +05:30 [INF] ✅ Campaign 'Build_Tracking_Newv1' created with 0 recipients, 0 user buttons, 3 template buttons and 0 template parameters
2025-08-28 09:26:49.675 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:26:49.678 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2698.1072ms
2025-08-28 09:26:49.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-28 09:26:49.680 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2708.3455ms
2025-08-28 09:26:49.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-28 09:26:49.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-28 09:26:49.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 09:26:49.760 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-28 09:26:49.766 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.768 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.771 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.774 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 18.7715ms
2025-08-28 09:26:49.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 16.1286ms
2025-08-28 09:26:49.776 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 17.506ms
2025-08-28 09:26:49.777 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 17.385ms
2025-08-28 09:26:49.789 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 09:26:49.791 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-28 09:26:49.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-28 09:26:49.797 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.799 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.801 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.802 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-28 09:26:49.803 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 09:26:49.804 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-28 09:26:49.808 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-28 09:26:49.808 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:26:49.809 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-28 09:26:49.818 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-28 09:26:49.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-28 09:26:49.826 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 09:26:49.833 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-28 09:26:49.841 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 31.3242ms
2025-08-28 09:26:49.843 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-28 09:26:49.843 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 09:26:49.846 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:49.847 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 55.6599ms
2025-08-28 09:26:49.848 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 09:26:49.852 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-28 09:26:49.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-28 09:26:49.861 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 09:26:49.863 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 8.5525ms
2025-08-28 09:26:49.865 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 09:26:49.866 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 23.2992ms
2025-08-28 09:26:49.870 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-28 09:26:49.870 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-28 09:26:49.892 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-28 09:26:49.898 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 86.1154ms
2025-08-28 09:26:49.900 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-28 09:26:49.901 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 112.867ms
2025-08-28 09:26:49.955 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 09:26:49.962 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 148.1165ms
2025-08-28 09:26:49.964 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-28 09:26:49.965 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 171.2859ms
2025-08-28 09:26:57.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/assign-contacts - null null
2025-08-28 09:26:57.624 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:57.625 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/assign-contacts - 204 null null 3.2087ms
2025-08-28 09:26:57.627 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/assign-contacts - application/json 55
2025-08-28 09:26:57.629 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:26:57.630 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-28 09:26:57.633 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:26:57.650 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-28 09:26:57.678 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='c8555dab-8341-4573-a1f7-e8d00e85d857', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='f647c2fb-958c-4695-b51c-d4401cb1741d', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-28T03:56:57.6546416Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-28T03:56:57.6546857Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-28 09:26:57.680 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:26:57.681 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 46.5289ms
2025-08-28 09:26:57.682 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-28 09:26:57.683 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/assign-contacts - 200 null application/json; charset=utf-8 55.9406ms
2025-08-28 09:27:03.411 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 09:27:03.414 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:27:03.415 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6064ms
2025-08-28 09:27:03.418 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 09:27:03.421 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:27:03.423 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 09:27:03.424 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:27:03.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 09:27:03.432 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 09:27:03.433 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.3893ms
2025-08-28 09:27:03.435 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 09:27:03.437 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.666ms
2025-08-28 09:27:05.370 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 09:27:05.372 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:27:05.373 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 3.2736ms
2025-08-28 09:27:05.375 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 09:27:05.378 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:27:05.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:27:05.381 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:27:07.256 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 09:27:07.264 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 09:27:07.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:27:07.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 09:27:07.279 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:27:07.279 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:27:08.034 +05:30 [INF] Received HTTP response headers after 753.4791ms - 200
2025-08-28 09:27:08.035 +05:30 [INF] End processing HTTP request after 756.6114ms - 200
2025-08-28 09:27:09.608 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute URL (Parameter 'destinationUrlAbsolute')
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.BuildTrackedButtonUrl(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 54
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTokenParam(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1119
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1252
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1050
2025-08-28 09:27:09.646 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 09:27:09.647 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4264.3894ms
2025-08-28 09:27:09.648 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:27:09.649 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 400 null application/json; charset=utf-8 4274.2993ms
2025-08-28 09:27:26.453 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 09:27:26.455 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:27:26.456 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 3.3682ms
2025-08-28 09:27:26.459 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 09:27:26.461 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:27:26.462 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:27:26.463 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:27:29.546 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 09:27:29.551 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:27:29.555 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 09:27:29.557 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:27:29.558 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:27:30.491 +05:30 [INF] Received HTTP response headers after 932.1619ms - 200
2025-08-28 09:27:30.493 +05:30 [INF] End processing HTTP request after 935.7746ms - 200
2025-08-28 09:27:31.948 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute URL (Parameter 'destinationUrlAbsolute')
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.BuildTrackedButtonUrl(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 54
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTokenParam(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1119
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1252
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1050
2025-08-28 09:27:31.951 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 09:27:31.952 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5487.9902ms
2025-08-28 09:27:31.953 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:27:31.954 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 400 null application/json; charset=utf-8 5495.7281ms
2025-08-28 09:32:59.017 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 329
2025-08-28 09:32:59.020 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 09:32:59.022 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 09:32:59.029 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756351882, "changes": [{"value": {"event": "APPROVED", "message_template_id": 788214393726841, "message_template_name": "build_urltracking", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-28 09:32:59.032 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 09:32:59.033 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType91`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:32:59.036 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.6991ms
2025-08-28 09:32:59.041 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 09:32:59.042 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.453ms
2025-08-28 09:32:59.132 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756351882, "changes": [{"value": {"event": "APPROVED", "message_template_id": 788214393726841, "message_template_name": "build_urltracking", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-28 09:32:59.133 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-28 09:43:13.767 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 09:43:13.817 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 09:43:13.836 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 09:43:14.905 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 09:43:15.673 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 09:43:15.892 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 09:43:15.931 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__cutoff_0='2025-08-21T04:13:13.9853131Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 09:43:15.979 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 09:43:15.981 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 09:43:15.982 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 09:43:15.983 +05:30 [INF] Hosting environment: Development
2025-08-28 09:43:15.984 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 09:43:20.061 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 09:43:20.099 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 09:43:20.181 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:20.194 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 143.0246ms
2025-08-28 09:43:20.203 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 09:43:20.226 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:20.451 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:43:20.481 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:43:28.735 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 09:43:28.953 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 09:43:29.011 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 09:43:29.040 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 304.633ms
2025-08-28 09:43:29.244 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 09:43:29.248 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 09:43:29.253 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.56ms
2025-08-28 09:43:29.308 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.8475ms
2025-08-28 09:43:29.387 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:43:29.547 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 09:43:29.590 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:43:29.596 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:43:29.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 09:43:29.929 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 284.413ms
2025-08-28 09:43:31.280 +05:30 [INF] Received HTTP response headers after 1677.3908ms - 200
2025-08-28 09:43:31.283 +05:30 [INF] End processing HTTP request after 1696.5059ms - 200
2025-08-28 09:43:31.535 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL for button 'Call us' (index 0). Got: '+917082156227'
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.NormalizeAbsoluteUrlOrThrowForButton(String input, String buttonTitle, Int32 buttonIndex) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1027
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1283
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1079
2025-08-28 09:43:31.609 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 09:43:31.635 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 11146.6649ms
2025-08-28 09:43:31.638 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:43:31.645 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 400 null application/json; charset=utf-8 11441.686ms
2025-08-28 09:43:40.857 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:43:40.863 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:40.865 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.2722ms
2025-08-28 09:43:40.870 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:43:40.876 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:40.886 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:43:40.895 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:43:40.925 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 09:43:40.971 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:43:40.978 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:43:40.997 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 98.5874ms
2025-08-28 09:43:40.999 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:43:41.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 131.458ms
2025-08-28 09:43:41.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:43:41.013 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:41.019 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:43:41.021 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:43:41.035 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:43:41.041 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:43:41.044 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.7614ms
2025-08-28 09:43:41.046 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:43:41.048 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 39.6525ms
2025-08-28 09:43:41.087 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 09:43:41.089 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 09:43:41.093 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:41.096 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:41.098 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.895ms
2025-08-28 09:43:41.102 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:43:41.105 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 09:43:41.107 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 09:43:41.111 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:41.115 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 09:43:41.120 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 09:43:41.126 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:43:41.126 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 09:43:41.132 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.3732ms
2025-08-28 09:43:41.134 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 09:43:41.136 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 47.4075ms
2025-08-28 09:43:41.220 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 09:43:41.226 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 09:43:41.243 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 114.4191ms
2025-08-28 09:43:41.246 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 09:43:41.248 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 143.0508ms
2025-08-28 09:43:42.685 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 09:43:42.690 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:42.692 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 6.8747ms
2025-08-28 09:43:42.697 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 09:43:42.702 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:43:42.703 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:43:42.705 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:43:44.682 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 09:43:44.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:43:44.699 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 09:43:44.702 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:43:44.704 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:43:45.602 +05:30 [INF] Received HTTP response headers after 896.4029ms - 200
2025-08-28 09:43:45.604 +05:30 [INF] End processing HTTP request after 901.9549ms - 200
2025-08-28 09:43:45.668 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL for button 'Call us' (index 0). Got: '+917082156227'
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.NormalizeAbsoluteUrlOrThrowForButton(String input, String buttonTitle, Int32 buttonIndex) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1027
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1283
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1079
2025-08-28 09:43:45.674 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 09:43:45.677 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2968.4747ms
2025-08-28 09:43:45.679 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:43:45.681 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 400 null application/json; charset=utf-8 2983.8041ms
2025-08-28 09:55:38.990 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 09:55:39.007 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:55:39.008 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 17.9308ms
2025-08-28 09:55:39.022 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 09:55:39.026 +05:30 [INF] CORS policy execution successful.
2025-08-28 09:55:39.028 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 09:55:39.029 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 09:55:45.629 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 09:56:02.520 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 09:56:22.024 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 09:56:58.498 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:56:58.501 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 09:57:00.239 +05:30 [INF] Received HTTP response headers after 1735.9295ms - 200
2025-08-28 09:57:00.244 +05:30 [INF] End processing HTTP request after 1746.4766ms - 200
2025-08-28 10:03:56.656 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:03:56.698 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:03:56.713 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:03:57.536 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:03:58.137 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:03:58.368 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:03:58.369 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:03:58.371 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:03:58.372 +05:30 [INF] Hosting environment: Development
2025-08-28 10:03:58.373 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:03:58.384 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:03:58.404 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__cutoff_0='2025-08-21T04:33:56.8154689Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:04:05.881 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:04:06.141 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 269.8827ms
2025-08-28 10:04:06.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:04:06.204 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.1656ms
2025-08-28 10:04:06.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:04:06.326 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.7853ms
2025-08-28 10:04:06.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:04:06.901 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 380.7431ms
2025-08-28 10:04:12.261 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:04:12.270 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:04:12.332 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:12.338 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 77.0199ms
2025-08-28 10:04:12.352 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:04:12.368 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:12.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:04:12.622 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:04:16.473 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 10:04:16.514 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:04:16.767 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:04:16.925 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:04:16.970 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:04:16.975 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:04:19.048 +05:30 [INF] Received HTTP response headers after 2068.5619ms - 200
2025-08-28 10:04:19.051 +05:30 [INF] End processing HTTP request after 2084.5934ms - 200
2025-08-28 10:04:19.269 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:04:19.299 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:04:19.301 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:04:20.258 +05:30 [INF] Received HTTP response headers after 954.5028ms - 400
2025-08-28 10:04:20.260 +05:30 [INF] End processing HTTP request after 961.0472ms - 400
2025-08-28 10:04:20.263 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131009) Parameter value is not valid","type":"OAuthException","code":131009,"error_data":{"messaging_product":"whatsapp","details":"The number of non-webview related URL parameters was expected to be 1, but was instead found to be some other value."},"fbtrace_id":"A8wvbFUEZ1WQtYW4susX-Nf"}}
2025-08-28 10:04:20.691 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[@p0='e96d98a2-5da0-4205-88c0-9f3a5a483a21', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:34:20.2680972Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131009) Parameter value is not valid","type":"OAuthException","code":131009,"error_data":{"messaging_product":"whatsapp","details":"The number of non-webview related URL parameters was expected to be 1, but was instead found to be some other value."},"fbtrace_id":"A8wvbFUEZ1WQtYW4susX-Nf"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='d25bb327-2cd5-4c4c-9439-4c2820b05483', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:34:20.3476828Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='e96d98a2-5da0-4205-88c0-9f3a5a483a21' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:34:20.3477484Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:04:20.783 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:04:20.802 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 8173.125ms
2025-08-28 10:04:20.804 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:04:20.812 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 8460.3227ms
2025-08-28 10:04:48.870 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 10:04:48.875 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:48.877 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.7916ms
2025-08-28 10:04:48.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 10:04:48.894 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:48.906 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 10:04:48.915 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 10:04:48.930 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:04:48.938 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-28 10:04:48.956 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 37.9685ms
2025-08-28 10:04:48.958 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 10:04:48.960 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 72.0077ms
2025-08-28 10:04:51.390 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-28 10:04:51.398 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:51.401 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 10.659ms
2025-08-28 10:04:51.406 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-28 10:04:51.409 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:51.417 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 10:04:51.424 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 10:04:51.465 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 10:04:51.467 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 10:04:52.823 +05:30 [INF] Received HTTP response headers after 1354.6917ms - 200
2025-08-28 10:04:52.825 +05:30 [INF] End processing HTTP request after 1360.5616ms - 200
2025-08-28 10:04:52.849 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:04:52.853 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1426.2252ms
2025-08-28 10:04:52.855 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 10:04:52.857 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1450.9996ms
2025-08-28 10:04:56.951 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 10:04:56.957 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:56.959 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.7185ms
2025-08-28 10:04:56.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 10:04:56.971 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:56.974 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 10:04:56.982 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:04:57.101 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 10:04:57.109 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 10:04:57.118 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 133.2773ms
2025-08-28 10:04:57.120 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 10:04:57.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 157.817ms
2025-08-28 10:04:58.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:04:58.696 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:58.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 9.2351ms
2025-08-28 10:04:58.703 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:04:58.707 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:04:58.709 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:04:58.711 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:05:03.215 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:05:03.226 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:05:03.232 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:05:03.237 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:05:03.239 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:05:04.198 +05:30 [INF] Received HTTP response headers after 957.4608ms - 200
2025-08-28 10:05:04.288 +05:30 [INF] End processing HTTP request after 1050.6764ms - 200
2025-08-28 10:05:04.297 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:05:04.301 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:05:04.302 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:05:04.962 +05:30 [INF] Received HTTP response headers after 658.0645ms - 400
2025-08-28 10:05:04.964 +05:30 [INF] End processing HTTP request after 663.5414ms - 400
2025-08-28 10:05:04.966 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131009) Parameter value is not valid","type":"OAuthException","code":131009,"error_data":{"messaging_product":"whatsapp","details":"The number of non-webview related URL parameters was expected to be 1, but was instead found to be some other value."},"fbtrace_id":"ANUTK-zgNC-rgbZsniE94Oc"}}
2025-08-28 10:05:05.185 +05:30 [INF] Executed DbCommand (214ms) [Parameters=[@p0='18e4f1bc-7489-410a-8d38-2158fb52b353', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:35:04.9677247Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131009) Parameter value is not valid","type":"OAuthException","code":131009,"error_data":{"messaging_product":"whatsapp","details":"The number of non-webview related URL parameters was expected to be 1, but was instead found to be some other value."},"fbtrace_id":"ANUTK-zgNC-rgbZsniE94Oc"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='0cb29d95-f734-4acc-801d-d85a885e25b9', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:35:04.9692534Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='18e4f1bc-7489-410a-8d38-2158fb52b353' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:35:04.9692535Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:05:05.292 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:05:05.294 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6580.8816ms
2025-08-28 10:05:05.296 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:05:05.297 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 6594.5119ms
2025-08-28 10:05:49.334 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:05:49.340 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:05:49.344 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 10.4913ms
2025-08-28 10:05:49.355 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:05:49.359 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:05:49.361 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:05:49.362 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:05:56.445 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:06:03.249 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:06:07.321 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:06:07.342 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:06:07.344 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:06:08.755 +05:30 [INF] Received HTTP response headers after 1409.8466ms - 200
2025-08-28 10:06:08.757 +05:30 [INF] End processing HTTP request after 1415.4718ms - 200
2025-08-28 10:08:02.959 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:08:02.986 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:08:02.988 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:08:03.875 +05:30 [INF] Received HTTP response headers after 885.8978ms - 400
2025-08-28 10:08:03.877 +05:30 [INF] End processing HTTP request after 890.4461ms - 400
2025-08-28 10:08:03.878 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131009) Parameter value is not valid","type":"OAuthException","code":131009,"error_data":{"messaging_product":"whatsapp","details":"The number of non-webview related URL parameters was expected to be 1, but was instead found to be some other value."},"fbtrace_id":"AhV_LiL2Gv0NWBXp8roViw8"}}
2025-08-28 10:11:00.934 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:11:00.976 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:11:00.991 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:11:01.883 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:11:02.516 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:11:02.766 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:11:02.767 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:11:02.769 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:11:02.770 +05:30 [INF] Hosting environment: Development
2025-08-28 10:11:02.771 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:11:02.780 +05:30 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:11:02.804 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__cutoff_0='2025-08-21T04:41:01.0963799Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:11:07.888 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:11:08.118 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 238.9362ms
2025-08-28 10:11:08.145 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:11:08.155 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.1011ms
2025-08-28 10:11:08.227 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:11:08.278 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.7003ms
2025-08-28 10:11:08.482 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:11:08.842 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 360.2815ms
2025-08-28 10:11:12.955 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 10:11:12.963 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:11:13.022 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:13.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 71.874ms
2025-08-28 10:11:13.032 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 10:11:13.048 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:13.246 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 10:11:13.272 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 10:11:13.429 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 10:11:13.524 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 10:11:13.536 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:11:13.567 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 287.4969ms
2025-08-28 10:11:13.570 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 10:11:13.578 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 545.3236ms
2025-08-28 10:11:13.584 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 10:11:13.589 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:13.594 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 10:11:13.596 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 10:11:13.608 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 10:11:13.613 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:11:13.616 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.8203ms
2025-08-28 10:11:13.618 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 10:11:13.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.7259ms
2025-08-28 10:11:13.677 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 10:11:13.677 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 10:11:13.683 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:13.687 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:13.689 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 12.7985ms
2025-08-28 10:11:13.695 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 10:11:13.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 10:11:13.697 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 10:11:13.703 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:13.705 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 10:11:13.711 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 10:11:13.717 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:11:13.718 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:11:13.719 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.9391ms
2025-08-28 10:11:13.723 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 10:11:13.725 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 48.4935ms
2025-08-28 10:11:13.832 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 10:11:13.839 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 10:11:13.860 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 138.4653ms
2025-08-28 10:11:13.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 10:11:13.865 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 169.3404ms
2025-08-28 10:11:21.052 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:11:21.058 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:21.060 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 7.6169ms
2025-08-28 10:11:21.066 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:11:21.074 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:21.076 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:11:21.087 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:11:23.011 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 10:11:23.032 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:11:23.276 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:11:23.397 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:11:23.434 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:11:23.437 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:11:25.121 +05:30 [INF] Received HTTP response headers after 1678.6325ms - 200
2025-08-28 10:11:25.125 +05:30 [INF] End processing HTTP request after 1693.3442ms - 200
2025-08-28 10:11:25.320 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:11:25.349 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:11:25.352 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:11:26.119 +05:30 [INF] Received HTTP response headers after 765.7535ms - 400
2025-08-28 10:11:26.123 +05:30 [INF] End processing HTTP request after 774.0312ms - 400
2025-08-28 10:11:26.127 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"ASkdr7y82AvXPgIrEELADH2"}}
2025-08-28 10:11:26.477 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p0='bca9613f-1c0a-4359-bf7e-8f650171ad35', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:41:26.1356967Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"ASkdr7y82AvXPgIrEELADH2"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='5233299d-6bbb-4c06-82de-00c21b86bfb7', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:41:26.2052235Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='bca9613f-1c0a-4359-bf7e-8f650171ad35' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:41:26.2052778Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:11:26.507 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:11:26.516 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5425.2566ms
2025-08-28 10:11:26.518 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:11:26.519 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 5453.1606ms
2025-08-28 10:11:58.487 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:11:58.493 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:58.494 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 7.3194ms
2025-08-28 10:11:58.499 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:11:58.503 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:11:58.505 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:11:58.507 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:12:01.926 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:12:01.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:12:01.954 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:12:01.957 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:12:01.959 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:12:03.443 +05:30 [INF] Received HTTP response headers after 1483.1754ms - 200
2025-08-28 10:12:03.446 +05:30 [INF] End processing HTTP request after 1489.6206ms - 200
2025-08-28 10:12:03.481 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:12:03.485 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:12:03.486 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:12:04.092 +05:30 [INF] Received HTTP response headers after 604.3248ms - 400
2025-08-28 10:12:04.093 +05:30 [INF] End processing HTTP request after 608.6021ms - 400
2025-08-28 10:12:04.095 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AuxSzjbQmNpZssSO1B1t9sE"}}
2025-08-28 10:12:04.124 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@p0='7367a46e-7b7d-44ec-9bcc-8bc81de96ac7', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:42:04.0969313Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AuxSzjbQmNpZssSO1B1t9sE"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='16d0f121-6265-46ec-9462-917c227cea7f', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:42:04.0975301Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='7367a46e-7b7d-44ec-9bcc-8bc81de96ac7' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:42:04.0975302Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:12:04.206 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:12:04.209 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5700.4352ms
2025-08-28 10:12:04.211 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:12:04.213 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 5714.0861ms
2025-08-28 10:12:06.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:12:06.618 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:06.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 6.0519ms
2025-08-28 10:12:06.624 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:12:06.628 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:06.630 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:12:06.632 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:12:08.869 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:12:08.879 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:12:08.889 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:12:08.892 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:12:08.893 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:12:10.088 +05:30 [INF] Received HTTP response headers after 1193.5192ms - 200
2025-08-28 10:12:10.090 +05:30 [INF] End processing HTTP request after 1198.5219ms - 200
2025-08-28 10:12:10.096 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:12:10.099 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:12:10.101 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:12:10.692 +05:30 [INF] Received HTTP response headers after 589.4251ms - 400
2025-08-28 10:12:10.694 +05:30 [INF] End processing HTTP request after 595.1471ms - 400
2025-08-28 10:12:10.696 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AF5vTL3CPyrcQLrR0TVQCLr"}}
2025-08-28 10:12:10.715 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='2595cc9c-0056-44ba-b967-4a1c35740051', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:42:10.6990417Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AF5vTL3CPyrcQLrR0TVQCLr"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='0b97e773-978e-4d31-ab48-7591ed34ed7c', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:42:10.7000431Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='2595cc9c-0056-44ba-b967-4a1c35740051' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:42:10.7000464Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:12:10.720 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:12:10.722 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4087.6446ms
2025-08-28 10:12:10.723 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:12:10.725 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 4100.4736ms
2025-08-28 10:12:22.538 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 467
2025-08-28 10:12:22.543 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:12:22.548 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:12:22.578 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDNFODgxRTQwRDY1ODJFQzRGNgA=","timestamp":"1756356139","text":{"body":"hi"},"type":"text"}]},"field":"messages"}]}]}
2025-08-28 10:12:22.584 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:12:22.587 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType91`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:12:22.592 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 37.2336ms
2025-08-28 10:12:22.595 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:12:22.597 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 59.7501ms
2025-08-28 10:12:22.781 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhgWM0VCMDNFODgxRTQwRDY1ODJFQzRGNgA=","timestamp":"1756356139","text":{"body":"hi"},"type":"text"}]},"field":"messages"}]}]}
2025-08-28 10:12:22.786 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-08-28 10:12:22.818 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessNumber_0='15551622077'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w ON b."Id" = w."BusinessId"
WHERE w."WhatsAppBusinessNumber" = @__businessNumber_0
LIMIT 1
2025-08-28 10:12:22.826 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-08-28 10:12:25.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:12:25.711 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:25.713 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 6.4902ms
2025-08-28 10:12:25.725 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:12:25.729 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:25.731 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:12:25.733 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:12:27.431 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:12:27.439 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:12:27.446 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:12:27.448 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:12:27.450 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:12:29.130 +05:30 [INF] Received HTTP response headers after 1677.7237ms - 200
2025-08-28 10:12:29.132 +05:30 [INF] End processing HTTP request after 1683.4574ms - 200
2025-08-28 10:12:29.137 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:12:29.141 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:12:29.143 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:12:29.841 +05:30 [INF] Received HTTP response headers after 696.8094ms - 400
2025-08-28 10:12:29.844 +05:30 [INF] End processing HTTP request after 703.1583ms - 400
2025-08-28 10:12:29.846 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"Ack3AR_6oXw53UNzA5Ertaa"}}
2025-08-28 10:12:29.853 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='91375a04-aa3f-4402-bd70-e45e45847d23', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:42:29.8481993Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"Ack3AR_6oXw53UNzA5Ertaa"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='cafcea59-59e8-443c-9028-0e00db0dbb8a', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:42:29.8490170Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='91375a04-aa3f-4402-bd70-e45e45847d23' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:42:29.8490193Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:12:29.878 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:12:29.881 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4145.2732ms
2025-08-28 10:12:29.883 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:12:29.885 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 4159.8599ms
2025-08-28 10:12:45.419 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 10:12:45.428 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:45.435 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 16.1439ms
2025-08-28 10:12:45.446 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 10:12:45.450 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:45.453 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 10:12:45.460 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 10:12:45.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:12:45.479 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-28 10:12:45.490 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 28.353ms
2025-08-28 10:12:45.493 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 10:12:45.495 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 48.8988ms
2025-08-28 10:12:47.021 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-28 10:12:47.025 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:47.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 5.403ms
2025-08-28 10:12:47.045 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 382
2025-08-28 10:12:47.050 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:12:47.052 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 10:12:47.057 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 10:12:47.085 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 10:12:47.087 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 10:12:49.502 +05:30 [INF] Received HTTP response headers after 2413.8082ms - 200
2025-08-28 10:12:49.505 +05:30 [INF] End processing HTTP request after 2420.0578ms - 200
2025-08-28 10:12:49.514 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:12:49.518 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 2457.9674ms
2025-08-28 10:12:49.521 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 10:12:49.522 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 2477.1337ms
2025-08-28 10:13:44.578 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null null
2025-08-28 10:13:44.584 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:13:44.585 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 204 null null 7.0437ms
2025-08-28 10:13:44.597 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - null 0
2025-08-28 10:13:44.601 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:13:44.603 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:13:44.604 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:13:50.401 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__campaignId_0='8fdd3d73-d27b-4b0f-a242-7e16a74fd943'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:13:50.435 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:13:50.439 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:13:50.442 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:13:50.443 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:13:51.774 +05:30 [INF] Received HTTP response headers after 1329.3235ms - 200
2025-08-28 10:13:51.776 +05:30 [INF] End processing HTTP request after 1334.0123ms - 200
2025-08-28 10:13:51.785 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:13:51.788 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:13:51.790 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:13:52.830 +05:30 [INF] Received HTTP response headers after 1039.5868ms - 200
2025-08-28 10:13:52.837 +05:30 [INF] End processing HTTP request after 1048.7052ms - 200
2025-08-28 10:13:52.868 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='8f0f338a-1aa7-4d85-9971-63be17f2ec58', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='8fdd3d73-d27b-4b0f-a242-7e16a74fd943' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:43:52.8610254Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='url_tracking' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-28T04:43:52.8610257Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='f9599ebc-efbb-49f5-a2d8-79b96889d453', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='8fdd3d73-d27b-4b0f-a242-7e16a74fd943', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:43:52.8617569Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==', @p42='8f0f338a-1aa7-4d85-9971-63be17f2ec58' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='bef51883-174d-48cf-be6c-16e60a913312', @p45='0', @p46='Sent', @p47='2025-08-28T04:43:52.8617571Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='url_tracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:16:53.410 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:16:53.442 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 188834.9861ms
2025-08-28 10:16:53.453 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 10:16:53.455 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:16:53.453 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:16:53.486 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8fdd3d73-d27b-4b0f-a242-7e16a74fd943 - 200 null application/json; charset=utf-8 188889.0489ms
2025-08-28 10:16:53.508 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.526 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 10:16:53.534 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:53.566 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.490 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:16:53.598 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:53.619 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.624 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:53.485 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.467 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MCwiYnQiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsImlhdCI6MTc1NjM1NjIzMSwiZXhwIjoxNzU4OTQ4MjMxfQ.WXmbuxsWu2WGZgDqqSqGLX_0_GWgUYsZHGk-PD4nQ04 - null null
2025-08-28 10:16:53.633 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.6914ms
2025-08-28 10:16:53.633 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 45.1058ms
2025-08-28 10:16:53.653 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.658 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MCwiYnQiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsImlhdCI6MTc1NjM1NjIzMSwiZXhwIjoxNzU4OTQ4MjMxfQ.WXmbuxsWu2WGZgDqqSqGLX_0_GWgUYsZHGk-PD4nQ04 - 499 null null 191.1734ms
2025-08-28 10:16:53.631 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:53.657 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.635 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.0753ms
2025-08-28 10:16:53.463 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:16:53.790 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.776 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 30.7607ms
2025-08-28 10:16:53.815 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.859 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.479 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 10:16:53.881 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:53.486 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:16:53.935 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.498 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MSwiYnQiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzU2MjMxLCJleHAiOjE3NTg5NDgyMzF9.fei-29OXyANxOqETfnEm2BwDky9j5LI_HxVmuxVIKHg - null null
2025-08-28 10:16:53.508 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 10:16:53.943 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.6693ms
2025-08-28 10:16:53.946 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:53.944 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.967 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.974 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:53.977 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.881ms
2025-08-28 10:16:53.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.028 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.029 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.032 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 28.2955ms
2025-08-28 10:16:53.520 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:16:54.097 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.518 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:16:54.098 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 33.6037ms
2025-08-28 10:16:54.105 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.537 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:16:53.548 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:16:53.558 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MCwiYnQiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsImlhdCI6MTc1NjM1NjIzMSwiZXhwIjoxNzU4OTQ4MjMxfQ.WXmbuxsWu2WGZgDqqSqGLX_0_GWgUYsZHGk-PD4nQ04 - null null
2025-08-28 10:16:53.569 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 10:16:53.743 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:53.803 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:53.881 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:53.934 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.213 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 687.0296ms
2025-08-28 10:16:54.213 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 759.6573ms
2025-08-28 10:16:54.220 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 729.7538ms
2025-08-28 10:16:54.229 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 776.0851ms
2025-08-28 10:16:54.187 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MCwiYnQiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsImlhdCI6MTc1NjM1NjIzMSwiZXhwIjoxNzU4OTQ4MjMxfQ.WXmbuxsWu2WGZgDqqSqGLX_0_GWgUYsZHGk-PD4nQ04 - 404 0 null 629.0202ms
2025-08-28 10:16:54.028 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.094 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.254 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MCwiYnQiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsImlhdCI6MTc1NjM1NjIzMSwiZXhwIjoxNzU4OTQ4MjMxfQ.WXmbuxsWu2WGZgDqqSqGLX_0_GWgUYsZHGk-PD4nQ04, Response status code: 404
2025-08-28 10:16:54.166 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.268 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 805.9847ms
2025-08-28 10:16:54.279 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 800.2706ms
2025-08-28 10:16:54.297 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 811.2064ms
2025-08-28 10:16:54.168 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.170 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.171 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.175 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.379 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.383 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 19.3962ms
2025-08-28 10:16:54.385 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.400 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.402 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 894.2175ms
2025-08-28 10:16:54.386 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.0595ms
2025-08-28 10:16:54.464 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.438 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 35.176ms
2025-08-28 10:16:54.179 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.469 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.487 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.490 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 969.6713ms
2025-08-28 10:16:54.554 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.489 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.188 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.626 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 1108.3163ms
2025-08-28 10:16:54.609 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.629 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.6459ms
2025-08-28 10:16:54.626 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.644 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.646 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 1109.021ms
2025-08-28 10:16:54.664 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 16.4587ms
2025-08-28 10:16:53.580 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:16:54.699 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:53.590 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:16:54.704 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.709 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.724 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 1175.5639ms
2025-08-28 10:16:54.741 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.782 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.724 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:53.600 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 10:16:54.793 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8136ms
2025-08-28 10:16:54.802 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:16:54.806 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 1237.1973ms
2025-08-28 10:16:54.811 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.817 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.4217ms
2025-08-28 10:16:54.808 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:16:54.851 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:16:54.854 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 1255.7598ms
2025-08-28 10:16:54.877 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:54.925 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 10:16:54.938 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_11>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 820
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 10:16:53.743 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MCwiYnQiOiJWaWV3IERlbW8iLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3Nob3J0cy9xQmJXZndsSUpkZyIsImlhdCI6MTc1NjM1NjIzMSwiZXhwIjoxNzU4OTQ4MjMxfQ.WXmbuxsWu2WGZgDqqSqGLX_0_GWgUYsZHGk-PD4nQ04, Response status code: 499
2025-08-28 10:16:53.955 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MSwiYnQiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzU2MjMxLCJleHAiOjE3NTg5NDgyMzF9.fei-29OXyANxOqETfnEm2BwDky9j5LI_HxVmuxVIKHg - 404 0 null 457.7263ms
2025-08-28 10:16:54.952 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 1371.3883ms
2025-08-28 10:16:54.951 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:16:54.964 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 1374.1133ms
2025-08-28 10:16:54.969 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/eyJjaWQiOiJmOTU5OWViYy1lZmJiLTQ5ZjUtYTJkOC03OWI5Njg4OWQ0NTMiLCJiaSI6MSwiYnQiOiJWaXNpdCB3ZWJzaXRlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzU2MjMxLCJleHAiOjE3NTg5NDgyMzF9.fei-29OXyANxOqETfnEm2BwDky9j5LI_HxVmuxVIKHg, Response status code: 404
2025-08-28 10:16:54.976 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 10:16:54.986 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:16:54.994 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 10:16:55.001 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 10:16:55.004 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 14.7104ms
2025-08-28 10:16:55.006 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 10:16:55.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 83.3604ms
2025-08-28 10:16:57.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:16:57.194 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:16:57.195 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 3.9186ms
2025-08-28 10:16:57.198 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:16:57.201 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:16:57.203 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:16:57.204 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:16:59.461 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:16:59.474 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:16:59.479 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:16:59.482 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:16:59.484 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:17:00.606 +05:30 [INF] Received HTTP response headers after 1120.87ms - 200
2025-08-28 10:17:00.608 +05:30 [INF] End processing HTTP request after 1125.5847ms - 200
2025-08-28 10:17:00.615 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:17:00.621 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:17:00.623 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:17:01.639 +05:30 [INF] Received HTTP response headers after 1014.455ms - 400
2025-08-28 10:17:01.642 +05:30 [INF] End processing HTTP request after 1020.357ms - 400
2025-08-28 10:17:01.643 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AIy1scjMyBYPMdxTU2P871a"}}
2025-08-28 10:17:01.649 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='196cfafc-b3ef-43d7-ab31-bd81ea318c4f', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:47:01.6454616Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AIy1scjMyBYPMdxTU2P871a"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='08eb20fe-16a4-4645-ab11-cb78aa81291f', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:47:01.6456891Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='196cfafc-b3ef-43d7-ab31-bd81ea318c4f' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:47:01.6456892Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:17:01.653 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:17:01.655 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4449.6523ms
2025-08-28 10:17:01.657 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:17:01.659 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 4460.7356ms
2025-08-28 10:17:28.639 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:17:28.645 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:17:28.646 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 7.3897ms
2025-08-28 10:17:28.666 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:17:28.670 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:17:28.672 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:17:28.674 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:17:30.964 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:17:30.981 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:17:30.994 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:17:30.998 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:17:31.001 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:17:31.949 +05:30 [INF] Received HTTP response headers after 946.023ms - 200
2025-08-28 10:17:31.950 +05:30 [INF] End processing HTTP request after 951.8313ms - 200
2025-08-28 10:17:31.960 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:17:31.964 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:17:31.968 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:17:32.451 +05:30 [INF] Received HTTP response headers after 481.1223ms - 400
2025-08-28 10:17:32.461 +05:30 [INF] End processing HTTP request after 496.8047ms - 400
2025-08-28 10:17:32.463 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AXZ9XCyST3f9jB-ZvNfJVna"}}
2025-08-28 10:17:32.471 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='170dec41-d2d1-4d19-9558-157b024759b0', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:47:32.4651716Z' (DbType = DateTime), @p7='❌ WhatsApp API returned an error.', @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11=NULL, @p12='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"buttons: Button at index 0 of type Url requires a parameter"},"fbtrace_id":"AXZ9XCyST3f9jB-ZvNfJVna"}}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16=NULL (DbType = DateTime), @p17='campaign', @p18='Failed' (Nullable = false), @p19='efbb53f5-5f4a-4d70-a52e-cb4cd683cd5a', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:47:32.4656501Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34='❌ WhatsApp API returned an error.', @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41=NULL, @p42='170dec41-d2d1-4d19-9558-157b024759b0' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Failed', @p47='2025-08-28T04:47:32.4656502Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:17:32.476 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:17:32.479 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3801.7819ms
2025-08-28 10:17:32.481 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:17:32.483 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 3816.7244ms
2025-08-28 10:22:47.093 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:22:47.141 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:22:47.156 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:22:47.971 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:22:48.503 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:22:48.762 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:22:48.776 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:22:48.777 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:22:48.779 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:22:48.780 +05:30 [INF] Hosting environment: Development
2025-08-28 10:22:48.781 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:22:48.784 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@__cutoff_0='2025-08-21T04:52:47.2580126Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:22:54.348 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:22:54.518 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 178.7221ms
2025-08-28 10:22:54.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:22:54.557 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.6028ms
2025-08-28 10:22:54.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:22:54.670 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.843ms
2025-08-28 10:22:54.943 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:22:55.234 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 290.3618ms
2025-08-28 10:22:59.483 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:22:59.488 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:22:59.528 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:22:59.531 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 47.992ms
2025-08-28 10:22:59.540 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:22:59.549 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:22:59.674 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:22:59.693 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:23:08.692 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:23:08.696 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:08.699 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:23:08.712 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"delivered","timestamp":"1756356239","recipient_id":"918974005240","conversation":{"id":"72c0f0d62f018ea5d17f2272fba47b5a","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:08.714 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:23:08.719 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:23:08.730 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 26.9988ms
2025-08-28 10:23:08.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:08.733 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 41.0523ms
2025-08-28 10:23:08.787 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 10:23:08.809 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:23:08.825 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"delivered","timestamp":"1756356239","recipient_id":"918974005240","conversation":{"id":"72c0f0d62f018ea5d17f2272fba47b5a","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:08.826 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:23:08.827 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"delivered","timestamp":"1756356239","recipient_id":"918974005240","conversation":{"id":"72c0f0d62f018ea5d17f2272fba47b5a","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:08.841 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:23:08.896 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='f9599ebc-efbb-49f5-a2d8-79b96889d453'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:23:08.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:23:08.989 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p2='f9599ebc-efbb-49f5-a2d8-79b96889d453', @p0='2025-08-28T04:43:59.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 10:23:09.005 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA== → delivered
2025-08-28 10:23:09.028 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:23:09.050 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:23:09.052 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:23:10.299 +05:30 [INF] Received HTTP response headers after 1243.5461ms - 200
2025-08-28 10:23:10.301 +05:30 [INF] End processing HTTP request after 1251.4151ms - 200
2025-08-28 10:23:10.399 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:23:10.415 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:23:10.416 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:23:11.564 +05:30 [INF] Received HTTP response headers after 1147.4572ms - 200
2025-08-28 10:23:11.565 +05:30 [INF] End processing HTTP request after 1150.3445ms - 200
2025-08-28 10:23:11.682 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='ccba90d5-7ed9-4977-96e7-854567d891b5', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:53:11.5704125Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-28T04:53:11.5704520Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:53:11.6093683Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==', @p42='ccba90d5-7ed9-4977-96e7-854567d891b5' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Sent', @p47='2025-08-28T04:53:11.6094090Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:23:17.622 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:23:17.630 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 17935.2006ms
2025-08-28 10:23:17.632 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:23:17.636 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 18096.0053ms
2025-08-28 10:23:18.561 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 10:23:18.567 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:18.568 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:23:18.573 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"sent","timestamp":"1756356796","recipient_id":"918974005240","conversation":{"id":"0f8d2ee33db6be5cbe73ee96ae4aaedd","expiration_timestamp":"1756356796","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:18.575 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:23:18.576 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:23:18.577 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.8615ms
2025-08-28 10:23:18.577 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"sent","timestamp":"1756356796","recipient_id":"918974005240","conversation":{"id":"0f8d2ee33db6be5cbe73ee96ae4aaedd","expiration_timestamp":"1756356796","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:18.579 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:18.580 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:23:18.581 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.576ms
2025-08-28 10:23:18.582 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"sent","timestamp":"1756356796","recipient_id":"918974005240","conversation":{"id":"0f8d2ee33db6be5cbe73ee96ae4aaedd","expiration_timestamp":"1756356796","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:18.592 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:23:18.597 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:23:18.600 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA== → sent
2025-08-28 10:23:19.259 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:23:19.262 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:19.263 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:23:19.267 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"delivered","timestamp":"1756356797","recipient_id":"918974005240","conversation":{"id":"0f8d2ee33db6be5cbe73ee96ae4aaedd","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:19.268 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:23:19.282 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:23:19.290 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 25.1679ms
2025-08-28 10:23:22.225 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:22.226 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 2966.7212ms
2025-08-28 10:23:22.231 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"delivered","timestamp":"1756356797","recipient_id":"918974005240","conversation":{"id":"0f8d2ee33db6be5cbe73ee96ae4aaedd","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:22.233 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:23:22.234 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"delivered","timestamp":"1756356797","recipient_id":"918974005240","conversation":{"id":"0f8d2ee33db6be5cbe73ee96ae4aaedd","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:23:22.237 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:23:22.242 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:23:22.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e', @p0='2025-08-28T04:53:17.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 10:23:22.249 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA== → delivered
2025-08-28 10:23:28.888 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:23:28.891 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:28.892 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:23:28.894 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"read","timestamp":"1756356806","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:23:28.895 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:23:28.896 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"read","timestamp":"1756356806","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:23:28.896 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:23:28.897 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:23:28.898 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.889ms
2025-08-28 10:23:28.899 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA==","status":"read","timestamp":"1756356806","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:23:28.900 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:28.903 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.6713ms
2025-08-28 10:23:28.904 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:23:28.912 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:23:28.917 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e', @p0='2025-08-28T04:53:26.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 10:23:28.921 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA== → read
2025-08-28 10:23:42.719 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:23:42.722 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:42.722 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:23:42.724 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"read","timestamp":"1756356250","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:23:42.726 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:23:42.726 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"read","timestamp":"1756356250","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:23:42.726 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:23:42.727 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:23:42.729 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8174ms
2025-08-28 10:23:42.729 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"read","timestamp":"1756356250","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:23:42.730 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:23:42.732 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.3316ms
2025-08-28 10:23:42.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:23:42.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='f9599ebc-efbb-49f5-a2d8-79b96889d453'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:23:42.743 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='f9599ebc-efbb-49f5-a2d8-79b96889d453', @p0='2025-08-28T04:44:10.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 10:23:42.745 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA== → read
2025-08-28 10:23:43.849 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njc5MCwiZXhwIjoxNzU4OTQ4NzkwfQ.HNKZ2khpnm4sSbQp1p1Gk1u5z2i6Z7IU-08q_ALKXbs - null null
2025-08-28 10:23:43.856 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njc5MCwiZXhwIjoxNzU4OTQ4NzkwfQ.HNKZ2khpnm4sSbQp1p1Gk1u5z2i6Z7IU-08q_ALKXbs - 404 0 null 6.3982ms
2025-08-28 10:23:43.860 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njc5MCwiZXhwIjoxNzU4OTQ4NzkwfQ.HNKZ2khpnm4sSbQp1p1Gk1u5z2i6Z7IU-08q_ALKXbs, Response status code: 404
2025-08-28 10:23:50.131 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY3OTAsImV4cCI6MTc1ODk0ODc5MH0.BtNNh-qXI3gIfnnE2xblFHRUMdUxtotDGHNL8CWm_9g - null null
2025-08-28 10:23:50.136 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY3OTAsImV4cCI6MTc1ODk0ODc5MH0.BtNNh-qXI3gIfnnE2xblFHRUMdUxtotDGHNL8CWm_9g - 404 0 null 5.0235ms
2025-08-28 10:23:50.140 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY3OTAsImV4cCI6MTc1ODk0ODc5MH0.BtNNh-qXI3gIfnnE2xblFHRUMdUxtotDGHNL8CWm_9g, Response status code: 404
2025-08-28 10:23:57.772 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njc5MCwiZXhwIjoxNzU4OTQ4NzkwfQ.HNKZ2khpnm4sSbQp1p1Gk1u5z2i6Z7IU-08q_ALKXbs - null null
2025-08-28 10:23:57.777 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njc5MCwiZXhwIjoxNzU4OTQ4NzkwfQ.HNKZ2khpnm4sSbQp1p1Gk1u5z2i6Z7IU-08q_ALKXbs - 404 0 null 4.8459ms
2025-08-28 10:23:57.781 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI4OGZiZWVjNS00YTdiLTQyNGQtYmJmNS1hNTdlZDY0MDVhNmUiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njc5MCwiZXhwIjoxNzU4OTQ4NzkwfQ.HNKZ2khpnm4sSbQp1p1Gk1u5z2i6Z7IU-08q_ALKXbs, Response status code: 404
2025-08-28 10:24:10.681 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null null
2025-08-28 10:24:10.683 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:24:10.684 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 204 null null 3.2369ms
2025-08-28 10:24:10.687 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - null 0
2025-08-28 10:24:10.689 +05:30 [INF] CORS policy execution successful.
2025-08-28 10:24:10.691 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:24:10.692 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 10:24:12.167 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 10:24:12.173 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:24:12.177 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 10:24:12.180 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:24:12.181 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 10:24:14.452 +05:30 [INF] Received HTTP response headers after 2269.7882ms - 200
2025-08-28 10:24:14.454 +05:30 [INF] End processing HTTP request after 2273.9038ms - 200
2025-08-28 10:24:14.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 10:24:14.472 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:24:14.473 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 10:24:15.231 +05:30 [INF] Received HTTP response headers after 757.1115ms - 200
2025-08-28 10:24:15.232 +05:30 [INF] End processing HTTP request after 760.058ms - 200
2025-08-28 10:24:15.238 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='529962e1-809c-4cd9-b735-0e79353dfa9f', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='f647c2fb-958c-4695-b51c-d4401cb1741d' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T04:54:15.2337911Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='build_urltracking' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-28T04:54:15.2337912Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='d0de4a34-a944-4422-b910-c99aec403a4a', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='f647c2fb-958c-4695-b51c-d4401cb1741d', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T04:54:15.2341193Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==', @p42='529962e1-809c-4cd9-b735-0e79353dfa9f' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='c8555dab-8341-4573-a1f7-e8d00e85d857', @p45='0', @p46='Sent', @p47='2025-08-28T04:54:15.2341194Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='build_urltracking', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 10:24:20.403 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 10:24:20.405 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 9711.6753ms
2025-08-28 10:24:20.406 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 10:24:20.407 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f647c2fb-958c-4695-b51c-d4401cb1741d - 200 null application/json; charset=utf-8 9720.4496ms
2025-08-28 10:24:22.750 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 10:24:22.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:22.753 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:24:22.755 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"sent","timestamp":"1756356860","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","expiration_timestamp":"1756356860","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:22.756 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:24:22.756 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"sent","timestamp":"1756356860","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","expiration_timestamp":"1756356860","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:22.756 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:24:22.757 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:24:22.759 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.1851ms
2025-08-28 10:24:22.759 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"sent","timestamp":"1756356860","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","expiration_timestamp":"1756356860","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:22.760 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:22.762 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.7048ms
2025-08-28 10:24:22.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:24:22.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:24:22.771 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA== → sent
2025-08-28 10:24:23.297 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:24:23.300 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:23.300 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:24:23.302 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"delivered","timestamp":"1756356861","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:23.303 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:24:23.304 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"delivered","timestamp":"1756356861","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:23.304 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:24:23.305 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:24:23.306 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3697ms
2025-08-28 10:24:23.307 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"delivered","timestamp":"1756356861","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:23.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:23.310 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.5943ms
2025-08-28 10:24:23.310 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:24:23.316 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:24:23.320 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='d0de4a34-a944-4422-b910-c99aec403a4a', @p0='2025-08-28T04:54:21.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 10:24:23.321 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA== → delivered
2025-08-28 10:24:23.388 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 10:24:23.390 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:23.391 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:24:23.393 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"delivered","timestamp":"1756356861","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:23.395 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:24:23.395 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"delivered","timestamp":"1756356861","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:23.395 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:24:23.397 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:24:23.398 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0949ms
2025-08-28 10:24:23.398 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"delivered","timestamp":"1756356861","recipient_id":"918974005240","conversation":{"id":"19f908332f9b26f8aa126b9ca0b1992b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 10:24:23.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:23.400 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.9353ms
2025-08-28 10:24:23.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:24:23.406 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:24:23.408 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA== → delivered
2025-08-28 10:24:29.698 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 10:24:29.701 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:29.702 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 10:24:29.704 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"read","timestamp":"1756356867","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:24:29.705 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 10:24:29.706 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"read","timestamp":"1756356867","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:24:29.706 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 10:24:29.707 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 10:24:29.709 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.9265ms
2025-08-28 10:24:29.709 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA==","status":"read","timestamp":"1756356867","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 10:24:29.710 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 10:24:29.712 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.0652ms
2025-08-28 10:24:29.713 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 10:24:29.720 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 10:24:29.743 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p2='d0de4a34-a944-4422-b910-c99aec403a4a', @p0='2025-08-28T04:54:27.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 10:24:29.745 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA== → read
2025-08-28 10:24:30.505 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:24:30.509 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 404 0 null 4.8484ms
2025-08-28 10:24:30.513 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA, Response status code: 404
2025-08-28 10:25:09.050 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:25:09.072 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 404 0 null 21.8308ms
2025-08-28 10:25:09.075 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA, Response status code: 404
2025-08-28 10:25:19.245 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 10:25:19.250 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 404 0 null 4.6009ms
2025-08-28 10:25:19.252 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s, Response status code: 404
2025-08-28 10:32:06.703 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:32:06.736 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:32:06.750 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:32:07.532 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:32:08.051 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:32:08.281 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:32:08.283 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:32:08.284 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:32:08.285 +05:30 [INF] Hosting environment: Development
2025-08-28 10:32:08.286 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:32:08.293 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:32:08.330 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[@__cutoff_0='2025-08-21T05:02:06.8413888Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:32:15.242 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:32:15.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 163.8848ms
2025-08-28 10:32:15.418 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:32:15.428 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.9707ms
2025-08-28 10:32:15.493 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:32:15.535 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.7ms
2025-08-28 10:32:15.740 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:32:15.943 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 203.6094ms
2025-08-28 10:32:21.745 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:32:21.753 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:32:21.831 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:32:21.844 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:32:21.942 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:32:21.948 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 10:32:21.953 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 104.6646ms
2025-08-28 10:32:21.954 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:32:21.961 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 216.3262ms
2025-08-28 10:32:22.042 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='d7e57f05-076d-41a2-a988-2f615e87bc41', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='2025-08-28T05:02:21.8758936Z' (DbType = DateTime), @p6=NULL (DbType = Guid), @p7='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p8='::1' (Nullable = false), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-28 10:32:22.085 +05:30 [ERR] Failed executing DbCommand (23ms) [Parameters=[@p0='00000000-0000-0000-0000-000000000000', @p1='2025-08-28T00:00:00.0000000Z' (DbType = DateTime), @p2='0', @p3='1'], CommandType='"Text"', CommandTimeout='30']

insert into "CampaignClickDailyAgg" ("CampaignId", "Day", "ButtonIndex", "Clicks")
values (@p0, @p1, @p2, @p3)
on conflict ("CampaignId", "Day", "ButtonIndex")
do update set "Clicks" = "CampaignClickDailyAgg"."Clicks" + @p3;
2025-08-28 10:32:22.206 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:32:22.287 +05:30 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:32:22.296 +05:30 [INF] Application is shutting down...
2025-08-28 10:32:22.371 +05:30 [INF] 🛑 Graceful shutdown requested.
2025-08-28 10:32:22.372 +05:30 [INF] 🛑 Webhook Queue Worker stopped.
2025-08-28 10:34:24.617 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:34:24.686 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:34:24.706 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:34:25.489 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:34:26.016 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:34:26.193 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:34:26.194 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:34:26.195 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:34:26.196 +05:30 [INF] Hosting environment: Development
2025-08-28 10:34:26.197 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:34:26.206 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:34:26.225 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[@__cutoff_0='2025-08-21T05:04:24.8162211Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:34:33.059 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:34:33.247 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 195.8515ms
2025-08-28 10:34:33.366 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:34:33.366 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:34:33.376 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.6427ms
2025-08-28 10:34:33.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.8866ms
2025-08-28 10:34:33.675 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:34:34.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 351.2219ms
2025-08-28 10:34:39.670 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:34:39.679 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:34:39.759 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:34:39.778 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:34:39.897 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:34:39.908 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 10:34:39.917 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 131.8244ms
2025-08-28 10:34:39.920 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:34:39.930 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 260.2865ms
2025-08-28 10:34:40.057 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='67419915-e3d7-488e-a28c-7b5fa669c52d', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='2025-08-28T05:04:39.8193061Z' (DbType = DateTime), @p6=NULL (DbType = Guid), @p7='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p8='::1' (Nullable = false), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-28 10:34:40.087 +05:30 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='00000000-0000-0000-0000-000000000000', @p1='2025-08-28T00:00:00.0000000Z' (DbType = DateTime), @p2='0', @p3='1'], CommandType='"Text"', CommandTimeout='30']

insert into "CampaignClickDailyAgg" ("CampaignId", "Day", "ButtonIndex", "Clicks")
values (@p0, @p1, @p2, @p3)
on conflict ("CampaignId", "Day", "ButtonIndex")
do update set "Clicks" = "CampaignClickDailyAgg"."Clicks" + @p3;
2025-08-28 10:34:40.193 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:34:40.242 +05:30 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:34:40.250 +05:30 [INF] Application is shutting down...
2025-08-28 10:34:40.344 +05:30 [INF] 🛑 Graceful shutdown requested.
2025-08-28 10:34:40.346 +05:30 [INF] 🛑 Webhook Queue Worker stopped.
2025-08-28 10:35:02.238 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:35:02.318 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:35:02.339 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:35:03.165 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:35:03.637 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:35:03.857 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:35:03.858 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:35:03.859 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:35:03.860 +05:30 [INF] Hosting environment: Development
2025-08-28 10:35:03.861 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:35:03.870 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:35:03.887 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[@__cutoff_0='2025-08-21T05:05:02.4563388Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:35:09.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:35:09.351 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 184.8283ms
2025-08-28 10:35:09.369 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:35:09.378 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7267ms
2025-08-28 10:35:09.435 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:35:09.474 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.111ms
2025-08-28 10:35:09.608 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:35:09.809 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.1108ms
2025-08-28 10:35:14.073 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:35:14.083 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:35:14.175 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:35:14.193 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:35:14.321 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:35:14.331 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 10:35:14.338 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 138.7476ms
2025-08-28 10:35:14.340 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:35:14.348 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 275.668ms
2025-08-28 10:35:14.456 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@p0='8d6f7ef4-959d-4c1a-b4e0-27d1f12a409d', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='2025-08-28T05:05:14.2430811Z' (DbType = DateTime), @p6=NULL (DbType = Guid), @p7='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p8='::1' (Nullable = false), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-28 10:35:14.486 +05:30 [ERR] Failed executing DbCommand (9ms) [Parameters=[@p0='00000000-0000-0000-0000-000000000000', @p1='2025-08-28T00:00:00.0000000Z' (DbType = DateTime), @p2='0', @p3='1'], CommandType='"Text"', CommandTimeout='30']

insert into "CampaignClickDailyAgg" ("CampaignId", "Day", "ButtonIndex", "Clicks")
values (@p0, @p1, @p2, @p3)
on conflict ("CampaignId", "Day", "ButtonIndex")
do update set "Clicks" = "CampaignClickDailyAgg"."Clicks" + @p3;
2025-08-28 10:35:14.614 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:35:14.733 +05:30 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:35:14.749 +05:30 [INF] Application is shutting down...
2025-08-28 10:35:14.897 +05:30 [INF] 🛑 Graceful shutdown requested.
2025-08-28 10:35:14.898 +05:30 [INF] 🛑 Webhook Queue Worker stopped.
2025-08-28 10:36:43.089 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:36:43.144 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:36:43.163 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:36:44.314 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:36:44.929 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:36:45.295 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:36:45.296 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:36:45.298 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:36:45.299 +05:30 [INF] Hosting environment: Development
2025-08-28 10:36:45.300 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:36:45.313 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:36:45.337 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@__cutoff_0='2025-08-21T05:06:43.3002054Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:36:52.596 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:36:52.775 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 184.6261ms
2025-08-28 10:36:52.798 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:36:52.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.8312ms
2025-08-28 10:36:52.865 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:36:52.904 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.9329ms
2025-08-28 10:36:53.125 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:36:53.300 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.3034ms
2025-08-28 10:36:57.327 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 10:36:57.333 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:36:57.396 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:36:57.409 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:36:57.500 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:36:57.507 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 10:36:57.513 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 99.1402ms
2025-08-28 10:36:57.515 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:36:57.522 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 195.713ms
2025-08-28 10:36:57.622 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='cc045bd0-a97f-4c55-9e7a-049af9a74b13', @p1='1', @p2='Explore More' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='2025-08-28T05:06:57.4417377Z' (DbType = DateTime), @p6=NULL (DbType = Guid), @p7='https://www.youtube.com/watch?v=mbCsdfd-N4E' (Nullable = false), @p8='::1' (Nullable = false), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-28 10:36:57.654 +05:30 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='00000000-0000-0000-0000-000000000000', @p1='2025-08-28T00:00:00.0000000Z' (DbType = DateTime), @p2='1', @p3='1'], CommandType='"Text"', CommandTimeout='30']

insert into "CampaignClickDailyAgg" ("CampaignId", "Day", "ButtonIndex", "Clicks")
values (@p0, @p1, @p2, @p3)
on conflict ("CampaignId", "Day", "ButtonIndex")
do update set "Clicks" = "CampaignClickDailyAgg"."Clicks" + @p3;
2025-08-28 10:36:57.763 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:36:57.832 +05:30 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:36:57.842 +05:30 [INF] Application is shutting down...
2025-08-28 10:36:57.937 +05:30 [INF] 🛑 Graceful shutdown requested.
2025-08-28 10:36:57.938 +05:30 [INF] 🛑 Webhook Queue Worker stopped.
2025-08-28 10:40:45.514 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 10:40:45.553 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 10:40:45.575 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 10:40:46.449 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 10:40:47.003 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 10:40:47.241 +05:30 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 10:40:47.281 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__cutoff_0='2025-08-21T05:10:45.7483017Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 10:40:47.294 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 10:40:47.295 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 10:40:47.297 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 10:40:47.298 +05:30 [INF] Hosting environment: Development
2025-08-28 10:40:47.299 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 10:40:52.848 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 10:40:53.114 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 277.3865ms
2025-08-28 10:40:53.248 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 10:40:53.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 10:40:53.256 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.934ms
2025-08-28 10:40:53.303 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.4262ms
2025-08-28 10:40:53.521 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 10:40:53.905 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 383.9212ms
2025-08-28 10:41:09.311 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:41:09.322 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 10:41:09.426 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:09.452 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:41:09.570 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:41:09.583 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 10:41:09.591 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 131.0102ms
2025-08-28 10:41:09.594 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:09.604 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 293.3317ms
2025-08-28 10:41:09.766 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p0='f9919e6d-dcb2-4e27-b929-435a6d704acb', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='2025-08-28T05:11:09.4986813Z' (DbType = DateTime), @p6=NULL (DbType = Guid), @p7='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p8='::1' (Nullable = false), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-28 10:41:09.814 +05:30 [ERR] Failed executing DbCommand (23ms) [Parameters=[@p0='00000000-0000-0000-0000-000000000000', @p1='2025-08-28T00:00:00.0000000Z' (DbType = DateTime), @p2='0', @p3='1'], CommandType='"Text"', CommandTimeout='30']

insert into "CampaignClickDailyAgg" ("CampaignId", "Day", "ButtonIndex", "Clicks")
values (@p0, @p1, @p2, @p3)
on conflict ("CampaignId", "Day", "ButtonIndex")
do update set "Clicks" = "CampaignClickDailyAgg"."Clicks" + @p3;
2025-08-28 10:41:09.927 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 23502: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQueryAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.ExecuteSqlRawAsync(DatabaseFacade databaseFacade, String sql, IEnumerable`1 parameters, CancellationToken cancellationToken)
   at ClickLogWorker.FlushBufferAsync(List`1 batch, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 84
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 50
   at ClickLogWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Worker\ClickLogWorker.cs:line 33
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "Id" of relation "CampaignClickDailyAgg" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: CampaignClickDailyAgg
    ColumnName: Id
    File: execMain.c
    Line: 2012
    Routine: ExecConstraints
2025-08-28 10:41:17.551 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 10:41:17.557 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:17.559 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:41:17.578 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:41:17.581 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 10:41:17.583 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 21.5157ms
2025-08-28 10:41:17.584 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:17.586 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 35.3475ms
2025-08-28 10:41:33.323 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:41:33.331 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:33.333 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:41:33.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:41:33.343 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 10:41:33.344 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 8.9453ms
2025-08-28 10:41:33.346 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:33.347 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 24.5309ms
2025-08-28 10:41:36.364 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 10:41:36.370 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:36.371 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:41:36.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:41:36.379 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 10:41:36.381 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 7.5752ms
2025-08-28 10:41:36.382 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:41:36.383 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 19.7855ms
2025-08-28 10:44:11.449 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 10:44:11.464 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:44:11.465 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:44:11.473 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:44:11.480 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 10:44:11.481 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 13.798ms
2025-08-28 10:44:11.482 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:44:11.483 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 35.0395ms
2025-08-28 10:44:49.068 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 10:44:49.080 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:44:49.082 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:44:49.091 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:44:49.095 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 10:44:49.096 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 11.4015ms
2025-08-28 10:44:49.098 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:44:49.100 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 32.5673ms
2025-08-28 10:45:07.013 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:45:07.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:45:07.024 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:45:07.034 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:45:07.037 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 10:45:07.038 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 11.2065ms
2025-08-28 10:45:07.041 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:45:07.044 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 30.5385ms
2025-08-28 10:46:25.976 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 10:46:25.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:46:25.987 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 10:46:59.582 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 10:47:07.585 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 41595.1322ms
2025-08-28 10:47:07.588 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 10:47:06.733 +05:30 [ERR] Connection id "0HNF5U4VPHRFO", Request id "0HNF5U4VPHRFO:00000003": An unhandled exception was thrown by the application.
System.InvalidOperationException: Can't close, connection is in state Connecting
   at Npgsql.NpgsqlConnection.Close(Boolean async)
   at Npgsql.NpgsqlConnection.CloseAsync()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.CloseDbConnectionAsync()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.ResetStateAsync(Boolean disposeDbConnection)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.<DisposeAsync>g__Await|26_0(Int32 i, ValueTask vt, List`1 toDispose)
   at Microsoft.EntityFrameworkCore.DbContext.DisposeAsync()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.<DisposeAsync>g__Await|26_0(Int32 i, ValueTask vt, List`1 toDispose)
   at Microsoft.AspNetCore.Http.Features.RequestServicesFeature.<DisposeAsync>g__Awaited|9_0(RequestServicesFeature servicesFeature, ValueTask vt)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.<FireOnCompleted>g__ProcessEvents|242_0(HttpProtocol protocol, Stack`1 events)
2025-08-28 10:47:07.616 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 200 0 null 41640.6463ms
2025-08-28 10:47:07.619 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/favicon.ico - null null
2025-08-28 10:47:07.626 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/favicon.ico - 404 0 null 6.3269ms
2025-08-28 10:47:07.631 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/favicon.ico, Response status code: 404
2025-08-28 10:50:23.604 +05:30 [ERR] Unobserved task exception
System.AggregateException: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread. (Cannot access a disposed object.
Object name: 'IServiceProvider'.)
 ---> System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'IServiceProvider'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ThrowHelper.ThrowObjectDisposedException()
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.AspNetCore.Mvc.RedirectResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   --- End of inner exception stack trace ---
2025-08-28 11:31:01.567 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 11:31:01.646 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 11:31:01.668 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 11:31:04.720 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 11:31:05.203 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 11:31:05.226 +05:30 [INF] ClickLogWorker started
2025-08-28 11:31:05.505 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 11:31:05.506 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 11:31:05.508 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 11:31:05.509 +05:30 [INF] Hosting environment: Development
2025-08-28 11:31:05.510 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 11:31:05.517 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 11:31:05.534 +05:30 [INF] Executed DbCommand (41ms) [Parameters=[@__cutoff_0='2025-08-21T06:01:04.1281083Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 11:31:06.277 +05:30 [INF] ClickLogWorker stopped
2025-08-28 11:31:11.654 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 11:31:11.998 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 351.2396ms
2025-08-28 11:31:12.149 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 11:31:12.153 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 11:31:12.155 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.6738ms
2025-08-28 11:31:12.199 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.2486ms
2025-08-28 11:31:12.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 11:31:12.763 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 333.5153ms
2025-08-28 11:31:15.421 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 11:31:15.432 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 11:31:15.682 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:31:15.707 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:31:15.840 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:31:15.848 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 11:31:15.853 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 140.579ms
2025-08-28 11:31:15.855 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:31:15.861 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 439.2177ms
2025-08-28 11:35:17.497 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 11:35:17.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:35:17.510 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:35:39.637 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:35:47.045 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 11:35:47.046 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 29534.9219ms
2025-08-28 11:35:47.047 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:35:47.048 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 29551.0752ms
2025-08-28 11:44:15.926 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 11:44:15.970 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 11:44:15.984 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 11:44:16.852 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 11:44:17.416 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 11:44:17.437 +05:30 [INF] ClickLogWorker started
2025-08-28 11:44:17.712 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 11:44:17.713 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 11:44:17.714 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 11:44:17.720 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 11:44:17.721 +05:30 [INF] Hosting environment: Development
2025-08-28 11:44:17.723 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 11:44:17.771 +05:30 [INF] Executed DbCommand (98ms) [Parameters=[@__cutoff_0='2025-08-21T06:14:16.0847502Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 11:44:18.483 +05:30 [INF] ClickLogWorker stopped
2025-08-28 11:44:24.399 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 11:44:24.626 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 233.6988ms
2025-08-28 11:44:24.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 11:44:24.670 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.4708ms
2025-08-28 11:44:24.738 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 11:44:24.774 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.3097ms
2025-08-28 11:44:24.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 11:44:25.196 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 222.5409ms
2025-08-28 11:44:46.661 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 11:44:46.679 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 11:44:46.852 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:44:46.888 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:44:50.156 +05:30 [WRN] ClickEventQueue full; dropped click cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=1
2025-08-28 11:44:50.244 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:44:50.254 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 11:44:50.261 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 3365.5693ms
2025-08-28 11:44:50.264 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:44:50.273 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 3612.3378ms
2025-08-28 11:47:42.136 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 11:47:42.197 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 11:47:42.221 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 11:47:43.376 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 11:47:44.201 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 11:47:44.227 +05:30 [INF] ClickLogWorker started
2025-08-28 11:47:44.512 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 11:47:44.514 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 11:47:44.516 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 11:47:44.518 +05:30 [INF] Hosting environment: Development
2025-08-28 11:47:44.519 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 11:47:44.528 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 11:47:44.559 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[@__cutoff_0='2025-08-21T06:17:42.3612253Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 11:47:45.275 +05:30 [INF] ClickLogWorker stopped
2025-08-28 11:47:49.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 11:47:50.109 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 294.382ms
2025-08-28 11:47:50.284 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 11:47:50.284 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 11:47:50.293 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.3669ms
2025-08-28 11:47:50.334 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.2937ms
2025-08-28 11:47:50.506 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 11:47:50.877 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 371.2843ms
2025-08-28 11:47:54.928 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 11:47:54.941 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 11:47:55.087 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:47:55.117 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:47:55.283 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:47:55.295 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 11:47:55.304 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 177.542ms
2025-08-28 11:47:55.307 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:47:55.318 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 390.5169ms
2025-08-28 11:51:43.210 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 11:51:43.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:51:43.246 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:51:43.275 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:51:43.280 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 11:51:43.282 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 32.5431ms
2025-08-28 11:51:43.284 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:51:43.287 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 76.6607ms
2025-08-28 11:51:55.185 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 11:51:55.193 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:51:55.195 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:51:55.210 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:51:55.214 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 11:51:55.215 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 18.3478ms
2025-08-28 11:51:55.216 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:51:55.218 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 32.4943ms
2025-08-28 11:53:31.682 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 11:53:31.692 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:53:31.694 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:54:18.214 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:54:25.344 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 11:54:25.346 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 53650.2502ms
2025-08-28 11:54:25.348 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:54:29.754 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 58072.157ms
2025-08-28 11:59:17.161 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 11:59:17.222 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 11:59:17.245 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 11:59:18.439 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 11:59:19.142 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 11:59:19.167 +05:30 [INF] ClickLogWorker started
2025-08-28 11:59:19.474 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 11:59:19.476 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 11:59:19.478 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 11:59:19.479 +05:30 [INF] Hosting environment: Development
2025-08-28 11:59:19.481 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 11:59:19.481 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 11:59:19.508 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@__cutoff_0='2025-08-21T06:29:17.4474013Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 11:59:20.306 +05:30 [INF] ClickLogWorker stopped
2025-08-28 11:59:24.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 11:59:25.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 239.5988ms
2025-08-28 11:59:25.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 11:59:25.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.8189ms
2025-08-28 11:59:25.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 11:59:25.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.4442ms
2025-08-28 11:59:25.771 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 11:59:26.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 424.2559ms
2025-08-28 11:59:33.467 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 11:59:33.480 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 11:59:33.650 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:59:33.690 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 11:59:37.430 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 enqueued=true
2025-08-28 11:59:37.596 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 11:59:37.604 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 11:59:37.613 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 3913.452ms
2025-08-28 11:59:37.616 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 11:59:37.626 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 4159.3271ms
2025-08-28 12:02:25.058 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 12:02:25.071 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 12:02:25.075 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 12:02:25.094 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"sent","timestamp":"1756356238","recipient_id":"918974005240","conversation":{"id":"72c0f0d62f018ea5d17f2272fba47b5a","expiration_timestamp":"1756356238","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 12:02:25.098 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 12:02:25.105 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:02:25.113 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 36.3477ms
2025-08-28 12:02:25.115 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 12:02:25.116 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 57.9001ms
2025-08-28 12:02:25.253 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"sent","timestamp":"1756356238","recipient_id":"918974005240","conversation":{"id":"72c0f0d62f018ea5d17f2272fba47b5a","expiration_timestamp":"1756356238","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 12:02:25.255 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 12:02:25.256 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA==","status":"sent","timestamp":"1756356238","recipient_id":"918974005240","conversation":{"id":"72c0f0d62f018ea5d17f2272fba47b5a","expiration_timestamp":"1756356238","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 12:02:25.289 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 12:02:25.408 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='f9599ebc-efbb-49f5-a2d8-79b96889d453'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 12:02:25.526 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p1='f9599ebc-efbb-49f5-a2d8-79b96889d453', @p0='Sent'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-08-28 12:02:25.541 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTM4MTVGMjNENEI1NzAxNzAxAA== → sent
2025-08-28 12:08:10.554 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 12:08:10.600 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 12:08:10.618 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 12:08:11.475 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 12:08:12.107 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 12:08:12.128 +05:30 [INF] ClickLogWorker started
2025-08-28 12:08:12.329 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 12:08:12.330 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 12:08:12.331 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 12:08:12.332 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 12:08:12.332 +05:30 [INF] Hosting environment: Development
2025-08-28 12:08:12.336 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 12:08:12.353 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__cutoff_0='2025-08-21T06:38:10.7214086Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 12:08:13.193 +05:30 [INF] ClickLogWorker stopped
2025-08-28 12:08:19.269 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 12:08:19.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 313.3282ms
2025-08-28 12:08:19.765 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 12:08:19.777 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.8894ms
2025-08-28 12:08:19.796 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 12:08:19.859 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.4067ms
2025-08-28 12:08:20.159 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 12:08:20.450 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 291.4382ms
2025-08-28 12:08:21.782 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 12:08:21.795 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 12:08:21.946 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 12:08:21.974 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 12:08:22.291 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p0='504f0cec-6dd3-4b1a-9a15-cede0d017b34', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='2025-08-28T06:38:22.0327180Z' (DbType = DateTime), @p6=NULL (DbType = Guid), @p7='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p8='::1' (Nullable = false), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-28 12:08:22.313 +05:30 [INF] CLICK WRITE-THROUGH inserted for cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0
2025-08-28 12:08:22.316 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 enqueued=true
2025-08-28 12:08:22.335 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 12:08:22.344 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 12:08:22.351 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 369.5292ms
2025-08-28 12:08:22.355 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 12:08:22.364 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 581.7418ms
2025-08-28 12:08:44.325 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 12:08:44.354 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 12:08:44.356 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 12:08:44.368 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='831986a2-d026-41cf-a195-d1eea272d25e', @p1='1', @p2='Explore More' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='2025-08-28T06:38:44.3631357Z' (DbType = DateTime), @p6=NULL (DbType = Guid), @p7='https://www.youtube.com/watch?v=mbCsdfd-N4E' (Nullable = false), @p8='::1' (Nullable = false), @p9='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-28 12:08:44.374 +05:30 [INF] CLICK WRITE-THROUGH inserted for cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=1
2025-08-28 12:08:44.375 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=1 enqueued=true
2025-08-28 12:08:44.382 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked" = TRUE,
                            "ClickedAt"  = NOW() at time zone 'utc'
                      where "Id" = @p0 and "IsClicked" = FALSE;
2025-08-28 12:08:44.386 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 12:08:44.388 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 29.5679ms
2025-08-28 12:08:44.390 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 12:08:44.392 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 67.1822ms
2025-08-28 12:12:33.964 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 12:12:34.005 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:34.009 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 44.7072ms
2025-08-28 12:12:34.012 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 12:12:34.022 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:34.177 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 04:54:40 AM', Current time (UTC): '28-08-2025 06:42:34 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-28 12:12:34.228 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 04:54:40 AM', Current time (UTC): '28-08-2025 06:42:34 AM'.
2025-08-28 12:12:34.229 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 12:12:34.234 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 12:12:34.263 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:12:34.268 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 32.2742ms
2025-08-28 12:12:34.271 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 12:12:34.339 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 12:12:34.357 +05:30 [ERR] Response has already started, unable to write error response for path: /api/campaign/get-image-campaign
2025-08-28 12:12:34.358 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 401 null application/json 345.9859ms
2025-08-28 12:12:41.328 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-28 12:12:41.331 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:41.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.2246ms
2025-08-28 12:12:41.335 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-28 12:12:41.338 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:41.339 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 12:12:41.342 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-28 12:12:41.363 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-28 12:12:41.443 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-28 12:12:41.520 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-28 12:12:41.625 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-28 12:12:41.634 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-28 12:12:41.642 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-28 12:12:41.644 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-28 12:12:41.646 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:12:41.651 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 307.4982ms
2025-08-28 12:12:41.652 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 12:12:41.653 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 318.2816ms
2025-08-28 12:12:41.657 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:12:41.660 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:41.662 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.811ms
2025-08-28 12:12:41.667 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:12:41.671 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:41.688 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:12:41.692 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:12:41.705 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 12:12:41.734 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:12:41.736 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:12:41.743 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 49.1289ms
2025-08-28 12:12:41.744 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:12:41.746 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 78.286ms
2025-08-28 12:12:41.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:12:41.762 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:41.765 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:12:41.767 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:12:41.779 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:12:41.783 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:12:41.785 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.9837ms
2025-08-28 12:12:41.787 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:12:41.788 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.3922ms
2025-08-28 12:12:41.882 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:12:41.885 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:41.889 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:12:41.891 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:12:41.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:12:41.905 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:12:41.907 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.833ms
2025-08-28 12:12:41.909 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:12:41.911 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.7682ms
2025-08-28 12:12:49.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 12:12:49.246 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:49.247 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.6272ms
2025-08-28 12:12:49.253 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 12:12:49.260 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:49.262 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 12:12:49.263 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 12:12:49.325 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 12:12:49.329 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:12:49.344 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 78.1217ms
2025-08-28 12:12:49.346 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 12:12:49.347 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 94.4194ms
2025-08-28 12:12:53.103 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 12:12:53.106 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:53.107 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 204 null null 3.9318ms
2025-08-28 12:12:53.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 12:12:53.121 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:53.122 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 12:12:53.125 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 12:12:53.155 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 12:12:53.164 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-28 12:12:53.168 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-28 12:12:53.171 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 43.7387ms
2025-08-28 12:12:53.173 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 12:12:53.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 200 null application/json; charset=utf-8 57.9422ms
2025-08-28 12:12:53.612 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 12:12:53.616 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:53.618 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 204 null null 5.8223ms
2025-08-28 12:12:53.647 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 12:12:53.651 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:53.653 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 12:12:53.660 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 12:12:53.693 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-28 12:12:53.733 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-28 12:12:53.740 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:12:53.752 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 88.6881ms
2025-08-28 12:12:53.753 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 12:12:53.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 108.1638ms
2025-08-28 12:12:58.327 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:12:58.330 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:58.331 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 3.6481ms
2025-08-28 12:12:58.334 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:12:58.336 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:12:58.337 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:12:58.340 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:12:58.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:12:58.481 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-28 12:12:58.494 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-28 12:12:58.496 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:12:58.499 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 156.7406ms
2025-08-28 12:12:58.500 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:12:58.501 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 167.3253ms
2025-08-28 12:13:01.153 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - null null
2025-08-28 12:13:01.156 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:13:01.157 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - 204 null null 3.9735ms
2025-08-28 12:13:01.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - null null
2025-08-28 12:13:01.163 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:13:01.165 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:13:01.167 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:13:01.173 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:13:01.179 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-28 12:13:01.185 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-28 12:13:01.188 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:13:01.189 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 20.1723ms
2025-08-28 12:13:01.191 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:13:01.193 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - 200 null application/json; charset=utf-8 32.4539ms
2025-08-28 12:13:03.567 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/efbb53f5-5f4a-4d70-a52e-cb4cd683cd5a - null null
2025-08-28 12:13:03.570 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:13:03.572 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/efbb53f5-5f4a-4d70-a52e-cb4cd683cd5a - 204 null null 4.9468ms
2025-08-28 12:13:03.575 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/efbb53f5-5f4a-4d70-a52e-cb4cd683cd5a - null null
2025-08-28 12:13:03.578 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:13:03.579 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:13:03.580 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:13:03.585 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='efbb53f5-5f4a-4d70-a52e-cb4cd683cd5a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:13:03.588 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:13:03.590 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 8.468ms
2025-08-28 12:13:03.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:13:03.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/efbb53f5-5f4a-4d70-a52e-cb4cd683cd5a - 200 null application/json; charset=utf-8 16.5732ms
2025-08-28 12:13:24.787 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:13:24.789 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:13:24.790 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 3.492ms
2025-08-28 12:13:24.793 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:13:24.796 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:13:24.797 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:13:24.798 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:13:24.875 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:13:24.880 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-28 12:13:24.885 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-28 12:13:24.887 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:13:24.888 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 88.4474ms
2025-08-28 12:13:24.889 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:13:24.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 96.8652ms
2025-08-28 12:14:05.980 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:14:05.987 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:14:05.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 8.114ms
2025-08-28 12:14:05.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:14:05.997 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:14:05.999 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:14:06.000 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:14:06.004 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:14:06.008 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-28 12:14:06.016 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-28 12:14:06.018 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:14:06.019 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 17.9841ms
2025-08-28 12:14:06.020 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:14:06.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 26.4713ms
2025-08-28 12:14:10.172 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - null null
2025-08-28 12:14:10.175 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:14:10.176 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - 204 null null 4.2417ms
2025-08-28 12:14:10.181 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - null null
2025-08-28 12:14:10.184 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:14:10.185 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:14:10.186 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:14:10.194 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='88fbeec5-4a7b-424d-bbf5-a57ed6405a6e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:14:10.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-28 12:14:10.203 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQ0FGRjE3REFFMjUxQkJEQzY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-28 12:14:10.205 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:14:10.207 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 18.8133ms
2025-08-28 12:14:10.208 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:14:10.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/88fbeec5-4a7b-424d-bbf5-a57ed6405a6e - 200 null application/json; charset=utf-8 27.7171ms
2025-08-28 12:21:36.357 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:21:36.365 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:21:36.366 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 10.4924ms
2025-08-28 12:21:36.377 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:21:36.379 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:21:36.380 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:21:36.381 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:21:36.451 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:21:36.456 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Browser", t."BusinessId", t."ButtonText", t."CTAType", t."CampaignId", t."CampaignSendLogId", t."City", t."ClickedAt", t."ClickedVia", t."ContactId", t."ContactPhone", t."Country", t."DeviceType", t."FollowUpSent", t."IPAddress", t."LastInteractionType", t."MessageId", t."MessageLogId", t."Referrer", t."SessionId", t."SourceId", t."SourceType", t."StepId", t."TemplateId", t."ThreadId"
FROM "TrackingLogs" AS t
WHERE t."MessageId" = @__currentMessageId_0
LIMIT 1
2025-08-28 12:21:36.460 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__currentMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzk1NkVDNDA5N0RBOTFDM0I3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."RefMessageId"::text = @__currentMessageId_0
LIMIT 1
2025-08-28 12:21:36.462 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:21:36.463 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 80.5098ms
2025-08-28 12:21:36.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:21:36.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 88.6866ms
2025-08-28 12:37:26.057 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 12:37:26.124 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 12:37:26.150 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 12:37:27.186 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 12:37:27.851 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 12:37:27.880 +05:30 [INF] ClickLogWorker started
2025-08-28 12:37:28.101 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 12:37:28.136 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 12:37:28.137 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 12:37:28.139 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 12:37:28.139 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__cutoff_0='2025-08-21T07:07:26.3075244Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 12:37:28.140 +05:30 [INF] Hosting environment: Development
2025-08-28 12:37:28.143 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 12:37:28.940 +05:30 [INF] ClickLogWorker stopped
2025-08-28 12:37:29.698 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:37:29.727 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 12:37:29.787 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:37:29.797 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 105.4808ms
2025-08-28 12:37:29.804 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:37:29.822 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:37:29.936 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:37:29.952 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:37:40.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 12:37:41.422 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:37:48.506 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 12:37:54.609 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:37:54.625 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 24668.2968ms
2025-08-28 12:37:54.627 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:37:54.629 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 14157.223ms
2025-08-28 12:37:54.632 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 24828.346ms
2025-08-28 12:37:54.725 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 12:37:54.728 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 12:37:54.730 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.9522ms
2025-08-28 12:37:54.761 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.2889ms
2025-08-28 12:37:54.932 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 12:37:55.088 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 156.5091ms
2025-08-28 12:38:12.980 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:38:12.984 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:38:12.985 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 4.8651ms
2025-08-28 12:38:12.988 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:38:12.991 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:38:12.994 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:38:12.996 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:38:26.017 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:38:26.023 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 12:38:26.027 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:38:26.029 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 13031.1824ms
2025-08-28 12:38:26.030 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:38:26.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 13043.6137ms
2025-08-28 12:39:03.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:39:03.632 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:39:03.633 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 3.8154ms
2025-08-28 12:39:03.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:39:03.647 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:39:03.653 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:39:03.655 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:39:03.662 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:39:03.666 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 12:39:03.669 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:39:03.670 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 13.0848ms
2025-08-28 12:39:03.671 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:39:03.672 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 27.2774ms
2025-08-28 12:39:24.876 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:39:24.884 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:39:24.886 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 9.1947ms
2025-08-28 12:39:24.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:39:24.894 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:39:24.895 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:39:24.896 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:39:24.901 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:39:24.905 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 12:39:24.907 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:39:24.908 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 10.8769ms
2025-08-28 12:39:24.909 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:39:24.910 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 17.5318ms
2025-08-28 12:40:26.479 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:40:26.486 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:26.487 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 8.0612ms
2025-08-28 12:40:26.493 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:40:26.496 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:26.497 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:40:26.498 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:40:26.502 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:40:26.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 12:40:26.512 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:40:26.514 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 14.7102ms
2025-08-28 12:40:26.515 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:40:26.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 22.1002ms
2025-08-28 12:40:33.976 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:33.979 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:33.980 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.898ms
2025-08-28 12:40:33.983 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:33.985 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:33.990 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:33.994 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:40:34.047 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 12:40:34.120 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:40:34.123 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:40:34.135 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 139.3739ms
2025-08-28 12:40:34.136 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:34.137 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 154.2934ms
2025-08-28 12:40:34.143 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:34.145 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:34.147 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:34.148 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:40:34.153 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:40:34.156 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:40:34.158 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9258ms
2025-08-28 12:40:34.159 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:34.160 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.5011ms
2025-08-28 12:40:34.194 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 12:40:34.196 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:34.205 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:34.207 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:34.208 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 204 null null 13.6925ms
2025-08-28 12:40:34.210 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:34.211 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 12:40:34.212 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:40:34.216 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:34.217 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 12:40:34.220 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:40:34.223 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:40:34.224 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 12:40:34.225 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.552ms
2025-08-28 12:40:34.228 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:34.229 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.571ms
2025-08-28 12:40:34.289 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 12:40:34.308 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-28 12:40:34.312 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-28 12:40:34.320 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 93.679ms
2025-08-28 12:40:34.321 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 12:40:34.322 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 200 null application/json; charset=utf-8 110.6346ms
2025-08-28 12:40:34.696 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 12:40:34.698 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:34.699 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 204 null null 2.7126ms
2025-08-28 12:40:34.701 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 12:40:34.703 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:34.703 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 12:40:34.708 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 12:40:34.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-28 12:40:34.749 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-28 12:40:34.752 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:40:34.760 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 50.4285ms
2025-08-28 12:40:34.761 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 12:40:34.762 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 61.2257ms
2025-08-28 12:40:36.009 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:40:36.012 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:36.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 4.1816ms
2025-08-28 12:40:36.016 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:40:36.018 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:36.018 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:40:36.019 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:40:36.023 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:40:36.028 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 12:40:36.030 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:40:36.031 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 11.0044ms
2025-08-28 12:40:36.032 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:40:36.033 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 17.3614ms
2025-08-28 12:40:43.895 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:43.897 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:43.898 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0889ms
2025-08-28 12:40:43.900 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:43.902 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:43.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:43.904 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:40:43.908 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:40:43.911 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:40:43.912 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.2899ms
2025-08-28 12:40:43.913 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:43.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0881ms
2025-08-28 12:40:43.936 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:43.940 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:43.941 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:43.942 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:40:43.948 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:40:43.950 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:40:43.952 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0393ms
2025-08-28 12:40:43.954 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:43.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.5503ms
2025-08-28 12:40:43.983 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 12:40:43.983 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 12:40:43.986 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:43.989 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:43.991 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:43.991 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 204 null null 7.7257ms
2025-08-28 12:40:43.992 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 12:40:43.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 12:40:44.000 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 12:40:44.002 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:44.004 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 12:40:44.005 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 12:40:44.006 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.653ms
2025-08-28 12:40:44.007 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 12:40:44.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 12:40:44.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.3486ms
2025-08-28 12:40:44.016 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-28 12:40:44.020 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-28 12:40:44.022 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 12.2112ms
2025-08-28 12:40:44.024 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 12:40:44.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 200 null application/json; charset=utf-8 30.6053ms
2025-08-28 12:40:44.482 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 12:40:44.486 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:44.487 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 204 null null 4.3488ms
2025-08-28 12:40:44.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 12:40:44.494 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:44.495 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 12:40:44.496 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 12:40:44.501 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-28 12:40:44.508 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-28 12:40:44.511 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:40:44.513 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 14.6214ms
2025-08-28 12:40:44.514 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 12:40:44.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 24.559ms
2025-08-28 12:40:46.253 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:40:46.255 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:46.256 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 3.4545ms
2025-08-28 12:40:46.259 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 12:40:46.262 +05:30 [INF] CORS policy execution successful.
2025-08-28 12:40:46.263 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:40:46.264 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 12:40:46.269 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 12:40:46.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 12:40:46.277 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 12:40:46.279 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 12.6834ms
2025-08-28 12:40:46.280 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 12:40:46.282 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 22.6644ms
2025-08-28 13:15:07.252 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 13:15:07.302 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 13:15:07.320 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 13:15:08.111 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 13:15:08.884 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 13:15:08.901 +05:30 [INF] ClickLogWorker started
2025-08-28 13:15:09.104 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 13:15:09.114 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 13:15:09.115 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 13:15:09.116 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 13:15:09.117 +05:30 [INF] Hosting environment: Development
2025-08-28 13:15:09.118 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 13:15:09.123 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__cutoff_0='2025-08-21T07:45:07.4446210Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 13:15:09.952 +05:30 [INF] ClickLogWorker stopped
2025-08-28 13:15:14.442 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 13:15:14.653 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 220.7695ms
2025-08-28 13:15:14.798 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 13:15:14.798 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 13:15:14.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9058ms
2025-08-28 13:15:14.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.4134ms
2025-08-28 13:15:14.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 13:15:15.242 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 277.6662ms
2025-08-28 13:15:21.987 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 13:15:21.997 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 13:15:22.104 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:15:22.126 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 13:15:22.377 +05:30 [ERR] Failed executing DbCommand (24ms) [Parameters=[@p0='28a7711f-08ff-447c-9e0f-e0dfb5e12a6e', @p1='1', @p2='Explore More' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='web' (Nullable = false), @p6='2025-08-28T07:45:22.1736303Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.youtube.com/watch?v=mbCsdfd-N4E' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 13:15:22.439 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-28 13:15:22.775 +05:30 [ERR] Write-through insert failed. cid="d0de4a34-a944-4422-b910-c99aec403a4a"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken(String token, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Controllers\CampaignTrackingController.cs:line 78
2025-08-28 13:15:22.875 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=1 enqueued=true
2025-08-28 13:15:22.900 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 13:15:22.906 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 774.3314ms
2025-08-28 13:15:22.908 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:15:22.915 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 928.0163ms
2025-08-28 13:15:39.696 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 13:15:39.709 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:15:39.712 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 13:15:39.729 +05:30 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='27f0e668-a44f-4a28-a586-6f1133607cac', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='web' (Nullable = false), @p6='2025-08-28T07:45:39.7199593Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 13:15:39.737 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-28 13:15:39.897 +05:30 [ERR] Write-through insert failed. cid="d0de4a34-a944-4422-b910-c99aec403a4a"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken(String token, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Controllers\CampaignTrackingController.cs:line 78
2025-08-28 13:15:40.009 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 enqueued=true
2025-08-28 13:15:40.013 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 13:15:40.014 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 299.3333ms
2025-08-28 13:15:40.015 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:15:40.016 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 320.4454ms
2025-08-28 13:16:32.990 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 13:16:33.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:16:33.017 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 13:16:33.030 +05:30 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='723a7cf3-ad82-453a-ad9e-48d03cb4336f', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='web' (Nullable = false), @p6='2025-08-28T07:46:33.0208792Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 13:16:33.040 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-28 13:16:33.218 +05:30 [ERR] Write-through insert failed. cid="d0de4a34-a944-4422-b910-c99aec403a4a"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken(String token, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Controllers\CampaignTrackingController.cs:line 78
2025-08-28 13:16:33.291 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 enqueued=true
2025-08-28 13:16:33.294 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 13:16:33.295 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 275.6786ms
2025-08-28 13:16:33.296 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:16:33.297 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 307.2528ms
2025-08-28 13:16:48.299 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 13:16:48.304 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:48.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 7.6521ms
2025-08-28 13:16:48.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 13:16:48.324 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:48.391 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 07:42:41 AM', Current time (UTC): '28-08-2025 07:46:48 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-28 13:16:48.398 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 07:42:41 AM', Current time (UTC): '28-08-2025 07:46:48 AM'.
2025-08-28 13:16:48.404 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-08-28 13:16:48.457 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 13:16:48.463 +05:30 [ERR] Response has already started, unable to write error response for path: /api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8
2025-08-28 13:16:48.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 401 null application/json 149.4628ms
2025-08-28 13:16:54.345 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-28 13:16:54.348 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:54.349 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.6073ms
2025-08-28 13:16:54.352 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-28 13:16:54.355 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:54.355 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 13:16:54.360 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-28 13:16:54.378 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-28 13:16:54.451 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-28 13:16:54.521 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-28 13:16:54.631 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-28 13:16:54.640 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-28 13:16:54.650 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-28 13:16:54.651 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-28 13:16:54.656 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:16:54.661 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 299.0319ms
2025-08-28 13:16:54.662 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 13:16:54.663 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 311.2869ms
2025-08-28 13:16:54.667 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:16:54.670 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:54.671 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9765ms
2025-08-28 13:16:54.675 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:16:54.679 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:54.695 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:16:54.700 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:16:54.715 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 13:16:54.743 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:16:54.746 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:16:54.753 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 51.3818ms
2025-08-28 13:16:54.754 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:16:54.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 80.2915ms
2025-08-28 13:16:54.769 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:16:54.773 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:54.775 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:16:54.776 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:16:54.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:16:54.792 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:16:54.794 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.6344ms
2025-08-28 13:16:54.795 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:16:54.797 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.8086ms
2025-08-28 13:16:54.874 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:16:54.877 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:54.879 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:16:54.880 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:16:54.887 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:16:54.891 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:16:54.893 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.0748ms
2025-08-28 13:16:54.895 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:16:54.898 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.3761ms
2025-08-28 13:16:59.249 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 13:16:59.256 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:59.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 8.4641ms
2025-08-28 13:16:59.263 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 13:16:59.270 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:16:59.273 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 13:16:59.279 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 13:16:59.305 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:16:59.329 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-28 13:16:59.343 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 61.2439ms
2025-08-28 13:16:59.345 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 13:16:59.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 83.3616ms
2025-08-28 13:17:19.826 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-28 13:17:19.828 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:17:19.829 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.405ms
2025-08-28 13:17:19.832 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 549
2025-08-28 13:17:19.834 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:17:19.835 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-28 13:17:19.839 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 13:17:19.848 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-28 13:17:19.859 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-28 13:17:19.885 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPYYPhCoQATTMyqSqfkAwfRyVlX6q0iPLZCQEYfg3EnrI26Kj19XQV4OoLLW77gkbQekKcB8ZAibuzmUuBNZBhXJjYPWYs7pq5DJ6loTiAdxdp3oakjlRxeauuoqTKsJdMWUmIuVFvITABcvfguxtqUsuUmpvAkJZBc7EQk8S8Au1lVMVJacv2aYtYIHKgNkjZBynDdnqiP439wnbhMkSZA5OPsAdQpqZAv8uMvTGSMJ1uAbrgX2ZBAZDZD' (Nullable = false), @p1='2025-08-28T07:47:19.8628667Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-28 13:17:19.892 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:17:19.894 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 53.3092ms
2025-08-28 13:17:19.895 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-28 13:17:19.896 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 64.0882ms
2025-08-28 13:17:20.635 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-28 13:17:20.638 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:17:20.639 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.6324ms
2025-08-28 13:17:20.641 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 381
2025-08-28 13:17:20.644 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:17:20.645 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 13:17:20.649 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 13:17:20.659 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 13:17:20.661 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 13:17:22.595 +05:30 [INF] Received HTTP response headers after 1930.9734ms - 200
2025-08-28 13:17:22.597 +05:30 [INF] End processing HTTP request after 1939.2544ms - 200
2025-08-28 13:17:22.601 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:17:22.603 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1952.5474ms
2025-08-28 13:17:22.604 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 13:17:22.605 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1963.3767ms
2025-08-28 13:17:26.741 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 13:17:26.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:17:26.754 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 13:17:26.763 +05:30 [ERR] Failed executing DbCommand (5ms) [Parameters=[@p0='ba085f36-e928-40b7-ae15-badbd7775954', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='web' (Nullable = false), @p6='2025-08-28T07:47:26.7570607Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 13:17:26.769 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-28 13:17:26.847 +05:30 [ERR] Write-through insert failed. cid="d0de4a34-a944-4422-b910-c99aec403a4a"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "ClickType" of relation "CampaignClickLogs" does not exist

POSITION: 105
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "ClickType" of relation "CampaignClickLogs" does not exist
    Position: 105
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken(String token, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Controllers\CampaignTrackingController.cs:line 78
2025-08-28 13:17:26.883 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 enqueued=true
2025-08-28 13:17:26.886 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 13:17:26.887 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 130.928ms
2025-08-28 13:17:26.888 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:17:26.889 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 148.2479ms
2025-08-28 13:20:38.191 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 13:21:02.319 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 13:21:02.853 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 13:21:02.872 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-08-28 13:21:02.941 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 13:21:03.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-08-28 13:21:03.012 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-08-28 13:21:03.021 +05:30 [INF] Applying migration '20250828075039_AddClickTypeToCampaignClickLogs'.
2025-08-28 13:21:03.157 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_CampaignClickLogs_CampaignId_ClickedAt";
2025-08-28 13:21:03.159 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '003b2812-380b-4a58-9f2d-9577ab36ad76';
2025-08-28 13:21:03.159 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '07e64791-e560-40ce-8a9b-126a992a120b';
2025-08-28 13:21:03.160 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '19e2e6a3-a550-452f-ae36-37ec40e0a283';
2025-08-28 13:21:03.160 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '1b8b28ef-e6f9-4690-86aa-f80d5460b07e';
2025-08-28 13:21:03.160 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '445a92bb-19db-4352-9aa4-5914955c97a1';
2025-08-28 13:21:03.161 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '489ef7d5-b71d-4a02-b3a4-7bf12a13b1e5';
2025-08-28 13:21:03.161 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '572f5c50-07f4-4c6d-bc2d-0fddc6f61195';
2025-08-28 13:21:03.161 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '7354d012-cf16-4483-b962-bfe8303390ca';
2025-08-28 13:21:03.161 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '77f6d854-dd7e-4f4f-9c25-b5c997a5da59';
2025-08-28 13:21:03.162 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = '9825c18c-79a3-4497-9b88-cde86dac53bc';
2025-08-28 13:21:03.162 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'a963d99a-e0f0-4227-a23b-6b8102a42e85';
2025-08-28 13:21:03.162 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'd38ad21b-fe63-4f08-88f3-46ff18dc79bf';
2025-08-28 13:21:03.163 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'dfe0750e-e8d3-440e-aca2-5f91a544bfa5';
2025-08-28 13:21:03.163 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'e1ffdfc3-f696-4e41-9e04-5ed1277c20f9';
2025-08-28 13:21:03.163 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'ef4d7145-7602-46db-978b-631bdaffd701';
2025-08-28 13:21:03.164 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'f6c9b11f-e746-472c-bfb1-0cbf76edf4e1';
2025-08-28 13:21:03.164 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "RolePermissions"
WHERE "Id" = 'fdfafbdb-20b2-47b7-9f91-9a7e0669921d';
2025-08-28 13:21:03.172 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "CampaignClickLogs" ADD "ClickType" character varying(16) NOT NULL DEFAULT '';
2025-08-28 13:21:03.173 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604957Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000000';
2025-08-28 13:21:03.173 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604958Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000001';
2025-08-28 13:21:03.174 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604958Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000002';
2025-08-28 13:21:03.174 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604958Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000003';
2025-08-28 13:21:03.174 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604959Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000004';
2025-08-28 13:21:03.174 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604959Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000005';
2025-08-28 13:21:03.175 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604959Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000006';
2025-08-28 13:21:03.175 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604959Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000007';
2025-08-28 13:21:03.175 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604965Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000008';
2025-08-28 13:21:03.176 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604967Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000009';
2025-08-28 13:21:03.176 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Permissions" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604967Z'
WHERE "Id" = '30000000-0000-0000-0000-000000000010';
2025-08-28 13:21:03.183 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('0124132b-d34c-481d-a733-f6dd64c02568', TIMESTAMPTZ '2025-08-28T07:50:38.605006Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('04272662-2142-4346-9b04-c829f44058c0', TIMESTAMPTZ '2025-08-28T07:50:38.605008Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('0eb801e8-842e-411a-b95f-a352fcf6f89f', TIMESTAMPTZ '2025-08-28T07:50:38.605003Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('31e684d2-b12c-4029-9a50-85be6a18192f', TIMESTAMPTZ '2025-08-28T07:50:38.605005Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('3e68fda3-767b-4cd0-95e0-c0126ad39669', TIMESTAMPTZ '2025-08-28T07:50:38.605002Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('3ed30a59-5fe8-4f34-b92d-2eae6c19f8d1', TIMESTAMPTZ '2025-08-28T07:50:38.605006Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('484e51a8-4f56-417f-a95e-93ff61033886', TIMESTAMPTZ '2025-08-28T07:50:38.605005Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('6425b294-7571-49b8-a47b-3e86df106956', TIMESTAMPTZ '2025-08-28T07:50:38.605008Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('65070bb1-fdac-4ccf-bbaa-81f9e30f03da', TIMESTAMPTZ '2025-08-28T07:50:38.605003Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('711f93f3-c6c3-4ae8-aa24-c4e573361755', TIMESTAMPTZ '2025-08-28T07:50:38.604998Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000000', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('74db2ccd-a7d7-4902-920d-1639fcaa3961', TIMESTAMPTZ '2025-08-28T07:50:38.60501Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000005');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('8e9f8211-1766-4008-b7b9-015eb334c308', TIMESTAMPTZ '2025-08-28T07:50:38.605007Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000000', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('9b720fb7-0f64-4dd9-95ee-4bcb4decfb6c', TIMESTAMPTZ '2025-08-28T07:50:38.605009Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000000', '00000000-0000-0000-0000-000000000005');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('bc7cd27e-85f4-4e86-8a26-bd4e0ab10373', TIMESTAMPTZ '2025-08-28T07:50:38.605009Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000004');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('c160a6c7-07a8-47e0-ac39-637b35a53e59', TIMESTAMPTZ '2025-08-28T07:50:38.605005Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('db725e4c-7bc0-4a65-a537-65f46fb0048d', TIMESTAMPTZ '2025-08-28T07:50:38.604999Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001');
INSERT INTO "RolePermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "IsRevoked", "PermissionId", "RoleId")
VALUES ('efaed2b9-bf79-4f15-a633-f25f65f1b9ab', TIMESTAMPTZ '2025-08-28T07:50:38.605001Z', NULL, TRUE, FALSE, '30000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001');
2025-08-28 13:21:03.184 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604893Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000001';
2025-08-28 13:21:03.184 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604893Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000002';
2025-08-28 13:21:03.185 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604893Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000003';
2025-08-28 13:21:03.185 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604893Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000004';
2025-08-28 13:21:03.185 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-08-28T07:50:38.604893Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000005';
2025-08-28 13:21:03.191 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignClickLogs_CampaignId_ClickType_ClickedAt" ON "CampaignClickLogs" ("CampaignId", "ClickType", "ClickedAt");
2025-08-28 13:21:03.191 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250828075039_AddClickTypeToCampaignClickLogs', '8.0.18');
2025-08-28 13:21:14.903 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 13:21:14.947 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 13:21:14.962 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 13:21:15.742 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 13:21:16.213 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 13:21:16.231 +05:30 [INF] ClickLogWorker started
2025-08-28 13:21:16.405 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 13:21:16.406 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 13:21:16.406 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 13:21:16.411 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 13:21:16.412 +05:30 [INF] Hosting environment: Development
2025-08-28 13:21:16.412 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 13:21:16.424 +05:30 [INF] Executed DbCommand (51ms) [Parameters=[@__cutoff_0='2025-08-21T07:51:15.0484340Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 13:21:17.264 +05:30 [INF] ClickLogWorker stopped
2025-08-28 13:21:22.516 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 13:21:22.622 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 13:21:22.707 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:21:22.725 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 13:21:22.960 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='6270bbe9-b529-4b3a-80d8-bbb7575f1ee5', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='web' (Nullable = false), @p6='2025-08-28T07:51:22.7793516Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 13:21:22.977 +05:30 [INF] CLICK WRITE-THROUGH cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-28 13:21:22.980 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 enqueued=true
2025-08-28 13:21:22.993 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 13:21:22.999 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 13:21:23.004 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 274.0152ms
2025-08-28 13:21:23.007 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:21:23.016 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 506.2735ms
2025-08-28 13:21:23.256 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 13:21:23.355 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 99.4342ms
2025-08-28 13:21:23.388 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 13:21:23.403 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.4932ms
2025-08-28 13:21:23.470 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 13:21:23.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.9589ms
2025-08-28 13:21:23.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 13:21:23.949 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 261.2924ms
2025-08-28 13:21:49.582 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - null null
2025-08-28 13:21:49.598 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:21:49.599 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 13:21:49.608 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='5e4ad97c-db2d-4670-92d0-05f75c7944ef', @p1='0', @p2='Shop Now' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='web' (Nullable = false), @p6='2025-08-28T07:51:49.6040421Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 13:21:49.612 +05:30 [INF] CLICK WRITE-THROUGH cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-28 13:21:49.613 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=0 enqueued=true
2025-08-28 13:21:49.617 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 13:21:49.619 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 13:21:49.621 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 19.9219ms
2025-08-28 13:21:49.622 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:21:49.623 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MCwiYnQiOiJTaG9wIE5vdyIsInRvIjoiaHR0cHM6Ly93d3cubWluZHNtaXJhdHVzLmNvbS93ZWJzaXRlLWRlc2lnbmluZy1zZXJ2aWNlcyIsImlhdCI6MTc1NjM1Njg1NCwiZXhwIjoxNzU4OTQ4ODU0fQ.s-1NO997CD_1DawBKOZAO2sq3IoZMB9QbamqbG41kmA - 302 0 null 41.1532ms
2025-08-28 13:22:40.803 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - null null
2025-08-28 13:22:40.811 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:22:40.812 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 13:22:40.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='9a82183e-bb16-4662-90e4-a9dd854ea896', @p1='1', @p2='Explore More' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='d0de4a34-a944-4422-b910-c99aec403a4a', @p5='web' (Nullable = false), @p6='2025-08-28T07:52:40.8156350Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.youtube.com/watch?v=mbCsdfd-N4E' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 13:22:40.823 +05:30 [INF] CLICK WRITE-THROUGH cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=1 type=web dest=https://www.youtube.com/watch?v=mbCsdfd-N4E
2025-08-28 13:22:40.824 +05:30 [INF] CLICK ENQUEUE cid="d0de4a34-a944-4422-b910-c99aec403a4a" idx=1 enqueued=true
2025-08-28 13:22:40.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 13:22:40.837 +05:30 [INF] Executing RedirectResult, redirecting to https://www.youtube.com/watch?v=mbCsdfd-N4E.
2025-08-28 13:22:40.839 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 24.23ms
2025-08-28 13:22:40.840 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 13:22:40.841 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiJkMGRlNGEzNC1hOTQ0LTQ0MjItYjkxMC1jOTlhZWM0MDNhNGEiLCJiaSI6MSwiYnQiOiJFeHBsb3JlIE1vcmUiLCJ0byI6Imh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9bWJDc2RmZC1ONEUiLCJpYXQiOjE3NTYzNTY4NTQsImV4cCI6MTc1ODk0ODg1NH0.tAGpuaUlm_vtcVjF8F4artrtBKRP1AeiEwUvecIHA7s - 302 0 null 38.2181ms
2025-08-28 13:23:01.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:23:01.080 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:01.084 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.7751ms
2025-08-28 13:23:01.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:23:01.097 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:01.194 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:23:01.202 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:23:01.360 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 13:23:01.381 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:23:01.398 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 187.4757ms
2025-08-28 13:23:01.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:23:01.401 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 312.9562ms
2025-08-28 13:23:04.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 13:23:04.936 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:04.938 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 204 null null 4.7344ms
2025-08-28 13:23:04.949 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - null null
2025-08-28 13:23:04.953 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:04.956 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 13:23:04.961 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 13:23:05.009 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 13:23:05.025 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-28 13:23:05.031 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-28 13:23:05.036 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 72.7238ms
2025-08-28 13:23:05.038 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 13:23:05.040 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d/summary - 200 null application/json; charset=utf-8 91.7577ms
2025-08-28 13:23:05.418 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 13:23:05.421 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:05.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 204 null null 3.356ms
2025-08-28 13:23:05.424 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - null null
2025-08-28 13:23:05.426 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:05.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 13:23:05.431 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 13:23:05.449 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-28 13:23:05.475 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f647c2fb-958c-4695-b51c-d4401cb1741d', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-28 13:23:05.481 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:23:05.490 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 57.7256ms
2025-08-28 13:23:05.491 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 13:23:05.492 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/f647c2fb-958c-4695-b51c-d4401cb1741d?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 68.6028ms
2025-08-28 13:23:09.605 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 13:23:09.609 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:09.609 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 4.1249ms
2025-08-28 13:23:09.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 13:23:09.616 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:09.617 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 13:23:09.621 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 13:23:09.757 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 13:23:09.767 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 13:23:09.771 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:23:09.773 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 150.3592ms
2025-08-28 13:23:09.775 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 13:23:09.776 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 163.426ms
2025-08-28 13:23:25.667 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 13:23:25.670 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:25.671 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 204 null null 3.6572ms
2025-08-28 13:23:25.674 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - null null
2025-08-28 13:23:25.676 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:23:25.677 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 13:23:25.678 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 13:23:25.688 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 13:23:25.693 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='d0de4a34-a944-4422-b910-c99aec403a4a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 13:23:25.694 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:23:25.696 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 12.8188ms
2025-08-28 13:23:25.697 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 13:23:25.698 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/d0de4a34-a944-4422-b910-c99aec403a4a - 200 null application/json; charset=utf-8 24.6503ms
2025-08-28 13:26:48.331 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - null null
2025-08-28 13:26:48.337 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - 404 0 null 6.0867ms
2025-08-28 13:26:48.340 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/, Response status code: 404
2025-08-28 13:26:48.408 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - null null
2025-08-28 13:26:48.414 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - 404 0 null 6.1212ms
2025-08-28 13:26:48.417 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/, Response status code: 404
2025-08-28 13:27:00.763 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - null null
2025-08-28 13:27:00.765 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/ - 404 0 null 2.5298ms
2025-08-28 13:27:00.768 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://077903ad22d3.ngrok-free.app/r/, Response status code: 404
2025-08-28 13:27:17.220 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 321
2025-08-28 13:27:17.223 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 13:27:17.226 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 13:27:17.239 +05:30 [WRN] 📥 Webhook received at controller:
{"entry": [{"id": "744548247936621", "time": 1756367835, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1286058192539680, "message_template_name": "call_log", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-28 13:27:17.242 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 13:27:17.244 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:27:17.249 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 21.4851ms
2025-08-28 13:27:17.250 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 13:27:17.252 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.2104ms
2025-08-28 13:27:17.253 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"entry": [{"id": "744548247936621", "time": 1756367835, "changes": [{"value": {"event": "APPROVED", "message_template_id": 1286058192539680, "message_template_name": "call_log", "message_template_language": "en_US", "reason": "NONE"}, "field": "message_template_status_update"}]}], "object": "whatsapp_business_account"}
2025-08-28 13:27:17.256 +05:30 [WRN] ⚠️ No matching event processor found.
2025-08-28 13:28:49.490 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 13:28:49.493 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:28:49.494 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 4.4954ms
2025-08-28 13:28:49.502 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 13:28:49.507 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:28:49.513 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 13:28:49.520 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 13:28:49.602 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 13:28:49.605 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType83`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType152`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:28:49.609 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 86.4934ms
2025-08-28 13:28:49.610 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 13:28:49.611 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 109.2043ms
2025-08-28 13:28:52.842 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-28 13:28:52.844 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:28:52.845 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 3.1211ms
2025-08-28 13:28:52.847 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-28 13:28:52.849 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:28:52.853 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 13:28:52.857 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 13:28:52.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:28:53.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-28 13:28:53.018 +05:30 [INF] ⏭️ Skipping sync for "c13be597-6ae2-42bb-9d43-925815f24ff8"; TTL not expired.
2025-08-28 13:28:53.020 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType151`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:28:53.024 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 165.7085ms
2025-08-28 13:28:53.025 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 13:28:53.026 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 179.0439ms
2025-08-28 13:28:53.030 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 13:28:53.033 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:28:53.035 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 13:28:53.036 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 13:28:53.043 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 13:28:53.046 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType83`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType152`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:28:53.048 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 9.4453ms
2025-08-28 13:28:53.049 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 13:28:53.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 20.058ms
2025-08-28 13:29:15.525 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null null
2025-08-28 13:29:15.528 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:29:15.530 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 204 null null 4.8786ms
2025-08-28 13:29:15.534 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - null 0
2025-08-28 13:29:15.537 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:29:15.539 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 13:29:15.540 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 13:29:15.546 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:29:15.553 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-08-28 13:29:15.594 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-28 13:29:15.598 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-08-28 13:29:16.700 +05:30 [INF] Received HTTP response headers after 1098.0315ms - 200
2025-08-28 13:29:16.702 +05:30 [INF] End processing HTTP request after 1109.4375ms - 200
2025-08-28 13:29:17.005 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='call_log', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='url_tracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.080 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='build_urltracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.086 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.090 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.094 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.105 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.111 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-08-28 13:29:17.156 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='053cd292-5b35-40ea-8879-2a90092c789d', @p1='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"},{"Type":"URL","Text":"View Demo","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"}]' (Nullable = false), @p4='MARKETING', @p5='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p6='1322949819198164', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p11='url_tracking' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/tutrials"]},{"type":"URL","text":"View Demo","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p17='6023cfcb-8bad-4261-a4ba-3d3d8456f507', @p18='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p19='c13be597-6ae2-42bb-9d43-925815f24ff8', @p20='[{"Type":"URL","Text":"Shop Now","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Explore More","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p21='MARKETING', @p22='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p23='788214393726841', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p28='build_urltracking' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/softwaredev"]},{"type":"URL","text":"Explore More","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p34='77340eb4-5f95-4c66-a225-6ffddd3a489a', @p35='Hello

This is the checking for call log event.' (Nullable = false), @p36='c13be597-6ae2-42bb-9d43-925815f24ff8', @p37='[{"Type":"URL","Text":"Explore","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Call Us","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"}]' (Nullable = false), @p38='MARKETING', @p39='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p40='1286058192539680', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p45='call_log' (Nullable = false), @p46='0', @p47='meta_cloud' (Nullable = false), @p48='{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/seeme"]},{"type":"URL","text":"Call Us","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p51='82548fba-b831-417b-8b86-35562734bbbc', @p52='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p53='c13be597-6ae2-42bb-9d43-925815f24ff8', @p54='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p55='MARKETING', @p56='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p57='1100798472016654', @p58='True', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p62='shoe_launch_offer' (Nullable = false), @p63='1', @p64='meta_cloud' (Nullable = false), @p65='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Hzqp53BhtgIQ7kNvwF8ug1t&_nc_oc=AdmBKg1tVuX10_gk1iDPuMU2xK4juuv-P31_2ieUryyO3pDnQYslJMba_UE7Hoea9q4sbUkbOv4WqRblpRwVcWp0&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=7Z18h2l_F7yU_fecWzmS0g&oh=01_Q5Aa2QHmH5LIswOrayTBLMrUYe7zZXwseQ-NeNO8f8BW22Cm9Q&oe=68D7984F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p68='891f7536-51a1-4221-9720-551eb3c805af', @p69='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p70='c13be597-6ae2-42bb-9d43-925815f24ff8', @p71='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p72='UTILITY', @p73='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p74='817241660991962', @p75='False', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p79='account_creation_confirmation_3' (Nullable = false), @p80='2', @p81='meta_cloud' (Nullable = false), @p82='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p85='a08ea647-284c-4bf9-b6b0-1dc687c7b773', @p86='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p87='c13be597-6ae2-42bb-9d43-925815f24ff8', @p88='[]' (Nullable = false), @p89='UTILITY', @p90='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p91='617143187619824', @p92='False', @p93='True', @p94='en_US' (Nullable = false), @p95='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p96='hello_world' (Nullable = false), @p97='0', @p98='meta_cloud' (Nullable = false), @p99='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p102='a54dccc0-008a-43d2-bffb-a65493080e88', @p103='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p104='c13be597-6ae2-42bb-9d43-925815f24ff8', @p105='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p106='MARKETING', @p107='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p108='3255438291278546', @p109='False', @p110='True', @p111='en_US' (Nullable = false), @p112='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p113='bot_launch' (Nullable = false), @p114='0', @p115='meta_cloud' (Nullable = false), @p116='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p117='APPROVED' (Nullable = false), @p118='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p119='dd4c715d-b8b8-4774-abf6-df5578476dcb', @p120='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p121='c13be597-6ae2-42bb-9d43-925815f24ff8', @p122='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p123='MARKETING', @p124='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p125='663456696777015', @p126='False', @p127='True', @p128='en_US' (Nullable = false), @p129='2025-08-28T07:59:15.5515997Z' (DbType = DateTime), @p130='offer_aiboat' (Nullable = false), @p131='0', @p132='meta_cloud' (Nullable = false), @p133='{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"}' (Nullable = false), @p134='APPROVED' (Nullable = false), @p135='2025-08-28T07:59:15.5515997Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135);
2025-08-28 13:29:17.175 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType151`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:29:17.176 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 1633.8447ms
2025-08-28 13:29:17.178 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-08-28 13:29:17.180 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/c13be597-6ae2-42bb-9d43-925815f24ff8 - 200 null application/json; charset=utf-8 1645.9785ms
2025-08-28 13:29:17.184 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 13:29:17.188 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:29:17.189 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 204 null null 4.6097ms
2025-08-28 13:29:17.193 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - null null
2025-08-28 13:29:17.197 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:29:17.198 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 13:29:17.200 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 13:29:17.206 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-08-28 13:29:17.211 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType83`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType152`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:29:17.213 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.8496ms
2025-08-28 13:29:17.215 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-08-28 13:29:17.217 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8?status=APPROVED - 200 null application/json; charset=utf-8 23.5646ms
2025-08-28 13:29:21.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - null null
2025-08-28 13:29:21.574 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:29:21.575 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - 204 null null 2.9548ms
2025-08-28 13:29:21.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - null null
2025-08-28 13:29:21.581 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:29:21.582 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-28 13:29:21.585 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-08-28 13:29:21.618 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__name_1='call_log'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-08-28 13:29:21.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType153`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:29:21.627 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 40.4048ms
2025-08-28 13:29:21.629 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-08-28 13:29:21.630 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/c13be597-6ae2-42bb-9d43-925815f24ff8/call_log - 200 null application/json; charset=utf-8 52.0156ms
2025-08-28 13:34:40.842 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-08-28 13:34:40.845 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:40.846 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.1825ms
2025-08-28 13:34:40.851 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 429
2025-08-28 13:34:40.854 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:40.855 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-28 13:34:40.859 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:34:42.425 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 13:34:42.428 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:34:42.429 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:34:44.616 +05:30 [INF] Received HTTP response headers after 2186.6137ms - 200
2025-08-28 13:34:44.617 +05:30 [INF] End processing HTTP request after 2189.7139ms - 200
2025-08-28 13:34:44.721 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3='text', @p4='2025-08-28T08:04:44.6346791Z' (DbType = DateTime), @p5='system', @p6=NULL (DbType = Guid), @p7=NULL (DbType = DateTime), @p8=NULL, @p9=NULL, @p10=NULL, @p11=NULL, @p12='False', @p13='Hello

This is the checking for call log event.', @p14='call_log' (Nullable = false), @p15='callButton_log' (Nullable = false), @p16=NULL (DbType = DateTime), @p17=NULL (DbType = Guid), @p18='Draft' (Nullable = false), @p19='call_log', @p20='[]', @p21='2025-08-28T08:04:44.6347160Z' (DbType = DateTime), @p22='b1999047-2757-45a4-a087-740a185b5cdf', @p23='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p24='True', @p25='2', @p26='Call Us' (Nullable = false), @p27='URL' (Nullable = false), @p28='tel:+917082156227' (Nullable = false), @p29='ba445457-918a-4458-9dd2-91a482aeda47', @p30='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p31='True', @p32='1', @p33='Explore' (Nullable = false), @p34='URL' (Nullable = false), @p35='https://www.mindsmiratus.com/website-designing-services' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-08-28 13:34:44.725 +05:30 [INF] ✅ Campaign 'callButton_log' created with 0 recipients, 0 user buttons, 2 template buttons and 0 template parameters
2025-08-28 13:34:44.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType35`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:34:44.731 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3870.3142ms
2025-08-28 13:34:44.732 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-08-28 13:34:44.733 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3881.5597ms
2025-08-28 13:34:44.770 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-28 13:34:44.774 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.780 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 9.6922ms
2025-08-28 13:34:44.775 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:34:44.777 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-28 13:34:44.777 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags - null null
2025-08-28 13:34:44.788 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-28 13:34:44.788 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.791 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.794 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.796 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.797 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 21.773ms
2025-08-28 13:34:44.797 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 20.6457ms
2025-08-28 13:34:44.798 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags - 204 null null 21.5231ms
2025-08-28 13:34:44.802 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 13:34:44.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:34:44.811 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-08-28 13:34:44.814 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.814 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-28 13:34:44.816 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.817 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-28 13:34:44.818 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-28 13:34:44.822 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-08-28 13:34:44.822 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:34:44.829 +05:30 [INF] GetPagedContactsAsync: businessId="c13be597-6ae2-42bb-9d43-925815f24ff8", tab=all, page=1, pageSize=1000
2025-08-28 13:34:44.829 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-28 13:34:44.836 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 13:34:44.847 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 29.6677ms
2025-08-28 13:34:44.848 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags - null null
2025-08-28 13:34:44.849 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 13:34:44.851 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:34:44.852 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 64.2444ms
2025-08-28 13:34:44.853 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 13:34:44.857 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-08-28 13:34:44.862 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-08-28 13:34:44.866 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 13:34:44.867 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 8.402ms
2025-08-28 13:34:44.868 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-08-28 13:34:44.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags - 200 null application/json; charset=utf-8 21.4734ms
2025-08-28 13:34:44.883 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", c1."Id", c1."CampaignId", c1."IsFromTemplate", c1."Position", c1."Title", c1."Type", c1."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c1 ON t."Id" = c1."CampaignId"
ORDER BY t."Id", t."Id0"
2025-08-28 13:34:44.897 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-08-28 13:34:44.902 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 76.2ms
2025-08-28 13:34:44.905 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-08-28 13:34:44.905 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-08-28 13:34:44.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 200 null application/json; charset=utf-8 98.1005ms
2025-08-28 13:34:44.924 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-08-28 13:34:44.977 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 13:34:44.983 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 158.5423ms
2025-08-28 13:34:44.984 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-08-28 13:34:44.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 174.5406ms
2025-08-28 13:35:08.788 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/assign-contacts - null null
2025-08-28 13:35:08.791 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:08.792 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/assign-contacts - 204 null null 3.6406ms
2025-08-28 13:35:08.795 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/assign-contacts - application/json 55
2025-08-28 13:35:08.797 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:08.798 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-28 13:35:08.802 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:35:08.824 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @__businessId_1='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-08-28 13:35:08.857 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='de87fab2-1941-44ce-9897-418353d10d95', @p1=NULL, @p2='c13be597-6ae2-42bb-9d43-925815f24ff8', @p3='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p4=NULL, @p5=NULL, @p6='26b8b9a2-5624-40ed-a659-65de71d03d20', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-08-28T08:05:08.8304393Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-08-28T08:05:08.8304894Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-28 13:35:08.860 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:35:08.862 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 58.5611ms
2025-08-28 13:35:08.863 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-08-28 13:35:08.864 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/assign-contacts - 200 null application/json; charset=utf-8 69.4614ms
2025-08-28 13:35:12.670 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:35:12.673 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:12.674 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.5511ms
2025-08-28 13:35:12.680 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:35:12.684 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:12.685 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:35:12.686 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:35:12.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 13:35:12.695 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:35:12.697 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.86ms
2025-08-28 13:35:12.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:35:12.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 19.7581ms
2025-08-28 13:35:14.802 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:35:14.805 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:14.806 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 3.581ms
2025-08-28 13:35:14.808 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 13:35:14.811 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:14.812 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:35:14.815 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:35:17.419 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 13:35:17.426 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 13:35:17.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:35:17.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 13:35:17.443 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:35:17.444 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:35:18.730 +05:30 [INF] Received HTTP response headers after 1285.3459ms - 200
2025-08-28 13:35:18.732 +05:30 [INF] End processing HTTP request after 1288.975ms - 200
2025-08-28 13:35:18.792 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL for button 'Call Us' (index 1). Got: 'tel:+917082156227'
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.NormalizeAbsoluteUrlOrThrowForButton(String input, String buttonTitle, Int32 buttonIndex) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1226
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1315
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1051
2025-08-28 13:35:20.732 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 13:35:20.733 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5916.2407ms
2025-08-28 13:35:20.734 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:35:20.735 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 400 null application/json; charset=utf-8 5927.2806ms
2025-08-28 13:35:25.797 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:35:25.799 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:25.800 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 2.6541ms
2025-08-28 13:35:25.803 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 13:35:25.805 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:35:25.806 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:35:25.807 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:35:30.476 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 13:35:30.480 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:35:30.487 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 13:35:30.488 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:35:30.489 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:35:32.282 +05:30 [INF] Received HTTP response headers after 1792.0871ms - 200
2025-08-28 13:35:32.283 +05:30 [INF] End processing HTTP request after 1794.8305ms - 200
2025-08-28 13:35:32.330 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL for button 'Call Us' (index 1). Got: 'tel:+917082156227'
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.NormalizeAbsoluteUrlOrThrowForButton(String input, String buttonTitle, Int32 buttonIndex) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1226
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1315
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1051
2025-08-28 13:42:08.452 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 13:42:08.538 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 13:42:08.563 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 13:42:09.652 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 13:42:10.287 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 13:42:10.317 +05:30 [INF] ClickLogWorker started
2025-08-28 13:42:10.564 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 13:42:10.602 +05:30 [INF] Executed DbCommand (136ms) [Parameters=[@__cutoff_0='2025-08-21T08:12:08.7265929Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 13:42:10.610 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 13:42:10.612 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 13:42:10.613 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 13:42:10.615 +05:30 [INF] Hosting environment: Development
2025-08-28 13:42:10.616 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 13:42:11.373 +05:30 [INF] ClickLogWorker stopped
2025-08-28 13:42:12.673 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 13:42:12.869 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 204.8638ms
2025-08-28 13:42:12.897 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 13:42:12.907 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.4553ms
2025-08-28 13:42:12.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 13:42:13.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.9664ms
2025-08-28 13:42:13.201 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 13:42:13.458 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 257.02ms
2025-08-28 13:42:18.524 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:42:18.537 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 13:42:18.611 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:18.617 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 92.6644ms
2025-08-28 13:42:18.625 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:42:18.642 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:18.940 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:42:18.960 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:42:19.117 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 13:42:19.757 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:42:19.768 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:42:19.973 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1007.507ms
2025-08-28 13:42:19.975 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:42:19.979 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 1354.806ms
2025-08-28 13:42:20.166 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:42:20.169 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:20.172 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:42:20.173 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:42:20.201 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:42:20.205 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:42:20.206 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 31.6175ms
2025-08-28 13:42:20.207 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:42:20.208 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.6733ms
2025-08-28 13:42:20.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:42:20.245 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:20.246 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.3258ms
2025-08-28 13:42:20.261 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:42:20.262 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:42:20.264 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:20.269 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:20.271 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:42:20.271 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:42:20.274 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:42:20.277 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:42:20.282 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:42:20.287 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:42:20.290 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.4901ms
2025-08-28 13:42:20.292 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:42:20.294 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.162ms
2025-08-28 13:42:20.481 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 13:42:20.488 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:42:20.507 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 227.9885ms
2025-08-28 13:42:20.510 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:42:20.512 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 249.7239ms
2025-08-28 13:42:22.657 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:42:22.662 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:22.664 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 6.8645ms
2025-08-28 13:42:22.670 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 13:42:22.676 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:42:22.678 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:42:22.684 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:42:26.721 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 13:42:26.738 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 13:42:26.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:42:27.368 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 13:42:27.388 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:42:27.390 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:42:30.038 +05:30 [INF] Received HTTP response headers after 2645.1961ms - 200
2025-08-28 13:42:30.040 +05:30 [INF] End processing HTTP request after 2653.4898ms - 200
2025-08-28 13:42:30.727 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL. Got: 'tel:+917082156227' (Parameter 'input')
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.NormalizeAbsoluteUrlOrThrow(String input) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 50
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.BuildTrackedButtonUrl(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 59
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1331
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1051
2025-08-28 13:46:18.619 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 13:46:18.678 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 13:46:18.699 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 13:46:19.500 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 13:46:20.011 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 13:46:20.030 +05:30 [INF] ClickLogWorker started
2025-08-28 13:46:20.232 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 13:46:20.233 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 13:46:20.235 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 13:46:20.236 +05:30 [INF] Hosting environment: Development
2025-08-28 13:46:20.236 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 13:46:20.245 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 13:46:20.261 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[@__cutoff_0='2025-08-21T08:16:18.8257037Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 13:46:21.063 +05:30 [INF] ClickLogWorker stopped
2025-08-28 13:46:27.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 13:46:27.477 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 171.1243ms
2025-08-28 13:46:27.495 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 13:46:27.502 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.146ms
2025-08-28 13:46:27.564 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 13:46:27.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.7593ms
2025-08-28 13:46:27.739 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 13:46:27.932 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.2909ms
2025-08-28 13:46:30.216 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:46:30.220 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 13:46:30.252 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:46:30.255 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 38.7995ms
2025-08-28 13:46:30.259 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 13:46:30.268 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:46:30.389 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:46:30.404 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:46:33.302 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 13:46:33.319 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 13:46:33.464 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:46:33.532 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 13:46:33.553 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:46:33.555 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:46:35.159 +05:30 [INF] Received HTTP response headers after 1601.4244ms - 200
2025-08-28 13:46:35.161 +05:30 [INF] End processing HTTP request after 1610.3143ms - 200
2025-08-28 13:46:35.318 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL. Got: 'tel:+917082156227' (Parameter 'input')
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.NormalizeAbsoluteUrlOrThrow(String input) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 50
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.BuildTrackedButtonUrl(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 58
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1331
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1051
2025-08-28 13:58:10.630 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 13:58:10.667 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 13:58:10.692 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 13:58:11.697 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 13:58:12.311 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 13:58:12.331 +05:30 [INF] ClickLogWorker started
2025-08-28 13:58:12.520 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 13:58:12.520 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 13:58:12.524 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 13:58:12.525 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 13:58:12.526 +05:30 [INF] Hosting environment: Development
2025-08-28 13:58:12.527 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 13:58:12.538 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__cutoff_0='2025-08-21T08:28:10.8930023Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 13:58:13.374 +05:30 [INF] ClickLogWorker stopped
2025-08-28 13:58:18.384 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 13:58:18.562 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 184.2893ms
2025-08-28 13:58:18.591 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 13:58:18.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.7218ms
2025-08-28 13:58:18.664 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 13:58:18.715 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.7044ms
2025-08-28 13:58:18.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 13:58:19.056 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 191.3461ms
2025-08-28 13:58:23.170 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:58:23.175 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 13:58:23.219 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:23.222 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 52.7812ms
2025-08-28 13:58:23.227 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:58:23.235 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:23.403 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:58:23.423 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:58:23.527 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 13:58:23.587 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:58:23.596 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:58:23.616 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 188.129ms
2025-08-28 13:58:23.618 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:58:23.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 397.2089ms
2025-08-28 13:58:23.629 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:58:23.633 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:23.637 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:58:23.639 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:58:23.648 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:58:23.655 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:58:23.657 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.9298ms
2025-08-28 13:58:23.658 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:58:23.660 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.0891ms
2025-08-28 13:58:23.697 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:58:23.699 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 13:58:23.702 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:23.705 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:23.706 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.1737ms
2025-08-28 13:58:23.710 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 13:58:23.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:58:23.715 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 13:58:23.715 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:23.718 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:58:23.725 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 13:58:23.727 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:58:23.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 13:58:23.731 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.6255ms
2025-08-28 13:58:23.733 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 13:58:23.734 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.3368ms
2025-08-28 13:58:23.819 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 13:58:23.825 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 13:58:23.842 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 111.8648ms
2025-08-28 13:58:23.843 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 13:58:23.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 134.8757ms
2025-08-28 13:58:25.267 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:58:25.270 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:25.271 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 4.2972ms
2025-08-28 13:58:25.274 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 13:58:25.278 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:25.279 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:58:25.284 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:58:32.112 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 13:58:32.124 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 13:58:32.229 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:58:32.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 13:58:32.307 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:58:32.309 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:58:33.723 +05:30 [INF] Received HTTP response headers after 1411.0156ms - 200
2025-08-28 13:58:33.724 +05:30 [INF] End processing HTTP request after 1417.4942ms - 200
2025-08-28 13:58:33.860 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL. Got: 'tel:+917082156227' (Parameter 'input')
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.NormalizeAbsoluteUrlOrThrow(String input) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 50
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.BuildTrackedButtonUrl(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 58
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1330
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1051
2025-08-28 13:58:49.448 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 13:58:49.456 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 24168.9746ms
2025-08-28 13:58:49.457 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:58:49.458 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 400 null application/json; charset=utf-8 24184.2462ms
2025-08-28 13:58:57.747 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 13:58:57.750 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:57.751 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 3.9602ms
2025-08-28 13:58:57.755 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 13:58:57.758 +05:30 [INF] CORS policy execution successful.
2025-08-28 13:58:57.759 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 13:58:57.760 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 13:59:09.679 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 13:59:16.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 13:59:24.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 13:59:24.846 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:59:24.847 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 13:59:25.724 +05:30 [INF] Received HTTP response headers after 875.6968ms - 200
2025-08-28 13:59:25.725 +05:30 [INF] End processing HTTP request after 878.6351ms - 200
2025-08-28 14:04:02.975 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL. Got: 'tel:+917082156227' (Parameter 'input')
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.NormalizeAbsoluteUrlOrThrow(String input) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 50
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.BuildTrackedButtonUrl(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 58
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1330
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1051
2025-08-28 14:40:02.735 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 14:40:02.793 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 14:40:02.906 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 14:40:03.892 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 14:40:04.606 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 14:40:04.635 +05:30 [INF] ClickLogWorker started
2025-08-28 14:40:04.872 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 14:40:04.913 +05:30 [INF] Executed DbCommand (123ms) [Parameters=[@__cutoff_0='2025-08-21T09:10:03.0387351Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 14:40:04.930 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 14:40:04.931 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 14:40:04.933 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 14:40:04.933 +05:30 [INF] Hosting environment: Development
2025-08-28 14:40:04.935 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 14:40:05.703 +05:30 [INF] ClickLogWorker stopped
2025-08-28 14:40:10.898 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 14:40:11.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 313.084ms
2025-08-28 14:40:11.234 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 14:40:11.246 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.7631ms
2025-08-28 14:40:11.339 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 14:40:11.398 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.8145ms
2025-08-28 14:40:11.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 14:40:11.964 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 307.2646ms
2025-08-28 14:40:38.586 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 14:40:38.591 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 14:40:38.661 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:40:38.668 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 82.5378ms
2025-08-28 14:40:38.675 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 14:40:38.690 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:40:38.862 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 08:46:54 AM', Current time (UTC): '28-08-2025 09:10:38 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-08-28 14:40:38.923 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '28-08-2025 08:46:54 AM', Current time (UTC): '28-08-2025 09:10:38 AM'.
2025-08-28 14:40:38.929 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 14:40:38.955 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:40:42.344 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 14:40:42.378 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 14:40:42.620 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 14:40:42.736 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 14:40:42.769 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:40:42.772 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:40:43.657 +05:30 [INF] Received HTTP response headers after 880.3986ms - 401
2025-08-28 14:40:43.660 +05:30 [INF] End processing HTTP request after 893.2353ms - 401
2025-08-28 14:40:43.678 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 02:00:00 PDT. The current time is Thursday, 28-Aug-25 02:10:41 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AWrFWfzopmWrJZCJcru_Lvc"}}
2025-08-28 14:40:53.880 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 14:40:53.892 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 14929.5521ms
2025-08-28 14:40:53.896 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 14:40:54.025 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Microsoft.AspNetCore.Mvc.ObjectResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 14:40:54.042 +05:30 [ERR] Response has already started, unable to write error response for path: /api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a
2025-08-28 14:40:54.049 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 401 null application/json 15374.0086ms
2025-08-28 14:41:00.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-08-28 14:41:00.918 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:00.919 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 7.5401ms
2025-08-28 14:41:00.924 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-08-28 14:41:00.930 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:00.933 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 14:41:00.942 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-08-28 14:41:00.991 +05:30 [INF] 🔑 Login attempt for email: ratan@tcs.com
2025-08-28 14:41:01.028 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_Email_0='ratan@tcs.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-08-28 14:41:01.114 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-08-28 14:41:01.292 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='2870e1d8-0e80-4b12-88bd-70a8113307d6'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-08-28 14:41:01.308 +05:30 [INF] ✅ Token generated for: ratan@tcs.com
2025-08-28 14:41:01.324 +05:30 [INF] 🔎 JWT includes plan_id: b1ed0526-abd0-472f-a9ea-5bfebeeffe41
2025-08-28 14:41:01.327 +05:30 [INF] ✅ Login successful for ratan@tcs.com, Role: business, PlanId: "b1ed0526-abd0-472f-a9ea-5bfebeeffe41"
2025-08-28 14:41:01.330 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:41:01.338 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 392.15ms
2025-08-28 14:41:01.340 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-08-28 14:41:01.342 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 417.9414ms
2025-08-28 14:41:01.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:41:01.352 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:01.353 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.239ms
2025-08-28 14:41:01.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:41:01.364 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:01.388 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:41:01.393 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 14:41:01.414 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 14:41:01.458 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 14:41:01.463 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:41:01.478 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 82.4945ms
2025-08-28 14:41:01.480 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:41:01.482 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 122.6586ms
2025-08-28 14:41:01.506 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:41:01.511 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:01.515 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:41:01.517 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 14:41:01.531 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 14:41:01.537 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:41:01.539 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.6163ms
2025-08-28 14:41:01.542 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:41:01.543 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 37.2558ms
2025-08-28 14:41:01.629 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:41:01.633 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:01.637 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:41:01.639 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 14:41:01.651 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 14:41:01.657 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:41:01.660 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.1908ms
2025-08-28 14:41:01.661 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:41:01.663 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.9107ms
2025-08-28 14:41:28.907 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:41:28.911 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:28.913 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.4767ms
2025-08-28 14:41:28.919 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:41:28.924 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:28.927 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:41:28.935 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:41:29.013 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 14:41:29.019 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:41:29.040 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 99.8665ms
2025-08-28 14:41:29.042 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:41:29.044 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 124.8892ms
2025-08-28 14:41:30.078 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 14:41:30.082 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:30.083 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 5.8699ms
2025-08-28 14:41:30.088 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 14:41:30.092 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:30.093 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 14:41:30.095 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:41:32.044 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 14:41:32.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 14:41:32.057 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 14:41:32.061 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:41:32.063 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:41:32.293 +05:30 [INF] Received HTTP response headers after 227.9401ms - 401
2025-08-28 14:41:32.295 +05:30 [INF] End processing HTTP request after 233.4407ms - 401
2025-08-28 14:41:32.297 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "c13be597-6ae2-42bb-9d43-925815f24ff8": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Thursday, 28-Aug-25 02:00:00 PDT. The current time is Thursday, 28-Aug-25 02:11:30 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AtBEVjTpIxHLhS0o8A5ubWD"}}
2025-08-28 14:41:39.303 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 14:41:39.314 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 9215.9217ms
2025-08-28 14:41:39.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 14:41:39.317 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 400 null application/json; charset=utf-8 9229.5435ms
2025-08-28 14:41:43.524 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 14:41:43.541 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:43.552 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 27.36ms
2025-08-28 14:41:43.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-08-28 14:41:43.569 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:43.571 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 14:41:43.577 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 14:41:43.599 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 14:41:43.604 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-08-28 14:41:43.613 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 34.0456ms
2025-08-28 14:41:43.617 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-08-28 14:41:43.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 61.4066ms
2025-08-28 14:41:48.069 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-08-28 14:41:48.073 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:48.075 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 6.2132ms
2025-08-28 14:41:48.080 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 551
2025-08-28 14:41:48.084 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:48.086 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-28 14:41:48.092 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 14:41:48.109 +05:30 [INF] 🔧 [UpdateSetting] Incoming payload for provider=Meta_cloud
2025-08-28 14:41:48.122 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0
LIMIT 1
2025-08-28 14:41:48.274 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@p2='d57dc89d-deff-488a-8f33-985e072d0cc5', @p0='EAAUbmP4285YBPV7pmgwiGqQZClO36c4VMQZClzxqFszBJME61xk0im5lpCeTqZC9TpqpjUYM6DMZBbel7gdTH53OkB1GHAtLXmjt39EM47ajzt4JKJSgKv6xpZCPlkuGeBRORBaodQvLaVJIrZA5kXOiUXAWSdIq4i830bwvX0ocyCFxtXRGSyZAg7Jh8tqSknB17rVTFjLA7iNu5OnQUAyhA4TedQ5gDsAZBiF0BjwrZALgQsY5ncZCw1FbYOodNFtgZDZD' (Nullable = false), @p1='2025-08-28T09:11:48.1292743Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiToken" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-08-28 14:41:48.292 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:41:48.296 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 201.2518ms
2025-08-28 14:41:48.298 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-08-28 14:41:48.300 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 219.8185ms
2025-08-28 14:41:48.859 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-08-28 14:41:48.863 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:48.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 5.6253ms
2025-08-28 14:41:48.869 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 383
2025-08-28 14:41:48.872 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:48.874 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 14:41:48.881 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-08-28 14:41:48.893 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 14:41:48.895 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-08-28 14:41:50.303 +05:30 [INF] Received HTTP response headers after 1405.1848ms - 200
2025-08-28 14:41:50.305 +05:30 [INF] End processing HTTP request after 1412.4579ms - 200
2025-08-28 14:41:50.339 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:41:50.342 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 1457.6656ms
2025-08-28 14:41:50.345 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-08-28 14:41:50.347 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 200 null application/json; charset=utf-8 1477.9631ms
2025-08-28 14:41:52.116 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:41:52.120 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:52.122 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.6299ms
2025-08-28 14:41:52.137 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:41:52.141 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:52.144 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:41:52.146 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:41:52.156 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 14:41:52.160 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:41:52.163 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.4834ms
2025-08-28 14:41:52.165 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:41:52.167 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 29.7745ms
2025-08-28 14:41:53.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 14:41:53.692 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:53.694 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 5.5934ms
2025-08-28 14:41:53.699 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 14:41:53.721 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:41:53.723 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 14:41:53.725 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:41:58.764 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 14:41:58.772 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 14:41:58.779 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 14:41:58.782 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:41:58.784 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:41:59.790 +05:30 [INF] Received HTTP response headers after 1005.1917ms - 200
2025-08-28 14:41:59.801 +05:30 [INF] End processing HTTP request after 1018.0769ms - 200
2025-08-28 14:42:00.082 +05:30 [ERR] Error while sending text template campaign
System.ArgumentException: Destination must be an absolute http/https URL. Got: 'tel:+917082156227' (Parameter 'input')
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.NormalizeAbsoluteUrlOrThrow(String input) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 50
   at xbytechat.api.Features.Tracking.Services.UrlBuilderService.BuildTrackedButtonUrl(Guid campaignSendLogId, Int32 buttonIndex, String buttonTitle, String destinationUrlAbsolute) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Tracking\Services\UrlBuilderService.cs:line 58
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.BuildTextTemplateComponents_Meta(List`1 templateParams, List`1 buttonList, TemplateMetadataDto templateMeta, Guid campaignSendLogId, Contact contact) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1330
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.SendTextTemplateCampaignAsync(Campaign campaign) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 1051
2025-08-28 14:56:53.866 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-28 14:56:53.900 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-08-28 14:56:53.913 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-08-28 14:56:54.711 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-08-28 14:56:55.340 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 14:56:55.359 +05:30 [INF] ClickLogWorker started
2025-08-28 14:56:55.594 +05:30 [INF] Now listening on: http://localhost:7113
2025-08-28 14:56:55.596 +05:30 [INF] Now listening on: http://localhost:5295
2025-08-28 14:56:55.598 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-08-28 14:56:55.600 +05:30 [INF] Hosting environment: Development
2025-08-28 14:56:55.603 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-08-28 14:56:55.619 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-08-28 14:56:55.636 +05:30 [INF] Executed DbCommand (117ms) [Parameters=[@__cutoff_0='2025-08-21T09:26:54.0125097Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-08-28 14:56:56.406 +05:30 [INF] ClickLogWorker stopped
2025-08-28 14:57:01.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-08-28 14:57:01.754 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 256.3395ms
2025-08-28 14:57:01.804 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 14:57:01.821 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 17.3561ms
2025-08-28 14:57:01.834 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:57:01.841 +05:30 [WRN] Failed to determine the https port for redirect.
2025-08-28 14:57:01.890 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-08-28 14:57:01.902 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:01.911 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 76.7208ms
2025-08-28 14:57:01.918 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:57:01.934 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:01.961 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.0388ms
2025-08-28 14:57:02.162 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-08-28 14:57:02.178 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:57:02.214 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 14:57:02.387 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-08-28 14:57:02.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 294.2736ms
2025-08-28 14:57:02.480 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 14:57:02.492 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:57:02.518 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 289.9717ms
2025-08-28 14:57:02.520 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:57:02.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 611.0459ms
2025-08-28 14:57:02.548 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:57:02.553 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:02.559 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:57:02.561 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 14:57:02.576 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 14:57:02.583 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:57:02.587 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 22.466ms
2025-08-28 14:57:02.589 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:57:02.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 43.3343ms
2025-08-28 14:57:02.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-08-28 14:57:02.701 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:57:02.703 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:02.706 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:02.708 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.4435ms
2025-08-28 14:57:02.711 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:57:02.713 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:57:02.715 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-08-28 14:57:02.721 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:02.724 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:57:02.729 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='b1ed0526-abd0-472f-a9ea-5bfebeeffe41'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-08-28 14:57:02.735 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType29`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:57:02.737 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:57:02.738 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.881ms
2025-08-28 14:57:02.742 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-08-28 14:57:02.744 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 46.2229ms
2025-08-28 14:57:02.848 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 14:57:02.856 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:57:02.876 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 135.3885ms
2025-08-28 14:57:02.878 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:57:02.880 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 166.135ms
2025-08-28 14:57:04.692 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null null
2025-08-28 14:57:04.697 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:04.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 204 null null 6.2931ms
2025-08-28 14:57:04.703 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - null 0
2025-08-28 14:57:04.708 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:57:04.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 14:57:04.717 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:57:06.889 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-28 14:57:06.902 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-08-28 14:57:07.067 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 14:57:07.174 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-08-28 14:57:07.202 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:57:07.204 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-08-28 14:57:08.566 +05:30 [INF] Received HTTP response headers after 1357.6138ms - 200
2025-08-28 14:57:08.568 +05:30 [INF] End processing HTTP request after 1367.016ms - 200
2025-08-28 14:57:08.685 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiToken", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-08-28 14:57:08.701 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 14:57:08.702 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-08-28 14:57:09.845 +05:30 [INF] Received HTTP response headers after 1141.0905ms - 200
2025-08-28 14:57:09.846 +05:30 [INF] End processing HTTP request after 1144.4784ms - 200
2025-08-28 14:57:10.151 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p0='9955689b-067d-42ab-9748-5ed20451898c', @p1='c13be597-6ae2-42bb-9d43-925815f24ff8', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='80efee8d-0421-467a-86ac-1d5b2259bf1a' (Nullable = true), @p5='26b8b9a2-5624-40ed-a659-65de71d03d20' (Nullable = true), @p6='2025-08-28T09:27:09.8675771Z' (DbType = DateTime), @p7=NULL, @p8='False', @p9=NULL, @p10='call_log' (Nullable = false), @p11='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==', @p12='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","message_status":"accepted"}]}', @p13='+918974005240' (Nullable = false), @p14=NULL (DbType = Guid), @p15=NULL, @p16='2025-08-28T09:27:09.8676015Z' (Nullable = true) (DbType = DateTime), @p17='campaign', @p18='Sent' (Nullable = false), @p19='735ccc84-335a-4444-ad89-6430e199d452', @p20='True', @p21=NULL, @p22='c13be597-6ae2-42bb-9d43-925815f24ff8', @p23='80efee8d-0421-467a-86ac-1d5b2259bf1a', @p24=NULL, @p25=NULL, @p26=NULL (DbType = DateTime), @p27='26b8b9a2-5624-40ed-a659-65de71d03d20', @p28=NULL, @p29='2025-08-28T09:27:09.9241634Z' (DbType = DateTime), @p30='system', @p31=NULL (DbType = DateTime), @p32=NULL, @p33=NULL, @p34=NULL, @p35=NULL, @p36='False', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Hello

This is the checking for call log event.' (Nullable = false), @p41='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==', @p42='9955689b-067d-42ab-9748-5ed20451898c' (Nullable = true), @p43=NULL (DbType = DateTime), @p44='de87fab2-1941-44ce-9897-418353d10d95', @p45='0', @p46='Sent', @p47='2025-08-28T09:27:09.9242039Z' (Nullable = true) (DbType = DateTime), @p48=NULL, @p49='call_log', @p50=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
2025-08-28 14:57:53.725 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-08-28 14:57:53.780 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 14:57:53.789 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.0d17UY-1mvvBtGCQ65KSQILXpg5Iyz5n35wPzYA0WAc - null null
2025-08-28 14:57:53.784 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 14:57:53.793 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 14:57:53.809 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 49089.1327ms
2025-08-28 14:57:53.816 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.796 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.784 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-08-28 14:57:53.791 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-08-28 14:57:53.797 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.fL6D3U3h4ZtudijUUIgxKHOyJI-FBlSMrSY1PbMpD5E - null null
2025-08-28 14:57:53.802 +05:30 [INF] Request starting HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-08-28 14:57:53.819 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.820 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-08-28 14:57:53.822 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 14:57:53.822 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 14:57:53.823 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.826 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.818 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:57:53.830 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:57:53.831 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.831 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 14:57:53.832 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a - 200 null application/json; charset=utf-8 49129.058ms
2025-08-28 14:57:53.836 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 14:57:53.837 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 14:57:53.840 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-08-28 14:57:53.842 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 14:57:53.842 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 14:57:53.853 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 19.3323ms
2025-08-28 14:57:53.853 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.9707ms
2025-08-28 14:57:53.854 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"delivered","timestamp":"1756373236","recipient_id":"918974005240","conversation":{"id":"c1623507953c7629adc90a2ad53b71ea","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 14:57:53.859 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.853 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 17.9056ms
2025-08-28 14:57:53.861 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.854 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"read","timestamp":"1756373243","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 14:57:53.891 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:53.854 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"sent","timestamp":"1756373235","recipient_id":"918974005240","conversation":{"id":"c1623507953c7629adc90a2ad53b71ea","expiration_timestamp":"1756373235","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 14:57:53.930 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 14:57:53.865 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 14:57:53.956 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-08-28 14:57:53.968 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:57:53.968 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:57:53.974 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType92`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-28 14:57:53.987 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 133.8386ms
2025-08-28 14:57:53.990 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 148.0611ms
2025-08-28 14:57:53.991 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 140.5591ms
2025-08-28 14:57:53.995 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:54.002 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:54.003 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-08-28 14:57:54.005 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 202.6871ms
2025-08-28 14:57:54.006 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 215.2021ms
2025-08-28 14:57:54.007 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 217.2579ms
2025-08-28 14:57:54.039 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='ac66b931-3e64-43f5-8234-dc72a3a21968', @p1='0', @p2='Explore' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='735ccc84-335a-4444-ad89-6430e199d452', @p5='web' (Nullable = false), @p6='2025-08-28T09:27:53.9845183Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 14:57:53.947 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 14:57:53.930 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 14:57:53.982 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.AspNetCore.Server.Kestrel.Core.BadHttpRequestException: Unexpected end of request content.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.Http1ContentLengthMessageBody.ReadAsyncInternal(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpRequestStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Text.Json.Serialization.ReadBufferState.ReadFromStreamAsync(Stream utf8Json, CancellationToken cancellationToken, Boolean fillBuffer)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter.ReadRequestBodyAsync(InputFormatterContext context, Encoding encoding)
   at Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinder.BindModelAsync(ModelBindingContext bindingContext)
   at Microsoft.AspNetCore.Mvc.ModelBinding.ParameterBinder.BindModelAsync(ActionContext actionContext, IModelBinder modelBinder, IValueProvider valueProvider, ParameterDescriptor parameter, ModelMetadata metadata, Object value, Object container)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerBinderDelegateProvider.<>c__DisplayClass0_0.<<CreateBinderDelegate>g__Bind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 833
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-08-28 14:57:54.086 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 302.2178ms
2025-08-28 14:57:54.087 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 303.0139ms
2025-08-28 14:57:54.091 +05:30 [INF] Request finished HTTP/1.1 POST http://077903ad22d3.ngrok-free.app/api/webhooks/whatsapp - 499 null application/json; charset=utf-8 313.9856ms
2025-08-28 14:57:54.043 +05:30 [INF] CLICK WRITE-THROUGH cid="735ccc84-335a-4444-ad89-6430e199d452" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-28 14:57:54.074 +05:30 [ERR] Write-through insert failed. cid="735ccc84-335a-4444-ad89-6430e199d452"
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken(String token, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignTracking\Controllers\CampaignTrackingController.cs:line 78
2025-08-28 14:57:54.101 +05:30 [INF] CLICK ENQUEUE cid="735ccc84-335a-4444-ad89-6430e199d452" idx=0 enqueued=true
2025-08-28 14:57:54.107 +05:30 [INF] CLICK ENQUEUE cid="735ccc84-335a-4444-ad89-6430e199d452" idx=1 enqueued=true
2025-08-28 14:57:54.125 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 14:57:54.127 +05:30 [INF] Executing ContentResult with HTTP Response ContentType of text/html
2025-08-28 14:57:54.129 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 14:57:54.130 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 272.6393ms
2025-08-28 14:57:54.130 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 274.8751ms
2025-08-28 14:57:54.131 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:57:54.132 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:57:54.133 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.0d17UY-1mvvBtGCQ65KSQILXpg5Iyz5n35wPzYA0WAc - 200 null text/html 344.5435ms
2025-08-28 14:57:54.134 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.fL6D3U3h4ZtudijUUIgxKHOyJI-FBlSMrSY1PbMpD5E - 302 0 null 336.7945ms
2025-08-28 14:57:54.177 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"delivered","timestamp":"1756373236","recipient_id":"918974005240","conversation":{"id":"c1623507953c7629adc90a2ad53b71ea","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 14:57:54.179 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 14:57:54.180 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"delivered","timestamp":"1756373236","recipient_id":"918974005240","conversation":{"id":"c1623507953c7629adc90a2ad53b71ea","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 14:57:54.192 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 14:57:54.202 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__logId_Value_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 14:57:54.210 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='735ccc84-335a-4444-ad89-6430e199d452', @p0='2025-08-28T09:27:16.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 14:57:54.213 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA== → delivered
2025-08-28 14:57:54.216 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"read","timestamp":"1756373243","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 14:57:54.217 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 14:57:54.218 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"read","timestamp":"1756373243","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-08-28 14:57:54.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 14:57:54.224 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 14:57:54.228 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='735ccc84-335a-4444-ad89-6430e199d452', @p0='2025-08-28T09:27:23.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-08-28 14:57:54.231 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA== → read
2025-08-28 14:57:54.236 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"sent","timestamp":"1756373235","recipient_id":"918974005240","conversation":{"id":"c1623507953c7629adc90a2ad53b71ea","expiration_timestamp":"1756373235","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 14:57:54.238 +05:30 [INF] 📦 Routing to Status Processor
2025-08-28 14:57:54.238 +05:30 [WRN] 🔍 Incoming timestamp raw value: {"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA==","status":"sent","timestamp":"1756373235","recipient_id":"918974005240","conversation":{"id":"c1623507953c7629adc90a2ad53b71ea","expiration_timestamp":"1756373235","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-08-28 14:57:54.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-08-28 14:57:54.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__logId_Value_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__logId_Value_0
LIMIT 1
2025-08-28 14:57:54.249 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='735ccc84-335a-4444-ad89-6430e199d452', @p0='Sent'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-08-28 14:57:54.250 +05:30 [INF] ✅ CampaignSendLog updated for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDdBRjc4Qzk2NUFFOThGN0E5AA== → sent
2025-08-28 14:58:02.018 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.0d17UY-1mvvBtGCQ65KSQILXpg5Iyz5n35wPzYA0WAc - null null
2025-08-28 14:58:02.023 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:58:02.024 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 14:58:02.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='7922a9fe-2a1f-41a2-84cc-255fc586591a', @p1='1', @p2='Call Us' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='735ccc84-335a-4444-ad89-6430e199d452', @p5='call' (Nullable = false), @p6='2025-08-28T09:28:02.0271127Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='tel:+917082156227' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 14:58:02.033 +05:30 [INF] CLICK WRITE-THROUGH cid="735ccc84-335a-4444-ad89-6430e199d452" idx=1 type=call dest=tel:+917082156227
2025-08-28 14:58:02.034 +05:30 [INF] CLICK ENQUEUE cid="735ccc84-335a-4444-ad89-6430e199d452" idx=1 enqueued=true
2025-08-28 14:58:02.044 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 14:58:02.046 +05:30 [INF] Executing ContentResult with HTTP Response ContentType of text/html
2025-08-28 14:58:02.047 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 20.6836ms
2025-08-28 14:58:02.048 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:58:02.049 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.0d17UY-1mvvBtGCQ65KSQILXpg5Iyz5n35wPzYA0WAc - 200 null text/html 31.3773ms
2025-08-28 14:58:04.060 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_vs/browserLink - null null
2025-08-28 14:58:04.066 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 14:58:04.069 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.1104ms
2025-08-28 14:58:04.076 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.0731ms
2025-08-28 14:58:47.101 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-28 14:58:47.104 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:47.105 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 204 null null 4.1069ms
2025-08-28 14:58:47.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-28 14:58:47.122 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:47.124 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 14:58:47.130 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 14:58:47.167 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-08-28 14:58:47.176 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-28 14:58:47.180 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-28 14:58:47.183 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 51.2872ms
2025-08-28 14:58:47.185 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 14:58:47.186 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 200 null application/json; charset=utf-8 70.2243ms
2025-08-28 14:58:47.615 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-28 14:58:47.619 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:47.621 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 204 null null 5.8348ms
2025-08-28 14:58:47.653 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-28 14:58:47.656 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:47.658 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 14:58:47.664 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 14:58:47.687 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-28 14:58:47.713 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-28 14:58:47.718 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:58:47.726 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 59.7827ms
2025-08-28 14:58:47.728 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 14:58:47.729 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 76.2214ms
2025-08-28 14:58:53.983 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:58:53.985 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:53.986 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.387ms
2025-08-28 14:58:53.991 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-08-28 14:58:53.994 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:53.996 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:58:53.997 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-08-28 14:58:54.012 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='c13be597-6ae2-42bb-9d43-925815f24ff8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-08-28 14:58:54.015 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:58:54.017 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 18.3242ms
2025-08-28 14:58:54.019 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-08-28 14:58:54.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 29.5281ms
2025-08-28 14:58:57.334 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-28 14:58:57.338 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:57.339 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 204 null null 4.8359ms
2025-08-28 14:58:57.345 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - null null
2025-08-28 14:58:57.348 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:57.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 14:58:57.352 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 14:58:57.361 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-08-28 14:58:57.366 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-08-28 14:58:57.368 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 14.0157ms
2025-08-28 14:58:57.370 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-08-28 14:58:57.371 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a/summary - 200 null application/json; charset=utf-8 26.1804ms
2025-08-28 14:58:57.819 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-28 14:58:57.821 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:57.822 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 204 null null 3.4902ms
2025-08-28 14:58:57.825 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - null null
2025-08-28 14:58:57.827 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:58:57.828 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 14:58:57.829 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-08-28 14:58:57.834 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-08-28 14:58:57.839 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='80efee8d-0421-467a-86ac-1d5b2259bf1a', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-08-28 14:58:57.841 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:58:57.842 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 11.0067ms
2025-08-28 14:58:57.843 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-08-28 14:58:57.844 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/80efee8d-0421-467a-86ac-1d5b2259bf1a?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 19.2469ms
2025-08-28 14:59:03.052 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:03.054 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:03.055 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 204 null null 3.5285ms
2025-08-28 14:59:03.058 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:03.061 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:03.062 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:03.066 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 14:59:03.084 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 14:59:03.097 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 14:59:03.103 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:59:03.106 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 38.7509ms
2025-08-28 14:59:03.107 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:03.109 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 200 null application/json; charset=utf-8 50.7886ms
2025-08-28 14:59:16.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:16.307 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:16.309 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 204 null null 5.1732ms
2025-08-28 14:59:16.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:16.319 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:16.320 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:16.322 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 14:59:16.330 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 14:59:16.340 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 14:59:16.344 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:59:16.346 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 21.3398ms
2025-08-28 14:59:16.348 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:16.350 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 200 null application/json; charset=utf-8 36.1936ms
2025-08-28 14:59:23.266 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.fL6D3U3h4ZtudijUUIgxKHOyJI-FBlSMrSY1PbMpD5E - null null
2025-08-28 14:59:23.277 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:59:23.278 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 14:59:23.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='36b7d8f7-b639-4c5b-9553-b2b05df5ca06', @p1='0', @p2='Explore' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='735ccc84-335a-4444-ad89-6430e199d452', @p5='web' (Nullable = false), @p6='2025-08-28T09:29:23.2808497Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 14:59:23.286 +05:30 [INF] CLICK WRITE-THROUGH cid="735ccc84-335a-4444-ad89-6430e199d452" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-28 14:59:23.287 +05:30 [INF] CLICK ENQUEUE cid="735ccc84-335a-4444-ad89-6430e199d452" idx=0 enqueued=true
2025-08-28 14:59:23.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 14:59:23.292 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 14:59:23.293 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 12.6524ms
2025-08-28 14:59:23.293 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:59:23.294 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.fL6D3U3h4ZtudijUUIgxKHOyJI-FBlSMrSY1PbMpD5E - 302 0 null 28.3259ms
2025-08-28 14:59:27.385 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:27.388 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:27.388 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 204 null null 3.6106ms
2025-08-28 14:59:27.391 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:27.394 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:27.395 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:27.396 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 14:59:27.400 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 14:59:27.405 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 14:59:27.407 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:59:27.409 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 11.3874ms
2025-08-28 14:59:27.410 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:27.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 200 null application/json; charset=utf-8 19.4767ms
2025-08-28 14:59:38.251 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.fL6D3U3h4ZtudijUUIgxKHOyJI-FBlSMrSY1PbMpD5E - null null
2025-08-28 14:59:38.255 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:59:38.256 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 14:59:38.269 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='08d3a693-0b21-4308-9f56-5dd9d89c75a5', @p1='0', @p2='Explore' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='735ccc84-335a-4444-ad89-6430e199d452', @p5='web' (Nullable = false), @p6='2025-08-28T09:29:38.2583025Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='https://www.mindsmiratus.com/website-designing-services' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Mobile Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 14:59:38.271 +05:30 [INF] CLICK WRITE-THROUGH cid="735ccc84-335a-4444-ad89-6430e199d452" idx=0 type=web dest=https://www.mindsmiratus.com/website-designing-services
2025-08-28 14:59:38.273 +05:30 [INF] CLICK ENQUEUE cid="735ccc84-335a-4444-ad89-6430e199d452" idx=0 enqueued=true
2025-08-28 14:59:38.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 14:59:38.277 +05:30 [INF] Executing RedirectResult, redirecting to https://www.mindsmiratus.com/website-designing-services.
2025-08-28 14:59:38.278 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 20.4903ms
2025-08-28 14:59:38.279 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 14:59:38.280 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MCwiYnQiOiJFeHBsb3JlIiwidG8iOiJodHRwczovL3d3dy5taW5kc21pcmF0dXMuY29tL3dlYnNpdGUtZGVzaWduaW5nLXNlcnZpY2VzIiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.fL6D3U3h4ZtudijUUIgxKHOyJI-FBlSMrSY1PbMpD5E - 302 0 null 29.2079ms
2025-08-28 14:59:40.603 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:40.606 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:40.607 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 204 null null 4.0885ms
2025-08-28 14:59:40.610 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - null null
2025-08-28 14:59:40.612 +05:30 [INF] CORS policy execution successful.
2025-08-28 14:59:40.614 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:40.614 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-08-28 14:59:40.618 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-08-28 14:59:40.623 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__initialCampaignSendLogId_0
ORDER BY c."ClickedAt"
2025-08-28 14:59:40.625 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.Tracking.DTOs.JourneyEventDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-28 14:59:40.627 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 11.0897ms
2025-08-28 14:59:40.628 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-08-28 14:59:40.629 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/735ccc84-335a-4444-ad89-6430e199d452 - 200 null application/json; charset=utf-8 19.2881ms
2025-08-28 15:00:23.542 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.0d17UY-1mvvBtGCQ65KSQILXpg5Iyz5n35wPzYA0WAc - null null
2025-08-28 15:00:23.553 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 15:00:23.563 +05:30 [INF] Route matched with {action = "RedirectByToken", controller = "CampaignTracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RedirectByToken(System.String, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController (xbytechat.api).
2025-08-28 15:00:23.592 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='d5c988ff-2113-41ef-ae7b-58d74cc05b0d', @p1='1', @p2='Call Us' (Nullable = false), @p3='00000000-0000-0000-0000-000000000000', @p4='735ccc84-335a-4444-ad89-6430e199d452', @p5='call' (Nullable = false), @p6='2025-08-28T09:30:23.5667804Z' (DbType = DateTime), @p7=NULL (DbType = Guid), @p8='tel:+917082156227' (Nullable = false), @p9='::1' (Nullable = false), @p10='Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignClickLogs" ("Id", "ButtonIndex", "ButtonTitle", "CampaignId", "CampaignSendLogId", "ClickType", "ClickedAt", "ContactId", "Destination", "Ip", "UserAgent")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-28 15:00:23.600 +05:30 [INF] CLICK WRITE-THROUGH cid="735ccc84-335a-4444-ad89-6430e199d452" idx=1 type=call dest=tel:+917082156227
2025-08-28 15:00:23.603 +05:30 [INF] CLICK ENQUEUE cid="735ccc84-335a-4444-ad89-6430e199d452" idx=1 enqueued=true
2025-08-28 15:00:23.607 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='735ccc84-335a-4444-ad89-6430e199d452'], CommandType='"Text"', CommandTimeout='30']
update "CampaignSendLogs"
                        set "IsClicked"=TRUE, "ClickedAt"=NOW() at time zone 'utc'
                      where "Id"=@p0 and "IsClicked"=FALSE;
2025-08-28 15:00:23.610 +05:30 [INF] Executing ContentResult with HTTP Response ContentType of text/html
2025-08-28 15:00:23.612 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api) in 46.2756ms
2025-08-28 15:00:23.614 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignTrackingController.RedirectByToken (xbytechat.api)'
2025-08-28 15:00:23.617 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/r/eyJjaWQiOiI3MzVjY2M4NC0zMzVhLTQ0NDQtYWQ4OS02NDMwZTE5OWQ0NTIiLCJiaSI6MSwiYnQiOiJDYWxsIFVzIiwidG8iOiJ0ZWw6XHUwMDJCOTE3MDgyMTU2MjI3IiwiaWF0IjoxNzU2MzczMjI4LCJleHAiOjE3NTg5NjUyMjh9.0d17UY-1mvvBtGCQ65KSQILXpg5Iyz5n35wPzYA0WAc - 200 null text/html 74.9755ms
2025-08-28 15:00:24.294 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null
2025-08-28 15:00:24.296 +05:30 [INF] Request starting HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_vs/browserLink - null null
2025-08-28 15:00:24.297 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 3.6627ms
2025-08-28 15:00:24.306 +05:30 [INF] Request finished HTTP/1.1 GET http://077903ad22d3.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 10.7431ms
